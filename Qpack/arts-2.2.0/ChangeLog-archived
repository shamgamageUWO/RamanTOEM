2011-08-29  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-17-26

	* src/m_sensor.cc (sensor_responsePolarisation): Fixed typo in
	error message.

	* src/workspace.cc: Moved self-reference in description of
	sensor_pol,

	* src/methods.cc: to the description of sensor_responsePolarisation.

2011-08-26  Gerrit Holl  <gerrit.holl@ltu.se>

	* arts-1-17-25

	* src/m_cloudbox.cc:

	(ScatteringParticlesSelect): Be more verbose to out3
	(pnd_fieldSetup): Bugfix if monodisperse (cannot scale by binwidth).
	However, does this work at all?

2011-08-26  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-17-24

	* doc/uguide/sensor.tex: Wrote a first simple version of
	this section. Tried to cover the general aspects.

	* doc/uguide/montecarlo.tex: Added comment refering to other
	version of VRTE (in Sec 5.4).

	* doc/uguide/rte_theory.tex: Changed last part of Sec 5.4, to
	follow the nomenclature used in the article.

	* doc/uguide/CMakeLists.txt: Fixed typo for rte_theory.tex.

2011-08-26  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-17-23

	* src/methods.cc:

	Update verbosity documentation. Remove TestVerbosity.

	Add support for appending SingleScatteringData and ScatteringMetadata
	elements to the corresponding arrays.

	* src/m_append.h:

	Add template function for appending single elements to arrays.

	* src/m_general.cc: Remove TestVerbosity.

2011-08-26  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-17-22

	* doc/uguide/wfuns.tex: Completed.

2011-08-25  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-17-21

	* src/methods.cc (ReadXML): Set default value of filename to "".

2011-08-25  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-17-20

	* doc/uguide/wfuns.tex: Write section on pointing WFs.

	* tests/ClearSky/TestClearSky.arts: iybinterp -> interp

	* tests/Wfuns/TestWfuns.arts: Added more detailed test of pointing WF.

	* src/m_jacobian.cc (jacobianCalcAbsSpeciesPerturbations): Added
	Perturbations to the name (for clarity).
	(jacobianCalcTemperaturePerturbations): As above.

	(jacobianCalcFreqShiftAndStretchInterp): Renamed (following
	pattern for PointingZa).

	(jacobianCalcPointingZaInterp): Created.

2011-08-24  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-17-19

	* If you are using pointing WFs, change "iybrecalc" to "recalc"
	(iyb was reduntant information)

	* tests/ClearSky/TestClearSky.arts: Adopted to change below.

	* src/m_jacobian.cc (jacobianAddPointingZa): Added option
	"interp". And renamed changed option "iybrecalc" to "recalc".

	(jacobianCalcPointingZaRecalc): Renamed.

	* src/constants.cc: Added POINTING_CALCMODE_B.

	* tests/Wfuns/TestWfuns.arts: Modified and extended (now also
	testing T-wfuns).

	* tests/Wfuns/common_wfuns_defs.arts: Removed.

	* src/m_rte.cc (iyEmissionStandardClearsky): Code slightly
	restructured (frequency loop broken up), to hopefully make things
	clearer and avoid repeating operations.
	(iyBeerLambertStandardClearsky): Changes as above.

	* doc/uguide/wfuns.tex: Finished temperature section.

2011-08-21  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-17-18

	* doc/uguide/wfuns.tex: More work on T wfuns.

	* doc/uguide/atmosphere.tex: Made a short section around
	hydrostatic equilibrium.

2011-08-19  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-17-17

	* doc/uguide/wfuns.tex: Some work on T-wfs section.

2011-08-18  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-17-16

	* doc/uguide/wfuns.tex: Some rearrangements. Absorbing species
	finished (and code checked).

2011-08-18  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-17-15

	* Analytical weighting functions are now treated correctly with
	respect to jacobian_agenda.

	* src/m_jacobian.cc (jacobianCalcTemperatureAnalytical): Created
	(just a dummy function).
	(jacobianAddTemperature): The function above is now added to
	jacobian_agenda if analytical calculations selected.

	* src/m_rte.cc (yCalc): Check that jacobian_agenda.nelem()>0
	removed. This as the agenda will contain methods even if just
	analytical calculations (some dummy functions).

2011-08-18  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-17-14

	* tests/testall.py, tests/CMakeLists.txt: Add Wfuns testcase.

2011-08-17  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-17-13

	* doc/uguide/wfuns.tex: Some new text.

	* src/m_basic_types.cc (MatrixCompare): Created.

	* tests/Wfuns: Started on this test folder. For somewhat more
	stringent tests of jacobian claculations.

2011-08-17  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-17-12

	* New implementation to control verbosity (out0-out3).

	The verbosity is now no longer controlled by a global variables.

	The WSV Verbosity holds that information and is automatically passed
	to every workspace method.

	If you want to use out0-out3 your WSM has to create the appropriate
	streams as a local variable. There are four convenience macros defined
	to ease that process. You can just call CREATE_OUT0, CREATE_OUT1,
	CREATE_OUT2 and/or CREATE_OUT3 at the beginning of your function and
	use out0-out3 as usual.

	If you have non-workspace methods that need access to out0-out3, you
	have to pass the Verbosity WSV as a function parameter and use the
	CREATE_OUTX macros in the subfunction to create the local streams.

	All existing functions have been adapted to use the new Verbosity
	implementation.

	In the controlfile, you can use verbositySet, verbositySetAgenda,
	verbositySetScreen and/or verbositySetFile to change the verbosity
	on-the-fly. This gives the possibility to activate, e.g. level 3
	debugging output for only one function or a small block of functions
	even inside an agenda.

	* src/messages.{cc,h}:

	Remove old Messages implementation. Replaced by new Verbosity class.

	Remove global threadprivate variable in_main_agenda. Also handled by
	Verbosity object.

	* src/agenda_class.cc (Agenda::execute):

	Utilize the new verbosity.

	Reinitialize the OUT1 and OUT3 streams when iterating over the methods
	of this agenda.

	* src/m_agenda.cc, src/methods.cc:

	Add proper Arts2 WSM. Leave old Arts WSM there with a note that it's
	obsolete.

	* src/make_auto_md_h.cc, src/make_auto_md_cc.cc:

	Pass verbosity argument to all WSMs.

	* src/parser.{cc,h}: Add verbosity member to parser class.
	
	* src/m_optproperties.cc, src/xml_io_instantiation.h,
	src/m_conversion.h, src/cloudbox.h, src/optproperties.h,
	src/continua.h, src/m_atmosphere.cc, src/m_copy.h, src/m_extract.h,
	src/gas_abs_lookup.h, src/m_agenda.cc, src/docserver.cc,
	src/abs_species_tags.cc, src/xml_io_array_types.cc, src/m_delete.h,
	src/geomag_calc.cc, src/m_abs.cc, src/m_basic_types.cc, src/xml_io.cc,
	src/m_general.cc, src/rte.cc, src/disort.h, src/nc_io_types.h,
	src/m_montecarlo.cc, src/m_disort.cc, src/absorption.cc,
	src/token.cc, src/m_sensor.cc, src/nc_io.h, src/rte.h, src/doit.h,
	src/montecarlo.cc, src/methods.cc, src/disort.cc, src/montecarlo.h,
	src/methods.h, src/agenda_class.h, src/sensor.cc, src/ppath.h,
	src/m_xml.h, src/xml_io_private.h, src/m_basic_types.h,
	src/m_cloudbox.cc, src/m_general.h, src/agenda_class.cc,
	src/m_refraction.cc, src/m_abs_lookup.cc, src/ppath.cc,
	src/m_nc.h, src/xml_io_compound_types.cc, src/optproperties.cc,
	src/cloudbox.cc, src/m_jacobian.cc, src/main.cc, src/rng.h,
	src/nc_io_instantiation.h, src/m_physics.cc, src/m_ignore.h,
	src/m_rte.cc, src/arts.cc, src/sensor.h, src/xml_io_types.h,
	src/continua.cc, src/absorption.h, src/gas_abs_lookup.cc, src/xml_io.h,
	src/m_select.h, src/m_batch.cc, src/agendas.cc, src/m_surface.cc,
	src/m_doit.cc, src/xml_io_basic_types.cc, src/m_append.h,
	src/nc_io.cc, src/workspace.cc, src/doit.cc, src/m_fos.cc, src/rng.cc,
	src/m_ppath.cc:

	Add verbosity argument to all WSMs and functions that use outX. Also
	create the output streams by calling the appropriate CREATE_OUT0-3
	macro depending on which streams the functions need.

	* src/test_xml.cc, src/test_binaryio.cc, src/test_sparse.cc:

	Add verbosity argument to xml_write_to_file and xml_read_from_file.

	* CMakeLists.txt: Remove threadprivate check.

	* cmake/modules/CheckOpenMPThreadprivate.cmake: Removed.

2011-08-02  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-17-11

	* src/agenda_class.cc (Agenda::execute):

	Don't use ostringstreams here. They have a significant impact on
	performance:

	arts -r010 TestDOITBatch.arts:

	ubuntu5: with ostringstream 39s, without 32s. 1.22x faster
	MacBook Pro: with ostringstream 75s, without 43s. 1.73x faster

	make -j4 check:

	ubuntu5: with ostringstream 44s, without 41s. 1.07x faster
	MacBook Pro: with ostringstream 104s, without 61s. 1.71x faster

	ubuntu5: Xeon CPU, 8 physical cores
	MacBook Pro: i7 CPU, 4 physical cores, 4 logical cores

	The problem lies in the C library. ostringstream references a locale
	object that is protected by a global mutex. The more threads are used,
	the more they block each other.

	Even running arts with -r000 to skip all output, the problem persists
	as the ostringstreams are created anyway.

2011-08-02  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-17-10

	* src/docserver.cc, src/xml_io.cc, src/montecarlo.cc,
	src/methods_aux.cc, src/m_rte.cc, src/nc_io.cc:

	Remove unused variables.

	* src/m_cloudbox.cc:

	Put lat1,2 and lon1,2 into DEBUG() to avoid unused variable warnings
	in release mode.

	* src/arts_getopt.c: Make sure to never deference null pointer.

	* src/binio.cc: Add f to float number.

2011-07-22  Gerrit Holl  <gerrit.holl@ltu.se>

	* arts-1-17-9

	* includes/avhrr/{NOAA19_AVHRR.f_grid_fast.xml,
					  avhrr_sensor_fast.arts,
					  avhrr_fast.arts,
					  NOAA19_AVHRR.W_fast.xml}:
	  - Added fast setup for AVHRR. So far only NOAA-19, channel 5.
	
	* src/m_sensor.cc:
	  
	  (f_gridFromSensorHIRS): Bugfix
	  - Check that spacing is positive (avoid assertion)

	  (WMRFSelectChannels): Bugfix
	  - Verify some frequencies are left

	  (sensor_responseWMRF):
	  - Check non-empty sensor_response
	
	* src/methods.cc: Cosmetics

	* src/matpackII.cc(transpose):
	  - Was segfaulting on empty matrix. Now returns new empty matrix.


2011-07-21  Gerrit Holl  <gerrit.holl@ltu.se>

	* arts-1-17-8

	* tests/AVHRR/TestAVHRR.ybatch.xml: Updated
	  - Updated after cleaning up yesterdays code (millikelvins
	  difference).

2011-07-20  Gerrit Holl  <gerrit.holl@ltu.se>

	* arts-1-17-7

	* includes/avhrr/*.backend_channel_response.xml:
	  - Cleaned this up; removed all frequencies before and after
	    response values start to be negative, all those values are very
		small and hovering around zero. This reduces the number of
		frequencies by around 2/3rd.
	
	* includes/avhrr/get_avhrr_srf.py:
	  - Code to clean up the frequencies; some more HTML fixes as well.

2011-07-18  Gerrit Holl  <gerrit.holl@ltu.se>

	* arts-1-17-6

	* includes/hirs/README: Added
	  - Document how to use those "split" include files.

2011-07-16  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-17-5

	* doc/uguide/wfuns.tex: Some improvements of the introductory
	sections.  

2011-07-15  Gerrit Holl  <gerrit.holl@ltu.se>

	* arts-1-17-4

	* src/main.cc(main): Output starting time to out2.

2011-07-15  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-17-3

	* FOS and BLcloudbox are now using common code as far as possible.
	This revision also provide the basis to extend the methods to also
	handle the (jacobians later left for future work).
	This should also close the revision of the iyEmission, iyBL, iyMC
	and iyFOS methods on interface level.
	
	* src/m_fos.cc (iyFOS): Restructured, in the same way as
	iyBeerLambertStandardCloudbox.
	
	* src/workspace.cc: The scope of fos_use_mean_scat_data extended
	and renamed to use_mean_scat_data (now a general variable used of
	both FOS and BL).

	* src/m_rte.cc (iyBeerLambertStandardCloudbox): Restructured. Now
	using get_ppath_cloudrtvars. iy_transmission now handled, and the
	function is then prepared to also handle jacobians.

	* src/rte.cc (get_ppath_pnd): New function, to complement
	get_ppath_atmvars inside the cloudbox.
	(ext2trans): Created this function (based on trans_step_std). This
	for improved modularity.
	(trans_step_std): Now using ext2trans.
	(get_ppath_cloudrtvars): New function covering core parts for
	iyBeerLambertStandardCloudbox and iyFOS.
	(mirror_los): New function. Determined the backward direction.

	* src/special_interp.cc (interp_cloudfield_gp2itw): Now
	distinction between in and out gridpos. This to make it clear that
	the gridpos-es are changed by the function.

2011-07-13  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-17-2
	
	* Needed control file changes: Any setting of iy_aux_do shall be
	removed. DoNothing shall be replaced with Ignore or Touch.

	* Status: Beer-Lambert with cloudbox and FOS not yet revised.
	Other RT methods revised. DOIT can now provide an error, but so far
	just set to a hard-coded value.
	
	* src/m_ignore.h: Removed DoNothing. Has been flagged as
	DEPRECATED for years!

	* src/methods.cc: Updated text for affected methods. 

	* tests/OdinSMR/TestOdinSMR.arts: Added calls (not active) showing
	how to instead do transmission calculations.

	* src/m_rte.cc: Changes related to iy_aux and iy_error throughout
	the file.

	* tests/DOIT/TestDOIT.arts: Added saving of y_aux and y_error, to
	remind/show about that these WSV now are filled when using DOIT
	(but yet no proper error estimate (but attenuation between
	cloudbox and sensor is considered)).

	* TODO: Restarted this file (just old stuff). Wrote down a few
	lines about things to fix/consider for DOIT.

	* src/m_doit.cc (iyInterpCloudboxField): Added handling of iy_aux
	and iy_error. However, the later only with a hard-coded and fixed
	error. 
	(iyInterpPolyCloudboxField): As above.

	* src/physics_funcs.cc (rayjean): New function.

	* src/m_jacobian.cc: Adopted call of iyb_calc.

	* src/workspace.cc: Changed the content of iy_aux and y_aux. These
	variables hold now just one quantity (with transmission as main
	case). Removed iy_aux_do (just made things complicated, with little
	efficiency gain).

2011-07-13  Gerrit Holl  <gerrit.holl@ltu.se>

	* arts-1-17-1

	* Split HIRS includes and added AVHRR setup

	* includes/hirs/hirs_fast.arts, includes/hirs/hirs_reference.arts:
	  - Split those in various subfiles that can (if wanted) be included
	    separately. The overall include-file remains for ease of use and
		backward compatibility. Now it is possible to use HIRS with your
		own lookup table. For example, rather than including
		hirs/hirs_reference.arts, one would do:

		INCLUDE "hirs/hirs_general.arts"
		INCLUDE "hirs/hirs_spectroscopy.arts"
		INCLUDE "hirs/hirs_sensor_common.arts"
		INCLUDE "hirs/hirs_sensor_reference.arts"

	* includes/hirs/hirs_general.arts,
	  includes/hirs/hirs_spectroscopy.arts,
	  includes/hirs/hirs_sensor_common.arts,
	  includes/hirs/hirs_hitran.arts: Added
	  - Those are the same for the reference and the fast setup. They are
	    actually also largely the same for AVHRR (see below).

	* includes/hirs/hirs_sensor_fast.arts,
	  includes/hirs/hirs_sensor_reference.arts: Added
	  - Here is the core functionality that differs between the fast and
	    the reference setup. This is the only part one probably always
		wants to include when using HIRS.

	* includes/avhrr/get_avhrr_srf.py: Added
	  - Script used to extract SRF from NOAA KLM User's Guide.

	* includes/avhrr/NOAA15_AVHRR.f_backend.xml,
	  includes/avhrr/NOAA15_AVHRR.backend_channel_response.xml,
	  includes/avhrr/NOAA16_AVHRR.f_backend.xml,
	  includes/avhrr/NOAA16_AVHRR.backend_channel_response.xml,
	  includes/avhrr/NOAA17_AVHRR.f_backend.xml,
	  includes/avhrr/NOAA17_AVHRR.backend_channel_response.xml,
	  includes/avhrr/NOAA18_AVHRR.f_backend.xml,
	  includes/avhrr/NOAA18_AVHRR.backend_channel_response.xml,
	  includes/avhrr/NOAA19_AVHRR.f_backend.xml,
	  includes/avhrr/NOAA19_AVHRR.backend_channel_response.xml,
	  includes/avhrr/METOPA_AVHRR.f_backend.xml,
	  includes/avhrr/METOPA_AVHRR.backend_channel_response.xml: Added
	  - Added SRF for AVHRR on KLM from NOAA KLM User's Guide.

	* includes/avhrr/get_sensor_los.py: Added
	  - Small script to calculate sensor LOS (1D).

	* includes/avhrr/avhrr.sensor_los.xml: Added
	  - Sensor line of sights, for AVHRR LAC/FRAC.

	* includes/avhrr/avhrr_reference.arts,
	  includes/avhrr/avhrr_sensor_common.arts,
	  includes/avhrr/avhrr_sensor_reference.arts,
	  includes/avhrr/README: Added
	  - Added setup for AVHRR. So far only the reference case.

	* tests/AVHRR/TestAVHRR.arts, tests/AVHRR/TestAVHRR.ybatch.xml: Added
	  - Added test case, based on TestHIRS.arts. Warning! slow:
		  This run took 5832.06s (37804.05s CPU time)
		For the Garand cases.

2011-07-12  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-17-0

	* Yet a new sub-version. Forgot that I planned to clean-up (and
	extend) the handling of iy_aux and iy_error, needing changes of
	iy_clearsky_agenda and iy_cloudbox_agenda. Hopefully few control
	file changes needed. So far, just that Ignore(ppath) shall be removed
	from definition of iy_cloudbox_agenda. There should be no effects
	on iy and y.
	(Work in  progress. Compiles with warnings. Checks OK.)

	* tests/DOIT/TestDOIT.arts: Removed call of Ignore(ppath) in
	definition of iy_cloudbox_agenda.

	* includes/agendasDOIT.arts: As above.
	
	* src/m_doit.cc (iyInterpPolyCloudboxField): As below.

	* src/m_doit.cc (iyInterpCloudboxField): Adopted with respect to
	in/out variables, but no calculations added yet.

	* src/m_rte.cc (iyEmissionStandardClearsky): Adopted to changes of
	iy_clearsky_agenda.
	(iyBeerLambertStandardClearsky): Adopted to changes of
	iy_clearsky_agenda.
	(iyMC): Adopted to changes of iy_clearsky_agenda.

	* src/agendas.cc (iy_clearsky_agenda): All of iy_error,
	iy_error_type, iy_aux and diy_dx are npw both in and out vars.
	Improved the sorting of in-variables.
	(iy_cloudbox_agenda): Added iy_error, iy_error_type, iy_aux and
	diy_dx is in/out-variables. Removed ppath as in-var.
	
	* src/make_array.h: Added definition of array with length 36 (to
	handle iyEmissionStandardClearsky). 

	* src/m_rte.cc (add_extrap): Renamed the "fix" fix_extrap to
	add_extrap (but kept so far as a local help function). 

2011-07-11  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-16-10

	* doc/uguide/Figs/wfuns: New folder. Added some figures from AUG-1. 

	* doc/uguide/references.bib: Added Read et al 2006.

	* doc/uguide/wfuns.tex: Continued writing.

	* doc/uguide/atmosphere.tex: Added two senstences about basis
	functions.

2011-07-11  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-16-9

	* tests: Removed 'Ignore(rte_doppler)' in 6 files. Now not needed. 

2011-07-08  Stefan Buehler  <sbuehler(at)ltu.se>

	* arts-1-16-8

	* src/m_abs.cc (abs_scalar_gasCalcLBL): Implemented Doppler shift.
	Is now handled internally, instead of on the agenda level.

	* src/m_abs_lookup.cc (abs_scalar_gasExtractFromLookup):
	Implemented Doppler shift. Also, removed input variable f_grid,
	since it was only used for an error check. While the check itself
	makes sense, I believe this method is not the right place for
	it. Also, performance reasons anyway prevent a thorough check
	here.
	(f_gridFromGasAbsLookup): Adapted to modified GetFgrid function.
	(p_gridFromGasAbsLookup): Adapted to modified GetPgrid function.
	(calc_lookup_error): Adapted to new abs_scalar_gasCalcLBL.

	* src/methods.cc (abs_scalar_gasCalcLBL): Added input variable
	rte_doppler, updated documentation.
	(abs_scalar_gasExtractFromLookup): Added input variables
	rte_doppler and extpolfac, updated documentation.

	* src/gas_abs_lookup.h (GetFgrid, GetPgrid): Reimplemented, now
	returns const reference to internal data member, instead of making
	a copy.

	* src/gas_abs_lookup.cc (GetFgrid, GetPgrid): See above.

	* includes/general.arts, tests/DOITBatch/TestDOITBatch.arts,
	tests/MonteCarlo/TestMonteCarloGeneral.arts,
	tests/DISORT/TestDISORT.arts, tests/HIRS/TestHIRS.arts,
	tests/Abs/TestAbsDoppler.arts, tests/AMSU/TestAMSU_generic.arts,
	tests/OdinSMR/TestOdinSMR.arts, tests/OdinSMR/TestOdinSMR_1D.arts:
	Updated abs_scalar_gas_agenda.

	* doc/uguide/absorption.tex (Gas absorption in radiative transfer
	simulations): Updated stuff related to Doppler.

2011-07-08  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-16-7

	* doc/uguide/wfuns.tex: Continued writing. Far from complete.

2011-07-08  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-16-6

	* doc/uguide/references.bib: Added Eriksson 2000, and final data
	for ARTS-2 article.

	* doc/uguide/CMakeLists.txt: Included wfuns.tex. Removed some
	arts-1 section files that probably never will be activated.

	* doc/uguide/arts_user.tex: Included wfuns.tex.

	* doc/uguide/wfuns.tex: Started.

	* src/workspace.cc: Small change for y_unit.

	* doc/uguide/rte.tex: Spell checking. Extended. Added information
	around emission_agenda, iy_space_Agenda and units.

	* src/methods.cc: Clarified the unit for all methods returning
	"Planck data" (MatrixCBR, emissionPlanck and MatrixPlanck).

2011-07-07  Stefan Buehler  <sbuehler(at)ltu.se>

	* arts-1-16-5

	* doc/uguide/arts_theory.tex: Added Thomas Kuhn and Nikolay Koulev
	as contributing authors, for their contribution to the absorption
	part.

2011-07-07  Stefan Buehler  <sbuehler(at)ltu.se>

	* arts-1-16-4

	* doc/uguide/absorption.tex: Implemented Patrick comments. (Ok,
	some of them, at least.)

	* doc/uguide/absorption_theory.tex: First complete draft of
	this. Finished for now, from my point of view.

	* doc/uguide/Figs/abs_theory/: Added this directory, which
	contains three figures used by the hydrometeor absorption chapter
	(which is part of the file absorption_theory).

2011-07-07  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-16-3

	* Winds now implemented for all "clear-sky RT" WSM. Tests made
	that Doppler shifts have the correct sign for 1-3D, and different
	combinations of LOS and wind directions.
	Wind jacobians will come later!

	* src/m_rte.cc (iyBeerLambertStandardClearsky): Now considering
	winds.
	(iyEmissionStandardClearskyBasic): Now considering winds.

	* src/rte.cc (get_ptvmr_for_ppath): Removed. Replaced by
	get_ppath_atmvars.
	(get_step_vars_for_standardRT): Removed. Replaced by
	get_ppath_rtvars.

	* tests/GroundBased/TestWinds.arts: Now a complete control file
	for testing winds.

2011-07-07  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-16-2

	* Winds now fully implemented in iyEmissionStandardClearsky, but
	no testing at all. (Checks work, so all should be OK for zero winds.)

	* tests/GroundBased/TestWinds.arts: Started.

	* src/rte.cc (get_ppath_atmvars): Modified version of existing
	function, but also handling wind fields.
	(get_ppath_rtvars): Modified version of existing
	function, but also calculating Doppler wind shifts.

	* src/m_rte.cc (iyEmissionStandardClearsky): Now using.
	get_ppath_atmvars and get_ppath_atmvars. Wind fields added as input.

	* src/m_jacobian.cc (jacobianCalcTemperature): Added z_surface as
	input, to call new version of z_fieldFromHSE.

	* src/m_atmosphere.cc (z_fieldFromHSE): It is now checked that no
	 gap between *z_surface* and "*z_field* has been genereted.

	* src/montecarlo.cc (opt_propCalc2): Commented out this function.
	Not called by any function. A copy of opt_propCalc, except of some
	missing asserts!

	* doc/uguide/winds.tex: Fixed some spelling mistakes. Added
	definition of frequency to select (v0).

	* src/agendas.cc: Removed comment on "transmission calculations",
	as this now can be achieved without involving this agenda.

	* src/methods.cc: Improved description for basics_checkedCalc and
	cloudbox_checkedCalc.

2011-07-06  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-16-1

	* New sub-version as this commit requires some small changes of
	most control files:
	1. atm_checkedCalc renamed to basics_checkedCalc.
	2. If you are calling yCalc or MCGeneral, a call of
	   cloudbox_checkedCalc must be added. 
	3. If you are not using include.arts, you also need to set the 
	   wind fields (to be empty).
	
	* tests/*/Test*.arts: Added call of cloudbox_checkedCalc. 

	* src/m_rte.cc (yCalc): Now using cloudbox_checked.

	* src/m_cloudbox.cc (cloudbox_checkedCalc): New WSM. Extended
	version of chk_cloudbox (winds are demanded to be zero.).
	(pnd_fieldExpand1D): Now using cloudbox_checked.

	* src/check_input.cc (chk_cloudbox): Removed. 

	* src/m_atmosphere.cc (atm_checkedCalc): Removed.
	(basics_checkedCalc): Extended version of atm_checkedCalc.
	Now also considering the winds, stokes_dim and f_grid.
	(z_fieldFromHSE): atm_checked -> basics_checked.
	
	* includes/general.arts: Wind fields are now defined, all set to
	be empty (i.e. no winds).

	* src/workspace.cc: Wind fields now named as u, v and w (following
	nomenclature established in AUG). Renamed at_checked to
	basics_checked, and extended its scope (in the description).
	Introduced cloudbox_checked.

2011-07-06  Stefan Buehler  <sbuehler(at)ltu.se>

	* arts-1-15-50

	* doc/uguide/absorption_theory.tex (Line absorption): Finished
	revising this section. Continuum section next.

	* doc/uguide/references.bib (kuntz:99): Added.

	* doc/uguide/montecarlo.tex: Bugfix: Some references used \label
	instead of \ref, resulting in "multiply defined label" TeX
	warnings.

2011-07-05  Stefan Buehler  <sbuehler(at)ltu.se>

	* arts-1-15-49

	* doc/uguide/absorption.tex: Cosmetics.

2011-07-05  Stefan Buehler  <sbuehler(at)ltu.se>

	* arts-1-15-48

	* doc/uguide/absorption.tex (sec:absorption:lookup): Revised
	lookup table section. Draft of absorption chapter in AGU
	complete now! Revision of absorption in theory guide will follow
	in the next days.

	* doc/uguide/common.tex (\startsymbols, \startsymbolswithunits):
	Bug fix: The caption was included with the closing command of the
	symbol table (\stopsymbols, \stopsymbolswithunits). As a
	consequence, a \label command inside the symbol table was not
	assigned to the table itself, but to the entire chapter. Now the
	label works correctly, but the caption is on top of the table, not
	at the bottom. Don't know any other easy fix for this.

	* doc/uguide/references.bib (buehler:absor:11): Updated.

2011-07-04  Daniel Kreyling  <daniel.kreyling(at)physik.uni-muenchen.de>

	* arts-1-15-47

	* src/cloudbox.cc (IWCtopnd_MH97):
	Corrected a quite fundamental conception error. The two modes of
	this distribution are cumulative. So far the code was just
	calculating rather the first mode or the second mode and returning
	the individual values.
	(chk_pndsum):
	After correcting the error in the size distribution, the
	deviations of summed up particle number densities to input IWC are
	reduced. If the deviation is more than 10%, ARTS will give a
	warning to "out1". Additionally the pnd values will always get
	rescaled with the ratios of initial IWC to summed up pnds.  The
	ratios are written to "out2".

	* src/methods.cc:
	Updated documentation for pnd_fieldSetup.

2011-07-04  Stefan Buehler  <sbuehler(at)ltu.se>

	* arts-1-15-46

        * doc/uguide/absorption.tex, doc/uguide/development.tex,
	doc/uguide/integration.tex, doc/uguide/matrix_vector.tex,
	doc/uguide/common.tex, doc/uguide/surface.tex,
	doc/uguide/concept.tex, doc/uguide/scattering.tex,
	doc/uguide/batch.tex, doc/uguide/winds.tex,
	doc/uguide/interpolation.tex, doc/uguide/gridded_fields.tex,
	doc/uguide/clouds.tex, doc/uguide/rte.tex, doc/uguide/agendas.tex,
	doc/uguide/lin_alg.tex, doc/uguide/atmosphere.tex,
	doc/uguide/sensor.tex, doc/uguide/ppath.tex:
	New feature! Names of workspace variables, methods, and agendas in
	the guide documents now link to the corresponding built-in
	documentation. For this, command \artsstyle was replaced by two
	new commands: \builtindoc and \shortcode. The former should be
	used for everything that has a built-in documentation, the latter
	for everything else. Commands \wsvindex, \wsmindex, etc. also now
	implicitly use \builtindoc, so they will generate the correct
	links.
	I hope this feature will at some point in the future also allow an
	automatic check whether all the names of workspace variables and
	methods in the user guide are correct, simply by automatically
	looking for broken links.
	Credit for the new feature is largely due to Oliver! The LaTeX
	part was very easy, all the work is done by the built-in docserver.

2011-07-01  Stefan Buehler  <sbuehler(at)ltu.se>

	* arts-1-15-45

	* doc/uguide/absorption.tex: All planned text there now, but old
	lookup table section still needs check/cleanup.

2011-06-30  Stefan Buehler  <sbuehler(at)ltu.se>

	* arts-1-15-44

	* doc/uguide/absorption.tex: Still work in progress.

2011-06-29  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-15-43

	* src/docserver.cc:

	(ds_find_token_type): Add ds_ prefix to function name. Optimize
	implementation.

	(ds_doc_description_add_links): Apply same optimizations as in
	ds_find_token_type.

	* src/workspace.cc: Change iy_fos_agenda -> fos_y_agenda in fos_y docs.

2011-06-29  Stefan Buehler  <sbuehler(at)ltu.se>

	* arts-1-15-42

	* doc/uguide/absorption.tex: More writing. Far from finished.

2011-06-29  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-15-41

	* doc/uguide/common.tex:

	New environment 'code' for multiline verbatim code and controlfile
	examples.

	* doc/uguide/*.tex:

	lstlistings is out, fancyvrb is in. The former has a bug that squishes
	the spacing between sections under some cirumstances.

2011-06-29  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-15-40

	* src/docserver.cc:

	(ds_insert_index, ds_insert_doc): Add support for "/all/".

	(find_token_type): Add method to determine token type.

2011-06-28  Stefan Buehler  <sbuehler(at)ltu.se>

	* arts-1-15-39

	* doc/uguide/absorption.tex: Started on rewriting this. Work in
	progress!

	* doc/uguide/absorption_theory.tex: Minor \label changes.

	* doc/uguide/: Emptied the SVN ignore list. Since we are now
	building in a separate directory, there should be no LaTeX output
	files here, so no reason to ignore anything.

2011-06-23  Stefan Buehler  <sbuehler(at)ltu.se>

	* arts-1-15-38

	* doc/uguide/absorption_theory.tex: More work on this. Far from complete!

	* doc/uguide/references.bib (cverdes:05): Added (Carmen's
	partition function paper).

2011-06-22  Stefan Buehler  <sbuehler(at)ltu.se>

	* arts-1-15-37

	* src/methods.cc (abs_lineshapeDefine): Removed the option of a
	linear forefactor (makes no physical sense, removal was already
	decided at last ARTS workshop).

	* src/continua.cc: Only cosmetics.

	* src/lineshapes.cc (define_lineshape_norm_data): Removed the option of a
	linear forefactor.

	* doc/uguide/arts_theory.tex: Include new chapter absorption_theory.tex.

	* doc/uguide/CMakeLists.txt (arts_user): Added absorption.tex,
	which was missing, although it is already a part of the document.
	(arts_theory): Added absorption_theory.tex, the new chapter.

	* doc/uguide/absorption_theory.tex: Added. This will become the new
	absorption chapter in the theory guide. Most of the ARTS-1
	absorption documentation will go here. My plan is to then add a
	short practical part in the user guide, with appropriate references to
	the theory guide. Work in progress!

	* doc/uguide/references.bib: Added some references needed by
	absorption_theory.tex.

	* doc/uguide/old_absorption.tex: Removed. This was obsolete, an
	earlier attempt to move absorption documentation to ARTS-2, but
	the ARTS-1 documentation has changed so much in the mean time that
	I make a fresh start.

2011-06-22  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-15-36

	* doc/uguide/arts_theory.tex:

	No need for further delays... only one verbatim here.

	* doc/uguide/app_wsv.tex: Removed. Unused.

	* doc/uguide/CMakeLists.txt: Add common.tex to all three targets.

	* doc/uguide/common.tex: Remove verbatim package.

2011-06-22  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-15-35

	* doc/uguide/absorption.tex, doc/uguide/development.tex,
	doc/uguide/integration.tex, doc/uguide/matrix_vector.tex,
	doc/uguide/concept.tex, doc/uguide/scattering.tex,
	doc/uguide/arts_user.tex, doc/uguide/CMakeLists.txt,
	doc/uguide/batch.tex, doc/uguide/interpolation.tex,
	doc/uguide/gridded_fields.tex, doc/uguide/clouds.tex,
	doc/uguide/sensor.tex, doc/uguide/arts_developer.tex:

	Replace all verbatim environments with lstlisting and remove font size
	workarounds like \small or \footnotesize.

	arts_theory files will follow after Stefan finished working on it.

	* doc/uguide/CMakeLists.txt: Add missing integration.tex.

2011-06-22  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-15-34

	* doc/uguide/common.tex:

	Use same font family for lstlisting as for verbatim and artsstyle.

	* doc/uguide/agendas.tex:

	Bring contents up to date.

	Replace all verbatim environments with lstlisting.

	* doc/uguide/concept.tex: Remove resolved fixme.

	* src/arts.h, src/workspace.cc (get_wsv_id):

	Add function overload that takes a char* as input for debugging
	convenience.

	* src/methods.cc: Update r_geoidSpherical a bit.

2011-06-22  Gerrit Holl  <gerrit.holl@ltu.se>

	* arts-1-15-33

	* src/m_cloudbox.cc(pnd_fieldSetup): Bugfix
	  - Initialise pnd_field even if cloudbox is of (set zero-sized).

	* src/m_montecarlo.cc(MCGeneral): Bugfix
	  - If there are no scattering particles, throw an exception (was
	  assertion).

2011-06-22  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-15-32

	* doc/uguide/winds.tex: A complete version (described stuff not
	yet implemented).

	* doc/uguide/arts_user.tex: Added geoid and wind sections under
	PE. Moved batch section from PE to SB.

2011-06-21  Gerrit Holl  <gerrit.holl@ltu.se>

	* arts-1-15-31

	* src/m_cloudbox.cc(pnd_fieldSetup): Bugfix
	  - Added check for bounds in cloudbox vs. t_field and
	    massdensity_field.

2011-06-21  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-15-30

	* doc/uguide/CMakeLists.txt: Added winds.tex.

	* doc/uguide/winds.tex: Started.

	* doc/uguide/arts_user.tex: Now includes a wind section.

2011-06-17  Gerrit Holl  <gerrit.holl@ltu.se>

	* arts-1-15-29

	* src/m_montecarlo.cc(MCGeneral): Minor change
	  - Removed argument z_field_is_1D, unused.

	* src/montecarlo.cc:
	  (mcPathTraceGeneral): Minor change
	  - Removed argument z_field_is_1D, unused.
	  - Removed meaningless line Index rubbish=z_field_is_1D;rubbish+=1;
	  (mcPathTraceIPA): Fixed typo in comment
	  (Sample_los): Cleanup
	  - Removed documentation that beared no link to contents.
	  - Added small comment documenting what is implemented here
	
	* src/methods.cc:
	  (iyMC): Minor change
	  - Removed unused z_field_is_1D.
	  (MCGeneral): Minor change
	  - Removed unused z_field_is_1D.
	
	* src/montecarlo.h:
	  (mcPathTraceGeneral): Minor change
	  - Removed unused z_field_is_1D.
	
	* src/cloudbox.cc:
	  (barometric_heightformula): Minor change
	  - Fixed typo in comment
	
	* src/m_rte.cc:
	  (iYMC): Minor change
	  - Removed unused z_field_is_1D.
	
	* src/workspace.cc:
	  (f_index): Expanded documentation
	  - Pointed out that in some contexts, f_index can be negative,
	  meaning all frequencies.

2011-06-16  Gerrit Holl  <gerrit.holl@ltu.se>

	* arts-1-15-28

	* src/montecarlo.cc(matrix_exp_p30): Expanded
	  - Fill M(3,3)

2011-06-15  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-15-27

	* src/docserver.cc: Keep the navigation bar always visible.

2011-06-15  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-15-26

	* doc/uguide/rte_theory.tex: Revised. Made an attempt to make it
	less obvious that text from several places has been appended.
	Removed some overlap and basic stuff, such as the section on blackbody
	radiation.

	* doc/uguide/polarization.tex: Corrected some typos. Added some
	references, fixing some FIXME. Removed two FIXME that did not look
	critical. Changed to UK spelling.

2011-06-15  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-15-25

	* src/docserver.cc:

	Display the 'Go to' links on every pages for easier navigation.

	Replace the tables on index pages by divs.

	Improved layout on mobile devices.

2011-06-14  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-15-24

	* doc/uguide/surface.tex: Added an equation that had got lost.
	Polished on text for Lambertian surfaces.

	* doc/uguide/rte_theory.tex: Fixed typos in surface section.

	* doc/uguide/arts_theory.tex: Changed order on polarisation and RT
	sections.

2011-06-14  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-15-23

	* mc_interp.{h,cc} (interp):

	Refactor the interpolation routines to avoid creating unnecessary
	temporary objects. Instead of returning (->copying) a Vector/Matrix,
	pass in a VectorView/MatrixView. Change implementation of interpolation
	loops to avoid the need for a temporary Vector/Matrix. Change
	ArrayOfVector/Matrix input argument to a constant reference.

	* montecarlo.cc: Adapt for changes in mc_interp.

2011-06-13  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-15-22

	* doc/uguide/rte_theory.tex: Added a section for surfaces and
	moved large parts of the old AUG surface section.

	* doc/uguide/surface.tex: In revision. Not comple.

	* src/m_surface.cc (surfaceLambertianSimple): "Activated" the
	method. It has not been tested heavily, but the theoretical
	aspects appear to be OK.

2011-06-13  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-15-21

	* doc/uguide/ppath.tex: This section modified and revised.

	* src/m_general.cc (Print):
	* src/xml_io_compound_types.cc:
	* src/ppath.cc: Adopted to removed fields: method and refraction.

	* src/ppath.h: Removed fields method and refraction. They fill no
	practical purpose.

2011-06-13  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-15-20

	* doc/uguide/rte.tex (section{Propagation paths}): Some
	corrections and moved some information to ppath section.

	* doc/uguide/ppath.tex: Moved geoid part to surface section. Work
	in progress.

	* doc/uguide/surface.tex: Added geiod text from ppath section. Work
	in progress.

	* doc/uguide/rte.tex: Extended and revised.

	* doc/uguide/arts_user.tex: Placed surface section before ppath one.

2011-06-10  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-15-19

	* doc/uguide/rte.tex: Started on revision.

	* doc/uguide/atmosphere.tex: Changed from calling the part chapter
	to section.

	* doc/uguide/formalism.tex: Removed some outdated information.

2011-06-10  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-15-18

	* Started some more active work on AUG. Let's start with a
	relatively clean history for the AUG chapters, now when relasing
	arts-2. To leave room for documenting future changes.

	* doc/uguide/atmosphere.tex: Some new text, mainly to better
	clarify that several vertical coordinates must be used. Revised.

	* doc/uguide/arts_user.tex: Activated the surface chapter, as
	there are references to this chapter from other chapters.

	* doc/uguide/concept.tex: Checked. Removed details from old history.

2011-06-09  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-15-17

	* src/main.cc: Also output timing info in case a runtime error occured.

2011-06-09  Gerrit Holl  <gerrit.holl@ltu.se>

	* arts-1-15-16

	* src/xml_io_compound_types.cc:
	  (SingleScatteringData::xml_read_from_stream):
	  Verify zenith-angle grid covers the full range.
	  If not, throw runtime-error.

2011-06-09  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-15-15

	* src/methods.cc, src/make_auto_md_cc.cc:

	Automatically generate Create methods for all groups.

	* src/m_create.cc: Removed.

	* src/CMakeLists.txt: Removed m_create.cc from sources.

	* doc/uguide/concept.tex: Updated.

	* src/groups.cc: Removed unused group SLIData2.

2011-06-08  Stefan Buehler  <sbuehler(at)ltu.se>

	* arts-1-15-14

	* doc/uguide/concept.tex: Some editorial changes, following Gerrit's
	comments.

	* src/methods.cc: Eliminated the outdated term "supergeneric" from
	all method descriptions.

2011-06-08  Jana Mendrok <jana.mendrok@ltu.se>

	* arts-1-15-13

	* src/m_cloudbox.cc, src/cloudbox.cc, src/methods.cc:

	Allow wildcards ("*") and omitting for sizemin and sizemax tags of
	part_species. Doc adapted accordingly.

2011-06-02  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-15-12

	* Gave on my attempt to "open up" the RT methods. In the end I had
	to add so many variables and metodhs, that the small gain was
	outweighted by increased complexity. Made a first small step
	towards adding winds.

	* src/workspace.cc: Added wind_x_field, wind_y_field and
	wind_z_field.

	* src/m_ppath.cc: Removed functions added in my last commit.

	* includes/general.arts: Removed definition of
	ppath_atmvars_agenda. 

	* src/agendas.cc: Removed ppath_atmvars_agenda.

	* src/methods.cc: Corrected description for
	iyEmissionStandardClearsky. Put some methods at correct place
	alphabetically.

	* src/rte.cc (get_step_vars_for_standardRT): Cosmetic changes.

	* src/m_rte.cc (iyXXXXX): Cosmetic changes.
	
2011-05-31  Gerrit Holl  <gerrit.holl@ltu.se>

	* arts-1-15-11

	* src/optproperties.cc(interpolate_scat_angle): bugfix
	  - nans can occur not only when aa_sca-aa_inc ~= 0, but also
	    abs(aa_sca-aa_inc) ~= 360. Account for this.

2011-05-30  Gerrit Holl  <gerrit.holl@ltu.se>

	* arts-1-15-10

	* src/methods.cc: Cleanup
	  - Wherever keywords were described in the main documentation string
	    but the actual GIN_DESC were FIXME DOC, moved this documentation
		to the GIN_DESC. For two methods, FIXME DOC remains, because I
		didn't know what to write. Those are: *ybatchMetProfiles* and
		*ybatchMetProfilesClear*.
	
	* src/m_abs_lookup.cc(abs_scalar_gasExtractFromLookup):
	  - As discussed with Stefan, uncommented the full check for equal
	    frequency grids and, as a compromise, replaced this by a check
		checking just the length. Ultimately, 
		In theory, this check should happen here, so that the user cannot
		trigger an assertion. However, this method is very deep inside and
		thus a check here is very expensive. Alternatives would be:
		- When abs_lookup_is_adapted is set to 1 (by abs_lookupAdapt), set
		  all the appropiate variables read-only. This is not currently
		  possible in ARTS. Ideally, only abs_lookupAdapt should be able
		  to set abs_lookup_is_adapted.
		- When any of the relevant variables is changed, set
		  abs_lookup_is_adapted to 0. That is probably not easy to
		  implement.

2011-05-26  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-15-9

	* src/m_general.cc, src/methods.cc:

	Add WSM verbosityInit which initializes the verbosity WSV with
	defaults or the levels specified on the command line.

	* includes/general.arts: Add call to verbosityInit.

	* src/docserver.cc (ds_insert_index):

	Change the 'Jump to' link targets to point to the separate index pages
	instead of the anchors on the main pages.

2011-05-25  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-15-8

	* includes/general.arts: Added standard definition of
	ppath_atmvars_agenda (setting winds to zero).

	* src/m_rte.cc (iyEmissionStandardClearsky): Now using
	ppath_atmvars_agenda.
	
	* src/m_ppath.cc (interpolation_weightsFromPpathForAtmFields)
	(ppath_pFromPgrid, ppath_tFromTfield, ppath_vmrFromVMRfield)
	(ppath_windsZero): New WSMs.

	* src/workspace.cc: Removed obselete variables ppath_transmissions
	and ppath_array. Added WSV:
	interpolation_weights, ppath_p, ppath_t, ppath_vmr, ppath_winds

	* src/groups.cc: Removed ArrayOfPpath. Not used any longer.

2011-05-24  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-15-7

	* src/m_rte.cc (fix_extrap): Missed to use referencing here.
	(Noticed by Oliver. Thanks.)

	* src/ppath.h (struct Ppath): Renamed filed p to nreal. To store real
	part of refractive index.
	Removed fields t and vmr (not used for a long time!)

2011-05-24  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-15-6

	* src/m_rte.cc (diy_from_path_to_rgrids): Added a small
	(temporary?) fix to obtain the correct basis function outside the
	range covered by a retrieval grid. I had misunderstood how the
	gridpos function handles extrapolation.

2011-05-24  Gerrit Holl  <gerrit.holl@ltu.se>

	* arts-1-15-5

	* src/m_atmosphere.cc:
	  (batch_atm_fields_compactAddConstant): Added
	  - Added WSM to add constat to batch_atm_fields. I need this because
	    I need to add a constant profile to some, but a constant value to
		others, and need to add those in the same order as in abs_species.
		Hence, I cannot use the constant-setting in
		batch_atm_fields_compactFromArrayOfMatrix directly.
	  (batch_atm_fields_compactFromArrayOfMatrix): Adapted
	  - Parallelise for-loop.

	* src/m_abs_lookup.cc (abs_scalar_gasExtractFromLookup): Adapted
	  - Added check to verify the lookup table frequency grid is the same
	    as the radiative transfer frequency grid. I included hirs_fast,
		then set my frequency grid monochromatically (hirs_fast still
		contains a lot of other settings useful for IR), and got an
		assertion. Now this raises a runtime-error instead. To be
		discussed: maybe this check should be somewhere else?
		This method now needs f_grid as an input (that should be no
		problem, as it's unlikely anybody calling this method does not
		have f_grid set, or?)

	* src/methods.cc: Adapted
	  - Added batch_atm_fields_compactAddConstant (see above).
	  - Added f_grid as dependency to abs_scalar_gasExtractFromLookup (see
	    above).
	  - For VectorInsertGridPoints, fixed FIXME DOCS with appropiate
	    documentation.
	  - For AtmRawRead, removed reference to *p_field_raw*. What could
	    this possibly have meant, ever?

	* src/workspace.cc: Adapted
	  - For doit_za_grid_opt, replaced *DoitGridOptimization* by
	    *doit_za_grid_optCalc*.
	  - For abs_lookup, replaced FIXME with reference to the appropiate
	    chapter in the AUG.

	* src/optproperties.cc: Fixed documentation bugs
	  (ext_matTransform): docbugfix
	  - I guess ext_mat_lab/ext_mat_data is the extinction matrix and not the
	    absorption vector.
	  (pha_matTransform): dogbugfix
	  - I guess pha_mat_lab/pha_mat_data is the phase matrix and not the
	    absorption vector.
	
	* src/check_input.cc: Fixed bug
	  - When outputting error message, output names of two vectors, not
	    just one.

2011-05-24  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-15-4

	* cmake/scripts/update_doxyfile.cmake, doc/doxygen/Doxyfile.in:

	Add build/src to the Doxygen input path. Since we no longer build
	inside the source tree, the auto_* files are generated in the
	build/src directory. If doxygen can't find the auto_* files, the
	documentation for workspace methods is missing. Bug reported by Gerrit.

2011-05-19  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-15-3

	* src/m_batch.cc (ybatchCalc):

	Don't try to store y in ybatch if it's empty.
	Prevents an assertion if one tries to do something dirty like:

	AgendaSet(ybatch_calc_agenda){
		Touch(y)
		Touch(jacobian)
		Print(ybatch_index)
	}

	IndexSet(ybatch_start, 0)
	IndexSet(ybatch_n, 10)

	ybatchCalc

	* src/CMakeLists.txt: Cosmetics.

	* Working on the foundation for the new verbosity implementation.
	Nothing to see here, yet.

	* src/methods.cc, src/groups.cc, src/workspace.cc:

	New WSMs: verbositySet, verbositySetAgenda, verbositySetFile,
	verbositySetScreen and temporary TestVerbosity.

	New WSV: verbosity.

	New Group: Verbosity.

	* src/m_general.h:

	Add WSMs to modify verbosity and a temporary test function.

	* src/message.h:

	Add new ArtsOut class and derive ArtsOut0-3 from that.

	Add Verbosity class.

        Add output operator for ArtsOut.

	* src/messages.cc: Add verbosity output operator.

	* src/xml_io_instantiation.h, src/xml_io_compound_types.cc,
	src/xml_io_types.h:

	Add dummy functions for verbosity reading/writing.

	* src/make_auto_md_cc.cc, src/make_auto_md_h.cc:

	Add code to add the verbosity argument to the parameter list of the
	TestVerbosity WSM. Eventually, the argument will be appended to every
	WSM.

2011-05-17  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-15-2

	* src/m_general.cc (Test): Created a small test case, to check how
	grid positions are treated for extrapolation. To be discussed with
	Stefan.

2011-05-17  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-15-1

	* src/CMakeLists.txt:

	Add an unused target that lists all header files. This makes sure that
	the header files are included in Xcode or Eclipse project files.

	* src/parser.cc (ArtsParser::set_gin_to_default):

	Improve runtime error for non-supported default value types.

2011-05-13  Stefan Buehler  <sbuehler(at)ltu.se>

	* arts-1-15-0

	* (Version number): New minor version number, since these changes will break
	controlfiles that explicitly define there own
	abs_scalar_gas_agenda. In that case, the fix is to add
	Ignore(rte_doppler) in abs_scalar_gas_agenda.

	* (New features): Now handles Doppler shift in on-the-fly
	absorption simulations, if abs_scalar_gas_agenda is defined
	properly. Does not yet handle Doppler shift when absorption is
	taken from lookup table.

	* includes/general.arts: Redefined abs_scalar_gas_agenda to ignore
	rte_doppler. (By adding Ignore(rte_doppler)) Put also comments
	there how to turn Doppler on.

	* tests/Abs/TestAbsDoppler.arts: Added. A new test, specifically
	for the doppler shifted absorption. Demonstrates how Doppler can
	be turned on.

	* tests: Added Ignore(rte_doppler) to abs_scalar_gas_agenda in all
	test cases.

	* src/agendas.cc (abs_scalar_gas_agenda): Added input parameter rte_doppler.

	* src/workspace.cc (abs_doppler, abs_doppler_do): Removed, since
	these are not needed with this new solution to the Doppler
	problem.
	(rte_doppler): Added. This is the communication variable for
	abs_scalar_gas_agenda.

	* src/methods.cc (abs_fieldCalc): Added new argument doppler,
	for doppler absorption coefficient testing. This is a generic
	input argument with an empty vector as default value.

	* src/m_abs_lookup.cc (abs_fieldCalc): Added new argument doppler,
	for doppler absorption coefficient testing.

	* src/disort.cc (dtauc_ssalbCalc): Put 0 for new rte_doppler
	argument of abs_scalar_gas_agenda.

	* src/doit.cc (cloud_RT_no_background,
	cloud_ppath_update1D_planeparallel): Put 0 for new rte_doppler
	argument of abs_scalar_gas_agenda.

	* src/m_fos.cc (iyFOS): Put 0 for new rte_doppler argument of
	abs_scalar_gas_agenda.

	* src/m_rte.cc (iyBeerLambertStandardCloudbox): Put 0 for new
	rte_doppler argument of abs_scalar_gas_agenda.

	* src/montecarlo.cc (clear_rt_vars_at_gp, cloudy_rt_vars_at_gp):
	Put 0 for new rte_doppler argument of abs_scalar_gas_agenda.

	* src/rte.cc (get_step_vars_for_standardRT): Put 0 for new
	rte_doppler argument of abs_scalar_gas_agenda.

2011-05-13  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-14-212

	* src/m_rte.cc (yCalc):

	If we're not calculating jacobians, make sure the output variable
	is resized them to 0.

	* src/groups.cc: Remove unused ArrayOfArrayOfArrayOfArrayOfGridPos.

	* src/methods.cc, src/m_create.cc:

	Implement remaining ArrayOfGriddedFieldXCreate methods.

	* src/methods.cc: Extend doc of Delete method.

	* src/make_auto_md_cc.cc: Add erasing of Tensor3 for output only.

2011-05-12  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-14-211

	* src/gridded_fields.h (checksize):

	Fix warnings generated by some GCC versions (that assume programmers
	don't know about operator precedence) by inserting parenthesis around
	&& when using in conjunction with ||.

2011-05-11  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-14-210

	* A quick check of the BRDF part of the surface chapter (still
	"inactive"), after reading the Petty book (for the first time).
	
	* doc/uguide/surface.tex: Removed some stray letters. Changed
	i index between "in and out angles" in definition of r for BRDF.
	Added citation of Petty.  

	* doc/uguide/references.bib: Added the Petty book. 

2011-05-11  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-14-209

	* src/gridded_fields.h (checksize):

	Allow the grids for dimensions of size 1 to be empty.

	* src/m_atmosphere (atm_fields_compactFromMatrix):

	After the above changes, lat and lon grids can be set to empty again.

	* NEWS: Removed.

2011-05-10  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-14-208

	* src/parameters.cc:

	Only use ARTS_DEFAULT_INCLUDE_DIR if the user hasn't passed a custom
	path by setting the environment variable ARTS_INCLUDE_PATH or by
	passing the -I option to arts.

2011-05-10  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-14-207

	* src/parameters.cc:

	Add the includes directory in the ARTS source directory
	automatically to the include search path.

	* CMakeLists.txt, config.h.cmake:

	Define ARTS_DEFAULT_INCLUDE_DIR.

	* tests/testall.py, cmake/modules/ArtsTestcases.cmake:

	Remove TOPSRC dir. Not needed for include path anymore.

2011-05-10  Jana Mendrok <jana.mendrok@ltu.se>

	* arts-1-14-206

	* src/m_abs_lookup.cc:

	abs_lookupSetupBatch:
	- allow batch_fields to contain particle related profiles (current
	requirement: they need to be placed in between (T,z) and abs_species
        corresponding data), i.e., now able to handle batch_atm_fields_compact
        as well as batch_atm_fields_compact_all types
	- de-hardwire position of H2O profiles (before: first abs_species, i.e.,
	first (abs)profile in batch_fields. now: any place ok (same as has
	already been in abs_lookupSetup; position derived by tag comparison)

2011-05-09	Gerrit Holl	<gerrit.holl@ltu.se>

	* arts-1-14-205

	* src/m_atmosphere.cc: expanded
	  - In atm_fields_compactFromMatrix, set the lat- and lon-grids to
	  Vector(0, 1, 1) (that is, [0]) rather than Vector() (that is, []),
	  or .checksize() will fail (since the data have no 0-dims). Obviously
	  nobody was using .checksize() as recommended by the developer's
	  guide.

	  - In atm_fields_compactAddSpecies, remove debugging couts.

	  - Added batch_atm_fields_compactAddSpecies

	* src/methods.cc: Expanded
	  - Added batch_atm_fields_compactAddSpecies
	
	* tests/testall.py: Adapted
	  - Be like a good dog-owner and clean up after the little test case
	  that cannot clean up after itself.

2011-05-09  Stefan Buehler  <sbuehler(at)ltu.se>

	* arts-1-14-204

	* src/workspace.cc (abs_doppler, abs_doppler_do): Added these two
	variables, first step towards Doppler implementation for absorption.

2011-05-09  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-14-203

	* src/docserver.cc:

	Change order in index to groups, variables, methods, agendas.

	Change order of methods list in group, variable and agenda documentation
	to specific output of X, generic output of X, specific input of X,
	generic input of X.

2011-05-04  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-14-202

	* More fixes for cases where output-only variables were used as input.

	* src/agendas.cc:

	jacobian_agenda: Add WSV jacobian as input for jacobian_agenda because
	the agenda modifies the existing jacobian values and thus jacobian must
	also be defined as input to the agenda.

	iy_clearsky_agenda: iy_error and iy_error_type are used as input under
	some circumstances, so they can't be declared output-only.

	* src/methods.cc:

	iyEmissionStandardClearsky, iyBeerLambertStandardClearsky:
	Only initialize iy_error and iy_error_type if iy_agenda_call1 is 1.
	Otherwise they are used as input. Therefore, both MUST be declared as
	input variables.

	jacobianCalc*: All the functions that are meant to be used inside the
	jacobian_agenda modify the jacobian variable. But jacobian was defined
	as output-only. Added jacobian as input too for all of them.

	jacobianCalcAbsSpeciesAnalytical: Dummmy method that is added to the
	jacobian_agenda for analytical calculation to satisfy the
	jacobian_agenda input/output requirements.

	jacobianAdd*: Remove the PASSWORKSPACE() flag for all of these, it's
	passed anyway because they have an agenda as input.

	jacobianClose: Add jacobian_agenda as input and output to run the
	consistency check inside this function.

	* m_jacbobian.cc:
	
	(jacobianClose): Run the self-consistency check for the
	jacobian_agenda here.
	
	(jacobianCalcAbsSpeciesAnalytical): Added.

	(jacobianAdd*): Mark ws argument as unused. jacobian_agenda.append()
	no longer needs ws.

	(jacobianAddAbsSpecies): Add jacobianCalcAbsSpeciesAnalytical to the
	jacobian_agenda for the analytical case.

	* src/m_rte.cc (iyBeerLamberStandardCloudbox):

	Has iy_error and iy_error_type as output only, but never initialized
	them.

	* src/methods.h, src/methods_aux.cc:

	Cache an ArrayOfIndex with the output only variables in MdRecord.

	* tests/MonteCarlo/TestRteCalcMC.arts:

	Add Ignore for iy_error and iy_error_type to iy_clearsky_agenda.

	* src/make_auto_md_cc.cc:

	In Debug mode, initialize Output only variables with values that
	should trigger assertions or runtime errors if they are misused as
	inputs. Currently Numeric is set to NaN, Index to -1, Vectors
	and Matrices are resized to 0. More to come...

	* src/agenda_class.cc (Agenda::append):

	Set the input of the new MRecord to InOnly() instead of In().
	Don't call AgendaAppend to avoid the consistency check. It has to be
	done at a later stage after building up the Agenda is finished.

2011-05-06	Gerrit Holl	<gerrit.holl@ltu.se>

	* arts-1-14-201

	* src/m_atmosphere.cc: Expanded
	  - Added WSM *atm_fields_compactAddSpecies*.
	    This method appends a GriddedField3 to atm_fields_compact.  The
		GriddedField3 is interpolated upon the grid of atm_fields_compact.
		A typical use case for this method may be to add a climatology of
		some gas when this gas is needed for radiative transfer
		calculations, but not yet present in atm_fields_compact. One case
		where this happens is when using the Chevalier dataset for
		infrared simulations.
	  - Moved shared functionality between *atm_fields_compactAddSpecies*
	    and *atm_fields_compactAddConstant* to new helper function
	    *atm_fields_compactExpand*
	  - In this shared functionality, commented out check that at least
	    one species already exists. As pointed out in the source code, I
		believe this check is not needed. Oliver agrees. We can still
		infer the dimensions even if there are zero fields; e.g., the data
		might have dimensions (0, 4, 3, 8).
	  - Fixed some error messages in AtmFieldsFromCompactChevalAll.
	
	* src/methods.cc: Expanded
	  - Added aforementioned WSM here.
	
	* src/check_input.{cc,h}: Expanded
	  - Added chk_if_equal that checks if two Vectors (VectorViews,
	    ConstVectorViews) are equal within a certain margin, and otherwise
	    throws a runtime_error.
	
	* tests/testall.py: Expanded
	  - Added unittest for atm_fields_compactAddSpecies. Adding the field,
	    including the interpolation, is compared to a reference case from
		scipy (unittest disabled by default, because it depends on PyARTS).
	
	* tests/CMakeLists.txt: Expanded
	  - Added aforementioned unittest. However, this unittest is disabled
	    by default, because it depends on PyARTS.

2011-05-06  Jana Mendrok <jana.mendrok@ltu.se>

	* arts-1-14-200

	* tests/MHS/TestMHS_generic.arts, DOITBatch/TestDOITBatch.arts,
	HIRS/TestHIRS.arts; includes/mhs/mhs.arts, mhs/mhs_fast.arts:

	use surface_scalar_reflectivity instead of surface_emissivity

	apply surfaceFlatReflectivity instead of surfaceFlatSingleEmissivity

	that is, for all test cases emissivity has been	replaced by reflectivity
	(does not apply to TestDISORT, where controlfile is outdated anyway and
	which is not in use currently)

2011-05-06  Stefan Buehler  <sbuehler(at)ltu.se>

	* arts-1-14-199

	* doc/uguide/concept.tex (Basics): Revised this whole chapter,
	included stuff I originally wrote for the ARTS2 paper. I consider
	this chapter finished for now, comments welcome.

2011-05-05  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-14-198

	* As there is still confusion on how to implement Lambertian
	surface scattering, I can not take responsibility for this part.
	(And no free time for this now, or inside several weeks.) So,
	"deactivated" the WSM and the AUG surface chapter. Feels better to
	remove it, than having incorrect stuff in arts.

	Open for initiatives. You are totally free to modify these parts.

	* doc/uguide/arts_user.tex: Commented out surface chapter..

	* src/m_surface.cc (surfaceLambertianSimple): Deactivated.

2011-05-05  Jana Mendrok <jana.mendrok@ltu.se>

	* arts-1-14-197

	* src/m_atmosphere.cc, special_interp.cc, methods.cc, ppath.cc,
	  check_input.cc, refraction.cc, m_rte.cc, m_doit.cc, workspace.cc,
	  doit.cc:
	De-ambiguitized "surface" (ground/lower boundary of atmosphere => "the
	surface" vs. slice of a field => "surface-type variable"/"level")

	* src/m_cloudbox.cc: layout adaption (avoid long lines)

2011-05-04  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-14-196

	* doc/uguide/surface.tex: Missed to be consistent with Rees in the
	definition of relectivity. (Missed the cos term!)

2011-05-03  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-14-195

	* doc/uguide/surface.tex: A quick revision, and some extension on
	rough surfaces.

2011-05-02  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-14-194

	* src/m_surface.cc (surfaceLambertianSimple): Copied some new
	code from surfaceFlatReflectivity. Changed the rmatrix from being
	diagonal, to just get the (0,0) element filled for stokes_dim>1.
	This is my present understanding of the defintion of the
	Lambertian surface (I will look for conformation). Re-allowed
	usage for stokes_dim > 1.

2011-05-02  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-14-193

	* tests/AMSU/TestAMSU_generic.arts:
	* includes/amsu/amsub_fast.arts:
	* includes/amsu/amsub.arts: Both now using surfaceFlatReflectivity.

	* src/m_surface.cc (surfaceFlatReflectivity): Created.

	* src/workspace.cc: More detailed description of
	surfaceFlatReflectivity.

2011-05-02  Daniel Kreyling  <daniel.kreyling@physik.uni-muenchen.de>

	* arts-1-14-192

	* src/methods.cc:
	Documentation fix.

	* src/cloudbox.cc:
	corrected a mathematical mistake and changed median tropospheric
	temperature inbarometric_heightformula from 288K to 253K and
	added a sourcereference.

	* src/m_cloudbox.cc:
	corrected a bug in cloudboxSetAutomatically. In case of two different
	hydrometeor profiles used to set the cloudbox_limits the results of
	the second profile was not handed over to the final cloudbox_limits
	array.
	Additionally ensured that the cb boundary will always be set to
	the first zero value below/above the cloud.

	* tests/DOITBatch/TestDOITBatch.arts:
	Documentation fix.

2011-05-02  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-14-191

	* src/docserver.cc: Display error for non-existent pages.

	(ds_insert_error): New function to insert an error message.

	(ds_stylesheet): Add .error style.

2011-04-28  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-14-190

	* src/m_doit.cc (DoitInit), src/methods.cc:

	Remove doit_za_interp from output list. d_z_i was defined as
	output-only but the initialization code relied upon its current value.

	if (doit_za_interp != 1) doit_za_interp = 0;

	d_z_i was effectively ending up with a random value of 0 or 1.
	
	On Linux this was not visible as uninitialized variables seem to have
	a tendency to have 0 as a value. But this is in no way guaranteed.
	This led to a very hard-to-hunt-down bug that showed up in only 5-10%
	of DOIT calculations and mostly only on Mac OS X.

	The ugly bit was that even though doit_za_interpSet is properly
	called in the case of TestDOITBatch, doit_za_interp would still end up
	with a random value of 0 or 1 if DoitInit is called inside an
	agenda. Because DoitInit was defined to generate doit_za_interp,
	the scoping mechanism would not copy the original value of
	doit_za_interp. There is no need to do that for variables that are
	supposed to be generated by a WSM inside the agenda anyway.
	Which made it even more difficult to track down was the fact that the
	random change of the used interpolation from linear to polynomial only
	showed differences in the results after around 55 Doit iterations.

	Moral of the story:

	If you define a workspace variable as output-only for a workspace
	method, you MUST INITIALIZE IT inside the WSM. There is no way around
	it.

	* src/methods.cc (DoitCloudFieldPut):

	Same problem here with scat_i_p. Defined as output-only, but accessed
	with issize(scat_i_p,....) in the 1D case.
	I've changed it to be input and output for now. But I'm not sure if
	this is the right fix. Maybe instead of issize() there should be a
	resize(scat_i_p...) like in the 3D case?

	* src/math_funcs.cc (lgamma_func):

	Make static coefficient array also const.

	Reindented file.

	* src/m_abs_o2_models.cc (Zeeman_o2_line_splitting):

	Add warning to doc that this function is not threadsafe.

2011-04-29  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-14-189

	* Started to revise the surface properties methods.

	* src/m_surface.cc (surfaceLambertianSimple): Now using
	surface_scalar_reflectivity.

	(surfaceFlatRefractiveIndex): complex_n is now also allowed to
	have a single row.

	(surfaceFlatVaryingRvRh): Removed (don't think it is being used).

	* src/workspace.cc: Introduced surface_scalar_reflectivity.

2011-04-29 Ajil Kottayil  <ajil.kottayil@ltu.se >

	* tests/HIRS/TestHIRS.arts: Changed the path of HITRAN directory.

2011-04-28  Patrick Eriksson  <patrick.eriksson@chalmers.se>


	* arts-1-14-187

	* doc/uguide/rte.tex: Started revision.

	* doc/uguide/symbol_defs.tex: Added additional symbols used in the
	article.

	* doc/uguide/concept.tex: Some polishing. Appended the "Concept"
	section from the first article manuscript version. To e merged
	with existing Sec 1.3.

	* doc/uguide/arts_user.tex: Some smaller fixes. Moved up "General
	RT" as Section 3, aiming at having a top-to-bottom order of the
	sections.

2011-04-27  Jana Mendrok <jana.mendrok@ltu.se>

	* arts-1-14-186

	* src/m_optproperties.cc:

	use chk_interpolation_grids for scatdata_T-grid (consistently accounts
	for allowed extrapolation)

2011-04-26  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-14-185

	* src/test_matpack.cc, src/test_tensor.cc:

	Remove obsolete local joker definition.

2011-04-26  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-14-184

	* src/constants.cc:

	Remove Joker definition here, it belongs in the matpack library.

	Include mystring.h instead of arts.h.

	* src/matpackI.cc: Add definition and initialization for global joker.

	* src/matpackI.h: Make global joker object constant.

	* src/agenda_class.cc (Agenda::append): Remove _U_ from ws.

	* src/libmicrohttpd/connection.c, src/libmicrohttpd/daemon.c:

	Add cast to unsigned int to silence some warnings.

2011-04-21  Jana Mendrok <jana.mendrok@ltu.se>

	* arts-1-14-183

	* src/m_optproperties.cc:

	harmonize check of scatdata_T-grid covering required range with
	extrapolation abilities of interpolation routine (extpolfac introduced
	as global constant here. would be good to have that linked to value
	that interpolation routine actually uses)

	* src/ppath.cc:

	assume tiny tilts of 3D surface are numeric problem, hence reset to 0

	* src/m_doit.cc:

	bugfix in 3D version of CloudboxGetIncoming (reduced azimuth grid at
	nadir/zenith)

2011-04-18	Gerrit Holl	<gerrit.holl@ltu.se>

	* arts-1-14-182

	* src/m_atmosphere.cc: Cosmetic changes
	  - Improve error message. To me this error message was confusing.
	  With batch_atm_field_compactFromArrayOfMatrix I was not trying to
	  copy a matrix, maybe this happens internally but I think the new
	  error message is less confusing. Also I got some weird other effects
	  and sent an e-mail to Oliver about that.

	* src/methods.cc: Cosmetic changes
	  - Fixed typo, Mathisa -> Mathias

	* src/workspace.cc: Cosmetic changes
	  - Added some stars

2011-04-15  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-14-181

	* src/sourcetext.{h,cc}: Move include exception.h to header.
	(SourceText::AdvanceChar()): Allow to move one position behind the last
	character in the sourcetext.
	(SourceText::Current()): Throw exception if Eot is reached.

	* src/parser.cc:
	(ArtsParser::parse_main()): Remove unneeded test for }.
	(ArtsParser::parse_agenda): Remove statement with no effect.

	Fixes bug reported by Gerrit. An extra } at the of a control file was
	not detected as a syntax error.

2011-04-14	Gerrit Holl	<gerrit.holl@ltu.se>

	* arts-1-14-180

	* src/methods.cc, src/agendas.cc, src/workspace.cc: Cosmetic changes

	- Mainly small changes, such as adding asterisks around WSMs, WSVs,
	etc. Also some typo fixes.

2011-04-13  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-14-179

	* src/parser.cc:

	Don't silently ignore rogue characters at the end of control files
	behind the main agenda. This could lead to a bug where an extraneous }
	inside the main agenda leads to a premature end of the control file
	going unnoticed by the user. Bug reported by Gerrit.

	* src/sourcetext.h (SourceText::reachedEot): Added.

2011-04-12  Daniel Kreyling  <daniel.kreyling@physik.uni-muenchen.de>

	* arts-1-14-178

	* tests/DOITBatch/:
	Small correction in TestDOITBatch.arts

	* tests/testall.py
	DOITBatch test added and check against reference data included

	* tests/CMakeLists.txt
	TestDOITBatch.arts included

	* src/workspace.cc
	minor documentation fixes

2011-04-12  Daniel Kreyling  <daniel.kreyling@physik.uni-muenchen.de>

	* arts-1-14-177

	* includes/agendasDOIT.arts:
	Include file containing all DOIT related agendas and options
	for WSM

	* tests/DOITBatch/:
	TestDOITBatch, is a test case for batch calculations with the
	scattering solver DOIT. Particle number densities are calculated
	inside ARTS according to one ice and one liquid psd 
	parametrisation.
	
2011-04-12  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-14-176

	* src/docserver.cc: Don't underline links.

2011-04-12  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-14-175

	* src/docserver.cc:

	Replace all WSMs, WSVs and groups enclosed in ** by HTML links.

	IMPORTANT: Please make sure your documentation in methods.cc and
	agendas.cc consistently uses ** around the entities mentioned above!!!

2011-04-11  Daniel Kreyling  <daniel.kreyling@physik.uni-muenchen.de>

	* arts-1-14-174

	* m_cloudbox.cc
	(cloudboxSetAutomatically)
	fixed bug, that occured when using the default value of 
	-1 for *cloudbox_margin*

	* src/methods.cc
	minor documentation fixes

	* src/workspace.cc
	minor documentation fixes

2011-04-07  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-14-173

	* doc/uguide/development.tex: Updated sections 1.5 and 1.6.

2011-04-06  Daniel Kreyling  <daniel.kreyling@physik.uni-muenchen.de>

	* arts-1-14-172

	* src/methods.cc
	minor documentation fixes

	* src/workspace.cc
	minor documentation fixes

2011-04-04  Daniel Kreyling  <daniel.kreyling@physik.uni-muenchen.de>

	* arts-1-14-171

        * src/m_atmosphere.cc
	Fixed documentation for methods implemented by me.

        * src/math_funcs.cc
	Fixed documentation for methods implemented by me.
	
        * src/methods.cc
	Fixed documentation for methods implemented by me.
	
        * src/m_cloudbox.cc
	
	(cloudboxSetAutomatically)
	In order not to call iy_cloudbox_agenda, while not using/
	initialising it in most of the cases, the WSM CloudboxOff
	is no longer used here. Instead the WSV cloudbox_on is 
	set to zero.
	
        * src/cloudbox.cc
	Fixed documentation for methods implemented by me.
	
        * src/workspace.cc
	Fixed documentation for methods implemented by me.


2011-03-25	Gerrit Holl	<gerrit.holl@ltu.se>

	* arts-1-14-170

	* src/m_cloudbox.cc,
	  src/check_input.h,
	  src/check_input.cc: Behaviour changes
	  - When doing pnd_fieldCalc, verify there are no scatterers outside
	  the cloudbox.

	* src/cloudbox.cc: Small changes
	  - When checking the dimensions of the massdensity-field, when
	  encountering a problem, do not output the field itself, but only the
	  sizes, the problematic dimension.
	
	* ChangeLog:
	  - Document my changes

2011-03-22	Gerrit Holl	<gerrit.holl@ltu.se>

	* arts-1-14-169

	* src/m_atmosphere.cc, src/workspace.cc: Cosmetic changes
	  - Fix error, VMR[2] should be VMR_n[1].
	
	* src/methods.cc: Cosmetic changes
	  - Typo: brodening -> broadening
	
	* src/check_input.cc: Small improvement
	  - Show more information in runtimeerror
	
	* doc/uguide/scattering.tex: Small improvement
	  - Fix typo, of -> or
	
	* includes/amsu/{amsub,amsub_fast,mhs,mhs_fast}.arts: Cosmetic changes
	  - Fix typo: redifine -> redefine

	* ChangeLog:
	  - Document my changes

2011-03-17  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-14-168

	* doc/uguide/concept.tex: Mainly added some new references.

	* doc/uguide/references.bib: Added new arts articles, and some old
	missing data. And some fixes.

2011-03-15  Daniel Kreyling <daniel.kreyling@physik.uni-muenchen.de>

	* arts-1-14-167

	* src/m_cloudbox.cc: Bugfix

	(cloudboxSetAutomatically) to call CloudboxOff, iy_cloudbox_agenda
	must be an In and Output to this method.
	CloudboxOff only gets called when atmosphere is empty, if that is
	not the case, iy_cloudbox_agenda still needs to be initialized.


2011-03-15	Gerrit Holl	<gerrit.holl@ltu.se>

	* arts-1-14-166

	* doc/uguide/batch.tex: Bugfix

	- Replace "RteCalc" by "yCalc".


2011-03-14	Gerrit Holl	<gerrit.holl@ltu.se>

	* arts-1-14-165

	* src/m_montecarlo.cc: Bugfix

	 - Add two more runtime checks: number of columns in sensor_pos and
	   number of columns in sensor_los. Those should be 3 and 2
	   respectively, as the atmospheric dimensionality has to be 3.

2011-03-14	Gerrit Holl	<gerrit.holl@ltu.se>

	* arts-1-14-164

	* src/m_cloudbox.cc: Bugfix

	 - In pnd_field_calc, check that enough data points are available in
	   pnd_field_raw on each grid/dimension so that it can be interpolated
	   to (e.g. at least two, as child function does linear
	   interpolation). If this is not the case, throw a runtime_error.
	   Until now, a function called from here threw an assertion error
	   instead.

2011-03-14  Daniel Kreyling <daniel.kreyling@physik.uni-muenchen.de>

	* arts-1-14-163

	* src/m_optproperties.cc:

	(DoitScatteringDataPrepare) calls a check, whether single 
	scattering data contains the right frequencies. This methods calls
	(scat_data_monoCalc), where the same check was repeated. I removed
	the check in DoitScatteringDataPrepare and extended the check in
	scat_datamonoCalc to include extrapolation, according to
	chk_interpolation_grids. 

	* src/m_cloudbox.cc

	(cloudboxSetAutomatically) functionality only for 1 Dim atmospheres.
	Replaced checks by assertions. Improved the cloudbox_limits finding and setting
	algorithm.
	
	(Massdensity_cleanup) renamed (former Hydromet_cleanup)

	Splitted the function (ParticleTypeAddAllMeta) into 
	(ScatteringParticleTypeAndMetaRead), which reads only the single scat. 
	and meta scat. data and
	(ScatteringParticlesSelect) which does the user defined selection of 
	scattering particles via part_species.

	(pnd_fieldSetup) some corrections and code improving. Added the particle
	selection.
	
	* src/m_atmosphere.cc

	(atm_fields_compactFromMatrixChevalAll) renamed function.
	(AtmFieldsFromCompactChevalAll) atmospheric properties (gases and hydrometeors)
	in Chavallier data are written to two different GriddedField4s 
	(atm_fields_compact_all, atm_fields_compact). First containing all profiles,
	second only the abs. gases.

	* src/mathfuncs.cc

	(gamma_func) & (lgamma_func) renamed the functions, to avoid conflict with 
	C std. lib. 

2011-03-13	Gerrit Holl	<gerrit.holl@ltu.se>

	* arts-1-14-162

	* src/m_montecarlo.cc: Adapted

	  - Added checks on atmosphere_dim (this is now an additional input to
	  both MCGeneral and MCIPA).

	* src/methods.cc, src/m_rte.cc: Adapted

	  - Changed due to additional input for MCGeneral and MCIPA

	* src/workspace.cc: Fix typo

	* tests/MHS/TestMHS_generic.arts: Fix error in comment

2011-03-04  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-14-161

	* src/CMakeLists.txt:

	Fixed bug reported by Dominik Scheiben and Rene Bleisch. A dependency
	was missing for artscore on auto_version_h. This led to a compilation
	failure on Debian Lenny, strangely not on Ubuntu or Mac OS X.

	* doc/uguide/arts_developer.tex: Removed unused affiliation.

2011-03-03  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-14-160

	* src/methods.cc:

	Replaced all remaining references to RteCalc calls in the builtin docs
	with yCalc.

	There were a couple of examples left in the builtin docs which used
	arts1 syntax.

	* doc/uguide/development.tex:

	Updated sections 1.1-1.4. Still work in progress.

	* doc/uguide/arts_developer.tex:

	Added me as author of the Gridded Fields section.

	* doc/uguide/arts_*.tex: Updated our institut name.

	* src/mystring.h: Changed ifdef from string_h to mystring_h.

2011-02-28  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-14-159

	* src/special_interp.cc (interp_cloudfield_gp2itw): 

	* Found a case where the check inside interp_cloudfield_gp2itw
	performed by gridpos_upperend_check was needed not just for the
	end points, but also for the point with index 1. Switched to check
	all points. Slower, but safer. 
	
	* src/interpolation.cc (gridpos_upperend_check): A second version
	of the function, operating on complete ArrayOfGridPos.

	* src/special_interp.cc (interp_cloudfield_gp2itw): Using new
	version of gridpos_upperend_check.

2011-02-25	Gerrit Holl	<gerrit.holl@ltu.se>

	* arts-1-14-158

	* doc/uguide/development.tex: Adapted
	- Fixed LaTeX syntax for three cross-references.

2011-02-24  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-14-157

	* src/methods.cc: Several spelling and other errors for doc of
	sensor_responsePolarisation.

	* src/rte.cc (apply_y_unit,apply_y_unit2): A typo in the arts
	article had ended up in the conversion for Q, U and V (but still
	giving almost correct result!)

2011-02-23  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-14-156

	* doc/uguide/development.tex: Update the build system part for CMake.

2011-02-17  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-14-155

	* src/mystring.h (insert_substr), src/wsv_aux.h (WsvRecord),
	gridded_fields.h (GriddedField{,1,2,3,4})

	Pass const strings by reference.

	* src/doit.{h,cc} (cloud_fieldsCalc)

	Use Const...View instead of const ...View.

	* src/math_funcs.cc (lgamma): Reduce variable scope.

	* src/messages.h (valid, sufficient_priority_*, Print):

	Make functions and priority parameter const.

	* src/methods_aux.cc (format_paragraph):

	Remove unused variable lastreturn.

	* src/rng.{h,cc}: Make function showseed const.

	* src/montecarlo.{h,cc} (cloudy_rt_vars_at_gp): Pass gp_* by reference.

	* src/m_general.h, src/workspace_ng.h: Remove typedefs for structs.

2011-02-14  Stefan Buehler  <sbuehler(at)ltu.se>

	* arts-1-14-154

	* src/workspace.cc (abs_coef): Improved documentation, in response
	to Patrick question.

2011-02-11  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-14-153

	* src/jacobian.cc (check_retrieval_grids): Relaxed check by
	considering the standard half spacing extrapolation allowed.
	(Numerical problems caused that I could not set the retrieval grid
	to the corresponding atmospheric grid!)

	* src/m_jacobian.cc (jacobianAddAbsSpecies)
	(jacobianAddTemperature): Added checks to enforce that retrieval
	of temperature and number densities are not mixed.

	* src/m_atmosphere.cc (atm_checkedCalc): Removed cloudbox part.
	The logocal point to call this method is directly after the
	atmosphere is defined. Partly as z_fieldFromHSE demands atm_checked
	(which is required to avoid repeating heavy checks for iterative
	t- retrievals). The dependency on the cloudbox was thusunlucky. IN
	addition, the check for the cloudbox was in complete, it did not
	consider pnd_field. Hence, there should rather be a cloudbox_check!

	* src/m_rte.cc (yCalc): Added check of cloudbox (the part now not
	done in atm_checkCalc).

2011-02-11  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-14-152

	* src/gridded_fields.{h,cc} (GriddedField::get_grid_size):

	Move implementation to header file. Dependent functions of member
	functions which are defined in the header file should be implemented
	in the header as well.

	* src/CMakeLists.txt:

	Remove ALL header files from targets. Header file dependencies are
	automatically determined by CMake. Exceptions are auto_md.h and
	auto_workspace.h. If they don't exist yet, only an explicit dependency
	triggers the build process for them.

	Remove token.cc, gridded_fields.cc, agendas.cc, and arts_omp.cc from
	make_auto_md_h and make_auto_md_cc.

	Remove binio.{h,cc} from make_auto_md_h.

	Remove arts_omp.cc from make_auto_workspace_h.

	Remove agendas.cc from artscore library.

	Add agendas.cc to methods library.

2011-02-10  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-14-151

	* src/test_matpack.cc: Include cstdlib to make gcc happy.

2011-02-10  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-14-150

	* Unify naming of all enums and their values.

	* Remove typedefs for enums, not needed in C++.

	* src/optproperties.{h,cc}, src/montecarlo.cc, src/m_cloudbox.cc,
	src/cloudbox.cc, src/xml_io_compound_types.cc, doc/uguide/clouds.tex:

	Change typedef enum PType to enum ParticleType.

	PTYPE_GENERAL    -> PARTICLE_TYPE_GENERAL
	PTYPE_MACROS_ISO -> PARTICLE_TYPE_MACROS_ISO
	PTYPE_HORIZ_AL   -> PARTICLE_TYPE_HORIZ_AL
	PTYPE_SPHERICAL  -> PARTICLE_TYPE_SPHERICAL

	* src/m_montecarlo.cc, src/mc_antenna.{h,cc}:

	Change typedef enum AType to enum AntennaType.

	ATYPE_PENCIL_BEAM -> ANTENNA_TYPE_PENCIL_BEAM
	ATYPE_GAUSSIAN    -> ANTENNA_TYPE_GAUSSIAN
	ATYPE_LOOKUP      -> ANTENNA_TYPE_LOOKUP

	* src/gridded_fields.{h,cc}, src/xml_io_compound_types.cc:

	Change typedef enum GridType to GridType.

	GRIDTYPE_STRING  -> GRID_TYPE_STRING
	GRIDTYPE_NUMERIC -> GRID_TYPE_NUMERIC

	* src/xml_io.h:

	Change typedef enum FileType to enum FileType.
	Change typedef enum NumericType to enum NumericType.
	Change typedef enum EndianType to enum EndianType.

	* src/test_matpack.cc: Added another test case.

	* ChangeLog: Fix typo in previous commit.

2011-02-10  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-14-149

	* src/m_montecarlo.cc, src/montecarlo.cc:

	Move workspace method implementation of pha_matExtractManually to
	m_montecarlo.cc.

	* src/montecarlo.h:

	Remove declaration of non-existent function Cloudbox_ppathCalc.

	* src/montecarlo.cc, src/montecarlo.h:

	Cleanup function arguments. Don't pass atomic types as references if
	not necessary. Change all const VectorViews to ConstVectorViews.

2011-02-09  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-14-148

	* src/matpackI.h, src/agenda_record.h, src/matpackIV.h,
	src/matpackVII.h, src/methods.h, src/agenda_class.h, src/matpackV.h,
	src/m_abs_o2_models.cc, src/sourcetext.h, src/absorption.h,
	src/matpackIII.h, src/matpackVI.h, src/gridded_fields.h,
	src/matpackII.h, src/exceptions.h:

	Killed some semicolons.

2011-02-09  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-14-147

	* src/libmicrohttpd/response.c, src/libmicrohttpd/connection.c,

	Changed several int to ssize_t and size_t to allow safer type
	conversions.

	* src/libmicrohttpd/daemon.c (MHD_select):

	Add explicit cast to suseconds_t.

	* src/libmicrohttpd/platform.h:

	Include config_global.h instead of config.h.

	* src/cloudbox.{h,cc} (barometric_heightformula):

	Pass Numerics by value, not reference. Reindent header file.

	* src/workspace.cc:

	Replaced illegal character \% with % in fos_angles documentation.

2011-02-08  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-14-146

	* src/xml_io.cc (ArtsXMLTag::read_from_stream):

	Fix bug reported by Patrick and Ole-Martin. A missing " in an attribute
	led to an endless loop instead of a proper error message.

	(ArtsXMLTag::check_attribute): Cosmetics.

2011-02-07  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-14-145

	* src/CMakeLists.txt:

	Clean up targets. Merge species_data, partition_function_data,
	continua, docserver, and gzstream into artscore.

	Add methods_aux.cc to libmethods and remove it from other targets.

	Link make_auto_workspace_h to libmethods and remove groups.cc from
	source list.

	* src/montecarlo.{h,cc}

	Pass all *Views by value instead of reference.

	FIXME: How to treat constant Views correctly? (const VectorView or
	ConstVectorView or const ConstVectorView)

	* src/docserver.{h,cc}

	Add ifdef ENABLE_DOCSERVER around everything.

	* src/nc_io_compound_types.cc, src/nc_io_types.h, src/nc_io.h,
	src/nc_io_basic_types.cc, src/nc_io_array_types.cc, src/nc_io.cc,
	src/test_sorting.cc, src/arts_omp.h, src/m_general.h, src/m_nc.h,
	src/main.cc, src/test_legendre.cc, 

	Include arts.h instead of config.h directly.

	* src/iotraits.h, src/sstream.h, src/matpack.h, src/arts.h:

	Include config_global.h instead of config.h directly.

	* src/rng.cc: Move all includes to the beginning of the file.

	* src/config_global.h: Added.

2011-02-07  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-14-144

	* src/methods.cc: Added comments around limitations of the
	analytical approach. (But now much more useful than in arts-1.)

	* src/m_rte.cc (iyEmissionStandardClearsky): Added term to
	t-jacobian, to handle "local effect" of HSE. 

	Higher Stokes and BL not updated accordingly (added run time error
	if trying to use those options.)

	* tests/GroundBased/TestGbased.arts: HSE+analytical now selected
	for t-jacobian.

	* src/m_jacobian.cc (jacobianCalcTemperature): Now also handling HSE.

2011-02-04  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-14-143

	* src/m_atmosphere.cc (z_fieldFromHSE): Created. Follows the
	implementation in atmlab and gives basically identical results
	(differences on mm level).

2011-02-03  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-14-142

	* Main change is that lat_grid and lon_grid now can have length 1
	even when these dimensions not are "active". This as in some cases
	a latitude is needed even for 1D etc, and is more consistent with
	other variables where "length 1" dimensions can have a specified
	value.

	* src/m_abs.cc: Removed about 900 lines of inactive code (inside
	#if 0), with functions from arts1. Such as hseSet,
	hseSetFromLatitude, hseCalc.

	* src/methods.cc: Example in description of VectorSet was in old
	format.

	Start to introduce calculation of hydrostatic equilibrium:
	---
	* src/workspace.cc: Added p_hse and z_hse_accuracy.

	* src/m_abs.cc: Removed some methods from arts-1 not used, such as
	hseSet.

	* src/m_atmosphere.cc (z_fieldFromHSE): Started. So far just
	inactive, old, code from hseCalc.

	Changes below to allow lat_grid and lon_grid to have length 1 even
	when not used, and some cleaning:
	---
	* src/m_ppath.cc (rte_posAddGeoidWGS84, sensor_posAddGeoidWGS84): 
	Removed. Probably never used. In fact, not useful for 2D and 3D.
	And for 1D *sensor_posAddRgeoid* suffices.

	* src/m_surface.cc (r_geoidWGS84): Removed lat_1d and 
	meridian_angle_1d. For 1D, atitude is now taken from lat_grid and
	the meridian angle is hard-coded to 0 (ie. N-S direction).

	* src/m_atmosphere.cc (AtmosphereSet2D): 
	(AtmosphereSet3D): Removed lat_1d and meridian_angle_1d. 

	* src/m_cloudbox.cc (pnd_fieldZero): 3D field now triggered when
	lat_grid.nelem() > 1 (instead of > 0).

	* src/check_input.cc (chk_atm_grids): Changed length tests
	according to change below.

	* src/workspace.cc: Changed text for lat_grid and lon_grid,
	explaining that (now) a length of 1 is allowed for 1D and 1/2D,
	respectively.
	Removed lat_1d and meridian_angle_1d.

2011-02-03  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-14-141

	* src/m_rte.cc: Added z_field in several places.

	* src/m_jacobian.cc: Added z_field in several places.

	* src/m_fos.cc (iyFOS): Adopted call of iy_clearsky_agenda.

	* src/agendas.cc (define_agenda_data): Added z_field as input to
	iy_clearsky_agenda.

2011-02-02  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-14-140

	* tests/GroundBased/TestGbased.arts: Moved test of temperature
	jacobian to this file.

	* tests/ClearSky/TestClearSky.arts: Removed temperature part of
	jacobian.

2011-02-02  Daniel Kreyling  <daniel.kreyling@physik.uni-muenchen.de>

	* arts-1-14-139

	All following changes add or create new functions, WSMs or WSVs only.
	None of the previously exisiting methods has been changed.
	Since documentation in not yet completed, I recommend not to use it right now.

	* src/cloudbox.cc (chk_hydromet_field):NEW. Check whether hydromet grid size
	is equal to atmospheric grid size and if hydromet profile is zero (no cloud)
	in each grid point, then it returns true.
	* src/cloudbox.cc (chk_scattering_data):NEW. Compare nelem of ArrayOfScatteringMetaData
	and ArrayOfSingleScatteringData. more checks needed!
	* src/cloudbox.cc (chk_scattering_meta_data)NEW. more checks needed
	* src/cloudbox.cc (barometric_heightformula):NEW. barometric heightformula for NONE 
	isothermal atmosphere. Return Numeric
	* src/cloudbox.cc (IWCtopnd_MH97):NEW. Calculates dN/dDm on one atmospheric grid
	point per particle type using MH97. Return Numeric.
	* src/cloudbox.cc (LWCtopnd): NEW. Calculates dN/dr on one atmospheric grid 
	point per liquid water particle type. Return Numeric.
	* src/cloudbox.cc (LWCtopnd2):NEW. Calculates dN/dr on one atmospheric grid 
	point per liquid water particle type. Alternative calc way. Return Numeric. 
	* src/cloudbox.cc (trapezoid_integrate): NEW. does the trapezoid integration
	for the function y = f(x). 
	* src/cloudbox.cc (chk_pndsum): NEW. Check sum of vector pnd against total XWC.

	* src/cloudbox.h: see cloudbox.cc

	* src/optproperties.cc: added ostream& operator for ScatteringMetaData and 
	ArrayOfScatteringMetaData.
	* src/optproperties.h: added ScatteringMetaData structure

	* src/parser.cc: doku eddited

	* src/xml_io_types.h: ScatteringMetaData added
	* src/xml_io_instantiation.h: ScatteringMetaData and
	ArrayOfScatteringMetaData added.
	* src/xml_io_array_types.cc: XML reading and writing routines for
	ArrayOfScatteringMetaData
	* src/xml_io_compound_types.cc: XML reading and writing routines for
	ScatteringMetaData

	* src/math_funcs.h: see math_func.cc
	* src/math_funcs.cc (gamma): NEW. Returns gamma function of real argument 'x'.
	Returns error msg if argument is a negative integer or 0, or use lgamma
	function if argument exceeds 32.0. 
	* src/math_funcs.cc (lgamma): NEW. Returns ln of gamma function for real 
	argument 'x'.

	* src/m_atmosphere.cc (atm_fields_compactFromMatrixVMRonly): NEW. Generating
	atm_fields_compact without hydrometeor data. Needed for absorption calc.
	* src/m_atmosphere.cc (batch_atm_fields_compactFromArrayOfMatrixHydromet): NEW.
	Generating batch_atm_hydromet_fields_compact (amtmosphere including 
	hydromet data) and batch_atm_fields_compact (without hydromet data 
	for absorption calc.)
	* src/m_atmosphere.cc (AtmFieldsFromCompactHydromet): NEW. Extracting atmospheric
	fields including hydromet_field.

	* src/m_cloudbox.cc (cloudboxSetAutomatically): NEW. Setting cloudbox_limits
	in correspondence to actual extend of cloud, derived from hydromet_field.
	If hydromet_field is empty (only zeros) cloudbox is set off!
	* src/m_cloudbox.cc (Hydromet_cleanup): NEW. Replacing hydromet values smaller
	than hydromet_threshold by zero.
	* src/m_cloudbox.cc (ParticleSpeciesInit): NEW. initializing part_species
	* src/m_cloudbox.cc (ParticleSpeciesSet): NEW. filling ArrayOfString part_species
	* src/m_cloudbox.cc (ParticleTypeAddAllMeta): NEW. Reading SingleScatteringData and 
	ScatteringMetaData from corresponding arrays provided by user.
	* src/m_cloudbox.cc (pnd_fieldSetup): NEW. Doing the actual pnd calculation, using
	MH97 or liquid particle size distributions.

	* src/groups.cc: added ScatteringMetaData and ArrayOfScatteringMetaData.

	* src/methods.cc: added all new WSMs, Documentation is partially incomplete.

	* src/workspace.cc: added 	batch_atm_hydromet_fields_compact
					hydromet_field
					hydromet_threshold
					part_species
					scat_data_meta
					scat_data_meta_array
				Documentation is partially incomplete.

2011-02-02  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-14-138

	* src/methods.cc:

	Add cloudbox_on as input to CloudboxGetIncoming,
	CloudboxGetIncoming1DAtm, DoitInit, and ScatteringDoit.

	* src/m_doit.cc (CloudboxGetIncoming, CloudboxGetIncoming1DAtm,
	DoitInit, ScatteringDoit):

	Don't do anything in these methods if cloudbox_on if false.

	Output a message to out0 in DoitInit that the Doit calculation will be
	skipped if no cloudbox is defined.

	These changes avoid Doit from failing if no cloudbox is defined. The
	Doit calculation will simply be skipped.
	Mostly for Daniel at the moment, so he can dynamically turn the
	cloudbox on and off from one batch job to the next.


2011-01-28  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-14-137

	* src/m_rte.cc (iyBeerLambertStandardCloudbox): 
	* src/m_fos.cc (iyFOS): Usage of temperorary variables when
	calling opt_propCalc removed.	

	* src/montecarlo.cc (opt_propCalc): I could not get slicing to
	work as input to this function. The two first arguments were
	defined as MatrixView& and VectorView&, respectively. Don't think
	& shall be used togetehr with "Views". Anyhow, now slicing works
	and checks run OK.

2011-01-28  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-14-136

	* src/montecarlo.cc (opt_propCalc): Changed a runtime error to
	assert check, and added asserts for ext_mat_mono and abs_vec_mono.

2011-01-28  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-14-135

	* src/m_fos.cc (iyFOS): Updated to treat the quantities as other
	RT methods (as started by 1-14-131). Required extinsive changes.
	Fairly well tested (by qarts_scattering_demo). New version appears
	to give somewhat better fit with DOIT-1D for "high" tangent
	altitudes, but could just be a coincidence. 

	* src/m_rte.cc (iyBeerLambertStandardCloudbox): Updated, using
	a stripped version of code in iyFOS.

2011-01-28  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-14-134

	* src/mystring.h (split): Add missing const.

2011-01-28  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-14-133

	* src/mystring.h: Add a split function to our string class.

2011-01-26  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-14-132

	* Run "make check" but missed to see that it failed (too slow on
	the laptop). For TestAMSUB I got differences to the values in
	testall.py up to 0.04K. So slightly bigger than the max of 0.027K
	below.

	* tests/testall.py: New reference values for AMSUB and MHS
	(the values I got here on the latop). Relaxed check for MHS to
	0.01 (from 0.005).

2011-01-26  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-14-131

	* Discovered that the RT was not done exactly as I wrote in the
	paper. Somewhat embarrassing! For a reason that I don't remember,
	P, T and VMRs were averaged to the middle point of the ppath
	steps, instead of calculating absorption and emission source term
	at ppath points and take average over the step. Not clear which
	appraoch that gives the best accuracy, but the later is better
	with respect to interpolation of abs. table and the analytical
	expressions for Jacobians. So now changed. 

	This causes some change in simulated Tbs. I have run all test in
	both arts and atmlab. Where I have compared results, the
	difference between old and new Tbs are mainly inside 0.01K. The
	maximum difference I have seen is 0.027K. This was found in the
	ClearSky test case, for a Tb of 112K. Limb sounding and Tbs around
	100K should maximise the sensitivity to this change, so this
	should be something like a worst case.

	FOS and iyBeerLambertStandardCloudbox not yet updated.
	
	* src/m_rte.cc (iyEmissionStandardClearsky): 
	(iyBeerLambertStandardClearsky): 
	(iyEmissionStandardClearskyBasic): Adopted to changes below.

	* src/rte.cc (get_step_vars_for_standardRT): The emission source
	term is now calculated at the path step points (not for the middle
	point, with average temperature).
	Also absorption is now calculated at the path points. (The size of
	the variable holding the absorption was not correct.)

2011-01-03  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-14-130

	* src/check_input.cc (chk_cloudbox): Index inside cloudbox_limits
	for lat was used for lon at two places.

2010-12-16  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-14-129

	* src/montecarlo.cc (pha_matExtractManually): A small function for
	extracting the phase matrix (for 1 frequency and one angle
	combination) in a manually manner (for testing and plotting).
	It iuses the MC function for setting up the phase matrix
	(pha_mat_singleCalc).

2010-12-15  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-14-128

	* src/m_rte.cc (get_iy_of_background): It is now made sure that
	there is a 0.1 degree margin between the "horison" and the za for
	calculation of downwelling radiation. This including surface tilt.
	This to avoid getting repeated reflections due to numerical
	problems (problem identified by Jana and Oliver).

	* src/ppath.cc (surfacetilt): New function. Basically an interface
	to some internal (atmosphere_dim specific) functions.

2010-12-14  Stefan Buehler  <sbuehler(at)ltu.se>

	* arts-1-14-127

	* includes/continua.arts (H2O-CP98, liquidcloud-MPM93)
	(icecloud-MPM93, rain-MPM93): Added entries for these models,
	which were missing.

2010-12-07  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-14-126

	* src/check_input.cc (chk_cloudbox): Realised that checks added in
	last commit were too simple.
	1. 3D cases where lat_grid reaches +-90, or lon_grid wraps around
	the globe must be excluded.
	2. The lon margin must considered the latitude (as 1 lon degree is
	a smaller distance when abs(lat) increases.
	These aspects are now considered.

2010-12-07  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-14-125

	* src/m_montecarlo.cc (MCGeneral): Added atm_checked to this WSM.
	That is, atm_checkedCalc must now be run before calling this
	method. Also added cloudbox_on (to make sure that all
	checks inside atm_checkedCalc actually were performed).

	* src/m_rte.cc (iyMC): Added atm_checked to this WSM (to pass on
	to MCGeneral).

	* src/check_input.cc (chk_cloudbox): Added check that the distance
	between the cloudbox and lat and lon grid edges is at least 20
	deg. (The min distance is a constant and can easily be changed.)

	* tests/MonteCarlo/lon_grid.xml: Edited file to move end points
	from +-16 to +-25 deg. To fulfill criterion above.

	* tests/MonteCarlo/lat_grid.xml: As for lon_grid.xml.

2010-12-03  Jana Mendrok <jana.mendrok@ltu.se>

	* arts-1-14-124

	* src/doit.cc (cloud_ppath_update1D_noseq): allow cloudbox@surface for
	non-sequential 1D case

	* src/doit.h: switch on passing of surface_prop_agenda to
	cloud_ppath_update1D_noseq

	* src/m_doit.cc (doit_i_fieldUpdate1D): pass surface agenda. avoid
	ppath_update for upwelling radiation at surface (that anyway shouldn't
	change, i.e. update not needed), since that causes problems when
	gridpos2gridrange returns gp.idx=-1.

	* ChangeLog: corrected/saved last entry

2010-12-03  Jana Mendrok <jana.mendrok@ltu.se>

	* arts-1-14-123

	* src/doit.cc (cloud_RT_surface): bugfix. use actual f_index (instead of
	f_index=0) when assigning calculated surface contribution (iy) to
	cloudbox intensity field (doit_i_field) at lowest cloudbox level (in
	case this is at surface level). seems to fix the doit issues when
	cloubbox lower limit is at surface.
	however, cloudbox@surface is currently only implemented for Seq1D (no
	non-Seq, no 3D).

2010-11-18  Stefan Buehler  <sbuehler(at)ltu.se>

	* arts-1-14-122

	* includes/continua.arts (O2-PWR98): Added, this was missing here
	for some reason.

2010-11-18  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-14-122

	* Grid positions produced in the ppath part are now consistent
	with what the gridpos function returns. That is, a fd of 0 is
	preferred before fd=1 (except for upper end point).
	(This part worked, but was changed to get internal consistency.)
	For interpolation of cloudbox fields, the grid positions are
	shifted and problems occur. This part caused a bug for DOIT (now
	fixed). After the change described above, the grid positions at
	the upper edge of the cloudbox (p, lat or lon) has to be
	shifted (change from fd=0 to fd=1). I have tried to fix this for
	DOIT but I could have missed some part and keep an eye on this.

	* src/m_fos.cc: Clearsky calculations was forced even inside the
	cloudbox. A test commited by mistake?

	* src/special_interp.cc (fix_gridpos_at_boundary): Removed.
	Replaced by gridpos_upperend_check that should be more efficient.

	* src/montecarlo.cc (cloud_atm_vars_by_gp): Now using
	gridpos_upperend_check instead of fix_gridpos_at_boundary.
	This made two input variables obselete and this had to be
	propagated upwards through the function calls.

	* src/doit.cc (cloud_ppath_update3D): Now using
	gridpos_upperend_check instead of fix_gridpos_at_boundary.

	* src/interpolation.cc (gridpos_force_end_fd): Now taking length
	of grid as input and fd =0 is first choice. This in order to be
	consistent with the gridpos function.

	(gridpos_upperend_check): This was a local function before. Later
	discovered that the xisting fix_gridpos_at_boundary makes more or
	less the same.

	(is_gridpos_at_index_i): Adopted to change above.

	* src/ppath.cc (interpolate_raytracing_points): Removed call of
	gridpos_force_end_fd. This is repeated later in the chain of functions.

	(ppath_end_Xd): Adopted call of gridpos_force_end_fd.

2010-11-17  Daniel Kreyling  <daniel.kreyling@physik.uni-muenchen.de>

	* arts-1-14-121

	* src/methods.cc

	Editted ParticleTypeAddAll description, moved WSM SpeciesSet to
	correct alphabetic postion.

2010-11-17  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-14-120

	* src/m_abs.cc, src/nc_io.cc:

	Remove NC_FORMAT_NETCDF4 from nc_create. It's not supposed to be here
	and breaks with newer versions of libnetcdf.

2010-11-15  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-14-119

	* src/agendas.cc: Changed text for abs_scalar_gas_agenda, to sync
	with article manuscript.

2010-11-11  Jana Mendrok <jana.mendrok@ltu.se>

	* arts-1-14-118

	* src/interpolation.cc (gridpos): documentation of extrapolation
	ability rephrased less ambiguous (hopefully).

	* src/methods.cc: correct documentation of cloudboxSetManuallyAltitude
	(z1<z2).

	* src/workspace.cc: correct documentation of doit_za_grid_size (it's
	just a number (of vector elements), not the vector).

	* src/cloudbox.cc (chk_single_scattering_data): allow higher
	(unearthly, but e.g. venusian) T in scat_data.T_grid.

2010-11-10  Oliver Lemke  <olemke@core-dump.info>

	* src/docserver:

	Don't use ostringstream in places where a common string is sufficient.

	Remove the word "server" from page titles.

2010-11-10  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-14-117

	* src/docserver.cc: Generate proper page titles.

	* src/workspace.cc: Rephrase the documentation for ppath_step.

2010-11-09  Claudia Emde  <claudia.emde@lmu.de>

	* arts-1-14-116

	* src/m_conversion.h: Fixed *FrequencyFromWavelength*, which for
	Vectors worked only if the length of the output vector was set
	before the method was executed.

2010-11-06  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-14-115

	* Jana: These two new methods make the operations you asked about
	in the last emails. Should have been implemented earlier!
	Can maybe a bit tricky to use them inside the batch agenda. I have
	not performed any tests. So please check for some case that the
	generated 3D data are OK.
	
	* src/m_cloudbox.cc (pnd_fieldExpand1D): New WSM.

	* src/m_atmosphere.cc (AtmFieldsExpand1D): New WSM. 

2010-11-06  Jana Mendrok <jana.mendrok@ltu.se>

	* arts-1-14-114

	* ChangeLog: corrected date of last entry

	* src/montecarlo.cc (pha_mat_singleExtract, opt_propExtract),
	src/mc_interp.cc (interp_scat_angle_temperature): some fixes to allow
	use of optprops with T_grid.nelem==1 in MC for p20, add error message
	for p30.

2010-11-05  Jana Mendrok <jana.mendrok@ltu.se>

	* arts-1-14-113

	* src/optproperties.cc (abs_vecTransform, ext_matTransform): fixed
	bug here that was already fixed by stefan in arts-1-14-35 in function
	pha_matTransform (for explanation see there).

2010-11-04  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-14-112
	
	* src/docserver.cc: Add doxygen comments to all functions.

2010-11-02  Claudia Emde  <claudia.emde@lmu.de>

	* arts-1-14-111
	
	* src/m_optproperties.cc: Included runtime
	error if the ambient temperature of the cloud is not included in
	the scattering data file. 

	Actually there were checks which have been commented out because we
	wanted to allow extrapolation of the scattering data which is no
	longer possible with the current version of the interpolation
	routines.     

2010-11-02  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-14-110

	* src/docserver.cc:

	Remove spurious </td></tr> on group doc pages.

	Add functions to escape html special chars.

	Don't try to be smart and rearrange linebreaks in the descriptions.
	Put them in a <pre></pre> instead to keep the original formatting
	intact.

	* src/agendas.cc:

	Cleanup descriptions to ensure they have consistently one linebreak at
	the end.

2010-11-01  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-14-109

	* src/docserver.cc: Use solely CSS for table layout. Add title to head.

2010-11-01  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-14-108

	* autogen.sh, configure.in, reconf, README.legacy, m4/,
	src/Makefile.am, tests/Makefile.am, aii/Makefile.am,
	doc/uguide/Figs/Makefile.am, doc/uguide/Makefile.am, doc/Makefile.am,
	doc/doxygen/Makefile.am, includes/amsu/Makefile.am,
	includes/hirs/Makefile.am, includes/mhs/Makefile.am,
	includes/odin/Makefile.am, includes/Makefile.am,
	3rdparty/disort1.2/Makefile.am, 3rdparty/Makefile.am, Makefile.am:

	Remove old build system files.

2010-10-29  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-14-107

	* Unit conversion and extraction of polarisation components
	appear to be OK. 

	* src/physics_funcs.cc (dinvplanckdI): A frequency term was missing.

	* src/m_sensor.cc (sensor_responsePolarisation): There were some
	things that had to be fixed. Seems to work now.

	* src/methods.cc: Removed some outdated text for
	sensor_responseInit. Added a clarification (about y_unit) for
	sensor_responsePolarisation.

	* src/rte.cc (apply_y_unit): Had to change loop order for
	polarisation components for PlanckTB. I  needs to in radiance for
	conversion of Q, U and V. A brightness temperature was instead
	used.

	(apply_y_unit2): As above.

2010-10-29  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-14-106

	* src/m_sensor.cc (sensor_responseBackend): New WSM. Code
	compiles, but no practical tests made.

2010-10-28  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-14-105

	* src/workspace.cc: Reintroduced sensor_pol, but defined
	differently. Moved definition of polarisation coding to this WSV
	(from y_pol).

2010-10-28  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-14-104

	* src/workspace.cc: Remove spurious \ in y_f description.

2010-10-28  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-14-103

	* Working on fixing last things when it comes to conversion to Tb
	and extraction of polarisations. All should be OK, but "under
	reconstruction".

	* src/m_rte.cc (iyb_calc): Introduced i_pol as local variable. If
	any kind of modified Stokes vector will be introduced, this must
	be a WSV.

	(y_unitApply): Method rearranged and adopted to changes in
	apply_y_unit.

	* src/rte.cc (apply_y_unit): Added input i_pol. For Planck-BT,
	Stokes elements 2-4 now mapped as (Binv(I+Q)-Binv(I-Q))/2.
	Mapping for Iv and similar components included. Factor of 2
	difference for Tb values. Polished code.

	(apply_y_unit2): As above. Equations found in article.

	* src/physics_funcs.cc: Added type casting to double for all
	planck and RJ functions. Now using a and b constants in all
	functions. Should be OK with double hard-coded.

	(dinvplanckdI): New function. Calculates the derivative of
	inverse-Planck with respect to intensity.

2010-10-25  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-14-102

	* src/workspace.cc: Polished description of y_f and similar
	variables. Introduced a clear coding polarisation states. See y_pol.

	* src/m_sensor.cc (sensor_responseInit): mblock_za_grid was
	checked twice, instead of check of aa_grid.

2010-10-25  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-14-101

	* src/docserver.{h,cc}:

	Add baseurl support to allow integration into a webserver.
	On the SAT server, we use the apache proxy module to redirect
	all requests to http://www.sat.ltu.se/arts/docserver to the docserver.
	In this case arts has to be started with
	./arts -S -B /arts/docserver so it can preceed all links it generates
	with the proper baseurl.

	Output arts version in footer.

	* src/main.cc, src/parameters.{h,cc}:

	Add option --baseurl.

2010-10-15  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-14-100

	* src/workspace.cc: Removed some text for y_unit. 

	* src/methods.cc: Added the text for yCalc. 

2010-10-15  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-14-100

	* src/docserver.cc (ds_list_groups, ds_list_methods):

	Properly balance the length of the two table columns.

2010-10-15  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-14-99

	* src/parser.cc (ArtsParser::parse_agenda):

	Move output of include file path from out3 to out2.

2010-10-15  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-14-98

	* src/rte.cc (trans_step_std): New. (rte_step_std, but just doing
	Beer-Lambert)

	* src/physics_funcs.cc (planck): Now no calculations if t=0.
	This to make it possible to set emission_agenda and
	surface_emission to give zero. 

	* src/check_input.cc (chk_if_over_0): Renamed to chk_not_negative.
	Accordingly, zero is now allowed.

	* src/m_rte.cc (iyBeerLambertStandardClearsky): Yet a new name!
	The method is an implementation of the Beer-Lalmbert law. It
	returns rather a spectrum, than a transmission. So this name
	should be better (but final?). 

	* src/m_rte.cc (iyBeerLambertStandardCloudbox): Renamed in the
	same way. Finished (but just some simple tests made).

	* src/methods.cc: Documentation for the two methods above
	improved. 
	
2010-10-15  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-14-97

	* src/docserver.cc: Output the url also in daemon mode.

2010-10-15  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-14-96

	* src/docserver.cc: Fix content-type for stylesheet.

2010-10-15  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-14-95

	* src/docserver.{cc,h}, src/parameters.{cc,h}, src/main.cc:

	Add docserver daemon support. Use -S instead of -s to start the
	docserver in the background.

	* src/methods.cc:

	Fix order of GIN_DEFAULT and GIN_DESC for FrequencyFromWavelength.

2010-10-14  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-14-94

	* src/m_rte.cc (iyTransmissionStandardClearsky): Changed to
	instead calculate transmission. So name method name changed (Tau
	-> Transmission). And now using iy_space_agenda. So basically
	iyEmissionStandardClearskym, with emission term removed

	(iyTransmissionStandardCloudbox): Started on this method.

	* src/ppath.cc (ppath_start_stepping): Removed an assert for 1D,
	checking if inside the cloudbox when this is flagged. This has
	worked for a long time, but now gut stuck here due to numerical
	inaccuarcy (1e-10 m outside). The ppath functions are robust to
	such problems.

	* src/m_rte.cc (iyEmissionStandardClearsky): Failed for iy_aux
	when np=1. Now total_tau set for np=1 to handle this.

2010-10-13  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-14-93

	* src/m_rte.cc (iyTauStandardClearskyBasic): Started on this
	method. Code not active.

2010-10-11  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-14-92

	* src/ppath.cc: Last fix not 100% OK. Changed way gridpos are
	compared.

2010-10-11  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-14-91

	* src/ppath.cc (ppath_calc): Changed end tests for ppaths inside
	the cloudbox. Bengt reported incorrect results for FOS. Here ppath
	calculations starting at the cloudbox boundary are made, going
	inwards. Numerical problems made that the start point was taken as
	the exit points. Now also direction of ppath considered.

2010-10-08  Stefan Buehler  <sbuehler(at)ltu.se>

	* arts-1-14-90

	* This is the arts version described in the absorption lookup
	table paper draft.

	* src/m_abs_lookup.cc (abs_lookupSetupWide): Changed temperature
	grid spacing from 100 K to 20 K. (Crucial, with too large T
	spacing the results are poor.)
	Changed H2O reference profile from 1e-6 to 1e-3. (Does not really
	make a difference, since the grid points are in fractional units,
	and the reference profile itself is not included.)
	The H2O grid spacing is still 1e99, so there will be exactly as
	many points as required by the interpolation order.

	* src/methods.cc (abs_lookupSetupBatch): Updated documentation.
	(abs_lookupSetupWide): Updated default value for h2o_max. Also
	updated documentation.

2010-10-08  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-14-89

	* src/docserver.cc: Fix nbsp in navigation.

2010-10-08  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-14-88

	* NEW FEATURE: ARTS built-in documentation server. It provides the
	functionality of accessing the built-in documentation directly from
	a web browser.

	Run 'arts -s' and point your browser to the indicated address.

	* src/docserver.{h,cc}: New docserver implementation.

	* README, src/main.cc, src/parameters.{h,cc}, CMakeLists.txt,
	config.h.cmake, src/CMakeLists.txt:

	Add docserver support.

	* src/libmicrohttpd/: Micro http server.

	* src/messages.h: Remove actual_thread_index variable.

	* src/rng.{cc,h}: Add Rng::force_seed function:

	* src/workspace.cc: Remove duplicate definition of jacobian variable.

2010-10-06  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-14-87

	* src/rng.cc (Rng::seed):

	Introduce a static vector that caches all previously used seeds. If
	the given seed was already used, increase it by 1 until we find an
	unused seed. If all possible seeds were already used previously, we
	empty the pool and start over.

2010-10-01  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-14-86

	* src/main.cc: Revert accidentally committed changes.

2010-10-01  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-14-85

	* src/gridded_fields.cc, src/gridded_fields.h:

	Make mdata public and name it data. This makes the code look cleaner
	when accessing the data member: pnd_field_raw.data(i, i_lat, j)
	                     instead of pnd_field_raw.data()(i, i_lat, j).

	* src/m_atmosphere.cc, src/m_sensor.cc, src/special_interp.cc,
	src/sensor.cc, src/gridded_fields.cc, src/m_cloudbox.cc,
	src/m_abs_lookup.cc, src/xml_io_compound_types.cc, src/cloudbox.cc,
	src/test_gridded_fields.cc, src/m_batch.cc src/gridded_fields.h,
	src/rng.cc, doc/uguide/gridded_fields.tex:

	Updated for GriddedField change.

	* src/rng.cc (Rng::seed):

	Remove extern statement as it is already present in messages.h.

	* src/m_doit.cc:

	Comment out parallelization for now as it doesn't work this way.

	* src/matpackII.cc: Include <iterator>.

2010-09-29  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-14-84

	* src/*.cc: Updated my email address in several files.

	* AUTHORS: Changed email address of me and Mattias Ekström.

2010-09-29  Stefan Buehler  <sbuehler(at)ltu.se>

	* arts-1-14-83

	* src/rng.cc (seed): Modified to add actual_thread_index to the
	seed. If you use OMP, you should not seed from the time directly,
	but from some variable (which you may have set from the time
	before, outside the parallel region), so that all threads get the
	*same* seed. Since then the thread index is added, the seeds are
	guaranteed to be different afterwards.
	Note that this will only work correctly if the random number
	generator (variable of type Rng) is private to each thread. (Which
	it will be automatically if it is defined as a local variable
	somewhere inside the parallel region, or in the function called
	from there.) I have no idea what happens if you try to share an
	Rng object between threads, but most likely it will go horribly
	wrong.
	After calling seed, I suggest you use showseed to get the actual
	seed and write it to out3:

	Rng rng;
	rng.seed(my_seed);
	ostringstream os;
	os << "Thread " << actual_thread_index << ", seed: " << rng.showseed();
	out3 << os;

	Note that I write to a string first. If you don't do that, the
	output will look scrambled, since the different threads will all
	start to write pieces of the message. 

	* src/messages.cc: Added global threadprivate variable
	"actual_tread_index". This is needed to add the thread number to
	the MC seed when seeding.

	* src/messages.h: Extern declare actual_thread_index together with
	in_main_agenda. 

	* src/main.cc (main): Initialize actual_thread_index, in the same
	place where also in_main_agenda is initialized.

	* src/m_abs_lookup.cc (abs_lookupTestAccMC): Added. This method
	tests the accuracy of the absorption lookup table (similar to
	(abs_lookupTestAccuracy), but using a Monte Carlo approach. 

	* src/methods.cc (abs_lookupTestAccMC): Added.

	* src/gas_abs_lookup.h (GasAbsLookup): Added the new method
	abs_lookupTestAccMC as friend.

	* src/workspace.cc (mc_seed): Typo correction in description.

	* tests/AMSU/TestAMSU_generic.arts: Added abs_lookupTestAccMC for
	lookup table testing. This is commented out, but can be
	uncommented if needed.

	* AUTHORS: Updated. The present state of this is a suggestion,
	still needs confirmation from Patrick.

	* THANKS: Removed, content is now included with AUTHORS file.

2010-09-28  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-14-82

	* src/gridded_fields.cc, src/gridded_fields.h:

	Change implementation from multiple inheritance to indirect
	inheritance. Data is stored in mdata member.

	* src/m_atmosphere.cc, src/cloudbox.cc, src/m_abs_lookup.cc,
	src/m_batch.cc, src/m_cloudbox.cc, src/m_sensor.cc,
	src/sensor.cc, src/special_interp.cc, src/test_gridded_fields.cc,
	src/xml_io_compound_types.cc, doc/uguide/gridded_fields.tex:

	Updated for changes in GriddedField implementation.

	* src/methods_aux.cc (MdRecord::MdRecord): Cache index of 'Any' type.

2010-09-24  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-14-81

	* src/gridded_fields.cc, src/xml_io_compound_types.cc:

	Testing a workaround to avoid a problem with some compilers when
	casting a GriddedFieldX into a Vector, Matrix or Tensor reference by
	using pointers instead.

	  (Tensor4&)gf  ->  *((Tensor4*)&gf);

	Seems to fix the segmentation fault for gcc 4.0 but not for clang.

2010-09-23  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-14-80

	* src/m_sensor.cc (AntennaConstantGaussian1D): Created. A function
	to simplify the task of including a Gaussian antenna pattern, for
	simple cases.

2010-09-22  Cory  <corzneffect@gmail.com>

	* arts-1-14-79

	* doc/uguide/references.bib: a few refs

	* doc/uguide/montecarlo.tex: More text! 

2010-09-09  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-14-78

	* src/m_atmosphere.cc (atm_checkedCalc): WSV vmr_field is now also
	considered. 

	* src/check_input.cc (chk_atm_field): Added check for 3D fields
	covering 360 degrees in longitude, that field at first and last
	lon-point are identical. Which that must be for a consistent
	description of the atmosphere. AUG can be wrong here. Will check
	that later.
	(chk_atm_surface): As above.

2010-09-08  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-14-77

	* src/ppath.cc (ppath_calc): Reintroduced check of high istep.
	Limit now set to 10000. Don't know why I removed it. Small
	overhead and better to get a clear error message. And better than
	filling the memory, if get stuck in an infinite loop.

2010-09-07  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-14-76

	* src/check_input.cc (chk_atm_grids): Added check of total
	coverage of lon_grid. Can not exceed 360 deg.

	* src/ppath.cc (plevel_slope_3d): A call of resolve_lon needed
	also here.
	(resolve_lon): lon+-360 in if-statements changed to +-180. The
	first theoretically correct, but numerical inaccuarcy makes the
	latter better.

2010-09-05  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-14-75

	* Careful revision of ppath calculations. An attempt to fix the
	last loopholes (and cleaning of code). 3D calculations are being
	tested (have made a matlab script running repeated calculations).

	* src/ppath.cc: General changes. Removed most of the out3
	messages. No practical use. Introduced PTILTMAX. Removed a lot of
	asserts, ones now done atm_checkedCalc.

	(ppath_start_3d): Now using PTILTMAX. Different way to check if a
	corner is hit, or numerical inaccuracy, that brings the ppath to a
	grid range limit (or outside) for more than for one dimension.

	(do_gridcell_3d): To handle numerical inaccuracy in a more simple
	way, ppath steps giving a length of basically 0 are now accepted.
	Longitudes outside +-180 were not handled correctly. This has
	appearently never been tested!

	(ppath_start_2d): As for 3D.
	(do_gridcell_2d): As for 3D, beside lon problem. 

	(ppath_start_stepping): Also not working for longitudes outside
	+-180.

	(resolve_lon): Did not always work for lon_grids covering >= 360.
	
	* src/interpolation.cc 
	(gridpos_force_end_fd): Now favouring fd = 1.
	(is_gridpos_at_index_i): Adopted to change above. Rather use fd[1]
	than fd[0] (to get 0==0 insead of 1==1).
	(gridpos_force_end_fd, gridpos2gridrange): As above.
	
2010-09-03  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-14-74

	* src/m_general.cc (Print): Added a space between each element of
	ArrayOfIndex.

	* src/special_interp.cc (interp_cloudfield_gp2itw): Re-arrangement
	of the code to avoid a second series of if-stamenets. No practical
	change.

	* src/m_fos.cc (iyFOS): Removed non-valid comment (in PND
	interpolation part).

2010-08-20  Jana Mendrok <jana.mendrok@ltu.se>

	* arts-1-14-73

	* includes/continua.arts (O2-MPM93): also added description for
	Liebe93 full O2 abs. model

2010-08-20  Stefan Buehler  <sbuehler(at)ltu.se>

	* arts-1-14-72

	* includes/continua.arts (H2O-MPM93): Added the description for
	this continuum model, which was missing for some reason.

	* src/continua.cc (xsec_continuum_tag): In documentation header,
	added tag H2O-ContMPM93, which was missing for some reason. (Note
	that this is not the same as the one for which the description was
	missing in continua.arts.)

2010-08-20  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-14-71

	* doc/doxygen/CMakeLists.txt:

	Properly insert the current version number into the doxygen config
	file.

	* cmake/scripts/update_doxyfile.cmake: Added.

2010-08-20  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-14-70

	* CMakeLists.txt:

	When creating an Xcode project, set the compiler name to Xcode instead
	of the auto-detected compiler name (e.g. gcc). The compiler and flags
	can be changed inside Xcode, so we can't determine at this point which
	info to display in 'arts -v'.

	* src/main.cc (main):

	Don't display the compiler flags determined by cmake when using Xcode.

	* cmake/modules/ArtsBuildTexDoc.cmake:

	Explicitly add the location of the makeindex binary to the PATH. If
	makeindex is called with a full path because it is not in a location
	that is already included in the PATH environment variable, execution
	will fail and break the build in Xcode.

2010-08-18  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-14-69

	* ChangeLog: Remove one incorrect line from last entry.

2010-08-18  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-14-68

	* src/getopt*: Renamed to arts_getopt*.

	* src/species_data.cc (define_basic_species_data):

	Remove unneeded extern declaration of species_data.

	* src/absorption.cc (define_species_map):

	Remove unneeded extern declaration of SpeciesMap.

	* src/CMakeLists.txt, src/parameters.cc:

	Use the system getopt by default, only fallback to our own if
	unavailable.

	* CMakeLists.txt:

	Remove -Wconversion. Newer compilers (LLVM/Clang) which actually
	detect such conversions properly (unlike GCC) will throw about 2000 of
	them. Not nice to have those implicit conversions (like from double to
	long and vice versa), but also not really fixable at the moment.

	Check for system getopt.h.

	Set warning flags properly for Clang as well.

	* config.h.cmake: Add HAVE_GETOPT_H.

	* src/parameters.cc: Adapt includes for new getopt treatment.

2010-08-14  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-14-67

	* src/m_surface.cc (surfaceLambertianSimple): New WSM.

	* doc/uguide/surface.tex (section{Specular reflections}): Added a
	sentence about the case Rv=Rh. The "r-matrix" is then strictly
	diagonal with all non-zero elements equal. 

2010-08-13  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-14-66

	* doc/uguide/surface.tex: Some polishing. Added some theory
	around BRDF and lambertian surfaces. 

	* doc/uguide/rte.tex: Rearrangement of existing text, some
	revision and new text. A complete, but partly thin, version.

	* doc/uguide/atmosphere.tex: Polished text about the cloud box.

	* doc/uguide/arts_user.tex: Updated name for Chalmers dept. It is now
	Earth and Space Science.

	* doc/uguide/arts_theory.tex: Removed FIXME for SB below
	Contributing authors. Updated name for Chalmers dept.

	* doc/uguide/arts_developer.tex: Removed FIXME for PE below
	Contributing authors. Updated name for Chalmers dept.

2010-08-03  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-14-65

	* src/m_abs.cc (WriteMolTau):

	Create a dummy function that throws a runtime error if ARTS is compiled
	without NetCDF support. Avoids linking error because of unresolved
	symbol WriteMolTau without NetCDF. Reported by Rene Bleisch.

	* src/m_nc.h: arts -> ARTS in error message.

2010-07-28  Cory  <corzneffect@gmail.com>

	* arts-1-14-64

	* doc/uguide/montecarlo.tex: More

2010-07-27  Claudia Emde  <claudia.emde@lmu.de>

	* arts-1-14-63

	* src/workspace.cc: Added units "W/(m^2 m sr)" (radiance per
	wavelength unit) and "W/(m^2 m-1 sr)" (radiance per wavenumber
	unit) as options for workspace variable *y_unit*, which are
	commonly used units for IR and VIS radiative transfer.

	* src/rte.cc (apply_y_unit, apply_y_unit2): Included conversion
	for above units.

2010-07-22  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-14-62

	* src/m_conversion.h:

	Add missing ifndef block to avoid redefinition of symbols.
	 
2010-07-21  Claudia Emde  <claudia.emde@lmu.de>

	* arts-1-14-61
	 
	* src/methods.cc: Added *FrequencyFromWavelength* and *p_gridFromAtmRaw*.
	
	* src/{m_conversion.h, CMakeLists.txt, make_auto_md_cc.cc}:
	Included the file m_conversion.h, which should include generic
	methods for unit conversions, e.g. wavelength to frequency (this
	is now included for Numeric and Vector). 
	
	* src/m_atmosphere.c (p_gridFromAtmRaw): Added this function, which 
	extracts the p_grid from the atmospheric raw data.

	* src/m_abs.cc (WriteMolTau): Initialization of tau (Matrix) was 
	missing - fixed.
	
	* src/workspace.cc: Corrected documentation of *abs_species*, it
	refered to *abs_speciesSet* which is now called *SpeciesSet*. 

2010-07-15  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-14-60

	* As of this version, CMakeLists.txt does not need to be manually
	updated with the current ARTS version number any longer.
	From now on, the version number is automatically extracted from the
	ChangeLog file.

	* cmake/modules/ArtsVersion.cmake:

	Helper functions to extract ARTS version number from ChangeLog.

	* CMakeLists.txt, cmake/scripts/update_auto_version_txt.cmake:

	Creates and updates the file auto_version.txt which contains the
	current ARTS version number.

	* cmake/scripts/update_auto_version_h.cmake, src/CMakeLists.txt:

	Create auto_version.h from auto_version.txt.

	* doc/uguide/CMakeLists.txt:

	Create auto_version.tex from auto_version.txt.

	* cmake/modules/cmake/modules/ArtsBuildTexDoc.cmake:

	Let stage1 targets depend on auto_version_tex.

	* cmake/scripts/update_index_html.cmake, doc/CMakeLists.txt:

	Create index.html from index.html.in and auto_version.txt.

	* CMakeLists.txt, README:

	Warnings are no longer treated as errors by default. Can be enabled
	with cmake -DWERROR. There are two reasons for this. First, different
	compilers behave very differently in issuing warnings. Treating them
	as errors often breaks the build unnecessarily. Second, with cmake
	most output is suppressed by default except for warnings and errors,
	so they stand out pretty clearly and are easily seen.

2010-07-14  Cory  <cory@pheonix>

	* arts-1-14-59

	* doc/uguide/montecarlo.tex: some more done.

2010-07-06  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-14-58
	
	* src/methods.cc: Extend Extract to handle Vector <- ArrayOfVector.

	* src/methods.cc, src/m_ignore.cc:

	Add workspace method Touch. Counterpart of Ignore. We have DoNothing
	already, but that needs the variable to do nothing with as input _and_
	ouput which is not possible in all cases.

	Add deprecation message to DoNothing.

	* tests/DOIT/TestDOIT.arts, tests/DISORT/TestDISORT.arts:

	Replace DoNothing with Ignore.

	* src/parser.cc (ArtsParser::parse_generic_output): Fix buggy if.

	* cmake/modules/ArtsBuildTexDoc.cmake:

	Change pdflatex interaction mode from batchmode to nonstopmode to
	avoid suppressing warnings.

	* src/nc_io_basic_types.cc: Remove unused line.

	* src/agenda_class.cc: Don't include wsv_aux.h anymore.

	* Here are some fixes to make ARTS compile with the current SVN
	version of the brand new LLVM/CLANG++ compiler.

	* CMakeLists.txt: Detect Clang.

	* src/CMakeLists.txt: Apply same special options for Clang as for GCC.

	* src/array.h:

	Change resize() -> this->resize(). Fixes compilation on latest LLVM.

	* src/wsv_aux.h, src/workspace_ng.h:

	Move PrintWsvNames from wsv_aux.h to workspace_ng.h.

	* src/agenda_class.cc: Don't include wsv_aux.h.

	* src/test_matpack.cc: Add some casts.

	* src/xml_io.cc, src/nc_io.cc:

	Move instantiation include to the end of the file.

2010-07-08  Claudia Emde  <claudia.emde@lmu.de>

	* arts-1-14-57	    
	
	* src/m_abs.cc,  src/methods.cc: Included a new method called
	WriteMolTau. It can be used to generate a so called
	molecular_tau_file which is required for high spectral resolution
	calculations with libRadtran. Having this method, it is now
	relatively easy to compare arts and libRadtran RT solvers or to
	use libRadtran cloud parameterizations in combination with arts
	calculated absorption coefficients. 

2010-07-06  Claudia Emde  <claudia.emde@lmu.de>

	* arts-1-14-56
	
	* src/nc_io_basic_types.cc, src/methods.cc, src/matpackV.{h,cc}: Included 
	  Tensor5 in ReadNetCDF ansd WriteNetCDF.

2010-07-05  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-14-55

	* You have to re-run 'cmake ..' in your build directory after updating
	to this version.

	* tests/CMakeLists.txt, cmake/modules/ArtsTestcases.cmake:

	Introduce a proper clean target.

	* tests/CMakeLists.txt:

	Fix a bug that prevented all but one test from the slow test from
	running.

	Change the allowed BT deviation from 0.001 K to 0.01 K.

	* tests/*/tropical*.xml: Move atmosphere data into shared directory.

	* tests/atmosphere_data/tropical*.xml:

	Add directory with atmosphere data used by several test cases.

	* tests/Makefile.am: remove -u option from cp for Mac compatibility.

	* tests/*/*.arts:

	Remove the .generated postfix from output files and use the default
	ARTS filename instead where possible.

	Read tropical*.xml files from ../atmosphere_data where applicable.

	* tests/GroundBased/*.arts:

	Use tropical scenario instead of midlatitude-winter.

	* tests/GroundBased/midlatitude-winter*.xml: Removed.

2010-07-01  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-14-54

	* doc/uguide/CMakeLists.txt: Remove double quotes from include.

2010-06-30  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-14-53

	* doc/uguide/montecarlo.tex:

	Fix citation press:1992:numerical -> press:92 and reference
	pathlength_int -> pathlengthint.

2010-06-30  Stefan Buehler  <sbuehler(at)ltu.se>

	* arts-1-14-52

	* src/m_batch.cc (ybatchCalc): Fixed an Issue reported by
	Isaac. The user may want the different Jacobians to have different
	number of x gridpoints (e.g., different number of vertical levels
	for different radiosonde profiles). This works now. Also fixed one
	OpenMP bug pointed out by Oliver, and another bug I discovered
	myself. Hope it works correctly now!

	* src/workspace.cc (ybatch_jacobians): Changed type of this
	variable from Tensor3 to ArrayOfMatrix, to allow for different
	size of different Jacobians.

	* src/methods.cc (ybatchCalc): Changed argument type of
	ybatch_jacobian and updated builtin documentation.

2010-06-24  Stefan Buehler  <sbuehler(at)ltu.se>

	* arts-1-14-51

	* tests/AMSU/TestAMSU_generic.arts: Added some
	better documentation with Jacobian definition.

	* TestAMSUA.arts, TestAMSUB.arts, TestAMSUB_fast.arts: Save
	ybatch_jacobians at the end of the job.

	* tests/MHS/TestMHS_generic.arts: Also here modified the comments
	for the Jacobian settings. However, for MHS the Jacobians are
	still turned off at the moment. (No particular reason, you can
	turn them on if you want.)

2010-06-24  Stefan Buehler  <sbuehler(at)ltu.se>

	* arts-1-14-50

	* src/methods.cc (ybatchCalc): Added output *ybatch_jacobians*.

	* src/m_batch.cc (ybatchCalc): Now also stores all Jacobians in
	output variable *ybatch_jacobians*. 
	
	* src/agendas.cc (ybatch_calc_agenda): Included *jacobian* as
	output variable.
	
	* src/workspace.cc (ybatch_jacobians): Added this new variable,
	which stores all Jacobians in ybatchCalc calculations.

2010-06-16  Cory  <corzneffect@gmail.com>

	* arts-1-14-49

	* doc/uguide/montecarlo.tex: Some more done. 

2010-06-04  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-14-48

	* sync version numbers between configure.in and CMakeLists.txt before
	putting this snapshot on the webpage for the workshop.

2010-05-30  Cory Davis  <cory@sundog>

	* arts-1-14-47

	* doc/uguide/montecarlo.tex (UP TO HERE): A bit more done...

2010-05-26  Cory Davis  <cory@sundog>

	* src/m_montecarlo.cc (MCGeneral): Changed a misleading comment.

2010-05-11  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-14-47

	* src/m_jacobian.cc:

	Remove variable that leads to compile error in Release configuration.

	* doc/uguide/clouds.tex: Fix PyARTS web link.

2010-05-06  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-14-46

	* src/gas_abs_lookup.cc (GasAbsLookup::Extract):

	Change the local GridPosPoly variables to ArrayOfGridPosPoly with just
	one element. That avoids the creation of a temporary array on every
	call of gridpos_poly. Depending on the control file this speeds up
	absorption calculation by up to 10%.

	* src/interpolation_poly.cc (gridpos_poly):

	Pass the Numeric new_grid directly to other gridpos_poly function
	instead of creating a temporary vector.

2010-05-04  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-14-45

	* src/m_rte.cc (iyEmissionStandardClearsky): A factor of 0.5 was
	missing for the dB/dT term of the temperature jacobian.

	* src/m_basic_types.cc (Tensor3AddScalar): Created.

2010-05-03  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-14-44

	* src/m_jacobian.cc (jacobianCalcAbsSpecies): The method was not
	adopted to new way to handle perturbation jacobians. 
	(This was properly flagged by an error, but more likely discovered
	by problems in setting up jacobian_agenda.)

	(jacobianCalcTemperature): As above. Runs. But deviates from the
	analytical results (could be a bug in the analytical expressions).

2010-05-03  Stefan Buehler  <sbuehler(at)ltu.se>

	* arts-1-14-43

	* src/m_atmosphere.cc (AtmFieldsCalc): Added optional input
	parameter "interp_order" (with default 1). This can be used to
	specify the order of the interpolation used. For the default case
	the behavior is the same as before, but if you want, you can now do
	higher order interpolation. This is recommended if the input
	fields are very coarse. Note that the same interpolation order is
	used for all interpolations (p, lat, lon).
	(AtmFieldsCalcExpand1D): Same change as for AtmFieldsCalc.

	* methods.cc (AtmFieldsCalc, AtmFieldsCalcExpand1D): 
	Added the new parameter.
	
	* special_interp.{cc,h} (p2gridpos_poly): Added this function, which
	is useful for higher order atmospheric interpolation.

	* check_input.{cc,h} (chk_interpolation_grids): Added parameter
	"order" for interpolation order. (There are two overloaded
	functions with this name, which were both changed.)
	
	* m_sensor.cc (f_gridFromSensorAMSU, f_gridFromSensorHIRS): 
	Changed the way the delta (extra margin at band edges) is handled.

	* sensor.{cc,h} (find_effective_channel_boundaries): Added the delta
	parameter as input to this function now.

2010-05-03  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-14-42

	* Revert changes to fix the OpenMP memory leak. The workaround
	triggered another, even more severe bug in GCC 4.2 on Linux. Declaring
	the destructors non-virtual leads to an internal compiler error in
	files with a parallel region.

	* KNOWN_ISSUES: Added and documented the OpenMP memory leak.

2010-05-03  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-14-41

	* src/matpackI.cc: Include cstring for memcpy.

2010-05-03  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-14-40

	* config.h.cmake: Removed spurious quotes.

2010-05-03  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-14-39

	* src/matpack*.h, src/workspace_ng.h:

	Make destructors non-virtual if OpenMP is enabled and gcc < 4.3.
	Workaround for gcc bug where virtual destructors are not called for
	variable defined as firstprivate in parallel regions.

	http://gcc.gnu.org/bugzilla/show_bug.cgi?id=36308

	Non-virtual destructor itself can lead to memory leaks but are safe in
	these cases because we don't allocate memory in any superclass.

	* configure.in, CMakeLists.txt:

	Set CXX_VIRTUAL_WORKAROUND to 'virtual' or empty for gcc < 4.3.

	* config.h.cmake: Add code to handle CXX_VIRTUAL_WORKAROUND.

	* src/matpackI.{h,cc}:

	Optimize Iterator1D copy() function. If target and source stride is 1,
	use memcpy instead of a loop for copying.

2010-04-30  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-14-38

	* src/file.cc (expand_path):

	gcc is scared by my if logic... use parenthesis to unscare him.

2010-04-30  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-14-37

	* src/file.{cc,h} (expand_path):

	Add function to expand ~ to homedir.

	(cleanup_output_file): Use unlink instead of remove.

	* src/xml_io.cc, src/file.cc, src/nc_io.cc,

	Use expand_path when opening files for reading or writing.

	* CMakeLists.txt: Check for unlink instead of remove.

2010-04-28  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-14-36

	* src/special_interp.cc (interp_cloudfield_gp2itw): Changed to
	more efficient order of for-loops and if-statements. Now checking
	the index of shifted grid positions, both for first and last
	element. To ensure that index are inside expected range.

2010-04-28  Stefan Buehler  <sbuehler(at)ltu.se>

	* arts-1-14-35

	* src/interpolation.cc (gridpos): If a new grid point is exactly
	on top of an original grid point, then the returned gp.idx is now
	guaranteed to point exactly at this point, so that gp.fd[0] = 0.
	The only exception from this rule is if the point happens to be
	the last point in the original grid. In that case gp.idx will
	point to the original grid point below.

 	Furthermore, you are now guaranteed that for the ascending old
	grid case:
 	     old_grid[tgp.idx]<=tng || tgp.idx==0
 	And for the descending old grid case:
 	     old_grid[tgp.idx]>=tng || tgp.idx==0

	* src/optproperties.cc (pha_matTransform): Fixed a hidden bug
	here, that got activated by the gridpos disambiguation. In the
	PTYPE_HORIZ_AL case, optical properties are stored only for
	incoming angles up to 90 degrees. But the full grid up to 180
	degrees was used for the call to gridpos. Due to this, it could
	happen that incoming angles at exactly 90 degrees were treated
	incorrectly, since they are actually on the edge of the original
	grid, but gridpos was foolded to think they were inside. This may
	have been responsible for some previously unexplained program
	crashes.

	* doc/uguide/interpolation.tex
	(section{Setting up grid position arrays}):
	Updated documentation to point out the new guarantee.

2010-04-28  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-14-34

	* src/m_rte.cc (yCalc):

	Parallelize the mblock loop. If nmblock is >= nza this loop will run
	parallel otherwise the inner loop in iyb_calc.

2010-04-28  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-14-33

	* src/m_rte.cc: The number of possible auxilary variables in y_aux
	(and iy_aux) is now hard-coded to 3. This to allow parallisation
	of yCalc.

	* src/m_jacobian.cc (jacobianCalcPointingZaIybrecalc): Adopted to
	change above.

2010-04-26  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-14-32

	* doc/uguide/concept.tex: 'built in' -> 'built-in'.

	* cmake/modules/ArtsBuildTexDoc.cmake:

	Install PDFs into uguide sub-directory in share/doc/arts.

2010-04-26  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-14-31

	* src/CMakeLists.txt: Add m_fos.cc to artscore.

2010-04-26  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-14-30

	* src/Makefile.am: Added m_fos.cc.

	* src/m_fos.cc: The two FOS methods are now placed in this file. 

2010-04-26  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-14-29

	* doc/index.html.in: Updated. Link to new docs.

	* doc/arts.css: Updated to match satpage colors.

	* doc/doxygen/CMakeLists.txt, doc/CMakeLists.txt:

	Install doc into share/doc/arts/.

2010-04-26  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-14-28

	* src/special_interp.cc (interp_cloudfield_gp2itw): Added handling
	of cases where a grid position is at lower boundary of cloudbox
	with fd[0] = 1. This results in an idx of -1. A jump to upper grid
	end points now added.

	* src/workspace.cc: Added fos_use_mean_scat_data. 

	* FOS part reactivated and updated to last changes. Treatment of
	single scattering properties fixed, including handling of
	fos_use_mean_scat_data. That was the last missing "physics". 

2010-04-26  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-14-27

	* cmake/modules/ArtsBuildTexDoc.cmake:

	Add missing dependencies. ${TARGET}.stage1 should depend on all
	*.stamp targets.

	* doc/uguide/CMakeLists.txt: Add target arts_docs.

2010-04-23  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-14-26

	* cmake/modules/ArtsBuildTexDoc.cmake: Cleaning up.

2010-04-23  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-14-25

	* cmake/modules/ArtsBuildTexDoc.cmake:

	Split building of each document into two stages. The first stage runs
	latex, makeindex, bibtex, and latex. After that the aux files are
	copied to the build directories of the other documents. The second
	stage is another latex run for each document. Now it's possible to
	parallel build the docs and get the cross references right.

2010-04-22  Stefan Buehler  <sbuehler(at)ltu.se>

	* arts-1-14-24

	* doc/uguide/*.tex: Fixed all cross references between the
	different guide documents, closing trac ticket #39.
	Also removed a lot of tildes in cases like "Figure~\ref{}", which
	now is "Figure \ref{}".

2010-04-22  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-14-23

	* src/m_rte.cc (y_unitApply): This is a renamed version of yUnit.
	Added runtime checks, trying to catch incorrect usage of the
	method. Wrote on-line documentation. This closes ticket 26.

	* tests/HIRS/TestHIRS.arts: Changed yUnit to y_unitApply.

2010-04-22  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-14-22

	* cmake/modules/ArtsBuildTexDoc.cmake:

	Don't depend on a directory, use a timestamp file instead. Fixes doc
	build with cmake < 2.8.0.

2010-04-21  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-14-21

	* src/m_rte.cc (yUnit): A new version of this method. But now
	realise that it does not work for jacobians that shall not be
	converted, such as jacobianAddPolyfit. Do not know yet how to fix
	this. More tomorrow!

	* src/m_batch.cc: Removed ybatchUnit. Not needed!

2010-04-21  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-14-20

	* src/m_rte.cc (iyEmissionStandardClearsky): The multiplication of
	iy_transmission and diy_dpath was wrong. The diy_dpath part had to
	be transposed. This part only of concern for part of ppath "after"
	surface reflections.

	* tests/AMSU/TestAMSU_generic.arts: Calculation of jacobians is
	now active. But now saving. This to include calculation of
	jacobians with surface reflections among the standard test cases. 

2010-04-21  Stefan Buehler  <sbuehler(at)ltu.se>

	* arts-1-14-19

	* doc/uguide/concept.tex (section{Documentation}): Rewritten.

	* doc/uguide/arts_user.tex,
	doc/uguide/arts_developer.tex,
	doc/uguide/arts_theory.tex: Reduced contributer table to
	contributions only in the respective document

	* doc/uguide/sensor.tex: Added line breaks. (This file used
	windows-style single line paragraphs.)

	* doc/uguide/*.tex: Removed the macros:
	\secref, \eqref, \eqnref, \figref, \tabref, \charef.
	Reason, it gets too complicated to make macros for all cases
	(considering the reference could be to another document).

2010-04-21  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-14-18

	* doc/uguide/montecarlo.tex: Remove empty lines 200/201 to fix build.

2010-04-21  Cory Davis  <cory@sundog>

	* arts-1-14-17

	* doc/uguide/montecarlo.tex: a bit more.  I couldn't test the
	changes because there seems to be something wrong with the
	doc build.

2010-04-20  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-14-16

	* doc/uguide/CMakeLists.txt:

	List tex file dependencies for each target.

	Remove explicit target arts_docs.

	* cmake/modules/ArtsBuildTexDoc.cmake:

	Put the output files for each document in a separate subdirectory. The
	pdf is copied one level up after a successful build.

	Fixes parallel build of docs but more work is needed to get xrefs
	right.

2010-04-19  Stefan Buehler  <sbuehler(at)ltu.se>

	* arts-1-14-15

	* doc/uguide/*.tex: Replaced \zlabel and \zref again by \label and
	\ref. References to other files still do not work correctly, but
	at least I know how they can work. To cite a section from the
	theory document in the user guide, write: "See \theory, Section
	\ref{T-sec:xxx}." In other words:
	- One has to manually state which document
	- The reference itself has to start with a special letter, if it
	is to another document (U- for user, D- for developer, T- for
	theory).
	So, the road is clear, but quite a lot of editing required,
	unfortunately. 

2010-04-18  Cory Davis  <cory@sundog>

	* arts-1-14-14

	* doc/uguide/montecarlo.tex: A bit more

2010-04-15  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-14-13

	* doc/uguide/gridded_fields.tex: Minor changes.

	* src/test_gridded_fields.cc: Updated.

2010-04-14  Stefan Buehler  <sbuehler(at)ltu.se>

	* arts-1-14-12

	* src/m_sensor.cc (f_gridFromSensorAMSU): Fixed the function to
	work also with touching and overlapping channels. Now uses the
	same backend function for the actual work as
	f_gridFromSensorHIRS. This closes trac ticket #35.  Also changed
	the treatment of the required delta at the channel eges. Now we
	use one full grid spacing on each side.
	(f_gridFromSensorHIRS): Changed the treatment of the required
	delta at the channel eges. Now we use one full grid spacing on
	each side.

	* src/sensor.cc (find_effective_channel_boundaries): No more delta
	in this function. This is now done at the level of the calling
	function. 

	* src/workspace.cc (backend_channel_response_multi): Fixed typo in
	documentation. 

	* tests/testall.py (TestMHS): Increased tolerance for deviation
	from reference case from 0.001 K to 0.005 K. The radiance is now
	different from the reference case, due to the different delta. I
	suspect that the new version is theoretically better, since we now
	have grid points directly on the nominal band edges. But decided
	not to change the reference values, since the tolerance is still
	quite small.

2010-04-14  Cory Davis  <cory@sundog>

	* arts-1-14-11

	* doc/uguide/montecarlo.tex (section{Model[FIXME: needs updating
	to MCGeneral]}): made a start on this.

2010-04-13  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-14-10

	* doc/uguide/gridded_fields.tex: Start documenting gridded fields.

	* doc/uguide/arts_developer.tex: Include gridded_fields.tex.

	* doc/uguide/Figs/development/griddedfields_inheritance.pdf,
	doc/uguide/Figs/development/griddedfields_objects.pdf: Added.

	* src/gridded_fields.h: Update docs.

	* src/gridded_fields.h, src/m_sensor.cc, src/xml_io_compound_types.cc:

	Changed GriddedField::set_gridname to GriddedField::set_grid_name

	* src/CMakeLists.txt, src/test_gridded_fields.cc: Add test/example.

2010-04-12  Cory  <cory@pheonix>

	* arts-1-14-9

	* doc/uguide/arts_theory.tex: include montecarlo

	* doc/uguide/montecarlo.tex (subsection{Algorithm [FIXME:Needs updating to MCGeneral]}): inserted new MCGeneral flowchart

	* doc/uguide/arts_user.tex: removed montecarlo include

2010-04-09  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-14-8

	* doc/uguide/CMakeLists.txt:

	For now, make every document depend on all tex files. To only rebuild
	a certain document use 'make arts_user', 'make arts_developer', or
	'make arts_theory'.

2010-04-09  Stefan Buehler  <sbuehler(at)ltu.se>

	* arts-1-14-7

	* doc/uguide/: Replace all \label by \zlabel and \ref by
	\zref. But cross-references are still not working properly.

2010-04-09  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-14-6

	* autogen.sh: Add support for automake-1.11.

	* doc/uguide/Makefile.am:

	Build arts_user, arts_developer and arts_theory.

	Currently all docs depend on all tex files. Will be changed in the
	future.

2010-04-08  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-14-5

	* src/m_rte.cc: Added some code comments.

2010-04-08  Stefan Buehler  <sbuehler(at)ltu.se>

	* arts-1-14-4

	* doc/uguide/: A first suggestion for the split in three documents
	arts_user, arts_developer, and arts_theory. I think this comes out
	quite well. Still a bug in the cross document references (will fix
	this somehow in the next days). If other like the new structure, I
	propose to also sort the included files into different directories
	for the different documents.
	
	* doc/uguide/uguide.tex: Removed.
	
	* doc/uguide/main.tex: Removed.

	* doc/uguide/common.tex: Created. Page layout, etc, which is
	common to all three documents.
	
	* doc/uguide/arts_user.tex: Created.

	* doc/uguide/arts_developer.tex: Created.

	* doc/uguide/arts_theory.tex: Created.

	* doc/uguide/CMakeLists.txt: Activated the new targets.

2010-04-08  Claudia Emde  <claudia.emde@lmu.de>

	* arts-1-14-3

	* src/cloudbox.cc, src/cloudbox.h, src/doit.cc, src/doit.h,
	src/m_cloudbox.cc, src/m_doit.cc: Moved
	DOIT specific functions from (m_)cloudbox.cc to (m_)doit.cc. This
	fixes ticket #28.

2010-04-08  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-14-2

	* doc/uguide/CMakelists.txt: Prepare for the documentation split.

	* cmake/modules/ArtsBuildTexDoc.cmake:

	Create macros for building our latex docs.

2010-04-08  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-14-1

	* Fix ticket #34.

	* src/cloudbox.cc, src/cloudbox.h, src/constants.cc,
	src/gridded_fields.cc, src/gridded_fields.h, src/groups.cc,
	src/m_abs_lookup.cc, src/m_atmosphere.cc, src/m_basic_types.h,
	src/m_batch.cc, src/m_cloudbox.cc, src/m_create.cc, src/m_extract.h,
	src/m_sensor.cc, src/m_surface.cc, src/methods.cc,
	src/nc_io_array_types.cc, src/nc_io_compound_types.cc,
	src/nc_io_instantiation.h, src/nc_io_types.h, src/sensor.cc,
	src/sensor.h, src/special_interp.cc, src/special_interp.h,
	src/workspace.cc, src/xml_io_array_types.cc,
	src/xml_io_compound_types.cc, src/xml_io_instantiation.h,
	src/xml_io_types.h:

	Replace GField with GriddedField everywhere for consistency.

	Also increased minor version number because this breaks controlfile
	backwards compatibility. Luckily, GField workspace methods are not
	widely used in controlfiles. Nothing in includes or tests referred to
	any of them.

2010-04-08  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-13-41

	* src/methods.cc:

	Added a formatting example for long variable descriptions to the
	template.

	First round of cleaning.

2010-04-07  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-13-40

	* src/rte.cc (apply_y_unit): Changed type of iy from Tensor3View
	to MatrixView. Changed all calls of this function.

	(apply_y_unit2): Created this function for conversion of jacobian.

	* src/m_rte.cc (yCalc,iyb_calc): Removed jacobian_unit. 

	* includes/*/*: Removed jacobian_unit from 6 .arts files. 

	* src/m_jacobian.cc (jacobianOff): Removed jacobian_unit. 
	And the WSV jacobianUnit.

	* src/workspace.cc: Removed jacobian_unit. 

2010-04-07  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-13-39

	* src/rte.cc (apply_y_unit): Fixed bug causing MHS test to fail.

2010-04-07  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-13-38

	* src/rte.cc: Work to fix conversion for PlanckBT started. 

2010-04-07  Stefan Buehler  <sbuehler(at)ltu.se>

	* arts-1-13-37

	* src/interpolation_poly.cc: Corrected doxygen comment at
	beginning of file. 

2010-04-07  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-13-36

	* Fix ticket #27.

	* src/m_rte.cc (iyb_calc): Vectorized.

2010-04-07  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-13-35

	* includes/mhs/mhs.arts: 
	* includes/mhs/mhs_fast.arts: Updated following
	changes in special_interp.cc.

2010-04-07  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-13-34
	
	* src/special_interp.cc (interp_atmfield_by_gp): Fixed ticket 14.
	Remove checks of the type chk_atm_field. 

	* tests/OdinSMR/TestOdinSMR_119ghz.arts: 
	* tests/HIRS/TestHIRS.arts: 
	* includes/general.arts: 
	* src/montecarlo.cc: 
	* src/rte.cc (get_ptvmr_for_ppath): 
	* src/m_rte.cc (iyEmissionStandardClearskyBasic): 
	* src/m_rte.cc (iyEmissionStandardClearsky): 
	* src/m_surface.cc (InterpSurfaceFieldToRteGps): 
	* src/m_atmosphere.cc (InterpAtmFieldToRteGps): All updated following
	changes in special_interp.cc.

2010-04-07  Claudia Emde  <claudia.emde@lmu.de>

	* arts-1-13-33

	* src/scatrtc.{cc,h}: Renamed, now they are called doit.{cc,h}
	Moved the functions is_gp_inside_cloudbox, is_inside_cloudbox to
	cloudbox.{cc,h}.

	* src/cloudbox.{cc,h}: Included functions is_gp_inside_cloudbox,
	is_inside_cloudbox.

	* src/m_scatrtc.cc: Renamed to m_doit.cc.

	* src/CMakeLists.txt: Renamed scatrte -> doit

	* src/Makefile.in: Renamed scatrte -> doit

	* src/methods.cc: Improved documentation of DoitAngularGridsSet.

2010-04-07  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-13-32

	* src/ppath.h (struct Ppath): Removed fields p, t, vmr and
	next_parts from Ppath structure definition.

	* src/ppath.cc: Removed all code related to the removed Ppath fields. 

	* src/m_rte.cc: Removed a bunch of asserts that were repeated for
	each pencil beam calculation. Will anyhow be catched by more basic
	asserts.
	
2010-04-07  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-13-31

	* tests/DOIT/TestDOIT.arts: Removed defintion of rte_agenda.

	* includes/general.arts: Removed defintion of rte_agenda.

	* src/m_rte.cc: Big cleaning. Everything around the old RT system
	(with RteCalc as main method) removed. A lot of stuff moved to
	other files. See below.
	
	* src/rte.cc: A number of obselete or replaced (functions with
	newer version) removed. Several new functions coming from m_rte.cc.

	* src/jacobian.cc (vmrunitscf): Moved from m_rte.cc.
	(jacobian_from_path_to_rgrids): Removed.

	* src/agendas.cc: Removed rte_agenda. 

	* src/workspace.cc: Removed diy_dt, diy_dvmr and ppath_array_index. 

	* src/scatrte.cc: Updated comment referring to
	get_radiative_background.

	* src/m_surface.cc: Removed non-active code, marked as old since
	long time.

2010-04-07  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-13-30

	* Fix ticket #16.

	* src/file.{cc,h} (cleanup_output_file): Added. Remove empty rep file.

	* src/arts.cc (arts_exit): Call cleanup_output_file on exit.

	* CMakeLists.txt: Check for remove function.

	* config.h.cmake: Add HAVE_REMOVE.

	* src/main.cc: Display runtime in fixed point notation.

2010-04-07  Cory Davis  <cory@sundog>

	* arts-1-13-29

	* src/m_montecarlo.cc (rte_posShift): removed (not used), also
	removed from methods.cc.

	* src/montecarlo.{cc,h) (Cloudbox_ppathCalc): removed (not used)
	(mcPathTrace): removed (not used)
	(opt_depth_calc): removed (not used)
	(Sample_ppathlengthLOS): removed (not used)
	(TArrayCalc): removed (not used)
	(cloudbox_ppath_start_stepping): removed (not used)

	* arts-1-13-28

	* src/montecarlo.cc (Cloudbox_ppath_rteCalc): removed (was already
	commented out
	(montecarloGetIncoming):  removed (was already commented out)  The
	above two functions were used by ScatteringMonteCarlo.

2010-04-06  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-13-27

	* CMakeLists.txt:

	Revive disort support. ** highly experimental ** This can be enabled
	by passing -DENABLE_DISORT=1 to cmake. Very experimental and only
	working on Linux at the moment (hopefully at least there).

	On a 64-bit compiler the type of Index is automatically changed from
	long to int the moment Disort is enabled. This is necessary because we
	need to make it compatible with the f2c integer type, which is fixed
	to int. We are using pointers to exchange Index arrays with integer
	arrays between ARTS and the Disort code. This will break badly if the
	types don't match and we just brutally cast Index* to integer*.

	In the same way, -Werror is automatically disabled because compiling
	with Index=int throws lots of warnings. (With gcc 4.2 only in the
	disort code, but with 4.4 also in heaps of other places).

	Add workaround for unresolved MAIN__ in libf2c.

	* src/CMakeLists.txt: Merge the two 'if ENABLE_DISORT' blocks into one.

	* src/m_surface.cc (surfaceFlatSingleEmissivity):

	Make sure the constants passed to chk_if_in_range are Numeric
	otherwise the compiler gets confused if we compile with Index=int.

	* README: Carefully mention Disort as an experimental feature.

2010-04-06  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-13-26

	* src/m_fos.cc: Started this file. Not yet added to Makefile. 
	FOS stuff "deactivated". To be put back after cleaning, when I
	have some time for fixing the details.

	* src/m_rte.cc: Sorted functions and moved some to other files.
	
	* src/ppath.cc (map_daa, rotationmat3D, cart2zaaa, zaaa2cart):
	Moved from m_rte.cc.

	* src/m_atmosphere.cc (atm_checkedCalc): Moved from m_rte.cc.

2010-04-06  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-13-25

	* CMakeLists.txt, cmake/modules/CheckOpenMPThreadprivate.cmake:

	Instead of disabling OpenMP altogether if threadprivate is not
	supported, just don't use it. This makes it possible to use OpenMP on
	Mac OS X. Only drawback is not so pretty agenda output which is better
	than not having OpenMP at all.

	We don't check for OpenMP support if we generate an Xcode project
	file. Adding our own OpenMP compiler flags will break compilation, so
	we leave all that to Xcode.

	* config.h.cmake, src/messages.{cc,h}, src/main.cc:

	Use new preprocessor variable THREADPRIVATE_SUPPORTED.

	* doc/uguide/main.tex: Update christian's email.

	* .: Clean up svn:ignore property.

2010-03-26  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-13-24

	* src/m_rte.cc (fos_yStandard): Higher scattering orders than
	single caused error for 1D and 2D. Fixed. But realised that these
	cases are anyhow not handled correctly. Now a runtime error for
	these combinations (but single scattering works for 1D and 2D). 

2010-03-25  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-13-23

	* m4/.cvsignore, src/.cvsignore, tests/.cvsignore, aii/.cvsignore,
	doc/uguide/.cvsignore, doc/uguide/Figs/montecarlo/.cvsignore,
	doc/uguide/Figs/scattering/.cvsignore,
	doc/uguide/Figs/rte_theory/.cvsignore,
	doc/uguide/Figs/interpolation/.cvsignore,
	doc/uguide/Figs/sensor/.cvsignore, doc/uguide/Figs/concept/.cvsignore,
	doc/uguide/Figs/polarization/.cvsignore,
	doc/uguide/Figs/ppath/.cvsignore, doc/uguide/Figs/.cvsignore,
	doc/doxygen/.cvsignore, doc/.cvsignore, 3rdparty/disort1.2/.cvsignore,
	3rdparty/.cvsignore, .cvsignore:

	We really don't need those anymore.

	* configure.in: Remove arts.spec from AC_OUTPUT.

2010-03-25  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-13-22

	* ChangeLog:

	Slim down the log by merging all entries from before 2008 into
	ChangeLog-20071207.

	* ChangeLog-0.x: Renamed to ChangeLog-20071207.

	* .cproject, .project, .settings:

	Remove obsolete Eclipse project files. Cmake can be used to generate
	those files if needed.

	* arts.spec.in: Remove outdated RPM spec file.

2010-03-19  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-13-21

	* README.legacy: Rename README to README.legacy.

	* README: Rename README.cmake to README.

	* tests/CMakeLists.txt: Check for a Python interpreter.

	* doc/uguide/CMakeLists.txt, doc/doxygen/CMakeLists.txt:

	If the uguide or the doxygen build is disabled for some reason, output
	a message with the missing command.

	* .: Add commonly used custom build directory names (build_gcc,
	build_xcode) to svn ignore.

2010-03-18  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-13-20

	* src/m_surface.cc (surfaceFlatVaryingRvRh): Wrong sign for second
	element in surface_emission fixed. 

2010-03-17  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-13-19

	* src/m_surface.cc (surfaceFlatVaryingRvRh): Created. 

2010-03-14  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-13-18
	
	* src/m_rte.cc: Some general polishing on comments and header text.

	(iy_transmission_mult_scalar_tau): No Mueller matrix formed now.
	Now just scalar multiplication with transmission. Should give
	faster calculations.
	
	(get_iy_of_background): The input to
	iy_clearsky_agenda can now also be iy_clearsky_basic_agenda. There
	is now a switch when calculating the downwelling radiation for
	surface reflections. This fixes the DOIT problem in last commit.

	(fos_yStandard): Now working for all 3 dimensions (only spectra,
	not aux and jacobians yet). A strect of the latitude grid is used
	for creating a "3D view" for 2D cases, when radiation coming in
	from the side is calculated. 

2010-03-14  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-13-17

	* DOIT test case is NOT RUNNING. Do not why yet. I commit to test 
	compiling on other machine. 
	
	* src/m_rte.cc: Adopted to change of iy_clearsky_agenda, in
	several functions.
	(fos_yStandard): Now code for 1D, 2D and 3D. Not yet working.

	* src/m_cloudbox.cc (CloudboxGetIncoming1DAtm): Now using
	iy_clearsky_basic_agenda instead of iy_calc_no_jacobian.
	(CloudboxGetIncoming): Now using iy_clearsky_basic_agenda instead
	of iy_clearsky_agenda.

	* src/m_jacobian.cc (jacobianCalcPointingZaIybrecalc): Adopted to
	change of iy_clearsky_agenda.

	* src/agendas.cc: FOS-2D requires the lat_grid. To handle this
	lat_grid was added as input to iy_clearsky_agenda. Added also
	p_grid and lon_grid for consistency.

	* src/ppath.cc (rsurf_at_lat): New internal function.
	(ppath_start_2d): Added code piece to handle start positions
	exactly on top of a pressure surface (following sister 3D
	function). A call of gridpos_force_end_fd is the needed.

2010-03-12  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-13-16

	* tests/testall.py: Ignore KeyError if CMAKE_GENERATOR is not defined.

2010-03-12  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-13-15

	* src/ppath.cc (ppath_calc): Removed runtime_error for 2D and 
	cloudbox. Added some code for handling 2D and cloudbox. Not yet 
	working.

	* src/m_cloudbox.cc 

	* src/m_rte.cc (iyFOS): Now using interp_atmfield_gp2itw and
	interp_cloudfield_gp2itw for setting up the interpolation. The
	method shall now handle 1-3D.
	(fos_yStandard): Extended with code for 1D and 2D.

	* src/special_interp.cc (interp_cloudfield_gp2itw): Created.
	(interp_cloudfield_by_itw): Temporary function.

	* src/m_cloudbox.cc (cloudboxSetManuallyAltitude): Removed
	runtime_error for 2D and cloudbox. 
	(cloudboxSetManually): As above.
	(pnd_fieldCalc): As above + added code for 2D.

2010-03-12  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-13-14

	* cmake/modules/, CMakeLists.txt:

	Revert back to new OpenMP check from arts-1-13-11 and bump the
	cmake version requirement to 2.6.3.

	* README.cmake: Updated.

	* ChangeLog: Remove conflict marker.

2010-03-11  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-13-13

	* cmake/modules/CheckOpenMP.cmake:

	Readded a modified version of this. FindOpenMP breaks compatibility
	with cmake 2.6.2.

	* cmake/modules/CheckOpenMPThreadprivate.cmake:
	
	Use CheckOpenMP instead of FindOpenMP.

	* CMakeLists.txt: OpenMP_C_FLAGS and OpenMP_CXX_FLAGS -> OPENMP_FLAGS.

2010-03-11  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-13-12

	* src/m_rte.cc: FOS part not working right now. Work in progress!

2010-03-11  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-13-11

	* CMakeLists.txt: Use CheckOpenMPThreadprivate.

	* cmake/modules/CheckOpenMPThreadprivate.cmake:

	Check for OpenMP with threadprivate support.

	* cmake/modules/CheckOpenMP.cmake: Removed.

2010-03-10  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-13-10

	* src/main.cc: Show include path in 'arts -v' output.

2010-03-10  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-13-9

	* src/xml_io_basic_types.cc, src/xml_io.cc, src/main.cc (option_input),
	src/parser.cc, src/bifstream (bifstream::getByte):

	Cleaning up variable scopes.

	* src/parser.cc (parse_main):

	Use references for exception in catch blocks.

	(parse_method, ArtsParser::parse_method_args):

	Removed unused variables.

	* src/sourcetext.h: Initialize member mLineBreak in constructor.

2010-03-10  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-13-8

	* src/agendas.cc (define_agenda_data): Added fos_y_agenda.

	* src/workspace.cc: Added fos_y. Polished text for other fos
	variables.

2010-03-09  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-13-7

	* doc/doxygen/html/: Removed from SVN.

	* doc/doxygen/Makefile.am:

	Create clean-local target to remove directory html.

	Add doxygen.warn to CLEANFILES.

	Remove SUBDIRS.

	* src/configure.in: Removed doc/doxygen/html.

	* CMakeLists.txt: Require cmake 2.6.2.

2010-03-09  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-13-6

	* doc/uguide/CMakeLists.txt:

	Make makeindex self-aware. Fixes user guide build in Xcode.

2010-03-09  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-13-5

	* tests/testall.py:

	Xcode puts the build files in different locations depending on the
	configuration in use (Debug, Release). Make sure testall.py calls arts
	with the right path. Fixes the check and check_fast targets in Xcode.

	* cmake/modules/ArtsTestcases.cmake:

	Pass CMAKE_GENERATOR to testall.py.

	* tests/CMakeLists.txt, cmake/modules/ArtsTestcases.cmake:

	Replace cmake with ${CMAKE_COMMAND}.

2010-03-08  Mathias Milz  <mathias.milz@ltu.se>

	* arts-1-13-4

	* includes/mhs/mhs.arts:modified to use new functions

	* includes/mhs/mhs_fast.arts:modified to use new functions

	* includes/mhs/mhs.lo.xml, includes/mhs/mhs.f_backend.xml,
	includes/mhs/mhs.backend_channel_response.xml,
	includes/mhs/mhs.sideband_mode.xml,
	includes/mhs/mhs.sideband_response.xml: removed

2010-03-08  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-13-3

	* tests/MHS/TestMHS_generic.arts, tests/HIRS/TestHIRS.arts,
	tests/AMSU/TestAMSU_generic.arts:

	Remove jacobian variable from jacobianAddAbsSpecies call. Didn't turn
	up during 'make check' because the jacobians are commented out in
	those control files.

2010-03-08  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-13-2

	* src/CMakelists.txt: Add missing matpackI.h to matpack library sources.

	* doc/uguide/CMakeLists.txt: Use MAKEINDEX_COMPILER.

	* doc/doxygen/Doxyfile.in: Generate docset for Xcode.

2010-03-05  Stefan Buehler  <sbuehler(at)ltu.se>

	* arts-1-13-1

	* src/m_sensor.cc (f_gridFromSensorAMSU): Contains now the
	function that used to be f_gridFromSensorMHS. (Handles also
	touching channels.)
	(f_gridFromSensorMHS): Removed.

	* src/methods.cc: (f_gridFromSensorAMSU): Updated documentation.
	(f_gridFromSensorMHS): Removed.

	* includes/mhs/mhs_fast.arts, includes/mhs/mhs_fast.arts: Use
	f_gridFromSensorAMSU, so that tests still run through. (Will be
	adapted further by Mathias.)

2010-03-05  Stefan Buehler  <sbuehler(at)ltu.se>

	* arts-1-13-0 (New minor version number, due to important include
	file changes for AMSU.)

	* src/m_sensor.cc (sensor_responseSimpleAMSU): Added. Does a
	complete sensor setup for an AMSU-type instrument (should also
	work for MHS).

	* src/methods.cc: (sensor_responseSimpleAMSU): Added. 

	* src/workspace.cc: (sensor_description_amsu): Added. Input for
	sensor_responseSimpleAMSU.  

	* includes/amsu/amsub.arts,
	includes/amsu/amsub_fast.arts: Modified to use the new function.

	* includes/amsu/README: Added. Describes antenna file and matlab
	script, which I left there, although they are not used by the
	current standard setups.

	* includes/amsu/amsub.lo.xml,
	includes/amsu/amsub.sideband_mode.xml,
	includes/amsu/amsub.sideband_response.xml,
	includes/amsu/amsub.f_backend.xml,
	includes/amsu/amsub.backend_channel_response.xml: Removed.

2010-03-01  Oliver Lemke  <olemke(at)core-dump.info>

	* arts-1-12-130

	* src/ppath.cc: Fix gcc 4.4 warning.

2010-03-01  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-12-129

	* src/methods.cc: Add MatrixSet.

	* src/token.{cc,h}: Add Matrix support.

	* src/parser.{cc,h}:

	Add support for setting matrices directly in the controlfile.

2010-02-26  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-12-128

	* src/ppath.cc: A new try to fix ppaths passing the surface. A
	closer investigation showed that the problem appears to occur when
	the propagation path hits a point where the surface, a pressure
	level and a lat or lon grid points at at the same location!

	Changed RTOL back to 1 cm.

	(do_gridcell_3d): The surface was checked last of all possible
	"surfaces". Now put first. This fixed at least two cases that
	crashed before. More tests running ... 	

2010-02-24  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-12-127
	
	* A fix similar to previous commit, but for the lower atmospheric
	limit, the surface. Got stuck in a case where the surface was 1 cm 
	above the lowest pressure level. 
	
	* src/ppath.cc: Changed RTOL to 0.02;

	(do_gridcell_3d): Added RTOL in if-statement where do_surface is
	set.

2010-02-23  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-12-126

	* src/ppath.cc (ppath_calc): Changed check for finding when TOA is
	reached (from below). The old check demanded that the fractional
	distance (of the grid position) to be exactly 1 or 0. The new
	check should be more stable. First of all, it is now tested that
	the propagation direction upwards. The fractional distance can now
	deviate up to 0.01. This is of no practical concern, but should
	help avoiding problems due numerical inaccuracy. This is primarily
	a problem for 3D cases where the radius of a pressure surface is
	changing inside the grid box, and points can easily slip from one
	side of a pressure surface to the other.
	
	Found this by tracking a failing FOS calculation. This could also
	have been the reason to problems for MC, reported by Cory years ago.

	* src/interpolation.cc (is_gridpos_at_index_i): Corrected header
	text (it said that FD_TOL is used, which has been removed).

2010-02-12  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-12-125
	
	* src/m_rte.cc (iyFOS): Adopted to new variables. And added
	recursive calls to handle higher orders of scattering. 

	* src/workspace.cc: Added fos_i and fos_n. Wrote description for
	fos_angles.

	* src/methods.cc: Corrected errors in the description of
	iyEmissionStandardClearsky.
	
	* src/m_rte.cc (iyEmissionStandardClearskyBasic): A version of
	iyEmissionStandardClearsky with everything around jacobians and
	aux variables removed (a test with a temporary FOS method seems
	now to be 3-5% faster when using this version). 
	Intended to be used inside iy_clearsky_basic_agenda.

	* src/agendas.cc: Added iy_clearsky_basic_agenda. This to get
	simplest possible interface to the calculation of pure
	monochromatic pencil beam calculations. Input is just rte_pos,
	rte_los and cloudbox_on. The DOIT and MC parts can use this
	agenda. And it should be possible to decrease drastically the
	number of input variables for those methods.

2010-02-11  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-12-124

	* src/workspace.cc: Added fos_angles. No doc yet.

	* src/m_rte.cc (iyFOS): The scattering angle set is now input.

2010-02-11  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-12-123
	
	* src/m_rte.cc (iyFOS): Debugged. Runs without crashing, for a
	simple test case.

2010-02-10  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-12-122

	* src/m_rte.cc (iyFOS): A complete, but totally untested, version
	And with several parts hard-coded.

2010-02-10  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-12-121

	* src/m_rte.cc (iyFOS): Some more work ...
	
2010-02-09  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-12-120

	* src/m_rte.cc (iyFOS): Started on this this test function.

2010-02-04  Stefan Buehler  <sbuehler(at)ltu.se>

	* arts-1-12-119

	* src/m_atmosphere.cc (AtmFieldsCalc): Added nice runtime error
	checks, using the chk_interpolation_grids. Now gives runtime error
	with detailed information on what is wrong, instead of an
	assertion failure.

	* doc/uguide/interpolation.tex (section{Grid checking functions}):
	Added this new section with documentation on the
	chk_interpolation_grids function.

2010-02-03  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-12-118

	* src/m_basic_types.cc (SparseSparseMultiply): Created.

2010-02-01  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-12-117

	* src/m_sensor.cc (sensor_responseBackendFrequencySwitching): 
	Changed end of name from Switch to Switching, to be consistent
	with BeamSwitching. Improved text for on-line doc.

	(sensor_responseFrequencySwitching): Created. To complement the
	WSM above, to also handle DSB observations (as now done at
	Onsala). Can be seen as a "backend" to
	sensor_responseMultiMixerBackend.

	(sensor_responseBeamSwitching): Polishing of text for on-line doc.

2010-01-12  Oliver Lemke  <olemke(at)core-dump.info>

	* arts-1-12-116

	* includes/amsu/CMakeLists.txt, includes/hirs/CMakeLists.txt,
	includes/mhs/CMakeLists.txt, includes/odin/CMakeLists.txt,
	includes/CMakeLists.txt:

	Added. Install include files into share/arts/includes.

	* doc/uguide/CMakeLists.txt: Install uguide.pdf into share/doc/arts.

	* CMakeLists.txt: Traverse into includes subdirectory.

2010-01-07  Stefan Buehler  <sbuehler(at)ltu.se>

	* arts-1-12-115

	* src/m_abs.cc (abs_xsec_per_speciesAddLines): Added a runtime
	error check for negative (Kelvin) temperatures.

2009-12-21  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-12-114

	* tests/: All tests previously using a version of RteCalc have
	been changed to use yCalc.

	* src/m_cloudbox.cc (CloudboxGetIncoming): There was a temporay 
	CloudboxGetIncoming2. This one has now replaced CloudboxGetIncoming.
	This means that DOIT can now only be run with yCalc and associated
	variables.

2009-12-14  Oliver Lemke  <olemke(at)core-dump.info>

	* arts-1-12-113

	* src/m_basic_types.h: Include matpackII.h for Sparse type.

	* src/Makefile.am:

	Add CXXNOSTRICTALIASING flags for all targets depending on binio.

2009-11-12  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-12-112

	* src/m_sensor.cc (sensor_responseBackendFrequencySwitch): H1 and
	H2 were not correctly initialised for cases where more than
	backend is included.

	* src/methods.cc: 
	* src/m_basic_types.h: Fixed so nrowsGet and ncolsGet work also 
	for Sparse.

2009-11-11  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-12-111
	
	* src/m_sensor.cc (InterpTest): Removed.
	(sensor_responseBackendFrequencySwitch): Created.

	* tests/GroundBased/TestFgrid.arts: Now using sensor_responseFillFgrid.

2009-11-09  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-12-110

	* src/m_sensor.cc (InterpTest): A small, and temporary, method to
	test of polynomial interpolation "filling" of spectra could work.
	That is, to make a polynomial interpolation of spectra to a more
	dense grid before the sensor characteristics are applied (that
	treat the spectra to be piecewise linear). The "filling" would be
	part of H (and thus very quick). Tests so far look very good.

	* tests/GroundBased/TestFgrid.m: Created.

	* tests/GroundBased/TestFgrid.arts: Created.

	* tests/GroundBased/TestGbased.arts: Changed settings for centre
	part of f_grid.

2009-11-03  Oliver Lemke  <olemke(at)core-dump.info>

	* arts-1-12-109

	* Compilation fixes for GCC 4.4.1 (default compiler on Ubuntu 9.10).

	* src/parameters.cc: Include cstdio for EOF constant.

	* src/binio.cc: Add -fno-strict-aliasing to COMPILE_FLAGS.

	* src/m_atmosphere.cc, src/absorption.cc, src/m_abs_lookup.cc,
	src/m_scatrte.cc, src/m_rte.cc, src/m_batch.cc:

	There's a dilemma how shared variables in omp loops are handled in GCC
	4.4 compared to previous versions if default(none) is used: In GCC
	4.4 function parameters used as shared variables in parallel loops
	have to be explicitly specified in the list of shared variables.
	Before, function parameters were predetermined 'shared' and listing
	them in the shared statement led to an error. So, we have a deadlock
	here... :-( Solution for now is to keep the original omp pragma
	definition as a comment and remove the default(none) and shared(...)
	directives from the definition of the omp loops. Not ideal, because
	with the previous solution every variable used inside the loop had to
	be declared and the programmer was forced to think if it should be
	shared or private. Now all variables can be used as shared variables
	without explicit definition. Unfortunately, this is the only clean way
	of having the same code compile on newer and older GCC versions.

2009-11-02  Oliver Lemke  <olemke(at)core-dump.info>

	* arts-1-12-108

	* src/interpolation_poly.cc (gridpos_poly):

	Removed parallelization. The parallelizing of the allocation loop had
	a severe negative impact on performance. The calculation time
	increased proportional to the number of cores used. Here an example
	for the calculation time of TestRteCalcMC.arts:

	8 Cores: user	0m57s
	4 Cores: user	0m27s
	1 Core:  user	0m6s

	The rationale behind the parallelization was that most of the time in
	the loop is spent on allocating memory for gp. Unfortunately, the
	memory allocations get serialized again by the kernel. So, nothing
	gained by the vectorization. And to make things worse, doing it in
	parallel seems to screw up the kernel's memory handler.

	* src/m_rte.cc (vmrunitscf):

	Changed bitwise OR (|) in if statement to logical OR (||).

2009-10-29  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-12-107

	* src/m_jacobian.cc (jacobianAddAbsSpecies): Removed logvmr and
	lognd. These options can hardly be used in practice as a priori
	uncertainties must here be specified in a relative manner, and
	only logrel is kept.
	
	* src/m_rte.cc (vmrunitscf): As above.

2009-10-28  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-12-106

	* Started testing if simple and good idea to allow jacobians for
	the logarithm of absoprtion species.
	
	* src/m_rte.cc (vmrunitscf): Added options logvmr, lognd or
	logrel.

	* src/m_jacobian.cc (jacobianAddAbsSpecies): Added options logvmr,
	lognd or logrel.
	(jacobianCalcAbsSpecies): Now a runtime error if started: "This
	method needs to be updated."
	(jacobianCalcAbsTemperature): Now a runtime error if started: "This
	method needs to be updated."

	* src/jacobian.cc (polynomial_basis_func): Replaced a for-loop with
	vector functionality.

2009-10-21  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-12-105

	* tests/ClearSky/TestClearSky.arts: As below.

	* tests/GroundBased/TestGbased.arts: Added test of
	jacobianAddFreqShiftAndStretch.

	* src/m_jacobian.cc: Polishing and changes in the Add methods matching
	the methods below.

	(jacobianCalcPointingZaIybrecalc): The different 
	calculation options will be handled by separete methods. Like this 
	one. jacobianCalcPointingZa renamed, and with more checks.

	(jacobianCalcFreqShiftAndStretchIybinterp): Renamed. Completed. 
	Initial tests OK.

	(jacobianCalcPolyfit): More checks.

2009-10-20  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-12-104

	* src/m_jacobian.cc (jacobianCalcFreqShiftAndStretch): Unfinished
	revision.

	* tests/ClearSky/TestClearSky.arts: 

	* tests/GroundBased/TestGbased.arts: Updated.

	* src/m_rte.cc (yCalc): jacobian now initialised to zero. Should be
	more effecient, than making extra loops in jacobianCalc methods.
	
	* tests/testall.py (TestClearSky.test3): Adopted to changes below.

	* tests/ClearSky/TestClearSky.arts: Now completely updated. And
	now using two different, and more inetresting, angles.

	* src/m_jacobian.cc (jacobianCalcPolyfit): Updated 
	(no_pol_variation was not correctly handled). Dummy code
	to avoid warnings for iyb and yb.
	
	(jacobianAddPolyfit): Updated.

2009-10-19  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-12-103

	* Added a last new feature for rt-part, a general handling of
	providing an estimation of calculation error. 
	
	* tests/MonteCarlo/TestRteCalcMC.arts: As below.

	* tests/DOIT/TestDOIT.arts: As below.

	* tests/ClearSky/TestClearSky.arts: Now using yCalc, instead of
	RteCalc.

	* src/m_rte.cc: Added handling of iy_error, iy_error_type and y_error
	(for all affected methods).

	* src/m_cloudbox.cc (CloudboxGetIncoming2): As above.

	* src/m_jacobian.cc: As above, and removed jacobian as input to the
	Add-methods.

	* src/agendas.cc: Added iy_error, iy_error_type as output for
	iy_clearsky_agenda.

	* src/workspace.cc: Added iy_error, iy_error_type and y_error. 

	* includes/general.arts: Added definition of iy_aux_do and
	iyEmissionStandardClearsky.

2009-10-18  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-12-102

	* Perturbation jacobians can now only be calculated through
	yCalc (jacobianCalc removed). Too messy to keep both systems alive
	and think that I am the only one using such jacobians
	presently. Tell me if I am wrong.

	* src/workspace.cc: New variables imblock, iyb and yb.

	* src/agendas.cc: jacobian_agenda now taking imblock, iyb and yb
	as input.

	* src/m_rte.cc (iyMC): Tested. Seems to work.

	* src/m_jacobian.cc (jacobianCalc): Removed.
	(jacobianAddPointing): Removed.
	(jacobianCalcPointing): Removed.
	(jacobianAddPointingZa): Finished.
	(jacobianCalcPointingZa): Created. Will later have more options.

2009-10-16  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-12-101

	* src/m_rte.cc (ib_calc): Part of yCalc extracted. Direct access
	to this part needed for jacobian calculations.

	* src/m_jacobian.cc (jacobianAddPointingZa): Started on new version
	of jacobian perturbation methods.
	
2009-10-14  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-12-100

	* src/montecarlo.cc: Commented out montecarloGetIncoming and
	Cloudbox_ppath_rteCalc as functions not used.

	* src/m_rte.cc (iyMC): A function to replace RteCalcMC.

	* src/m_cloudbox.cc (CloudboxGetIncoming2): A version using
	iy_clearsky_agenda. Tested. Will replace CloudboxGetIncoming.

2009-10-14  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-12-99

	* Wanted a single iy to be a column vector, to match RT
	expression. Turned out to cause practical problems. Changed back
	to old solution of having this as a row vector. Allowed some
	cleaning of the code. Functionality of yCalc as for last commit.

	A first step to activate the new code:
	
	* src/m_jacobian.cc (jacobianUnit): Now using apply_y_unit.

	* src/m_batch.cc (ybatchUnit): Now using apply_y_unit.

	* src/m_rte.cc (yUnit): Now using apply_y_unit.

	* src/rte.cc (apply_y_unit): Now takes radiance data as a Tensor3, 
	and only a single conversion method is needed.
	(apply_j_unit): Created. Actual calculation done by apply_y_unit.

	(apply_y_unit_single): Removed.

2009-10-13  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-12-98

	* src/m_rte.cc (get_iy_of_background): Code now for all cases.
	Surface case tested.

2009-10-11  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-12-97

	* src/m_rte.cc: Found that old analytical jacobians crashed for
	stokes_dim > 1 (simple bug to fix) and that there is some very
	small calculation error for old absorption species jacobians. Not
	getting consistent results for t-jacobians. Will later test compare
	with perturbation calculations.
	
	* src/m_rte.cc (iyEmissionStandardClearsky): Now complete code in place. 
	Seems to work, but confirmation for t-jacobians needed. 

2009-10-08  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-12-96

	* src/m_rte.cc: Did some rearrangements of new part and added code
	for jacobians. Debugging needed ...

2009-10-07  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-12-95

	* src/m_rte.cc (iyEmissionStandardClearsky): Started on jacobians.

2009-10-06  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-12-94

	* src/m_rte.cc: Changed name to iyEmissionStandardClearsky. More
	sub-functions and a macro to ake code more compact. 
	Made the sister method: iyTransmissionStandardClearsky

2009-10-06  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-12-93

	* src/m_rte.cc (iyClearskyStandard): Got a free hour. Some more work on
	iyClearskyStandard. 

2009-10-06  Oliver Lemke  <olemke(at)core-dump.info>

	* arts-1-12-92

	* src/m_rte.cc (1475):

	Implicit conversion from Index to Numeric throws a warning in gcc
	4.3.3 because the value might change. Added explicit cast.

2009-10-06  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-12-91

	* src/m_rte.cc (iyClearskyStandard): As below.

2009-10-05  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-12-90

	* src/m_rte.cc: Some further work on iyClearskyStandard and
	sub-functions.

2009-10-05  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-12-89

	* src/m_rte.cc: Complete code for y_unit now at place (not
	tested), beside parallelisation. Started in iyClearskyStandard and
	where as much as possible will be placed in general sub-functions.

	* src/agendas.cc: Added iy_aux_do as input to iy_agenda.

	* src/workspace.cc: Added iy_aux_do. 

2009-10-04  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-12-88

	* src/m_rte.cc (yCalc): The summation of sensor_los, mblock_za_grid and
	mblock_aa_grid is now handled OK (which is not the case for RteCalc).
	iy_agenda is in place.

	* src/methods.cc: Added text for atm_checkedCalc. 

	* src/workspace.cc: Removed i_space. Added iy_transmission and
	atm_checked.

	* src/m_jacobian.cc (jacobianClose): Added jacobian_do.
	(jacobianOff): As above.

2009-10-02  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-12-87

	* src/methods.cc: yCalc now here as well. 

	* src/m_jacobian.cc (jacobianClose): Added jacobian_do.
	(jacobianOff): As above.

	* src/workspace.cc: Added y_aux and jacobian_do.

2009-10-02  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-12-86

	* TODO: There were no To do's since 2003-03-31! All I could see
	was outdated. Just removed the old text, to initialise a "re-start"
	of the file. I will also use it for notes during the present
	revision work.

	* src/m_rte.cc: More new/revised code. No details here before the
	code starts to replace existing functions.

2009-10-01  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-12-85

	* src/m_rte.cc (yCalc): A few lines of more code.

2009-10-01  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-12-84

	Started on revised version of RteCalc: yCalc
	Not "activated". Started to add some variables and agendas. 

	Will continue this. I will leave everything around RteCalc untouched
	until I am sure that yCalc works. 
	
2009-09-25  Oliver Lemke  <olemke(at)core-dump.info>

	* arts-1-12-83

	* m_rte.cc (RteCalc):

	Fix string quotes to make it compile again.
	C++ uses double quotes for Strings, not single quotes like matlab. :-)

2009-09-24  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-12-82

	* Bengt and I have realised that azimuth angles in sensor_los and
	mblock_aa_grid can not just be added. This distorts the
	rectangular grid made up by mblock_za_grid and mblock_aa_grid.
	The problem originates in the fact that 1 degree in azimuth
	correponds to a smaller distance when going towards zenith angles
	of 0 and 180 deg. I have tested out a solution in matlab. This
	will be added to arts later when revising the rt part.
	
	* src/m_rte.cc (RteCalc): Usage of 2D antennas will now cause a
	runtime error.

2009-09-22  Oliver Lemke  <olemke(at)core-dump.info>

	* arts-1-12-81

	* src/check-code-tab-indent.sh: Fix paths for non-sourcedir build.

	* src/m_sensors.cc, src/methods.cc: Remove tabs.

2009-09-21  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-12-80

	* includes/odin/odinsmr_501.arts: Last commit included some
	temporary test lines. Now removed.

2009-09-21  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-12-79

	* src/m_sensor.cc (antenna_responseGaussian): Polarisation and
	frequency grid values are now "NaN" and -999. To flag that the
	values are not defined.
	(sensor_responseAntenna): Removed demand that for response
	patterns having a single frequency that this frequency is inside
	sensor_response_f_grid. Not needed as no interpolation is performed.

2009-09-21  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-12-78

	* src/m_sensor.cc (antenna_responseGaussian): Fixed bugs found by
	Oliver. Thanks.

2009-09-21  Oliver Lemke  <olemke(at)core-dump.info>

	* arts-1-12-77

	* tests/CMakeLists.txt: Add GroundBased test to fast tests.

	* tests/Makefile.am: Add GroundBased to TESTDIRS.

2009-09-20  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-12-76

	* tests/Makefile.am: Added GroundBased.

	* tests/testall.py (TestGroundBased): Added.

	* src/m_sensor.cc (sensor_responseBackendFrequencySwitch): Created.

	* tests/GroundBased/TestGbased.arts: Finished.

2009-09-20  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-12-75

	* src/m_sensor.cc (antenna_responseGaussian): Created. Not sure if
	works yet.

	(backend_channel_responseFlat): Created.

2009-09-20  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-12-74

	* src/methods.cc: batch_atm_fields_compactFromArrayOfMatrix was 
	placed among methods starting on abs...

	* tests/GroundBased/TestGbased.arts: Extended.

	* src/m_sensor.cc (backend_channel_responseGaussian): Created. 
	
	* src/sensor.cc (gaussian_response): Created.

	* src/m_basic_types.cc (NumericAdd): Created.
	(NumericScale): Created.
	(VectorFlip): Created.

2009-09-18  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-12-73

	* tests/GroundBased/TestGbased.arts: Started this test. To have a
	test case for beam and frequency switching.  

2009-09-18  Mathias Milz  <mathias.milz@ltu.se>

	* includes/mhs/
	  added include files for MHS fast setup:

	* tests/MHS/TestMHS_fast.arts
	  added testcase for MHS_fast 

	* tests/CMakeLists.txt
	  included MHS testcases

	* tests/testall.py
	Modified testall.py:
	  - Updated reference values for the test of AMSU-B to the new setup
	  - decreased acceptance limit for AMSU from 0.02 to 0.001.
	  - included testcases for MHS and MHS_fast.

2009-09-18  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-12-72

	* 2D antennas appear to work. Tests for various configurations
	have been performed. Note that the 2D weighting is handled in a
	somewhat simplified way. And that set-up sensor response is slow for 
	large cases.

	* src/m_sensor.cc (sensor_responseMultiMixerBackend): Data were
	sorted incorrectly for multi beam cases. 

	(AntennaMultiBeamsToPencilBeams): New WSM.

	* src/sensor.cc (antenna2d_simplified): Did not work correctly for
	multi beam cases.
	
2009-09-18  Oliver Lemke  <olemke(at)core-dump.info>

	* arts-1-12-71

	* configure.in, includes/Makefile.am, includes/hirs/Makefile.am,
	includes/mhs/Makefile.am:

	Updated.

2009-09-18  Mathias Milz  <mathias.milz@ltu.se>

	* arts-1-12-70

	* includes/amsu/amsub.arts: 
	  the maximum propagation step(ppath_lmax), is set from the 
	  default(10.e3)to 250 m for higher accuracy in forward 
	  calculation
	
	* includes/amsu/amsub_fast.arts:	
	  the maximum propagation step(ppath_lmax), is set from the 
	  default(10.e3)to 250 m for higher accuracy in forward 
	  calculation

	* includes/mhs/:
	  introduced include-files for MHS-setup.

	* test/mhs/:
	  build test case for MHS setup.

2009-09-17  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-12-69

	* src/sensor.cc (antenna2d_simplified): Added some output to find
	the bottleneck for larger calculations.

	* includes/amsu/setup_input.m (setup_input): Generates now also
	an antenna pattern file.

2009-09-16  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-12-68

	* src/sensor.cc (antenna2d_simplified): First code had several
	bugs (of course). Code runs and response matrix has at least
	correct structure. But more tests needed before I give OK.

2009-09-16  Oliver Lemke  <olemke(at)core-dump.info>

	* arts-1-12-67

	* src/sensor.cc (antenna2d_simplified):

	Insert missing & in if statement.

2009-09-15  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-12-66

	* src/sensor.cc (antenna2d_simplified): Created. Complete code,
	but not a single test run made yet. Handles 2D antenna pattern
	with a slight simplification with respect to "arts definitions".

	* src/sensor.cc (antenna1d_matrix): Wrote doxygen header.

	* src/m_sensor.cc (sensor_responseAntenna): Added call of 
	antenna2d_simplified.

2009-09-10  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-12-65

	* src/m_montecarlo.cc (MCGeneral): Emission terms and conversion
	from i to RJ-Tb had "f_index" hard-coded to 0, and the usage of
	the function through RteCalcMC did not work. Calculations made by
	Bengt revealed the problem.  There was a bias between clear-sky
	simulations and MC calculations with zero IWC for frequencies
	after the first one. That bias is now removed. ARTS tests work and
	the atmlab MC demo runs fine.

	Added some runtime checks around f_index and the surface part. The
	first checks should ensure that the function is not used
	incorrectly even after the last changes

	* src/m_rte.cc (RteCalc): Adopted to change in rtecalc_check_input.
	(RteCalcMC): As above.

	* src/rte.cc (rtecalc_check_input): Added checks of
	sensor_response_f, sensor_response_pol, and sensor_response_za.

	* src/agendas.cc: Fixed a spelling error.

2009-09-03  Oliver Lemke  <olemke(at)core-dump.info>

	* arts-1-12-64

	* src/matpackII.{cc,h}:

	Implement add() and sub() for sparse matrices.

	* src/test_sparse.cc: Add test49 for add+sub.

2009-08-18  Oliver Lemke  <olemke(at)core-dump.info>

	* arts-1-12-63

	* Change version handling to not trigger a complete rebuild (cmake).

	* src/auto_version.h.in: Header file template for full version name.

	* src/main.cc:

	Include version.h and use new ARTS_FULL_NAME.

	* src/CMakeLists.txt: Generate auto_version.h and removed version.cc.

	* configure.in: Generate src/auto_version.h.

	* src/version.cc, src/Makefile.am: Removed.

	* config.h.cmake: Removed VERSION.

2009-08-18  Oliver Lemke  <olemke(at)core-dump.info>

	* arts-1-12-62

	* build:

	Added empty default build directory. Set ignore to *.

2009-08-14  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-12-61

	* src/m_jacobian.cc: Adopted change below. 

	* src/agendas.cc: Removed pnd_field as input to jacobian_y_agenda
	(this part not used).

	* src/methods.cc: Added jacobianFreqShiftAndStretch and
	jacobianCalcFreqShiftAndStretch. And made some corrections and
	polishing of text for other jacobian methods.
	
2009-08-13  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-12-60

	* src/agendas.cc: Added f_grid as input to jacobian_y_agenda.

	* src/m_jacobian.cc: Adopted change above.
	(jacobianFreqShiftAndStretch): Created (but not tested).
	(jacobianCalcFreqShiftAndStretch): Created (but not tested).

2009-08-10  Oliver Lemke  <olemke(at)core-dump.info>

	* arts-1-12-59

	* CMake build system is almost ready for prime time.  Building the
	user guide and Doxygen documentation works properly now.

	Output is now much cleaner than before. The Latex compilation is run
	in non-interactive batchmode and completely silent if no error occurs.
	Endless clutter of doxygen warnings is written to a log file
	(doxygen.warn).

	* configure.in, doc/Makefile.am, doc/icons: Remove icons directory.

	* doc/arts.css: Remove bluemark.gif.

	* doc/index.html.in:

	Refer to tests directory for control file examples.

	* doc/CMakeLists.txt:

	Generate index.html in build dir.

	Copy arts.css to build dir.

	* doc/uguide/CMakeLists.txt:

	Properly define ADDITIONAL_MAKE_CLEAN_FILES.

	Also depend on all pdf files in the Figs directory.

	* src/CMakeLists.txt:

	Remove unnecessary binary path from auto_* dependencies.

	* doc/doxygen/Doxyfile.in:

	Remove obsolete DETAILS_AT_TOP.

	Write warnings to doxygen.warn instead of stderr.

	* src/CMakeLists.txt: Add target BuildAutoSources for doxygen.

	* doc/doxygen/CMakeLists.txt:

	Remove matpack and artscore dependency from apidoc. Depend on
	BuildAutoSources instead.

2009-07-08  Isaac Moradi  <imoradi(at)www.sat.ltu.se>

	* arts-1-12-58

	* src/methods.cc
	Updated the documentation of the method "batch_atm_fields_compactFromArrayOfMatrix"
	The method can handle additional columns which are not directly used by ARTS.
	the input matrix can contain some additional columns, for e.g. 
	wind speed, but they must be flagged by 'ignore', small or large 
	letters, in the field name. The method will remove these additional 
	fields and will resize both the matrix and the field names.

2009-08-12  Stefan Buehler  <sbuehler(at)ltu.se>

	* arts-1-12-57

	* includes/hirs/*.f_grid_fast.xml, includes/hirs/*.W_fast.xml:
	Updated. These are the latest optimized grids, resulting from
	separate annealing runs for each channel. Accuracy should be
	better than 0.05 K for all channels except Channel 1.

2009-08-10  Oliver Lemke  <olemke(at)core-dump.info>

	* arts-1-12-56

	* doc/uguide/CMakeLists.txt: Fix dependencies.

	* doc/uguide/uguide.tex:

	Use \usepackage{ifpdf} instead of our own macro which leads to errors
	on newer tex distributions.

2009-08-10  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-12-55

	* doc/uguide/CMakeLists.txt: Build the user guide with cmake.

	* src/CMakeLists.txt:

	Only use netcdf variables if the netcdf library was enabled and found.

	* cmake/modules/FindNetCDF.cmake: Mark NETCDFXX_LIBRARY as advanced.

2009-07-24  Stefan Buehler  <sbuehler(at)ltu.se>

	* arts-1-12-54

	* src/absorption.h: Fixed typo in documentation header for class
	LineRecord. The unit of the line strength I0 is m^2*Hz (not
	m^2/Hz, as it was erroneously written).

2009-07-09  Oliver Lemke  <olemke(at)core-dump.info>

	* arts-1-12-53

	* CMakeLists.txt, doc/CMakeLists.txt, doc/doxygen/CMakeLists.txt:

	Build the doxygen documentation with cmake.

	* cmake/modules/CheckOpenMP.cmake, cmake/modules/FindNetCDF.cmake,
	cmake/modules/COPYING-CMAKE-SCRIPTS:

	As usual, forgot to 'svn add'...

2009-07-09  Oliver Lemke  <olemke(at)core-dump.info>

	* arts-1-12-52

	* CMakeLists.txt, config.h.cmake:

	Add type size checks.

	Detect zlib and netcdf libraries.

	Move OpenMP check into a module.

	* cmake/modules/CheckOpenMP.cmake, cmake/modules/FindNetCDF.cmake,
	cmake/modules/COPYING-CMAKE-SCRIPTS:

	Added.

	* cmake/modules/ArtsTestcases.cmake: Remove extraneous variable.

	* README.cmake: Updated.

	* src/nc_io_compound_types.cc, src/nc_io_types.h, src/nc_io.h,
	src/nc_io_basic_types.cc, src/nc_io_array_types.cc, src/nc_io.cc:

	Put a '#ifdef ENABLE_NETCDF' around these.

	* src/m_select.h: Include matpackII.h for Sparse.
	
	* src/methods.cc: Replace tabs with spaces.

2009-07-08  Isaac Moradi  <imoradi(at)www.sat.ltu.se>

	* arts-1-12-51

	* src/m_atmosphere.cc
	Modified the method 'atm_fields_compactFromMatrix' to handle
	additional columns which are not directly used by ARTS.
	Now, the matrix can contain some additional columns, for e.g. 
	wind speed, but they must be flagged by 'ignore', small or large 
	letters, in the field name. The method will remove these additional 
	fields and will resize both the matrix and the field names.
	* src/methods.cc
	Updated the documentation of the mentioned method

2009-07-07  Oliver Lemke  <olemke(at)core-dump.info>

	* arts-1-12-50

	* cmake/modules/ArtsTestcases.cmake, tests/CMakeLists.txt:

	Bad idea to use 'cp -u'... some variants of copy don't support the -u
	option. Instead we're now using the proper system-independent 'cmake
	-E copy_if_different'.

	Also fix dependencies between the test cases.

2009-07-03  Stefan Buehler  <sbuehler(at)ltu.se>

	* arts-1-12-49

	* Worked on nested parallelization. It is now enabled by
	default. Every parallel loop should check, whether the program is
	already executing parallely. This is achieved by adding
	if(!arts_omp_in_parallel()). Furthermore, parallel loops that
	contain calls to other functions that contain parallel code should
	test whether it is really worthwhile to be parallel. This is done
	in the same if clause. By not running parallel in case the loop is
	trivial, the option is left open for a loop further down in the
	call chain to run parallel.

	* This version was certified to still give correct results for
	AMSU-B (Chevallier test). It had been a while since I have checked
	this last.

	* src/main.cc (main): Turn on omp_nested at start of main
	function. 

	* src/m_atmosphere.cc,
	src/m_abs_lookup.cc,
	src/m_scatrte.cc,
	src/interpolation_poly.cc,
	src/m_rte.cc,
	src/m_batch.cc: Added the new if(!arts_omp_in_parallel()) clause
	to all parallel loops.
	
	* src/absorption.cc (xsec_species): Parallelized the line-by-line
	loop. This is only activated if the outer loop over pressure can
	not be parallelized (because there are two few pressures).

2009-07-03  Stefan Buehler  <sbuehler(at)ltu.se>

	* arts-1-12-48

	* src/m_batch.cc (ybatchCalc): Cosmetic changes.

	* tests/HIRS/TestHIRS.arts: Cosmetic changes.

	* src/arts_omp.{h,cc} (arts_omp_set_dynamic): Added this function,
	a wrapper for the standard OMP function with the same name.

	* src/absorption.cc (xsec_species): Only added a comment.

2009-07-03  Oliver Lemke  <olemke(at)core-dump.info>

	* arts-1-12-47

	* autogen.sh:

	Set srcdir to "dirname $0" so autogen.sh can also be called from a
	separate build dir, not only from the toplevel source directory.

	* tests/Makefile.am:

	Use -p option for mkdir to avoid warning when trying to create an
	already existing directory.

2009-07-02  Oliver Lemke  <olemke(at)core-dump.info>

	* arts-1-12-46

	* tests/CMakeLists.txt: Implement tests in cmake.

	* tests/testall.py: Handle absolute TOPSRCDIR correctly.

	* CMakeLists.txt: Add subdir tests.

	* cmake/modules/ArtsTestcases.cmake: cmake macros for testcases.

2009-07-01  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-12-45

	* src/m_sensor.cc (sensor_responseBeamSwitching): Bug when setting new
	zenith angle. On-line doc now explains what angles that are set.

2009-06-30  Stefan Buehler  <sbuehler(at)ltu.se>

	* arts-1-12-44

	* src/methods.c, src/m_sensor.cc (WMRFSelectChannels): This method
	now no longer requires backend_channel_response as input. The
	weight matrix itself contains all information we need.

	* includes/hirs/hirs_fast.arts: Removed backend_channel_response,
	we do no longer need this here.

	* src/workspace.cc (wmrf_weights): Added matrix dimensions in
	online documentation.

	* src/m_select.h (Select): Fixed serious bug in the implementation
	of this method for Sparse.

	* tests/HIRS/TestHIRS.arts: Only comment changes.

2009-06-29  Stefan Buehler  <sbuehler(at)ltu.se>

	* arts-1-12-43

	* includes/hirs/NOAA12_HIRS.W_fast.xml,
	includes/hirs/TIROSN_HIRS.f_grid_fast.xml,
	includes/hirs/NOAA12_HIRS.f_grid_fast.xml,
	includes/hirs/TIROSN_HIRS.W_fast.xml: Updated these files, the
	last remaining satellites. Fast setup is now the new revision for
	all satellites.

2009-06-23  Stefan Buehler  <sbuehler(at)ltu.se>

	* arts-1-12-42

	* includes/hirs/hirs_fast.arts: The work-over of this setup file
	is now completed. It does no longer do a full sensor setup first,
	but directly loads the WMRF weight matrix. I had to implement some
	new WSVs and WSMs to for this purpose. Also, selection of only
	some channels now works correctly. 

	* src/workspace.cc (wmrf_channels): Added.
	(wmrf_weights): Added.

	* src/m_sensor.cc (f_gridPurgeUnnecessaryFreqs): Removed.  
	(WMRFSelectChannels): Added.
	(sensor_responseWMRF): Added.
	See arts online documentation for description of the new methods.

	* src/methods.cc (f_gridPurgeUnnecessaryFreqs): Removed.  
	(WMRFSelectChannels): Added.
	(sensor_responseWMRF): Added.

	* src/m_rte.cc (RteCalc): Give more explicit error message for
	sensor variable mismatch.

2009-06-18  Stefan Buehler  <sbuehler(at)ltu.se>

	* arts-1-12-41

	* Commit to save work state. Fast HIRS setup does not run right
	now, don't update if you need it. I'm working on allowing to
	select only a subset of channels for calculation.
	
	* src/methods.cc (f_gridPurgeUnnecessaryFreqs): Added.
	(Select): Added implementation for Sparse.

	* src/m_sensor.cc (f_gridFromSensorHIRS): Moved all the
	preparatory work of sorting and merging channels out to a separate
	function find_effective_channel_boundaries in file sensor.cc.
	(f_gridPurgeUnnecessaryFreqs): Added this new method, which
	removes frequencies from f_grid that are not in any instrument
	channel. Also uses the new find_effective_channel_boundaries
	subfunction.

	* src/sensor.{h,cc} (test_and_merge_two_channels): Moved here
	from m_sensor.cc.
	(find_effective_channel_boundaries): Added.

	* src/m_select.h (Select): Added implementation for Sparse.

	* src/m_rte.cc (RteCalcMC): English correction of error message.
	(RteCalc): English correction of error message.

2009-06-15  Stefan Buehler  <sbuehler(at)ltu.se>

	* arts-1-12-40
	
	* includes/hirs/*_HIRS.f_grid_fast.xml,
	includes/hirs/*_HIRS.W_fast.xml: These are the new fast setup
	files. Two sensors still have the old files, because the
	calculations are not finished: NOAA12 and TIROSN. Will update
	these as soon as the results are available. 

2009-06-12  Stefan Buehler  <sbuehler(at)ltu.se>

	* arts-1-12-39

	* includes/hirs/NOAA11_HIRS.f_grid_fast.xml,
	includes/hirs/NOAA11_HIRS.W_fast.xml: Added these two missing
	files. Note: There still is a bug in the fast HIRS setup, I am
	regenerating it right now. Error is below 0.5 K for most channels,
	but will be much smaller with the corrected version. Use with
	caution.   

2009-06-11  Stefan Buehler  <sbuehler(at)ltu.se>

	* arts-1-12-38

	* src/m_abs_lookup.cc (abs_lookupSetupBatch): Do a number of
	safety checks on the field names in the input atmospheric states
	and abs_species. Basicallly, we check that the input field names
	match the names of the absorption species.

	* src/abs_species_tags.{cc,h} (get_species_name): Added this
	function, which returns the species name for a tag group.  A tag
	group consists of several elementary SpeciesTags, which must all
	belong to the same molecular species. This function returns a
	string with the name of the species.

2009-06-10  Stefan Buehler  <sbuehler(at)ltu.se>

	* arts-1-12-37

	* src/species_data.cc (CH4-312): Added entry for this new isotope
	in HITRAN2008. Still commented out due to missing partition
	function data. 

2009-06-08  Stefan Buehler  <sbuehler(at)ltu.se>

	* arts-1-12-36

	* includes/hirs/*.f_grid_fast.xml, includes/hirs/*.W_fast.xml:
	Added updated setup files for fast HIRS calculation. These were
	computed for the new HIRS reference setup that was introduced in
	arts-1-12-22. WARNING: The setup files for NOAA11 are still
	missing, I will add them as soon as the calculation is finished. 

2009-06-01  Oliver Lemke  <olemke(at)core-dump.info>

	* arts-1-12-35

	* src/binio.h, src/bifstream.{cc,h}, src/bofstream.{cc,h}:

	Change return type of pos function to streampos to fix a warning on
	32-bit compilation.

2009-05-11  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-12-34

	* doc/uguide/main.tex: Commented out the sensor section.

	* doc/uguide/ppath.tex: Fixed some smaller things and removed control
	* doc/uguide/rte.tex:   file examples in these sections.
	* doc/uguide/atmosphere.tex: 
	* doc/uguide/concept.tex:  

2009-05-07  Stefan Buehler  <sbuehler(at)ltu.se>

	* arts-1-12-33

	* doc/uguide/concept.tex: Section on control files and workspace
	moved and rewritten. Figures removed, since they were not very
	illuminating. 

	* doc/uguide/Figs/concept/generic_method.pdf,
	  doc/uguide/Figs/concept/method.pdf: Removed.

	* doc/uguide/Figs/concept/README: Added, explains that there are
	no figures in this Chapter.	

2009-05-04  Stefan Buehler  <sbuehler(at)ltu.se>

	* arts-1-12-32

	* No change in arts source code, but setup files for new HIRS
	instruments in includes.

	* includes/hirs/find_freq_h.pro
	* includes/hirs/wavnum2freq.pro: IDL programs used by Viju to
	create the files.

	* includes/hirs/METOPA_HIRS.backend_channel_response.xml
	* includes/hirs/METOPA_HIRS.f_backend.xml
	* includes/hirs/NOAA18_HIRS.backend_channel_response.xml
	* includes/hirs/NOAA18_HIRS.f_backend.xml
	* includes/hirs/NOAA19_HIRS.backend_channel_response.xml
	* includes/hirs/NOAA19_HIRS.f_backend.xml: New setup files for
	N18, N19, and Metop A. Content and format similar to the files for
	the older sensors.

2009-04-26  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-12-31

	* doc/uguide/fm_definitions.tex:
	* doc/uguide/introduction.tex:
	* doc/uguide/formats.tex:
	* doc/uguide/utilities.tex: All removed.

	* doc/uguide/Figs/fm_definitions: Removed. Figures moved to the
	two new folders below.

	* doc/uguide/Figs/atmosphere:
	* doc/uguide/Figs/rte: Created.
	
	* doc/uguide/rte.tex: Included text from fm_definitions and started
	revision.

	* doc/uguide/atmosphere.tex: Created, based on text from old
	fm_definitions.tex.

	* doc/uguide/concept.tex: New text for introduction, What is ARTS?,
	Documentation guide and Environmental variables. Fixed some smaller
	things on other parts.

	* doc/uguide/main.tex: Updated addresses and some layout
	improvements. Moved Formalism section to theoretical background
	part.
	
	* doc/uguide/uguide.tex: Some cleaning of the file.

	* doc/uguide/references.bib: Added some of the newer ARTS
	publications. Added missing title for a reference used in MC
	section.

	* doc/uguide/symbol_defs.tex: Cleaned up sorting of definitions.

2009-04-23  Stefan Buehler  <sbuehler(at)ltu.se>

	* arts-1-12-30

	* includes/hirs/hirs_fast.arts: Fixed bug (re-creation of string
	variable dummy).

2009-04-23  Stefan Buehler  <sbuehler(at)ltu.se>

	* arts-1-12-29

	* src/m_abs.cc (abs_linesReadFromArtsObsolete): Added
	documentation header, stating that the function is obsolete. It is
	no longer included in methods.cc.

	* src/methods.cc: Continued documentation spring cleaning. Now
	done down to including method abs_lookupAdapt.

2009-04-22  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-12-28

	* configure.in: Not updated for last commit.

2009-04-22  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-12-27

	* src/sensor.cc (mixer_matrix): Changed the lower IF limit for
	created frequency grid. The point is now always 0 (corresponding to
	LO in RF). This makes it simpler to set up f_grid, especially for
	cases with an IF band starting at 0. 

	This should not cause any problems for existing sensor set-ups (tell
	me if I am wrong here!).

2009-04-20  Stefan Buehler  <sbuehler(at)ltu.se>

	* arts-1-12-26

	* src/methods.cc: Spring cleaning of online method
	documentation. Started at the top, and got down to 
	abs_lineshape_per_tgDefine.

2009-04-20  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-12-25

	* src/parser.cc (ArtsParser::parse_generic_output):

	Throw exception if a variable is created twice.

	* src/exceptions.h: Added WsvAlreadyExists exception.

	* ChangeLog: Added missing entry for arts-1-12-21.

2009-04-20  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-12-24

	* src/methods.cc: Extended the text for surfaceFlatSingleEmissivity
	and surfaceFlatVaryingEmissivity, after a suggestion from Stefan.

2009-04-20  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-12-23

	* src/methods.cc: Added to text to surfaceFlatRefractiveIndex, to
	make clear that complex_n must match f_grid.

2009-04-17  Stefan Buehler  <sbuehler(at)ltu.se>

	* arts-1-12-22

	* Fixed bug in HIRS setup. Sensor responses are now applied in
	radiance units, conversion to Tb is done afterwards, outside of
	RteCalc. 

	* includes/hirs/hirs_reference.arts: Set y_unit and jacobian_unit
	to 1.

	* includes/hirs/hirs_fast.arts: Set y_unit and jacobian_unit
	to 1.

	* tests/HIRS/TestHIRS.arts: Apply conversion from radiance to
	Planck Tb in ybatch_calc_agenda, after execution of RteCalc.

2009-04-14  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-12-21

	* src/methods.cc: Polish my share of workspace methods.

2009-04-09  Patrick Eriksson  <patrick.eriksson@chalmers.se>

        * arts-1-12-20

	* src/workspace.cc: Polishing for some variables. Removed some variables
	that have been commented out for a long time, such as zeeman variables.

2009-04-09  Patrick Eriksson  <patrick.eriksson@chalmers.se>

        * arts-1-12-19

	* src/methods.cc: Revision of description for all methods
	with Patrick, Claudia, Cory or Mattias as author done.
	All *Scale and *SetConstant methods also revised.

	* src/m_montecarlo.cc (ScatteringMonteCarlo): Removed.  
	Has been deactivated for a long time.
	(MCSetIncomingEmpty): Removed.

	* src/m_ppath.cc (ZaSatOccultation): Removed.
	(VectorZtanToZaRefr1D): Variables for refraction now
	internal varaibles and not method output.

	* src/m_physics.cc (Tensor6ToPlanckBT): Removed. If needed,
	a new method using y_unit should be created.

	* src/m_basic_types.cc (Tensor3FillWithVector): Removed. A method now 
	not used.

	* src/m_ppath.cc (rte_pos_and_losFromTangentPressure): 
	Removed (Should be replaced by a general function. Worked
	only for 1D and no refraction, where the task can be solved
	in a more simpler way.).

	* src/m_refraction.cc (refr_indexFieldAndGradients): Removed.
	As not very useful!

2009-04-06  Oliver Lemke  <olemke@core-dump.info>

        * arts-1-12-18

	* configure.in, config.h.cmake, CMakeLists.txt, src/main.cc:

	Use ctime instead of time.h.

	* src/agenda_class.{h,cc} (Agenda::find_unused_variables):
	
	Work in progress.

2009-04-07  Patrick Eriksson  <patrick.eriksson@chalmers.se>

        * arts-1-12-17

	* src/methods.cc: Revision of method starting with D-I. 

2009-04-07  Patrick Eriksson  <patrick.eriksson@chalmers.se>

        * arts-1-12-16

	* src/methods.cc: Started revision. Tried to obtain a relatively
	uniform style for the text (inside the file). Some different "patterns"
	were used. 
	
	I am presently looking at methods with me, Claudia or Cory as author.
	Revision of A-C ready.
	
	* src/m_cloudbox.cc (cloudboxSetEmpty): Renamed.
	(pnd_fieldZero): New name.

	* src/m_basic_types.cc (ArrayOfMatrixInsert): Removed.

2009-04-06  Stefan Buehler  <sbuehler(at)ltu.se>

        * arts-1-12-15

	* includes/amsu/amsub.backend.xml: Removed this file. It is no
	longer necessary, since this information is now given in
	amsub.backend_channel_response.xml. The file was a historic relic
	from the time when the instrument setup functions worked
	differently. 

2009-04-06  Patrick Eriksson  <patrick.eriksson@chalmers.se>

        * arts-1-12-14
	
	* includes/odin/linefile.SM_AC1e.xml: The data for the 556 GHz H2O
	line were not updated.

	Note that for the 556 GHz line, the "gamma values" for pressure
	broadening and the pressure shift variable are taken from
	Golubiatnikov et al., JQRST, 109, 1828, 2008. For the water vapour
	contimuum, the data are taken from Podobedov et al., JQSRT, 109,
	458, 2008. Other data are as for SMR operational processing. This
	including a 34% increase of nitrogen absorption following
	Boissoles et al., JQSRT, 82, 505, 2003.
	
2009-04-06  Oliver Lemke  <olemke@core-dump.info>

        * arts-1-12-13

	* CMakeLists.txt:

	Add -Wshadow to make warning flags consistent with configure.

	* src/agenda_class.cc (Agenda::execute):

	Remove one unused ostringstream. Slipped through before because of the
	missing Wshadow flag for cmake compilation.

	* src/agenda_class.{h,cc} (Agenda::find_unused_variables):
	
	Work in progress.

2009-04-06  Stefan Buehler  <sbuehler(at)ltu.se>

        * arts-1-12-12

	* A cleanup of various more or less cosmetic bugs and issues
	around OpenMP. Finally fixed the annoying "disappearing output"
	bug. Also some slight performance improvements.  
	
	* OpenMP: Cleaned up all OMP loops. They now all have a clause
	"default(none)", so that all used variables have to be declared
	explicitly as either shared, firstprivate, or private. This should
	help to avoid bugs in future.

	* Report output: The << operators for outx now use a critical
	section to avoid that output from different threads is
	mixed. However, this works only for individual output operations,
	not if you build up a long output chain with several <<
	operators. In those cases, it is better to build up the output in
	a string stream, then write it to outx with a single operation. 

	* src/messages.h (Messages::Print): Use critical regions to avoid
	output from different threads being mixed.

	* src/m_batch.cc (ybatchCalc): OpenMP cleanup. Report output
	cleanup. Level 2 output of this function is now really nice. I use
	a job counter to see which fraction of the total job is already
	done, and this is displayed, along with the current index in the
	batch and the thread ID. Now you can really see what is going on! 

	* src/arts.cc (arts_exit): Report output cleanup. 

	* src/m_rte.cc (RteCalcMC, RteCalc): OpenMP cleanup.

	* src/interpolation_poly.cc (IMIN, IMAX): Added these two
	functions, which before were implemented as C pre-processor
	macros. The macros were not thread-safe, a bug that I discovered
	after rigorously using the "default(none)" clause on all parallel
	regions and loops.
	(gridpos_poly): OpenMP cleanup.

	* src/main.cc (main): Initialize the threadprivate in_main_agenda
	flag to true for all threads. This fixes the long-standing bug
	that some output disappeared in multi-threaded calculations.

	* src/m_scatrte.cc (ScatteringDoit): OpenMP cleanup.

	* src/m_abs_lookup.cc: OpenMP cleanup. Report output cleanup. 

	* src/agenda_class.cc (execute): Report output cleanup. 

	* src/messages.cc: Improved some comments.

	* src/absorption.cc (xsec_species): OpenMP cleanup.

	* src/m_abs.cc: Report output cleanup.  

	* src/m_atmosphere.cc (batch_atm_fields_compactFromArrayOfMatrix):
	OpenMP cleanup.

	* src/rte.cc (rte_step_std_clearsky): Changed type of input
	argument absorption from "const Vector&" to
	"ConstVectorView". This gives a 3% decrease in total runtime for
	an arts job with many frequencies.

	* src/gas_abs_lookup.cc (Extract): Some numerical
	optimizations. (Doing an explicit for loop, instead of using a
	temporary Vector.) Only a modest speed improvement (2%).

2009-04-06  Oliver Lemke  <olemke@core-dump.info>

        * arts-1-12-11

	* configure.in: Add proper check for time support.

	* m_general.{cc,h}, main.cc:

	Use the new TIME_SUPPORT preprocessor flag.

	* CMakeLists.txt, config.h.cmake:

	Started to add proper feature checks.

2009-04-03  Oliver Lemke  <olemke@core-dump.info>

        * arts-1-12-10

	* configure.in, CMakeLists.txt:

	Also add the binary name to COMPILER. Helpful information while
	testing compilation with different versions of the same compiler.

2009-04-03  Oliver Lemke  <olemke@core-dump.info>

        * arts-1-12-9

	* src/Makefile.am, src/CMakeLists.txt:

	Don't link make_auto_md_h, make_auto_workspace_h, and make_auto_md_cc
	against version.cc. It's not needed there and triggers unnecessary
	rebuilds.

	* src/main.cc, src/version.cc:

	Display the modification time of the arts executable in -v instead of
	the compile time of version.cc which can be very misleading.

	* src/m_general.cc: Fix warning in non-POSIX compilation.

2009-04-03  Oliver Lemke  <olemke@core-dump.info>

        * arts-1-12-8

	* CMakeLists.txt:

	Make sure the -Wno-unknown-pragmas is at the end of WARN_FLAGS.

2009-04-03  Oliver Lemke  <olemke@core-dump.info>

        * arts-1-12-7

	* src/main.cc: Output the runtime before saying goodbye.

2009-04-03  Oliver Lemke  <olemke@core-dump.info>

        * arts-1-12-6

	* configure.in, config.h.cmake, CMakeLists.txt:

	Add compiler name to config.h.

	* src/main.cc:

	Display the compiler in -v.

	Display the output of -v also in out2.

	* src/version.cc: Add compile timestamp to version number.

2009-04-02  Oliver Lemke  <olemke@core-dump.info>

        * arts-1-12-5

	* src/CMakeLists.txt: And this one too....

2009-04-02  Oliver Lemke  <olemke@core-dump.info>

        * arts-1-12-4

	* config.h.cmake: Forgot this in my last commit.

2009-04-02  Oliver Lemke  <olemke@core-dump.info>

        * arts-1-12-3

	* src/montecarlo.cc (Cloudbox_ppathCalc):

	Comment out WriteXML to fix compilation with icc.

	* configure.in:

	Add 980 to diag-disable flag to work around a bug in the current Intel
	compiler version.

	* README.cmake, CMakeLists.txt, src/CMakeLists.txt:

	Add experimental, rudimentary support for cmake.

	* src/disort.h (dtauc_ssalbCalc): Add missing Workspace&.

	* src/m_disort.cc: Include cstring.

2009-03-31  Stefan Buehler  <sbuehler(at)ltu.se>

        * arts-1-12-2

	* src/m_batch.cc (ybatchCalc): Fixed bug in out2 output.

2009-03-30  Stefan Buehler  <sbuehler(at)ltu.se>

        * arts-1-12-1

	* New version number, due to controlfile changes.

	* WSM ybatchCalc: Added input variable ybatch_start, which can be
	used to start batch calculations somewhere in the middle of the
	batch. This is handy for testing, or if you want to split up a
	large batch into several calculations. Note that an alternative to
	this approach is to use the Select method to split up the batch
	cases themselves, before ybatchCalc is called.

	* This change should not break controlfiles for most users, since
	the newly introduced variable is set to a default in general.arts.

	* src/methods.cc (ybatchCalc): Updated.
	
	* src/m_batch.cc (ybatchCalc): Updated.
	
	* src/workspace.cc (ybatch_start): Added.
	
	* tests/AMSU/TestAMSU_generic.arts: No significant change.
	
	* doc/uguide/batch.tex: Updated chapter on batch calculations.
	
	* includes/general.arts (ybatch_start): Set to default value 0.

	* src/messages.h: Added flush to report file output, so that it is
	directly visible.

2009-03-24  Stefan Buehler  <sbuehler(at)ltu.se>

        * arts-1-11-51

	* includes/hirs/hirs_reference.arts: Replaced
	abs_lineshape_per_tgDefine by abs_lineshapeDefine, since we are
	now setting identical shape parameters for all species.

	* includes/hirs/hirs_fast.arts: Replaced
	abs_lineshape_per_tgDefine by abs_lineshapeDefine, since we are
	now setting identical shape parameters for all species. ATTENTION:
	In this file the cutoff was still 750e7 for species other than
	H2O, which was wrong!

	* src/m_abs.cc (abs_lines_per_speciesCompact): Bug fix: The case
	that abs_lineshape has only one element (which is then valid for
	all species) was not handled.

2009-03-06  Oliver Lemke  <olemke@core-dump.info>

        * arts-1-11-50

	* src/Makefile.am:

	Rename libarts to libartscore.

	Move math_funcs.{cc,h} from libmatpack_a_SOURCES to
	libartscore_a_SOURCES. They're arts-specific and not used in
	matpack.

	Add math_funcs.{cc,h} to test_legendre_SOURCES and
	test_integration_SOURCES.

2009-02-19  Oliver Lemke  <olemke@core-dump.info>

        * arts-1-11-49

	* src/xml_io.cc (xml_read_header_from_stream):

	Ignore whitespace at the beginning of XML files (in front of the
	'<?xml'). This makes the ARTS reading routine consistent with xmlLoad
	in atmlab.
	Bug reported by Ajil.

2009-02-18  Oliver Lemke  <olemke@core-dump.info>

        * arts-1-11-48

	* src/m_scatrte.cc (ScatteringDoit):

	Pass the local copies ws and doit_mono_agenda to
	doit_mono_agendaExecute to unbreak OpenMP enabled builds.
	Bug reported by Claudia.

2009-02-10  Patrick Eriksson  <patrick.eriksson@chalmers.se>

        * arts-1-11-47

	* src/m_cloudbox.cc (pnd_fieldCalc): Removed two cout commands,
	appearently forgotten from some test.

2009-02-10  Stefan Buehler  <sbuehler(at)ltu.se>

        * arts-1-11-46

	* includes/hirs/hirs_reference.arts: Set lineshape cutoff value
	for all species to 750e9. The old version of this file had used a
	smaller value of 750e7 for all species except H2O. Test
	calculations by Ajil have shown that value to be too small.

	* includes/hirs/{*.f_grid_fast.xml,*.W_fast.xml}: Replaced these
	setup files for fast calculations by updated versions. The
	f_grid_fast files contain the frequencies selected by simulated
	annealing, the W_fast files the corresponding weights (determined
	by linear regression). This update was necessary because of the
	change in the lineshape cutoff frequencies for the reference
	calculations.
	
2009-02-06  Oliver Lemke  <olemke@core-dump.info>

        * arts-1-11-45

	* src/m_extract.h: Change < to " for two non-system includes.

	* src/Makefile.am: Remove auto_workspace.h as a dependency from
	libmethods.a.
	
2009-01-08  Patrick Eriksson  <patrick.eriksson@chalmers.se>

        * arts-1-11-44
	
	* src/absorption.cc (LineRecord::ReadFromHitran2004Stream):
	Changed outpur level from out0 to out1 for warning: "Warning:
	HITRAN molecule number mo is not known to ARTS." An important
	warning, but disturbing to get this warning repeatedly and not
	possible to make arts totally quite.

	* src/workspace.cc: Removed ppath_array_do as it is now not used. 

2009-01-08  Oliver Lemke  <olemke@core-dump.info>

        * arts-1-11-43

	* src/Makefile.am:

	Fix bug reported by Claudia. Some compiler versions require the
	library flags to come after the object files.

2009-01-07  Oliver Lemke  <olemke@core-dump.info>

        * arts-1-11-42

	* src/methods_aux.cc (define_md_map):

	Only declare wsv_group_names in debug mode. It is only used inside an
	assertion.

2008-11-24  Stefan Buehler  <sbuehler(at)ltu.se>

	* src/check_input.{cc,h} (chk_interpolation_grids): Added this
	function. It checks if old and new grid for an interpolation are
	ok. If not, it throws a detailed runtime error message. This is
	intended for workspace method input variable checking. 
	There is also a separate function that can be used in the case
	that the new grid is just a scalar.

2008-11-21  Oliver Lemke  <olemke@core-dump.info>

        * arts-1-11-41

	* src/methods.cc, src/workspace.cc:

	Update online docs for WriteXML and output_file_format.

2008-11-21  Stefan Buehler  <sbuehler(at)ltu.se>

        * arts-1-11-40

	* src/m_abs_lookup.cc (abs_lookupSetupBatch): Fixed bug reported
	by Isaac. For very high vertical resolution batch profiles the
	pressure window for averaging onto a common pressure grid was not
	sized correctly at the top.

2008-11-19  Stefan Buehler  <sbuehler(at)ltu.se>

        * arts-1-11-39

	* includes/hirs/hirs_fast.arts: This is now complete and verified
	to work. The criterion for my annealing method was to get RMS
	agreement better than 0.01 K between the fast and the reference
	calculations. I verified that the fast setup really achieves
	this. However, note that maximum errors are larger than RMS
	errors. In my verification run, the maximum error for this setup
	was below 0.05 K. (Tested for the Garand profiles, which were also
	used for grid optimization. Errors for another atmospheric data
	set may be higher.)
	What still remains to be done here is to enable selection of
	individual channels, right now you can only do all channels
	simultaneously. 
	The calculation uses around 150 frequencies in total for all
	channels. (Number varies from channel to channel.)
	Overall computation time (including lookup table generation) for
	the 42 Garand profiles on my computer is 1m30s.

	* includes/hirs/NOAA*_HIRS.f_grid_fast.xml: Added these files for
	all satellites. These are the frequency grids for fast calculation.
	
	* includes/hirs/NOAA*_HIRS.W_fast.xml: Added these files for
	all satellites. These are the pseudo-K weights for fast calculation.
	
	* tests/HIRS/TestHIRS.arts: Set to do a fast run with all channels.

	* src/matpackII.cc (operator =): Fixed bug here in the assignment
	operator. The cases that either the left or the right argument are
	not initialized have to be handled.

2008-11-17  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-11-38

	* doc/Makefile.am: Add index.html to EXTRA_DIST.

	* src/continua.cc: Doxygen fixes. Remove spaces at the end of lines.

	* .cproject: Better names for build targets.

	* .settings:

	Added Eclipse settings directory. Includes indentation rules and other
	project related setting.

2008-11-13  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-11-37

	* src/workspace.cc: Wrote text for ppath_transmissions.

	* src/agendas.cc: Now iy only output from iy_cloudbox_agenda. 

2008-11-12  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-11-36

	* First commit from inside Eclipse, hope it doesn't break anything...

	* src/nc_io_basic_types.cc, src/nc_io_array_types.cc,
	src/agenda_class.cc, src/absorption.h (LineRecord):

	Doxygen fixes.

	* doc/doxygen/Doxyfile.in: Updated.

	* .cproject, .project: Added Eclipse project files (only for testing).

2008-11-12  Stefan Buehler  <sbuehler(at)ltu.se>

	* arts-1-11-35

	* includes/hirs/hirs_fast.arts: Continued work on this one. 
	Not completed.

2008-11-11  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-11-34

	* src/agendas.cc: Revision of description of several agendas.

	* src/workspace.cc: Revision of description of many variables. Several
	variables "de-activated".

2008-11-10  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-11-33

	* Dummy commit to match my too early increased version number in
	configure.in.......

2008-11-10  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-11-32

	* src/agenda_class.cc (Agenda::execute):

	Fix bug reported by Patrick. Input WSVs to SetMethods were always
	considered initialized due to an erroneous if statement.

2008-11-07  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-11-31

	* tests/ClearSky/TestClearSky.arts: Nowincluding multiple
	frequencies and measurement blocks. To make tests of jacobians a
	bit more demanding. Pointing jacobian included.

	* src/m_jacobian.cc (jacobianAddPointing): Reintroduced and polished.

	(jacobianCalcPointing): Reintroduced, polished and partly rewritten.

	(jacobianCalcPolyfit): Now using polynomial_basis_func.

	* src/jacobian.cc (polynomial_basis_func): Created.

2008-11-07  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-11-30

	* src/methods.cc, src/workspace.cc: Updated templates.

2008-11-06  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-11-29

	* tests/ClearSky/TestClearSky.arts: Now analytical calculations also
	for temperature jacobians.

	* src/rte.cc (rte_std): There was a smaller error for gas species
	jacobians. The term for the transmission through the pstep of concern
	was lacking. Was supposed to be included in include_cumtrans_in_diy_dq,
	by turned out be better (for temperature jacobians) to include this
	term in here. Added code for higher stokes components.

	Derived expressions and included code for temperature jacobians. Works
	fine for case in TestClearksy.arts.

	Code for polarised absorption still lacking in both cases.

	* src/rte.cc (include_cumtrans_in_diy_dq): Wrote header.

	* src/m_rte.cc (RteCalc): Included some lacking code for
	temperature jacobians.

2008-11-05  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-11-28

	* tests/ClearSky/TestClearSky.arts: Added call of
	jacobianAddTemperature.

	* src/m_jacobian.cc (jacobianAddTemperature): Reintroduced and updated.
	(jacobianCalcTemperature): As above.

2008-11-03  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-11-27

	* Lots of casting fixes to make account for the stricter warning
	policy in gcc 4.3. Warnings are now issued for all implicit conversions
	that might lead to alteration of values. Like casting from Index to
	Numeric. The fix is to insert explicit castings in the corresponding
	places to show the compiler that we know what we're doing and are
	aware of the problem.

	* configure.in: Reenable -Werror for gcc 4.3.

	* src/math_funcs.cc, src/lineshapes.cc, src/legendre.cc,
	src/m_general.cc, src/m_scatrte.cc, src/m_abs_lookup.cc,
	src/m_jacobian.cc, src/m_montecarlo.cc, src/m_batch.cc,
	src/montecarlo.cc, src/ppath.cc, src/rng.cc, src/test_matpack.cc,
	src/test_integration.cc, src/matpackI.cc, src/methods_aux.cc,
	src/geomag_calc.cc, src/m_atmosphere.cc, src/interpolation.cc,
	src/binio.cc, src/gzstream.cc, src/main.cc, src/test_sparse.cc,
	src/test_tensor.cc, src/test_interpolation.cc, src/test_sorting.cc:

	Introduce explicit casts in several places.

	* src/lineshapes.cc:

	Add parenthesis in several places to make clear that + has precedence
	over the shift operator <<.

	* src/xml_io.cc (xml_set_stream_precision), src/methods_aux.cc,
	src/abs_species_tags.cc:

	Make variable 'precision' int instead of Index.

	* src/nc_io.{cc,h}: Add function nc_get_data_long.

	* src/nc_io_array_types.cc:

	Change dimension types from int to long to match the matpack
	dimensions.

	* src/absorption.cc: Changed type of nChar from Numeric to Index.

	* src/jacobian.cc (get_perturbation_limit):

	Make inc Numeric instead of Index as it's anyway only used if FP
	multiplications.

2008-10-28  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-11-26

	* configure.in:

	Do not only check for the existence of nc_open in libnetcdf, but
	also make a small test compile to see if the header file is correct.

2008-10-28  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-11-25

	* configure.in: Check explicitly for existance of nc_open.

2008-10-27  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-11-24

	* Could not compile with NetCDF! Oliver is contacted.

	* src/m_sensor.cc (sensor_responseBeamSwitching): Created. To handle
	ground-based beam switching (at least as performed at Onsala).

	* src/m_jacobian.cc (jacobianCalcPolyfit): Did not work properly.
	Now tested more in detail (for a single spectra case).

	* src/m_rte.cc (RteCalc): Unit for conversion for jacobian did not
	work for cases with more than 1 zenith angle.

	* src/rte.cc (apply_y_unit): Changed type of iy to MatrixView.

2008-10-27  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-11-23

	* src/matpackIV.{h,cc}: Add get_c_array for Tensor4.

	* src/methods.cc, nc_io_basic_types.cc:

	Add Tensor4 read/write support.

2008-10-24  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-11-22

	* src/agenda_class.cc (Agenda::set_outputs_to_push_and_dup):

	Make AgendaMap const. Fixes icc compilation.

2008-10-23  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-11-21

	* src/agenda_class.{h,cc}:

	Add new flag mchecked. It is set to false whenever the agenda is
	modified.

	(Agenda::check): Makes sure the methods in the agenda fulfill the
	input/output requirements and sets the mchecked flag to true.

	(Agenda::execute): Throw an error if the agenda hasn't been checked
	for consistency.

	(Agenda::append): Call AgendaAppend with proper input agenda name.

	* src/m_agenda.cc (AgendaSet):

	Use Agenda::check.

	(AgendaAppend):

	Make sure input and output agenda are the same.

	Use Agenda::check.

	* ChangeLog: Removed spurious config marker.

2008-10-23  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-11-20

	* src/m_jacobian.cc (jacobianCalcPolyfit): Bug when identifying
	polynomial coefficient to treat. Appears to work for single
	spectra. No testing yet for more complex cases (code is in place).

2008-10-22  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-11-19

	* src/m_jacobian.cc: Changes in several functions following
	changes and hints by Oliver. For example, variables now better
	initialised.

	(jacobianCalcPolyfit): Complete. But just simple tests so far.

2008-10-22  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-11-18

	* src/agenda_class.{h,cc} (Agenda::append):

	Change type of keywordvalue from String to TokVal to be able to pass
	other types instead of just strings.

2008-10-22  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-11-17

	* src/m_sensor.cc (f_gridFromSensorHIRS):

	Comment out unused local variable.

2008-10-22  Stefan Buehler  <sbuehler(at)ltu.se>

	* arts-1-11-16

	* src/m_sensor.cc (f_gridFromSensorHIRS): Fixed bug. The case that
	some channels may be completely inside other (broader) channels
	was not handled correctly. Completely redesigned the channel
	merging part to fix this. (Thanks Patrick, you were right about
	this one.)
	(test_and_merge_two_channels): Added this function, which does the
	work of comparing two channels, and merging them if necessary.

	* src/methods.cc (f_gridFromSensorHIRS): Changed default value for
	spacing to a more reasonable value (5e8), and updated documentation.

2008-10-22  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-11-15

	* src/agenda_class.cc (Agenda::execute):

	Add assertion firing when the agenda has no name. Indicates
	initialization problem.

2008-10-22  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-11-14

	* src/m_sensor.cc (sensorOff): Now also returning the grid
	variables (sensor_response_f_grid etc). Needed for setting up polyfit
	jacobian.

	* src/m_jacobian.cc (jacobianInit): jacobian_agenda now init and made
	empty.

	(jacobianCalcAbsSpecies): Code polished slightly and some comments
	added.
	(jacobianAddPolyfit): Re-introduced. Smaller updates.
	(jacobianCalcPolyfit): Re-introduced. Not finished.

2008-10-22  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-11-13

	* src/m_jacobian.cc (jacobianAddAbsSpecies):

	Make sure the jacobian_agenda is properly initialized, i.e. set its
	name.

	Add ws.

	* src/agenda.{h,cc} (Agenda::append):

	Utilize the AgendaAppend method to have proper in-/output checks.

	* src/methods.cc:

	Pass workspace to abs_speciesAdd2 and jacobianAddAbsSpecies.

	* src/m_agenda.cc (AgendaAppend):

	Refine the code to not mess up the string references to the agenda
	name.

	* src/m_abs_lookup.cc (abs_speciesAdd2): Add ws.

2008-10-20  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-11-12

	* src/m_jacobian.cc (jacobianCalcAbsSpecies): Now using
	jacobian_y_agenda.
	(yCalc): Removed this temporary solution.

	* src/agendas.cc: Added *jacobian_y_agenda*.

2008-10-20  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-11-11
	
	* src/m_jacobian.cc (yCalc): Dummy vector for sensor_response_aa
	was not sized properly.

	Added some size output for debugging.

2008-10-20  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-11-10

	* src/agenda_class.cc (Agenda::append):

	Properly add the inputs and outputs to the new MRecord. Attention:
	Works ONLY for methods WITHOUT generic input and output. One generic
	input parameter is allowed if the method is defined as a SETMETHOD in
	methods.cc.
	
	* src/methods.cc, src/m_agenda.cc:

	Added AgendaAppend. Can be used to append WSMs to an agenda.

	* src/agenda_class.h: Add helper function set_methods.

2008-10-17  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-11-9

	* configure.in: Removed cruft from beginning of file.

2008-10-17  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-11-8

	* src/m_jacobian.cc: Started revision of jacobians. Some cleaning
	of file and code. Add/calc methods for all quantities beside
	absorption species commented out. Will be re-introduced after
	update and testing. Right now something wrong in perturbation
	calculations.

	(jacobianAddPolyfit): Created but not tested. Non-active.
	(jacobianCalcPolyfit): Started. Not finished. Non-active.

	* src/m_rte.cc (RteCalc): Now using ABSSPECIES_MAINTAG.

	* src/constants.cc: Added ABSSPECIES_MAINTAG, in order to have a
	clear definition of jacobian tags.

	* tests/ClearSky/TestClearSky.arts: Polished and added some first
	jacobian calculations. 

	* src/m_jacobian.cc (jacobianUnit): Was de-activated. Activated and 
	changed as below.
	* src/m_batch.cc (ybatchUnit): As below.
	* src/m_rte.cc (yUnit): The function was not updated to use y_f
	instead of sensor:_response_f.

2008-10-17  Stefan Buehler  <sbuehler(at)ltu.se>

	* arts-1-11-7

	* includes/hirs/hirs_reference.arts: Major work on this. Now takes
	these input variables:
	# satellite   (String) 	     The name of the satellite. Is
	#                      	     used internally to construct
	#                      	     file names of the instrument
	#                      	     description files
	#                      	     f_backend_file and
	#                      	     backend_channel_response_file. 
	# channels    (ArrayOfIndex) Which channels you want.
	# views       (ArrayOfIndex) Which views you want.
	# hitran_file (String)       Name of HITRAN catalogue file.
	# f_grid_spacing (Numeric)   Frequency grid spacing.

	* includes/hirs/hirs.sensor_los.xml: Added. (Before, we still used
	the angles from AMSU.)

	* includes/hirs/hirs_fast.arts: Some editing also of this, but
	this is not finished!

	* tests/HIRS/TestHIRS.arts: Updated according to changes in
	hirs_reference.arts. 

	* src/m_append.h (Append): Added String implementation.
	
	* src/m_select.h (Select): Made all implementations safe to use
	with input and output as same variable. Added Matrix
	implementation. 

	* src/methods.cc (Append): Added implementation for type
	String. Updated documentation.
	(Select): Added implementation for type Matrix. Updated
	documentation. 

2008-10-16  Oliver Lemke  <olemke@core-dump.info>

	* 

2008-10-16  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-11-6

	* configure.in, src/nc_io.{h,cc}, src/nc_io_compound_types.cc,
	src/nc_io_basic_types.cc, src/nc_io_types.h, 

	Get rid of the C++ NetCDF interface and use the much better maintained
	C interface.

	* src/nc_io_array_types.cc:

	Implement support for ArrayOfVector and ArrayOfMatrix. The data is
	stored as one big vector along with the dimensions of each element.
	Not perfect but due to the non-existent support in NetCDF 3 for
	arrays of variable-sized types (and NetCDF 4 not ready for prime time),
	this is better than nothing.

	* src/nc_io.{h,cc}: Added a couple of helper functions.

	* src/parser.cc (ArtsParser::tasklist_insert_set_delete):

	Allow ArrayOfIndex literals.

	* src/methods_aux.cc (MdRecord::MdRecord):

	Added a proper check that makes sure that all supergeneric variables
	in one method are defined for the same number of types.

	* src/methods.cc:

	Define Read/WriteNetCDF only for supported types. There are not many
	so far and the supported types are then shown in the online docs.

2008-10-14  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-11-5

	* includes/odin/linefile.SM_AC2ab.xml: Set broadening and pressure
	shift variables for the 556.9 Ghz H2O line to match Golubiatnikov
	et al., JQSRT, 2008. Temperature exponenets from PWR98.
	Added (manually) 8 strong H2O transitions between 750 and 1250 GHz
	to include most important lines inside 25 cm-1.

	* includes/odin/linefile.SM_AC1e.xml: As above.

	* includes/odin/odinsmr.arts: Changed to H2O continuum parameters
	to follow Podobedov et al., JQSRT, 2008. Changed scaling factor
	for N2 from 1.00 to 1.34.

2008-10-10  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-11-4

	* includes/odin/odinsmr_501_1D.arts:
	* includes/odin/odinsmr_501.arts: 
	* includes/odin/odinsmr_544.arts: Adapted to changes below.

	* includes/odin/odinsmr_501_absorption.arts: Created. To have an include
	file just specifying absorption. Needed for Bengts calculations.

	* includes/odin/odinsmr_544_absorption.arts: As above.
	
2008-10-09  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-11-3

	* NetCDF reading and writing of Vector, Matrix, and Tensor3 types
	should be stable now.

	* src/nc_io.{h,cc}:

	Add function nc_read_var. It also checks for the right number of
	dimenstions and that the variable name matches the type.

	* src/nc_io_basic_types.cc: Use nc_read_var. Add Tensor3 support.

	* src/nc_io_compound_types.cc, src/nc_io_array_types.cc:

	Added. Only dummy functions.

	* src/Makefile.am:

	Added nc_io_compound_types.cc and nc_io_array_types.cc to
	libarts_a_SOURCES and EXTRA_DIST.

	* src/matpackIII.{h,cc}: Add get_c_array function for const objects.

	* src/m_nc.h: Remove debug spew.

	* configure.in:

	Add AM_PROG_CC_C_O. Required because we're compiling getopt.c with
	per-target flags.

2008-10-08  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-11-2

	* src/m_extract.h: Include matpackV.h to pass checks.

2008-10-08  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-11-1

	* Increased minor version number because the following Workspace
	methods have been merged into one:

	ArrayOfGField3ExtractFromArrayOfArrayOfGField3
	ArrayOfIndexExtractFromArrayOfArrayOfIndex
	GField4ExtractFromArrayOfGField4
	MatrixExtractFromArrayOfMatrix
	MatrixExtractFromTensor3
	NumericExtractFromVector
	Tensor3ExtractFromTensor4
	Tensor4ExtractFromTensor5
	Tensor4ExtractFromArrayOfTensor4

	all merged into supergeneric method 'Extract'

	* src/methods.cc:

	Removed the methods mentioned above and added Extract.

	* src/methods.h, src/methods_aux.cc:

	Changed MdRecord.ActualGroup from an Index to a String. The String
	contains for each implementation of a supergeneric method the list of
	groups passed to this instantiation of the method.

	Before, one group was enough because supergeneric WSMs always had the
	same input and output type. Now we have to make sure that the getaway
	function names are unique even if a WSM has several implementations
	with the same output type but different input types and vice versa.

	More tweaking of the online docs formatting.

	* src/src/make_auto_md_h.cc, src/make_auto_md_cc.cc:

	Changed ActualGroup to ActualGroups.

	* src/m_extract.h: Added.

	Collect all Extract method implementations here.

	* src/parser.cc:

	Tweak the generic input and output parsing to take into account that
	supergeneric inputs and outputs can have different types now.

	* src/m_batch.cc: Moved Extract method implementations to m_extract.

	* src/Makefile.am: Add m_extract.h to libarts_a_SOURCES.

	* src/make_auto_md_cc.cc: Include m_extract.h in auto_md.cc.

	* tests/AMSU/TestAMSU_generic.arts, tests/HIRS/TestHIRS.arts,
	tests/OdinSMR/TestOdinSMR.arts, tests/OdinSMR/TestOdinSMR_119ghz.arts,
	tests/OdinSMR/TestOdinSMR_1D.arts, tests/ClearSky/TestClearSky.arts:

	Renamed Extract methods.

2008-10-07  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-10-7

	* src/m_append.h, src/m_select.h:

	Remove obsolete catchall template functions.

	* src/methods.cc:

	Define Select and nelemGet for ArrayOf* and Vector only.

2008-10-07  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-10-6

	* src/methods_aux.cc (operator<<):

	Show either Any or a list of the valid types in the online
	documentation for supergeneric methods.

	Finetune the automatic line breaking.

	* src/methods.cc:

	Define a constant string ARRAY_GROUPS which contains all array types.
	It is quite common that a WSM takes all kinds of arrays as an input.

	WSM Append: Use ARRAY_GROUPS for GOUT_TYPE/GIN_TYPE.

	Include wsv_aux.h.

	* src/wsv_aux.h, src/group.cc (get_array_groups_as_string):

	Added function to return a string containing a comma-separated list of
	all array types.

	* src/Makefile.am:

	Move groups.cc and wsv_aux.h from libarts to libmethods.

	Add groups.cc to make_auto_md_h_SOURCES and make_auto_md_cc_SOURCES.

	* src/main.cc:

	Only output supergeneric methods that really can generate or use
	variables of the given group for 'arts -m|-i'.

2008-10-03  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-10-5

	* New feature: Supergeneric input / output can now be limited to
	certain variable groups. See nrowsGet, ncolsGet as an example.
	
	For WSMs that have Supergeneric input AND output, the number of types
	specified in GIN_TYPE and GOUT_TYPE for the supergeneric variable MUST
	be the same.

	* src/methods.cc:

	Limit supergeneric input for nrowsGet, ncolsGet.... to types that
	actually have these attributes.

	* src/methods.h:

	Added two ArrayOfArrayOfIndex to MdRecord that hold the valid variables
	groups if the WSM is not completely supergeneric but only defined for
	these types.

	* src/methods_aux.cc:

	Add support for specifying several types for GIN_TYPE and GOUT_TYPE.

	(subst_any_with_specific_group): Added.

	(expand_md_data_raw_to_md_data): Only partially expand supergeneric
	methods that are limited to certain types.

	* parser.cc (ArtsParser::parse_generic_input):

	Throw a runtime error if a supergeneric method is called with an
	unsupported type.

	* src/arts.h, src/wsv_aux.h:

	Moved function declarations for get_wsv_group_id from arts.h to
	wsv_aux.h.

	Added new function get_wsv_group_ids which parses a String with a list
	of wsv group names and returns an ArrayOfIndex with the group ids.

2008-10-03  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-10-4

	* src/m_sensor.cc (f_gridFromSensorHIRS): Made more tests to verify
	that the problem reported by Stefan is caused by numerical problems.
	Set the delta to 1 MHz.

	(f_gridFromSensorAMSU): Scaled value above and set delta here to 5 kHz.

2008-10-03  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-10-3

	* src/m_sensor.cc (f_gridFromSensorHIRS): Tested with delta = 0.0.
	Failed due to numerical problems. Changed to delta = 0.1 (that
	works for me).

	* includes/hirs/hirs_reference.arts: Removed definition of
	surface_prop_agenda.

	* tests/HIRS/TestHIRS.arts: Added definition of
	surface_prop_agenda, but is commented out. This to use the more
	efficient definition for blackbody surface in general.arts, and to
	have everything in one place of you want to use non-blackbody surface.

2008-10-03  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-10-2

	* configure.in: Forgot to change the version number in previous
	commit.

2008-10-02  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-10-1

	* Incremented minor version number because the following WSMs where
	renamed:

	ArrayOfGriddedField1Create -> ArrayOfGField1Create

	ArrayOfGriddedField3ExtractFromArrayOfArrayOfGriddedField3 ->
	  ArrayOfGField3ExtractFromArrayOfArrayOfGField3

	GriddedField4ExtractFromArrayOfGriddedField4 ->
	  GField4ExtractFromArrayOfGField4

	* src/methods.cc, src/constants.cc, src/m_batch.cc, src/m_create.cc,
	tests/AMSU/TestAMSUB_generic.arts, tests/HIRS/TestHIRS.arts,
	doc/uguide/clouds.tex, doc/uguide/atmosphere.tex:

	Replace all occurences of GriddedField by GField.

	* include/hirs/hirs_{fast,reference}.arts:

	WSM ArrayOfGriddedField1Create was renamed to ArrayOfGField1Create.

2008-10-02  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-9-38

	* src/special_interp.cc (interp_gfield3): Fixed several
	errors. Wrong storage order of grids was assumed.

	* src/methods.cc: Impreved description for
	InterpSurfaceEmissivityFieldIncLatLon.

2008-10-02  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-9-37

	* src/xml_io_compound_types.cc:

	Add dimension check to GField reading routines.

2008-10-01  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-9-36

	* src/m_surface.cc (InterpGriddedField3ToRteLosAndRtePos): Created.

	*src/m_create.cc (GField1Create) (GField2Create) (GField3Create) 
	(GField4Create): Created.

	* src/special_interp.cc (interp_gfield3): Created.

	* src/workspace.cc: Renamed surface_emissivity_field to
	surface_emissivity_DISORT. This as the variable is not flexible
	enough to merit the old name, and it is only used by DISORT.

	* tests/XXX/TestXXX.arts: Removed definition of
	surface_prop_agenda and iy_space_agenda where general.arts is used
	and settings same as in general.arts. Elsewhere added
	Ignore(rte_pos) in definition of surface_prop_agenda.

	* src/m_montecarlo.cc (MCGeneral): As below.
	(MCIPA): As below.

	* src/scatrte.cc (cloud_RT_surface): As below.

	* src/rte.cc (get_radiative_background): Adapted call of
	surface_prop_agenda.

	* src/agendas.cc: Added rte_pos as input to surface_prop_agenda. 

2008-10-01  Oliver Lemke  <olemke@core-dump.info>

	* configure.in: Added AM_PROG_CC_C_O as recommended by automake.

	* src/nc_io_array_types.cc, src/nc_io_compound_types.cc:

	Added.

	* src/Makefile.am:

	Added nc_io_array_types.cc and nc_io_compound_types.cc.

	* src/nc_io_basic_types.cc:

	Moved macros for compound and array dummy functions to the
	corresponding files.

	Implement Tensor3 reading/writing.

	* src/matpackIII.{h,cc}: Added get_c_array for const Tensor3.

2008-10-01  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-9-35

	* src/methods.cc:

	Added ReadNetCDF.

	Updated docs of Read/Write functions.

	* src/nc_io_basic_types.cc: Added reading routines for Vector/Matrix.

	* src/nc_io_types.h, src/nc_io_instantiation.h:

	Generate nc_read_from_file prototypes.

	* src/m_nc.h: Added ReadNetCDF functions.

	* src/nc_io.cc: Implement nc_read_from_file.

	* src/Makefile.am:

	Added netcdf sources to EXTRA_DIST. Otherwise the sources are missing
	in the distribution file if the computer which was used to build it
	didn't have NetCDF available.

2008-10-01  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-9-34

	* src/check-code-headers.sh:

	Add exception for nc_io_instantiation.h. Fixes make check in src.

2008-10-01  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-9-33

	* src/nc_io_instantiation.h: Added.

	* src/nc_io.{h,cc}: Moved templates from header to cc file.

	* src/m_nc.h: Include config.h.

	* src/matpackI.{h,cc}:

	Implement the get_c_array functions also for const objects.

	* src/nc_io_types.h: Fixes.

	* src/nc_io_basic_types.cc:

	Added first version of storing matrices in NetCDF.

2008-09-29  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-9-32

	* src/xml_io_types.h:

	Merged xml_io_basic_types.h, xml_io_compound_types.h, and
	xml_io_array_types.h into this file.

	* src/xml_io_basic_types.h, src/xml_io_compound_types.h,
	src/xml_io_array_types.h: Removed.

	* src/xml_io_basic_types.h, src/xml_io_compound_types.h,
	src/xml_io_array_types.h, src/xml_io_instantiation.h, src/xml_io.cc:

	Include new xml_io_types.h.

	* src/Makefile.am:

	Conditionally add NetCDF sources and libraries if available.

	* src/nc_io.{h,cc}, src/nc_io_types.h, src/nc_io_basic_types.cc:

	Added framework for NetCDF support.

	* src/make_auto_md_cc.cc

	Include m_nc.h.

	* src/main.cc:  Added NetCDF status to arts -v.

	* src/file.h: Cosmetics.

2008-09-26  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-9-31

	* src/methods_aux.cc (operator<<):

	Fix the order of GOUT / IN in the variable description list.

2008-09-25  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-9-30

	* tests/Makefile.am:

	Add a check-fast target for tests which should be checked before
	committing.

	Change order of dependency between TestAMSUB and TestAMSUB_fast.

	Move all tests except TestAMSUB from check to check-fast.

	* tests/testall.py:

	Move comparison between the results from TestAMSUB_fast to TestAMSUB.
	This way TestAMSUB_fast doesn't depend on TestAMSUB and we can run
	only TestAMSUB_fast in check-fast.

	* ChangeLog: Fix typo in previous log.

2008-09-25  Stefan Buehler  <sbuehler(at)ltu.se>

	* arts-1-9-29

	* includes/hirs/hirs_fast.arts: Added. Will be the standard HIRS
	setup for end users, with optimized frequency grid.
	
	* includes/hirs/hirs_reference.arts: Renamed from
	hirs.arts. Updated to file and variable name change
	(backend_channel_response). Added channels variable for channel
	selection. Added documentation at file start.

	* tests/HIRS/TestHIRS.arts: Updated to changed file and variable
	names. 

2008-09-25  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-9-28

	* tests/MonteCarlo/TestRteCalcMC.arts:

	Use a fixed number of photons instead of 4 sec calculation time. As
	the runtime is measured in real time, it could mean that only a few
	photons are calculated if the computer is under high load which leads
	to results being way off (and the test fails).

2008-09-25  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-9-27

	* includes/hirs/*sideband*.xml:

	Renamed to *backend_channel*. Also replace Sideband inside file with
	Backend channel.

2008-09-25  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-9-26

	* src/methods.h, src/methods_aux.cc:

	Instead of finding out the input only and input/output variables
	everytime they are needed, calculate them once in the constructor of
	MdRecord and cache them.

	* src/make_auto_md_{h,cc}.cc, src/agenda_class.cc, src/parser.cc:

	Adapt for changes in MdRecord.

2008-09-24  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-9-25

	* src/agenda_class.cc (Agenda::execute):

	Fix serious bug discovered by Patrick. Make sure variables used both
	as input and output are initialized.

	* src/parser.cc (ArtsParser::parse_generic_input):

	Instead of crashing, throw an error and tell the user to use Copy if
	a variable instead of a constant is passed to a Set method.

	* src/methods.h, src/methods_aux.cc:

	Added function to get a list of variables that are used both as input
	and output.

2008-09-23  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-9-24

	* src/methods.cc:

	Replace empty gin and gout names with generic names (gin1, gin2...).

	* src/methods.{h,cc}, src/methods_aux.cc:

	Add new two new fields (GIN_DESC and GOUT_DESC) to MdRecord. They
	contain a short description for each GIN and GOUT variable.

	* src/methods_aux.cc:

	Output GIN and GOUT descriptions in online help.

2008-09-22  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-9-23

	* doc/examples: Removed cruft.

	* configure.in: Removed doc/examples/{Makefile,data/Makefile}

	* doc/Makefile.am: Removed examples.

	* src/workspace.cc: Cosmetics.

2008-09-22  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-9-22

	* src/methods_aux.cc:

	Part One of the online help parameter documentation beautification.

	Pull the short description for each WSM's input/output variable from
	the WSV documentation and display it in the WSM's online help.

	Also change the way the variables' documentation is formatted in the
	WSM online help.

	Documentation for GIN/GOUT will follow in Part 2.

2008-09-22  Stefan Buehler  <sbuehler(at)ltu.se>

	* arts-1-9-21

	* tests/AMSU/TestAMSU_generic.arts: Removed lookup table accuracy
	test, to increase speed.

	* includes/hirs/hirs.arts: Cosmetics.

2008-09-22  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-9-20

	* includes/amsu/amsub_fast.arts: Missed to fix this test case.

2008-09-21  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-9-19

	* src/m_surface.cc: Forgot to make add on the file.

2008-09-21  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-9-18

	* src/m_surface.cc: Added this file and moved surface stuff from
	m_atmosphere to this file.
	(surfaceFlatRefractiveIndex): Replaces surfaceFlat. Using complex_n. 
	Dielectric models kicked out.
	(surfaceFlatSingleEmissivity): Replaces surfaceSimple. 
	surface_emissivity now generic input.
	(surfaceFlatVaryingEmissivity): New method.

	* src/workspace.cc: Introduced complex_n and t_surface. 
	Removed surface_emissivity. 

	* src/m_atmosphere.cc: Several methods moved to m_surface.

	* src/m_physics.cc (complex_nWaterLiebe93): Created this WSM (most
	code taken from old version of surfaceFlat). 

	* src_methods.cc: Suggestion to new header template.
	
2008-09-16  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-9-17

	* configure.in:

	Added netcdf check. (Lame commit mainly to test the new automated
	build server)

2008-09-16  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-9-16

	* tests/testall.py: 
	
	Fix assertion for MCGeneral test. Replace <4Q with <4dQ.

2008-09-11  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-9-15

	* tests/OdinSMR/TestOdinSMR_119ghz.arts: Missed to change back a
	setting after a test run.

2008-09-11  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-9-14

	* tests/OdinSMR/TestOdinSMR_119ghz.arts: Now including an antenna
	pattern response. A complete version. Aimimg at flexibility and
	accuracy. Not very fast.

2008-09-11  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-9-13

	* tests/testall.py: 
	
	Fix assertion for MCGeneralGaussian test. Replace <4Q with <4dQ.

2008-09-10  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-9-12

	* includes/odin/linefile.119ghz.xml: Created.

	* includes/odin/filterbank_response.xml: Created.

	* tests/OdinSMR/TestOdinSMR_119ghz.arts: Started. Antenna response is
	lacking.

2008-09-08  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-9-11
	
	* src/mystring.h, src/methods_aux.cc: Remove unused functions.

	* src/scatrte.cc, src/rte.cc, src/sensor.cc, src/gridded_fields.cc,
	src/xml_io_array_types.cc:

	Cleanup parameter lists in doxygen docs.

	* src/gas_abs_lookup.h, src/m_abs_lookup.cc:

	Renamed parameter al to abs_lookup.

	* doc/doxygen/Makefile.am: Send stdout cruft of doxytag to /dev/null.

2008-09-04  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-9-10
	
	* src/make_auto_md_h.cc:

	Make parameter documentation consistent with function declarations.

	If parameter names for GIn and GOut are defined in methods.cc, use
	them instead of generic names like genericinput1 or genericoutput2 for
	the WSM function parameters.

	* src/agenda_record.cc, src/disort.cc, src/montecarlo.cc,
	src/ppath.cc, src/refraction.cc, src/rte.cc, src/scatrte.cc,
	src/agenda_class.cc:

	Clean up doxygen docs.

	* doc/doxygen/Makefile.am:

	Don't send stdout of doxygen to /dev/null for now.

2008-09-04  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-9-9
	
	* configure.in, doc/doxygen/Doxyfile.in, doc/doxygen/latex,
	doc/doxygen/Makefile.am:

	Don't generate latex version of Doxygen docs anymore.

	* configure.in, doc/Makefile.am, doc/reference:

	Don't generate latex version of online docs anymore.

2008-09-03  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-9-8
	
	* src/methods_aux.cc (operator<<): Reduce line length to 68.

2008-09-03  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-9-7
	
	* src/methods_aux.cc (operator<<):

	Rework the online documentation formatting.

	(limit_line_length): Added helper function.

	* src/agenda_class.cc (Agenda::execute):

	Output method names for auto-generated Set and Delete methods to out3
	instead of out1.

	* tests/HIRS/TestHIRS.arts:

	Append .generated to output files so they get removed by make clean.

2008-09-03  Viju Oommen John  <viju.john@metoffice.gov.uk>

	* arts-1-9-6
	
        * tests/HIRS/TestHIRS.arts: Fine tuned.

        * tests/HIRS/garand_profiles.xml.gz: Added.

        * includes/hirs/hirs.arts: Tuned.

        * includes/continua.arts: Tuned.

2008-09-03  Stefan Buehler  <sbuehler(at)ltu.se>

	* arts-1-9-5

	* includes/amsu/amsub_fast.arts: Added. This is an AMSU-B setup
	with only two frequencies to represent each channel. The accuracy
	is 0.3 K in Channel 18, all others are better. This is intended
	for calculations with scattering, where we cannot afford to use
	many frequencies.

	* includes/amsu/amsub.f_grid_fast.xml: Input file for amsub_fast.arts.

	* includes/amsu/amsub.sensor_response_fast.xml: Input file for
	amsub_fast.arts. 

	* tests/AMSU/TestAMSUB_fast.arts: Added. Test for the new fast
	AMSUB setup file.

	* tests/testall.py (TestAMSUB_fast): Added test for the new fast
	AMSUB setup file.

	* tests/Makefile.am (TestAMSUB_fast): Added.

2008-09-01  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-9-4

	* src/exceptions.h: Remove UnexpectedKeyword exception.

	* src/parser.{cc,h}:

	Updated doxygen documentation.

	Rename parse_output_and_input to parse_method_args.

	Rename parse_input to parse_specific_input.

	Rename parse_output to parse_specific_output.
	
	(parse_generic_output): Split into method to make the code cleaner.

	(parse_generic_input): Split into method to make the code cleaner.

	(parse_method): Remove UnexpectedKeyword exception.

	(parse_method_args): Code cleanup.

2008-08-28  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-9-3

	* src/methods.cc, src/m_create.cc:

	Added ArrayOfGriddedField1Create.

2008-08-28  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-9-2

	* src/methods.cc, src/m_create.cc:

	Added ArrayOfVectorCreate.

2008-08-27  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-9-1
	
	* doc/reference/arts_methods_to_latex.sh:

	Fix for changes in arts online documentation output.

2008-08-27  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-9-0
	
	* ATTENTION: Backward-compatibility to the old controlfile syntax
	has been removed in this version!!!!!

	* Added a new supergeneric method Select which can be used to extract
	elements from a Vector or any Array by indexes:

	ArrayOfIndexCreate( aoi )
	ArrayOfIndexSet( aoi, [ 0, 2, 4 ] )
	ArrayOfStringCreate( s1 )
	ArrayOfStringSet( s1, [ "String1", "String2", "String3",
	                        "String4", "String5" ] )
	ArrayOfStringCreate( s2 )
	Select( s2, s1, aoi)

	s2 then contains [ "String1", "String3", "String5" ].

	* doc/uguide/agendas.tex:

	Change documentation for new controlfile format.

	* doc/uguide/clouds.tex, doc/uguide/ppath.tex,
	doc/uguide/scattering.tex, doc/uguide/sensor.tex,
	doc/uguide/concept.tex, doc/uguide/fm_definitions.tex,
	doc/uguide/absorption.tex, doc/uguide/batch.tex,
	doc/uguide/surface.tex, doc/uguide/clouds.tex

	Change keywords to generic inputs.

	Change examples to new controlfile style.

	* doc/uguide/montecarlo.tex:

	Rotate the flowchart by 90 degrees to make it fit on the page.

	* src/methods.{h,cc}, src/methods_aux.cc, src/make_auto_md_cc.cc,
	src/make_auto_md_h.cc

	Merge keywords with generic input.
	
	* src/parser.cc:

	Use the former keyword parsing code now for all generic inputs.

	All skipping of generic inputs at the end of the parameter list that
	have defaults defined.

	* src/agenda_class.cc (MRecord::print):

	Remove block for printing keywords.

	* src/m_xml.h:

	Adapt functions for changed number of arguments.

	* src/methods_aux.cc (operator<<):

	Removed unused variable separate_lines.

	* src/m_abs.cc (AbsInputFromRteScalars),
	src/m_jacobian.cc (jacobianUnit)

	Removed unused runtime_error variable.

	* src/methods.cc:

	Added new supergeneric WSM Select.

	Added new WSM ArrayOfIndexCreate.

	* src/m_create: Added ArrayOfIndexCreate.

	* src/m_select.h: Added implementation of WSM Select.

	* src/Makefile.am: Added m_select.h to libarts_a_SOURCES.

	* src/make_auto_md_cc.cc: Include m_select.h in auto_md.cc.

	* src/m_basic_types.cc: Added ArrayOfIndexSet.

2008-08-26  Stefan Buehler  <sbuehler(at)ltu.se>

	* arts-1-8-11
	
	* src/methods.cc (abs_lookupSetupWide): Added.

	* src/m_abs_lookup.cc (abs_lookupSetupBatch): Output also global
	min/max values for p, T, and H2O. This is handy as input for
	abs_lookupSetupWide.
	(abs_lookupSetupWide): Added first implementation of this. Does
	not yet work satisfactorily.
	(abs_lookupTestAccuracy): Continued work on this method. Fixed
	diverse bugs. Added test for total accuracy.

2008-08-25  Stefan Buehler  <sbuehler(at)ltu.se>

	* arts-1-8-10
	
	* src/m_abs_lookup.cc (calc_lookup_error): Added this new
	function. It does most of the work for abs_lookupTestAccuracy, in
	that it calls both lookup table extraction and LBL calculation for
	local atmospheric conditions.
	(abs_lookupTestAccuracy): Now simply loops over calc_lookup_error
	for different atmospheric conditions.

	* src/methods.cc (abs_lookupTestAccuracy): Updated. 

	* src/gas_abs_lookup.h (class GasAbsLookup): Declare both
	calc_lookup_error and abs_lookupTestAccuracy as friends.

	* src/interpolation_poly.cc (gridpos_poly): Parallelized main
	loop. 

	* src/workspace.cc (abs_cont_models): Fixed missing line break in
	documentation. 
	
2008-08-22  Stefan Buehler  <sbuehler(at)ltu.se>

	* arts-1-8-9
	
	* src/m_sensor.cc (f_gridFromSensorAMSU): Renamed this
	function. (Used to be just f_gridFromSensor). After Patrick's fix
	of the sideband grid, the margin can now be zero here.
	(f_gridFromSensorHIRS): Added this function, which does the same
	for a HIRS type instrument. There still is a problem with the
	width of the grid for sensor_responseBackend. I have to add a big
	margin to make it work.

	* includes/hirs/NOAA*_HIRS.sideband_response.xml: Corrected file format.

	* includes/hirs/NOAA*_HIRS.f_backend.xml: Corrected file format.

	* includes/hirs/TIROSN_HIRS.*: Ditto.

	* includes/hirs/hirs.arts: Added. Will contain standard sensor
	setup for HIRS when finished. Still requires adaption, some
	obvious ones marked by FIXME.

	* tests/HIRS/TestHIRS.arts: Added this directory and file, which
	contains a batch test for HIRS, similar to the one for AMSU. This
	is work in progress, not yet suitable for general use!
	
	* includes/amsu/amsub.arts: Adapted to name change of
	f_gridFromSensorAMSU. 

	* src/m_abs.cc (abs_scalar_gasCalcLBL): Removed unused parameter
	f_grid from AbsInputFromRteScalars call.

	* src/m_abs_lookup.cc (abs_lookupTestAccuracy): Removed unused
	variable n_species.

	* src/methods.cc (AbsInputFromRteScalars): Removed unused f_grid.
	(f_gridFromSensorAMSU): Renamed from f_gridFromSensor.
	(f_gridFromSensorHIRS): Added.

        * src/matpackI.{h,cc}: Commented in again assignment operators for
	Vector with parameter type Array<Numeric>. We commented this out a
	long time ago, because we wanted to split matpack from
	ARTS. However, that has never happened, and the function is handy.

2008-08-21  Viju Oommen John  <viju.john@metoffice.gov.uk>

	* arts-1-8-8
	
	* includes/hirs: Added this directory. Also, added frequency and 
	  spectral response functions for all HIRS instruments.

2008-08-20  Stefan Buehler  <sbuehler(at)ltu.se>

	* arts-1-8-7

	* Work on lookup table cleanup is still ongoing. This commit is
	mainly to have a backup of the state of my work. However,
	everything is working fine, so no problem to use this version for
	operational applications.

	* src/m_abs_lookup.cc (abs_lookupTestAccuracy): Added a first
	crude implementation of this. Will be refined in next commit. 

	* tests/AMSU/TestAMSU_generic.arts: Added the new
	abs_lookupTestAccuracy method.

	* src/m_abs.cc (AbsInputFromRteScalars): The reduction of the
	frequency grid was moved from this method to the new method
	f_gridSelectFIndex. 
	(f_gridSelectFIndex): Added.
	(abs_coefCalc, abs_coefCalcSaveMemory): Downgraded some output
	from out2 to out3.
	(abs_scalar_gasCalcLBL): Added this new method, which is a
	shortcut for:
	   f_gridSelectFIndex
  	   AbsInputFromRteScalars
  	   abs_h2oSet
  	   abs_coefCalc
  	   abs_scalar_gasFromAbsCoef

	* includes/general.arts (abs_scalar_gas_agenda): Replace the
	explicit list of methods in the agenda body by a call of
	abs_scalar_gasCalcLBL. 

	* src/gas_abs_lookup.cc (Extract): Update of doxygen
	documentation. 

	* src/methods.cc (AbsInputFromRteScalars, abs_lookupTestAccuracy):
	Modified.  
	(abs_scalar_gasCalcLBL, f_gridSelectFIndex): Added.
	
	* src/gas_abs_lookup.h (class GasAbsLookup): Added
	abs_lookupTestAccuracy as friend. (This will probably be modified
	again in my next commit.)

2008-08-20  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-8-6

	* includes/amsu/amsub.sideband_response.xml: Recreated this file. It 
	had been corrupted (some characters were missing)!

	* src/m_rte.cc (RteCalc): Added handling of y_pos and y_los.
	(RteCalcNoJacobian): As above.
	(RteCalcMC): As above.

	* src/m_jacobian.cc: Adapted call of RteCalcNoJacobian.

	* tests/OdinSMR/TestOdinSMR.arts: Replaced saving of y_za and y_aa with
	saving of y_pos and y_los.
	* tests/OdinSMR/TestOdinSMR_1D.arts: As above.

	* src/methods.cc: Replaced y_za and y_aa with y_pos and y_los. 
	Added that pnd field file shall have GField3 format.

	* src/workspace.cc: Replaced y_za and y_aa with y_pos and y_los.
	Replaced GriddedField with GField in variable descriptions.

2008-08-19  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-8-5

	* src/m_sensor.cc (f_gridFromSensor): Changed the size of margin
	to 0.001*spacing. I got it to work with no extra margin, but could
	maybe be safer to keep some margin. Will be discussed with Stefan
	through email.

	* includes/amsu/setup_input.m: Removed storage of f_grid. Now
	created dynamically again.

	Backend channel response now described to be perfectly
	rectangular.  The response outside covaered range is treated to be
	0 and in fact it has been possible all time to have a response >0
	at the end points. Adjusted range for sideband response definition
	correspondingly.

	All channels are now specified individually (e.g. lo frequency
	repeated for channels 18-20). This on request from Stefan. You now 
	select channels by standard numbering (that is, channels 16-20).
	
	* includes/amsu/amsub.f_grid.xml: Removed.
	
2008-08-14  Stefan Buehler  <sbuehler(at)ltu.se>

	* arts-1-8-4

	* src/m_scatrte.cc (ScatteringDoit): Parallelized this function. I
	have no good test case, unfortunately. Hope it is ok. 

	* src/m_abs_lookup.cc (abs_lookupSetupBatch): Fixed bug reported
	by Mathias. If all input profiles had zero H2O at some altitude,
	the reference profile was zero, leading to numerical problems. Now
	instead assign an ad-hoc value of 1-9 to the mean profile.

	* src/m_batch.cc (ybatchCalc_implementation): Cosmetics.

	* tests/DOIT/TestDOIT.arts: Cosmetics.

2008-08-13  Stefan Buehler  <sbuehler(at)ltu.se>

	* arts-1-8-3

	* The absorption lookup table should be again safe to use now. Let
	me know if you encounter any problems. With the new settings,
	accuracy is better than before, but lookup table size should be
	only a few percent of the original size.
	
	* includes/general.arts: Modified the default absorption
	interpolation settings. The new settings are:
	IndexSet( abs_p_interp_order,   5 )
	IndexSet( abs_t_interp_order,   7 )
	IndexSet( abs_nls_interp_order, 5 )

	* src/m_abs_lookup.cc (choose_abs_t_pert): Rewritten. Adjusts
	abs_t_pert to interpolation order.
	(choose_abs_nls_pert): Rewritten. Adjusts abs_nls_pert to
	interpolation order.
	(abs_lookupSetup): Added abs_p_interp_order.
	(abs_lookupSetupBatch): Added abs_p_interp_order. Do some
	smoothing of the reference profiles, according to the
	interpolation order in pressure. (Otherwise, sharp jumps in the
	reference profiles lead to numerical problems.)

	* src/methods.cc (abs_lookupSetup, abs_lookupSetupBatch): Added
	input variable *abs_p_interp_order*. Changed
	default values for grid steps. Defaults are now such that the
	pressure grid spacing is about 1 km. T and NLS spacing are set to
	very large values (100), so that in practice the interpolation
	order determines the spacing.
	(abs_lookupTestAccuracy): Added this new method, which will
	calculate and print out	the lookup table accuracy. The
	implementation of this method still has to be done, so far it is
	just an empty shell.

2008-08-13  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-8-2

	* src/methods.h, src/methods_aux.cc, src/agenda_class.{h,cc},
	src/make_auto_md_cc.cc, src/make_auto_md_h.cc,
	src/agenda_record.{h,cc}, src/m_agenda.cc, src/main.cc, src/parser.cc:

	Rename Output and Input to Out and In for consistency.

2008-08-12  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-8-1

	* Rearranged lots of stuff in methods.cc and dependent files to
	prepare for the merge of keywords with generic inputs.

	* src/methods.{h,cc}, src/methods_aux.cc:

	Rename GOUTPUT to GOUT_TYPE.

	Rename GINPUT to GIN_TYPE.

	Rename DEFAULTS to GIN_DEFAULT.

	Rename OUTPUT to OUT.

	Rename INPUT to IN.

	Change goutput to gouttype.

	Change ginput to gintype.

	Introduce gout which contains the generic output names.

	Introduce gin which contains the generic input names.

	* src/agenda_class.cc, src/parser.cc, src/make_auto_md_cc.cc,
	src/make_auto_md_h.cc, src/main.cc:

	Change GOutput to GOutType.
	Change GInput to GInType.

2008-08-12  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-8-0

	* Increased minor version number because this commit breaks
	controlfile compatibility. All Set methods behave consistently now.

	You have to make the following changes to your controlfiles:

	Replace VectorSet           by VectorSetConstant.
	Replace MatrixSet           by MatrixSetConstant.
	Replace Tensor[34567]Set    by Tensor[34567]SetConstant.
	Replace VectorSetExplicitly by VectorSet.

	* src/methods.cc, src/m_basic_types.cc:

	Rename VectorSet to VectorSetConstant and VectorSetExplicitly to
	VectorSet.

	MatrixSet -> MatrixSetConstant
	Tensor[34567]Set -> Tensor[34567]SetConstant

	* src/parser.cc:

	Remove special case where the SetExplicitly method was called for
	Vector instead of just the Set method like for other types.

	* includes/general.arts, includes/odin/odinsmr_544.arts,
	includes/odin/odinsmr_501.arts, includes/amsu/amsub.arts,
	includes/odin/odinsmr_501_1D.arts,
	tests/MonteCarlo/TestMonteCarloDataPrepare.arts,
	tests/MonteCarlo/TestRteCalcMC.arts,
	tests/OdinSMR/TestOdinSMR_1D.arts, tests/OdinSMR/TestOdinSMR.arts,
	tests/DOIT/TestDOIT.arts, tests/DISORT/TestDISORT.arts,
	tests/ClearSky/TestClearSky.arts, tests/Abs/TestAbs.arts,
	tests/AMSU/TestAMSU_generic.arts,

	VectorSet -> VectorSetConstant
	VectorSetExplicitly -> VectorSet
	MatrixSet -> MatrixSetConstant

2008-08-12  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-7-29

	* src/methods.{h,cc}, src/methods_aux.cc:

	For consistency, change order of output, input, goutput, ginput
	to output, goutput, input, ginput.

2008-08-05  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-7-28

	* src/xml_io_basic_types.h, src/xml_io_array_types.h,
	src/xml_io_compound_types.h:

	Use macros for function declarations.

2008-08-04  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-7-27

	* doc/reference/Makefile.am: Increase texcapacity to 25000.

	* src/m_append.h

	Include workspace_ng.h
	
	* src/m_copy.h, src/m_ignore.h, src/m_basic_types.h, src/xml.h:

	Include workspace_ng.h and agenda_class.h.

	* src/xml_io_array_types.h, src/xml_io_basic_types.h:

	Include xml_io_private.h for ArtsXMLTag.

2008-07-31  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-7-26

	* src/xml_io_instantiation.h: Fix typo in macro name.

	* ChangeLog: Fix typo in my previous commit.

2008-07-31  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-7-25

	* src/messages.cc:

	Fix compilation with icc. First define in_main_agenda and then include
	messages.h. i_m_a has to be initialized before being referenced
	anywhere else. As in_main_agenda is declared extern in messages.h, icc
	will otherwise throw the error: Threadprivate directive must
	lexically precede all references to any variables in its list.

2008-07-31  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-7-24

	* src/xml_io_instantiation.h:

	Use a macro to define the instantiations. Makes the file a lot more
	readable and shorter.

2008-07-31  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-7-23

	* src/make_auto_md_cc.cc, src/agenda_class.{h,cc} (Agenda::execute)

	Remove the agenda silent flag. It obsolete since arts-1-7-21.

	* src/agenda_record.{h,cc} (write_agenda_wrapper_header):

	Remove write_default_args and silent flag.

	* src/make_auto_md_h.cc:

	Adapt call of write_agenda_wrapper_header.

	* src/disort.cc, src/m_abs_lookup.cc, src/m_batch.cc,
	src/m_jacobian.cc, src/m_montecarlo.cc, src/m_scatrte.cc,
	src/montecarlo.cc, src/scatrte.cc:

	Remove silent flag from agendaExecute calls.

	* src/m_cloudbox.cc, src/m_atmosphere.cc, src/m_ppath.cc,
	src/ppath.cc, src/refraction.{h,cc}, src/rte.{h,cc},
	src/m_refraction.cc, src/m_rte.cc:

	Remove the agenda_verb and silent flags.

2008-07-30  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-7-22

	* The Workspace is no longer stored along with each agenda. Instead, a
	Workspace reference is passed to functions which need it (basically
	all functions that call agendas). This reference is then passed to
	each agendaExecute call because we only need one workspace per thread,
	not per agenda.

	* The parallized loops have been adapted to use OpenMP to create
	copies of the agendas and workspace were necessary. This saves some
	amount of copying. Before, we made a copy of each agenda for each
	iteration in parallized loops. Now, OpenMP will take care that only
	one copy per thread is made. And one thread is reused for several
	iterations inside the loop. E.g. if you have 4 CPUs and make a batch
	calculation over 1000 jobs, OpenMP will start 4 threads and each
	thread will calculate 250 iterations. If 4 agendas are called inside
	the loops we had to make 4000 agenda copies plus the workspace
	structure. Resulting in 8000 object copies.
	Now it is only 4 agenda copies + 1 workspace copy in front of the
	OpenMP loop (needed because OpenMP cannot make private thread copies
	of reference objects), and N*4 agenda copies + N Workspace copies
	(N=number of threads/CPUs) inside the loop. So, for a 4 CPU system
	this is 25 copies instead of 8000.
	Ok, this sounds much and will definitely save some memory and
	calculation time. But running 'make check' doesn't give any indication
	of a performance gain. Most likely because the jobs are rather short.
	Your mileage may vary with larger jobs.
	Note: When I speak of 'workspace copies' above I don't mean deep copies
	including all the variables. Only the book-keeping part of it is
	duplicated.

	* src/agenda_class.{h,cc}:

	Remove the workspace from the Agenda class. Instead pass it to
	Agenda::execute.

	Remove workspace get and set methods from Agenda class.

	* src/m_agenda.cc (Arts): Add workspace reference to parameters.

	* src/agenda_record.cc (write_agenda_wrapper_header):

	Add Workspace reference to agendaExecute methods.
	
	Remove safe_workspace flag.

	* src/make_auto_md_cc.cc (main):

	No local copy of input agenda in agendaExecute methods anymore.

	Pass the newly added workspace reference on to Agenda::Execute.

	* src/make_auto_md_cc.cc (main), src/make_auto_md_h.cc (main): 

	Pass Workspace to WSMs that have agendas as input or generic input.

	* src/main.cc: Pass workspace to Arts().

	* src/m_append.cc, src/m_copy.h, src/m_abs_lookup.cc, src/m_ignore.h,
	src/m_basic_types.h, src/m_general.{h,cc}, src/m_xml.h, src/m_disort.cc,
	src/disort.cc, src/m_batch.cc, src/m_rte.cc, src/m_montecarlo.cc,
	src/rte.{h,cc}, src/ppath.cc, src/m_cloudbox.cc, src/m_scatrte.cc,
	src/scatrte.{h,cc}, src/m_jacobian.cc, src/montecarlo.{h,cc},
	src/ppath.{h,cc}, src/m_ppath.cc, src/refraction.{h,cc},
	src/m_refraction.cc:

	Add Workspace reference as first argument to all WSMs and functions
	that have an agenda as an input parameter.

	Instead of making local copies of agendas inside parallel loops use
	the OMP firstprivate mechanism.

2008-07-29  Stefan Buehler  <sbuehler(at)ltu.se>

	* arts-1-7-21

	* src/messages{.h,.cc}: Complete redesign of the verbosity control
	mechanism. The -r command line flag now takes a 3-digit integer,
	where the first digit controls the verbosity of agenda
	output. Default is 010, i.e., all sub-agenda output is
	suppressed. (You will still see output from the main agenda,
	though.) This makes the silent flag to agenda_execute obsolete. At
	the moment the flag is still there, in order to avoid SVN
	conflicts with other ongoing work. When that is complete, the flag
	should be removed.

	* src/parameters.cc (get_parameters): Updated online help text to
	describe the new verbosity options.

	* src/main.cc: Adapted to redesign of the verbosity control
	mechanism.

	* src/agenda_class.cc (execute): Adapted to redesign of the
	verbosity control mechanism.

	* src/m_abs_lookup.cc,
	  src/m_rte.cc,
	  src/m_batch.cc: 
	We no longer need any special code to handle messages for parallel
	loop with agendas!

	* src/agenda_class.h: Added member main_agenda, plus associated
	member functions set_main_agenda() and get_main_agenda(). This can
	be used to decide whether the current agenda is the program main
	agenda, or a sub-agenda.

	* src/test_geomag_calc.cc (main): Commented out code dealing with
	message levels.

	* doc/uguide/concept.tex (section{Practical hints}): Restructured
	this section, and added a part about the verbosity settings.

2008-07-29  Stefan Buehler  <sbuehler(at)ltu.se>

	* arts-1-7-20

	* WARNING: This version does not compile with g++, due to a
	compiler bug. (It works fine with icc.) I am now working on a fix
	and will commit it today. I have to commit this version, even
	though it does not compile on all compilers, because I need a
	record of my work so far, before making further changes.

	* src/messages.cc: Adapted to changes in message
	level implementation.

	* src/main.cc (set_reporting_level): Adapted to changes in message
	level implementation.

	* src/m_rte.cc (RteCalc, RteCalcMC): Added artsmessages
	as copyin variable to parallel loop. 

	* src/m_batch.cc (ybatchCalc_implementation): Added artsmessages
	as copyin variable to parallel loop.

	* src/m_abs_lookup.cc (abs_fieldCalc): Added artsmessages as
	copyin variable to parallel loop.

	* src/agenda_class.cc (execute): Message level adjustment in
	agenda calls now uses threadprivate and copyin declarations for
	the global artsmessages variable. Eliminates the bug of lost
	output for parallel ARTS runs.

2008-07-25  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-7-19

	* It is now possible to pass WSVs as keywords!
	
	E.g.: StringCreate( outfile )
	      StringSet( outfile, "myoutputfile.xml" )
	      WriteXML( "ascii", ybatch, outfile )

	* src/methods.{h,cc}, src/methods_aux.cc:

	Add flag set_method to MdRecord. For Set methods the keyword is not
	stored as a workspace variable.

	* src/agenda_class.{h,cc}:

	Change mvalues to ArrayOfIndex. It no longer contains the keyword
	value but the Index to the WSV containing the keyword's value.

	Add msetvalue to MRecord. Contains the keyword value for Set methods.

	(append): Adapt for changes in keyword handling.

	* src/parser.{cc,h}:

	Use auto_vars for keywords.

	Change type of values from Array<TokVal> to ArrayOfIndex.

	Use ParseError instead of runtime_error in several places.

	(tasklist_insert_set_delete): Also pass mdd as argument.

	* make_auto_md_cd.cc:

	Adapt getaway functions to take the different handling of keywords
	into account.

2008-07-28  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-7-18

	* src/sensor.cc (antenna1d_matrix):

	Only define n_ar_aa in DEBUG mode to avoid warning in non-debug
	compiles.

	Add _U_ for antenna_dim parameter for same reason.

	(mixer_matrix): Only define nrp in DEBUG mode to avoid warning in
	non-debug compiles.

2008-07-28  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-7-17

	* src/arts_omp.cc (arts_omp_set_nested):

	Use _U_ to avoid unused parameter warning when compiling without
	OpenMP.

	Include config.h for _U_.

2008-07-25  Stefan Buehler  <sbuehler(at)ltu.se>

	* arts-1-7-16

	* src/gas_abs_lookup.h: (Re)introduced the lookup table member
	variable log_p_grid. It is not stored with the lookup table, but
	set by abs_lookupAdapt.

	* src/gas_abs_lookup.cc (Adapt): Also set log_p_grid.
	(Extract): Added runtime error check to make sure that log_p_grid
	is set. Do the pressure interpolation with log_p_grid and log(p),
	instead of p_grid and p.

	* src/m_abs_lookup.cc (abs_lookupCreate): Also set log_p_grid. 

	* tests/testall.py (TestAMSUB.test2): Relax the condition for
	agreement from .01 K to .02 K.

	* src: Set ignore property for auto_workspace.h and
	make_auto_workspace.
	
2008-07-25  Stefan Buehler  <sbuehler(at)ltu.se>

	* arts-1-7-15

	* src/gas_abs_lookup.cc (Extract): No longer interpolate the
	reference T and H2O profiles. That approach is not compatible with
	higher order p interpolation. We use the true T_ref and H2O_ref
	for the level now for interpolation at all involved pressure
	levels.

2008-07-24  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-7-14

	* src/parser.cc (tasklist_insert_set_delete):

	Add support for Vector constants.

	Use SetVectorExplicitly to set the auto variable instead of SetVector.

	(read_name_or_value):

	Fix if statements.

	Throw runtime_error for unsupported parameter types instead of cerr +
	arts_exit.

2008-07-24  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-7-13

	* src/methods_aux.cc (operator<<):

	Output correct type for keywords in online help.

2008-07-23  Stefan Buehler  <sbuehler(at)ltu.se>

	* arts-1-7-12

	* src/absorption.cc (xsec_species): Parallelized the loop over
	pressure. This speeds things up in case that abs_lookupCreate does
	not do temperature perturbations. Also should help for on-the-fly
	simulations, of course.

	* src/m_abs_lookup.cc (abs_lookupCreate): 

	1. Clarified documentation about use of a private statement in omp
	parallel regions. Private variables are not initialized inside the
	parallel region, so they should be initialized at the beginning.

	2. Enable nested parallel execution, in case there are no
	temperature perturbations. This is necessary in order to benefit
	from the now parallelized line-by-line code in xsec_species.
	
	* src/arts_omp{h,.cc} (arts_omp_get_nested): Added.
	(arts_omp_set_nested): Added.
	
	* src/gas_abs_lookup.h: Only cosmetics.

2008-07-23  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-7-11

	* src/groups.cc:
	
	(define_valid_keyword_groups):

	Define a list of valid groups for keywords.

	(is_valid_keyword_group): Check if given group is a keyword group.

	* src/methods_aux.cc:

	Check if the groups for keywords are valid.

	* arts.h: Temporarely add declaration of is_valid_keyword_group.

2008-07-23  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-7-10

	* src/methods.cc: Changes TYPES to String array.

	* src/methods.h, src/methods_aux.cc

	Change mtypes from Array<TokVal> to ArrayOfIndex. In preparation of
	treating keywords like generic inputs.

	* src/make_auto_md_h.cc:
	
	Don't include token.h.

	Use wsv_group_names instead of TokValTypeName.

	* src/make_auto_md_cc.cc: Don't include token.h.

	* src/parser.cc:

	Use group ids for keyword types instead of TokValType.

2008-07-23  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-7-9

	* src/make_auto_wsv_groups_h.cc: Renamed to make_auto_workspace_h.cc

	* src/make_auto_workspace_h.cc: Don't generate WsvP anymore.

	* src/Makefile.am, src/workspace_ng.cc:
	
	auto_wsv_groups -> auto_workspace.

2008-07-23  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-7-8

	* Continuing migration from enums to Strings. Now replacing all enum
	values for WSVs in methods.cc by Strings.

	* src/methods.cc: Make OUTPUT and INPUT String arrays.

	* src/methods.h, src/methods_aux.cc:

	Change output and input to string arrays in constructor of MdRecord.

	* src/make_auto_md_h.cc, src/make_auto_md_cc.cc, src/main.cc (main):

	Call define_wsv_data before define_md_data_raw.

	* src/agendas.cc, src/agenda_class.cc, src/globals2.cc, src/methods.cc:

	Remove auto_wsv.h from includes.

	* src/Makefile.am, src/make_auto_wsv_h.cc:

	Bye Bye auto_wsv.h. Not needed anymore.

	Added make_auto_wsv_h to CLEANFILES for now.

	* src/make_auto_md_h.cc, src/make_auto_md_cc.cc:

	Remove auto_wsv.h from includes.

	Add include files to generated source that were previously pulled in
	by auto_wsv.h.

	* src/montecarlo.cc: Include mc_interp.h.

	* src/workspace_ng.h: Fix typo in doc.

	* src/workspace.cc (get_wsv_id):

	Use WsvMap instead of a while loop to find the WSV indexes.

	* src/groups.cc (get_wsv_group_id):

	Add a WsvGroupMap along with define_wsv_group_map.

	Use WsvGroupMap instead of a while loop to find the group indexes.

	* src/parser_old.{h,cc}: Removed.

2008-07-22  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-7-7

	* Continuing migration from enums to Strings. Now replacing all enum
	values for WSVs in agendas.cc by Strings.

	* src/agendas.cc: Make OUTPUT and INPUT String arrays.

	* src/workspace.cc, src/arts.h: Added get_wsv_id.

	* src/agenda_record.{cc,h}:

	Replace output and input with String array in constructor and map WSV
	names to ids.

	* src/methods_aux.cc (MdRecord::MdRecord): Remove spurious spaces.

2008-07-22  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-7-6

	* Replacing the enum values for groups in methods.cc by Strings.

	* methods.{h,cc}, methods_aux.cc:

	Change GINPUT and GOUTPUT to String arrays.

	Map the strings to group index in the MdRecord constructor.

	(define_md_data_raw):

	Call define_wsv_group_names here because we have a strict dependency
	on the group names now.

	* src/workspace.cc:

	Change GROUP to String.

	Don't include auto_wsv_groups.h anymore.

	* src/wsv_aux.h:

	Added constructor that takes the Group name as a String and maps it to
	the group index.

	Don't include auto_wsv_groups.h anymore.

	Include exceptions.h

	* src/groups.cc (get_wsv_group_id): Added. Finds group id by name.

	* src/main.cc, src/parser.cc, src/methods_aux.cc,
	src/agenda_record.cc, src/make_auto_md_cc.cc:

	Use new function get_wsv_group_id.

	* src/agenda_record.cc, src/m_agenda.cc: Include messages.h.

	* src/methods.cc, src/globals2.cc:

	Don't include auto_wsv_groups.h anymore.

	* src/methods_aux.cc: Don't include auto_wsv.h anymore.

	* src/make_auto_md_cc.cc:

	Don't include auto_wsv_groups.h in generated source anymore.

	* src/make_auto_wsv_h.cc (main):

	Call define_wsv_group_names before Workspace::define_wsv_data.
	
	* src/make_auto_wsv_groups_h.cc (main):

	Remove N_WSV_GROUPS and WsvGroup from generated source.

	* src/main.cc (main):

	Call define_wsv_group_names before define_md_data_raw.

	* src/make_auto_md_{h,cc}.cc:

	Call define_wsv_group_names before define_md_data_raw.

	Catch runtime_error instead of exception to get proper error message
	output.

	* src/main.cc (check_built_headers): Removed unused function.

	* src/arts.h: Add prototype for get_wsv_group_id.

2008-07-22  Stefan Buehler  <sbuehler(at)ltu.se>

	* arts-1-7-5

	* src/gas_abs_lookup{.cc,h} (Extract): Added input variable
	p_interp_order for pressure interpolation order. Rearranged order
	of input variables.

	* src/m_abs_lookup.cc: Adapted to new p_interp_order WSV and to new
	order of interpolation order parameters in some method calls.

	* src/methods.cc: Adapted to new p_interp_order WSV and to new
	order of interpolation order parameters in some method calls.
	(ForLoop): Added this new method, which can be used to implement
	simple control file loops.

	* includes/general.arts: Added default for abs_p_interp_order.

	* src/workspace.cc (abs_p_interp_order): Added.
	(for_loop_agenda): Added.
	(for_loop_index): Added.

	* src/agendas.cc (forloop_agenda): Added this new agenda. It can
	hold the loop body for the ForLoop method.

	* src/m_batch.cc (ForLoop): Added this new method.

	* src/m_abs.cc: Removed unnecessary include of auto_wsv.h.

2008-07-22  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-7-4

	* src/m_abs_lookup.cc (abs_lookupSetup):

	Quick fix to make arts compile again. Renamed keyword argument
	p_step->p_step10.

2008-07-21  Stefan Buehler  <sbuehler(at)ltu.se>

	* arts-1-7-3

	* Warning: I am working on the absorption lookup table. Stay away
	from the 1-7-x versions for operational use, since numerical
	values for absorption calculation may change slightly between
	subversions.

	* src/methods.cc(abs_lookupSetup, abs_lookupSetupBatch): Keyword
	p_step now has to be given in log10([Pa]), instead of the natural
	log. This was requested by Patrick. Adjusted default value accordingly.

	* src/m_abs_lookup.cc (abs_lookupSetup, abs_lookupSetupBatch):
	Adjusted to the new input unit. Internally still uses the natural
	log. 

2008-07-18  Stefan Buehler  <sbuehler(at)ltu.se>

	* arts-1-7-2

	* src/m_abs_lookup.cc (choose_abs_nls_pert): Fixed bug in
	preliminary implementation here.

2008-07-18  Stefan Buehler  <sbuehler(at)ltu.se>

	* arts-1-7-1

	* src/m_sensor.cc (f_gridFromSensor): Add some margin around the
	actual band frequency borders, in order to avoid numerical problem
	in sensor WSMs. The margin added is 1% of the requested frequency
	grid spacing.

	* includes/amsu/amsub.arts: Now uses f_gridFromSensor.

2008-07-18  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-7-0

	* Increase minor version number because the previous change breaks
	controlfile compatibility.

2008-07-18  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-6-46

	* src/parser.cc:

	Don't create unknown output variables implicitly anymore. This can
	create serious headaches if typos in WSV names occur. Instead, the
	user has to create the variable before using it.

	* src/m_create.cc: Added.

	* src/src/m_basic_types.cc: Move TYPECreate WSMs to m_create.cc.

	* src/Makefile.am: Added m_create.cc to libarts_a_SOURCES.

	* src/methods.cc:

	Added ArrayOfLineRecordCreate and ArrayOfLineshapeSpecCreate.

	* tests/DOIT/TestDOIT.arts, tests/OdinSMR/TestOdinSMR.arts
	includes/amsu/amsub.arts, includes/odin/odinsmr_501_1D.arts:

	Insert Create WSMs where needed.

2008-07-17  Stefan Buehler  <sbuehler(at)ltu.se>

	* arts-1-6-45

	* src/methods.cc (f_gridFromSensor): Reintroduced this method.

	* src/m_sensor.cc (f_gridFromSensor): Adapted to new sensor
	variables. There still is a strange numerical problem, the
	auto-generated grid does not work, even though it is practically
	identical to the previous one.

	* includes/amsu/amsub.arts: Playing with f_gridFromSensor.

2008-07-17  Stefan Buehler  <sbuehler(at)ltu.se>

	* arts-1-6-44

	* src/methods.cc (abs_lookupSetup, abs_lookupSetupBatch): Added
	the new WSVs abs_nls_interp_order and abs_t_interp_order. Setup
	functions now make sure that there are enough grid points for the
	chosen interpolation order.

	* src/m_abs_lookup.cc (choose_abs_t_pert, choose_abs_nls_pert)
	(abs_lookupSetup, abs_lookupSetupBatch): Adapted to the new WSVs
	abs_nls_interp_order and abs_t_interp_order. Main changes are in
	the choose functions. This is likely to be adapted further after
	thorough testing with Chevallier data.

	* tests/ClearSky/TestClearSky.arts: Only comment changes.

	* tests/AMSU/TestAMSU_generic.arts: Only comment changes.

2008-07-17  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-6-43

	* tests/MonteCarlo/TestMonteCarloGeneralGaussian.arts,
	tests/DOIT/TestDOIT.arts:

	Converted to Arts2 syntax.

	* tests/DOIT/TestDOIT2.arts: Removed.

	* tests/MonteCarlo/TestRteCalcMC.arts: general -> general.arts

2008-07-16  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-6-42

	* tests/MonteCarlo/TestMonteCarloDataPrepare.arts,
	tests/MonteCarlo/TestMonteCarloGeneral.arts:

	Converted to Arts2 syntax.

	* tests/Abs/TestAbs.arts:

	Replace "general" by "general.arts".

	* tests/ClearSky/TestClearSky.arts:

	Remove arguments from abs_lookupSetup (uses only defaults).

	Replace "general" by "general.arts".

2008-07-16  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-6-41

	* src/parser.{cc,h}: 

	Fix a regression in the parser for Arts2 syntax. With the old syntax
	it was possible to skip all arguments of a WSM even if it had keywords
	(if all keywords had default values defined). This was not working with
	the new syntax.

	* tests/AMSU/TestAMSU_generic.arts:

	Take fix into account.

2008-07-16  Stefan Buehler  <sbuehler(at)ltu.se>

	* arts-1-6-40

	* You can now choose the interpolation orders for the absorption
	lookup table. For now, the recommended (and default) value is 4
	for both interpolations (T and H2O).
	
	* src/methods.cc (abs_scalar_gasExtractFromLookup): Added new
	input variables abs_nls_interp_order and abs_t_interp_order.

	* src/m_abs_lookup.cc (abs_scalar_gasExtractFromLookup): Added new
	input variables abs_nls_interp_order and abs_t_interp_order.

	* src/gas_abs_lookup{.cc,h} (Extract): Added new input variables
	for the H2O and temperature interpolation order.

	* includes/general.arts: Added default values of 4 for the new
	input variables abs_nls_interp_order and abs_t_interp_order.

	* tests/DOIT/TestDOIT.arts: Replace "general" by
	"general.arts". Works also without extension, but kept it for
	consistency. 

2008-07-16  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-6-39

	* includes/amsub.arts, tests/AMSU/TestAMSUA.arts,
	tests/AMSU/TestAMSUB.arts, tests/AMSU/TestAMSU_generic.arts:

	Converted to Arts2 syntax.

2008-07-16  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-6-38

	* includes/continua.arts, includes/general.arts:

	Converted to Arts2 syntax.

2008-07-15  Stefan Buehler  <sbuehler(at)ltu.se>

	* arts-1-6-37

	* src/workspace.cc (abs_nls_interp_order, abs_t_interp_order):
	Introduced these new WSVs.

	* includes/general.arts: Set default values of 4 for
	abs_nls_interp_order and abs_t_interp_order.

2008-07-04  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-6-36

	* Missed to compile all test files. test_sensor.cc did not compile
	as variables used been removed. The complete test removed. 

	* src/test_sensor.cc: Removed. Obsolete. Sensor parts now better checked
	with Odin and other similar tests.
	
	* src/Makefile.am: Removed test_sensor parts.  

2008-07-04  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-6-35

	* includes/amsu/amsub.arts: Removed _NEW from variable and method
	names in all control files.

	* tests/OdinSMR: Removed _NEW from variable and method names in all
	control files.

	* includes/odin: Removed _NEW from variable and method names in all
	control files.

	* tests/MonteCarlo: Updated control files to changes below. 

	* tests/MonteCarlo/antenna.SM_AC2ab.875ms.xml: Copied from Odin
	include folder. Set the frequency to 230e9. There must now be a
	perfect match if the arts run involves a single frequency and the
	antenna pattern is only given for a single frequency.

	* src/m_montecarlo.cc (MCGeneral): std_err, max_time, max_iter and
	z_field_is_1D are now WSVs, not keyword arguments.  This to avoid
	very long argument lists for MC methods (in arts2 control file
	format).
	(MCIPA): As above.

	* src/m_sensor.cc: File removed from now obselete functions. _NEW
	removed from new methods.
	
	* src/sensor.cc: File removed from now obselete functions. _NEW
	removed from new methods.

	* src/check_input.cc (chk_y_with_sensor): Removed. 

	* src/m_physics.cc
	(VectorToPlanckBT, VectorToRJBT, MatrixToPlanckBT, MatrixToRJBT):
	Removed.
	The task of these functions can be performed by yUnit, ybatchUnit
	and jacobianUnit.

	* src/m_jacobian.cc (jacobianUnit): Now calling ybatchUnit instead 
	of MatrixToPlanck etc.
	(yCalc): Fixed call of RteCalcNoJacobian.
	
	* src/m_batch.cc (ybatchUnit): Created. Matches yUnit.

	* src/m_rte.cc (yUnit): Now only using sensor_response_f as sensor
	aux input. 
	(RteCalcNoJacobian): Now using new version of RteCalc.
	(RteCalc): Replaced by temporary _NEW version. 
	(RteCalcMC): Updated following new WSV.
	
	* src/workspace.cc: Old sensor variables removed. _NEW removed
	from new variables. Introduced: 
	   mc_std_err
	   mc_max_time,
	   mc_max_iter 
	   mc_z_field_is_1D

2008-07-03  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-6-34

	* AMSU-B test case updated to new sensor part. Difference to when
	old methods used is below 6e-6 K.
	
	* includes/amsu/amsub.arts: Now uses new sensor implementation.
	All input created by a matlab function: setup_input.m. f_grid
	not created on-the-fly. Old grid hard coded in setup_input.m.
	Will be fixed.

	* src/m_sensor.cc (sensor_responseBackend_NEW): One check was
	incorrectly implemented.
	(sensor_responseMultiMixerBackend_NEW): Created. Totally new
	implementation of this method.
 
2008-07-03  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-6-33

	* src/gridded_fields.h, src/xml_io_instantiation.h,
	src/xml_io_array_types.{cc,h}:
	
	Added ArrayOfArrayOfGField1.

2008-07-03  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-6-32

	* Odin test cases updated to new data formats. All test cases
	run (after some small bug fixes) with results that look OK. The
	standard 501 case compared to older version with results inside
	0.01 K (new version probably better).

2008-07-02  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-6-31

	* src/m_sensor.cc (sensor_responseBackend_NEW): backend_channel_response
	now an ArrayOfGField1.
	(sensor_responseMixer_NEW): sideband_response now a GField1.
	These functions run with the Odin test case with result that look OK.
	
	* src/sensor.cc (spectrometer_matrix_NEW): ch_response now an
	ArrayOfGField1.
	(mixer_matrix_NEW): filter now a GField1.

	* src/workspace.cc: Changed type for backend_channel_response and
	sideband_response, and changed description accordingly. Had to
	introduce backend_channel_response_NEW.

	* includes/odin/setup_input.m: Sideband filter and backend channel
	responses now stored as (ArrayOf)GriddedField1.

	* src/constants.cc: Added GFIELD1_F_GRID (though value is obvious).

	* src/groups.cc (define_wsv_group_names): Added GField1, GField2,
	ArrayOfGField1 and ArrayOfGField2.

2008-07-02  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-6-30

	* src/xml_io_instantiation.h:

	Add prototypes for xml_read_from_file and xml_write_to_file for
	GField1 and GField2.

2008-07-02  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-6-29

	* src/sensor.cc (antenna1d_matrix_NEW): Function created. Complete
	and compiles, but not tested.
	Some polishing of other "new" functions.

	* src/m_general.cc: Removed #include "sensor.h".

	* src/m_sensor.cc (sensor_responseAntenna_NEW): Added even more checks.
	Calls now antenna1d_matrix_NEW. 

	* src/workspace.cc: Corrected description of dimension order of
	antenna_response_NEW.

2008-07-02  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-6-28

	* src/gridded_fields.h: Added ArrayOfGField1 and ArrayOfGField2.

	* src/xml_io_instantiation.h, src/xml_io_array_types.{cc,h}:

	Added read/write support for ArrayOfGField1 and ArrayOfGField2.

	* src/xml_io_instantiation.h, src/xml_io_compound_types.{cc,h}:

	Added read/write support for GField1 and GField2.

2008-07-01  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-6-27

	* src/constants.cc: Added constants for GField4 frequency, pol, za
	and aa grids.

	* src/m_sensor.cc (sensor_responseAntenna_NEW): Created. The function
	consists mainly of lengthy input checks. Core function is lacking.

	Some polishing of other functions.

	* src/workspace.cc: sensor_pol_NEW was set to be a vector, instead of
	matrix. Defined (in detail) antenna_response_NEW.

2008-07-01  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-6-26

	* src/gridded_fields.cc:

	(GField::get_string_grid,GField::get_numeric_grid):

	Output the field name if present in the runtime error message.

2008-06-26  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-6-25

	* Removing the last remainders of the old GriddedFields.

	* src/gridded_fields.{h,cc}:

	Remove implementation of the old GriddedFields.

	* src/m_basic_types.h:

	Remove NGET_GENERIC for ArrayOfGriddedField3 and ArrayOfGriddedField4.

	* src/m_sensor.cc (sensor_responseAntenna_NEW):

	Change aresponse to ArrayOfGField3.

	* src/gridded_fields.{cc,h}:

	Add non-const version for get_numeric_grid.

2008-06-26  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-6-24

	* src/workspace.cc

	Change antenna_response_NEW to ArrayOfGField3.

	* src/groups.cc:

	Remove ArrayOfGriddedField3, ArrayOfArrayOfGriddedField3, and
	ArrayOfGriddedField4.

	* src/xml_io_instantiation.h, src/xml_io_compound_types.{cc,h}

	Remove read/write routines for GriddedField3 and GriddedField4.

	* src/xml_io_instantiation.h, src/xml_io_array_types.{cc,h}

	Remove read/write routines for ArrayOfArrayOfGriddedField3,
	ArrayOfGriddedField3, and ArrayOfGriddedField4.

2008-06-26  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-6-23

	* src/methods.cc, src/m_batch.cc

	Change ArrayOfGriddedField3ExtractFromArrayOfArrayOfGriddedField3 to
	use GField3.

	* src/groups.cc:

	Added ArrayOfArrayOfGField3.

2008-06-24  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-6-22

	* src/workspace.cc, src/methods.cc, src/m_atmosphere.cc

	Change atm_fields_compact to GField4 and batch_atm_fields_compact to
	ArrayOfGField4.

	* src/methods.cc, src/m_batch.cc
	(GriddedField4ExtractFromArrayOfGriddedField4):

	Change m to GField4.

	* src/m_abs_lookup.cc (abs_lookupSetupBatch):

	Change batch_fields to ArrayOfGField4.

	* src/groups.cc: Add GField4 and ArrayOfGField4.

	* src/constants.cc, src/cloudbox.cc, src/m_batch.cc,
	src/m_cloudbox.cc:

	Rename P_GRID, LAT_GRID, LON_GRID constants for backwards
	compatibility to GFIELD3_P_GRID, GFIELD3_LAT_GRID, GFIELD3_LON_GRID.

	Added constants GFIELD4_FIELD_NAMES, GFIELD4_P_GRID, GFIELD4_LAT_GRID,
	GFIELD4_LON_GRID.

	In the future, the grid names should be used to find the correct grid.

	* src/gridded_fields.{cc,h}:

	Add non-const version of get_string_grid.

	Make the original resize functions visible again.

2008-06-24  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-6-21

	* src/m_basic_types.h: Added NGET_GENERIC for ArrayOfGField4.

	* src/xml_io_compound_types.{h,cc}, src/xml_instantiation.h:

	Added read/write support for GField4.

	Added a common function to write the grids for all GFieldX types.

	* src/xml_io_array_types.{h,cc}, src/xml_instantiation.h:

	Added read/write support for ArrayOfGField4 and ArrayOfArrayOfGField3.

2008-06-24  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-6-20

	* Changed t_field_raw, z_field_raw, and vmr_field_raw to GField3 and
	ArrayOfGField3.

	* Confirmations that I didn't break anything would be highly
	appreciated. (Bug reports also ;-) )

	* src/workspace.cc, src/m_batch.cc

	Changed t_field_raw and vmr_field_raw to GField3 and ArrayOfGField3.

	* src/m_batch.cc, src/m_atmosphere.cc:

	Change vmr_field_raw_h2o to GField3.

	* src/gridded_fields.{cc,h}:

	Add function copy_grids to copy grids from one GField to another.

	Add function resize(GFieldX).

	* src/gridded_fields.h, src/xml_io_compound_types.cc:

	Make naming more consistent: get_gridname->get_grid_name,
	get_gridsize->get_grid_size.

	* src/constants.cc:

	Add constants for the index of the p_grid, lat_grid, and lon_grid in
	gridded fields.

	* src/cloudbox.cc, src/m_cloudbox.cc, src/m_batch.cc:

	Use the new grid index constants.

2008-06-24  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-6-19

	* First real life test for the new gridded fields. Changing type of
	pnd_field_raw to GField3. Seems to work....

	* src/cloudbox.{cc,h}, src/m_cloudbox.cc, src/m_batch.cc,
	src/workspace.cc:

	Change pnd_field_raw from GriddedField3 to GField3.

	* src/groups.cc:

	Add group ArrayOfGField3.

	* src/m_basic_types.h: Add NGET_GENERIC for ArrayOfGField3.

	* src/xml_io_array_types.{cc,h}, src/xml_io_instantiation.h:

	Add read/write support for ArrayOfGField3.

	* src/gridded_fields.h:

	Add typedefs for ArrayOfArrayOfGField3, ArrayOfGField3, and
	ArrayOfGField4.

2008-06-24  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-6-18

	* src/gridded_fields.{cc,h}:

	Add doxygen documentation.

	Changed several asserts into runtime errors.

2008-06-23  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-6-17

	* Now that the snow is gone, it's time for some C++-code spring
	cleaning. ;-)

	* src/matpack*.h: 

	Add missing initialization for all member variables in default
	constructors of the View types.

	* src/token.h (TokVal), src/agenda_class.h (Agenda, MRecord):

	Move initialization of member variables from the constructors'
	function bodies to the member initialization lists.

	Add missing members to initialization lists as well.

	* src/absorption.h (SpeciesRecord, LineshapeRecord, IsotopeRecord,
	LineshapeNormRecord, LineshapeSpec), src/abs_species_tag.h
	(SpeciesTag), src/gridded_fields.h (GField), jacobian.h
	(RetrievalQuantity), src/methods.h (MdRecord), src/gas_abs_lookup.h
	(GasAbsLookup), mc_antenna.h (MCAntenna), wsv_aux.h (WsvRecord):

	Initialize all members in constructors.

	* src/matpackI.{cc,h} (VectorView::operator=):

	The assignment operators didn't return a reference.

        * src/methods.h (MdRecord::operator=):
	
	Same as above. In this case the program exits anyway, but for the sake
	of consistency....

	* src/gridded_fields.cc: Add virtual destructor to GField.

	* src/parameters.h (Parameters):

	Add missing members to initialization list.

	Change from struct to class and make members public.

	* src/array.h:

	Remove spurious semikolons after function bodies.

2008-06-23  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-6-16

	* src/xml_io_array_types.{cc,h}, src/xml_io_basic_types.{cc,h}:

	Split xml_read_from_stream for Vectors and ArrayOfString into two
	functions. Needed to be able to re-use the parsing code for reading
	the gridded field grids.

	* src/xml_io_compound_types.{h,cc}:

	Add GField3 reading and writing routines.

	(xml_parse_grid_from_stream): Added.

	* src/xml_io_instantiation.h:

	Add GField3 reading and writing routines.

	* src/xml_io.cc (ArtsXMLTag::get_attribute_value):

	Return empty string instead of *N/A* for empty attributes.

	(ArtsXMLTag::read_from_stream): Don't crash if attribute is an empty
	string.

	Fix reading of attribute values containing spaces.

	* src/gridded_fields.h:

	Add member functions get_dim, get_gridtype, and set_name.

	Fix checksize.

	mgridtype->mgridtypes.

	* src/gridded_fields.cc:

	mgridtype->mgridtypes.

	Cast to GField reference in output operators.

	* src/groups.cc: Temporarely add GField3 for testing.

	* src/workspace.cc: Temporarely add gfield3 for testing.

	* src/Makefile.am:

	Added gridded_fields.cc to make_auto_wsv_h_SOURCES,
	make_auto_md_h_SOURCES, and make_auto_md_cc_SOURCES.

2008-06-18  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-6-15

	* src/gridded_fields.{cc,h}:

	Getting started with the new GriddedFields implementation.

	GField is an abstract base class maintaining the grids. GField1,
	GField2 etc. are using multiple inheritance to combine either a
	Vector, Matrix or Tensor with the grids. This way, everything that can
	be done with Vectors, Matrices or Tensors is also possible with
	GFields. E.g. it is possible to multiply a Matrix with a GField2.
	Not finished yet.

	* src/sensor.h:

	Unbreak compilation by adding declaration of
	sensor_summation_vector_NEW to sensor.h. It was used before being
	defined in sensor.cc.

2008-06-18  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-6-14

	* Basic parts of new version for mixer and backend finished. So far
	only tested through the Odin test case.
	
	conversion is now handled when creating the sensor reponse matrix.
	Much neater solution.
	(sensor_responseInit_NEW): It is now checked that grids are
	sorted. Decreasing grids allowed for mblock_za_grid and
	mblock_aa_grid.
	(sensor_responseMixer_NEW): It is now checked that frequency grid of
	sideband_response is strictly increasing.
	
	* src/workspace.cc: Introduced sideband_mode_NEW. Allowed options
	are now only "lower" and "upper".	

2008-06-11  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-6-8

	* configure.in:

	Fix bug in setting -Wno-unknown-pragmas for non-OpenMP compilers.

	* src/methods.cc: Small fix in docs for Test method.

2008-06-10  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-6-7

	* src/m_sensor.cc (sensor_responseBackend_NEW): Created.

	* src/sensor.cc (spectrometer_matrix_NEW): Created.

	* includes/odin/odinsmr_501.arts: Adopted to new sensor part.

	* tests/OdinSMR/plot_result.m: Now using y-aux variables. 

	* includes/odin/setup_input.m: Moved from test directory. Backend
	now stored as matrix ('backend_channel_response).

	* tests/testall.py: Deactivated assert in Odin test
	temporarily. This as Odin case will be used for testing new sensor
	part.

2008-06-09  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-6-6

	* src/m_rte.cc (RteCalc_NEW): Created.

	* src/make_array.h: Added template and functions for WSM with up
	to 35 arguments (RteCalc_NEW sets a new record!).

	* src/workspace.cc: Introduced y_f, y_pol, y_za and y_aa. Much improved
	description of backend_channel_response.

	* src/sensor.cc (sensor_aux_vectors): Created. 

	* src/m_sensor.cc (sensor_responseInit_NEW): Removed consistency
	check of sensor_pos and sensor_los as these variables normally are
	set further down in the control file, and check anyhow done in RteCalc.
	(sensorOff_NEW): Removed input sensor_pos and sensor_los.

	(sensor_responseMixer_NEW): Created.

2008-06-06  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-6-5

	* Started on modified version of the sensor part. New or modified
	variables and methods include _NEW, and old version is left until
	new version has been finished.

	* includes/amsu/amsub.arts: Now using AntennaOff.

	* src/m_sensor.cc: Created AntennaOff, sensorOff_NEW and
	sensor_responseInit_NEW. sensorOff consists now of call of the
	other two methods. Check of sensor_pos and sensor_los moved to
	sensor_responseInit, and is thus now always performed.

	* src/sensor.cc (scale_antenna_diagram): Commented out. Function 
	presently not used.

	* src/workspace.cc: Added 
	sensor_response_aa_NEW, sensor_response_f_NEW, 
	sensor_response_pol_NEW, sensor_response_za_NEW,
	sensor_response_aa_grid_NEW, sensor_response_f_grid_NEW,
	sensor_response_pol_grid_NEW, sensor_response_za_grid_NEW,
	sideband_response_NEW, sensor_pol_NEW

	Somewhat improved description of some other sensor variables.
	
2008-06-03  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-6-4

	* src/parser.cc (ArtsParser::parse_method):

	Ignore whitespace between ) and {. Fixes ticket #7.

2008-06-03  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-6-3

	* src/parser.cc (ArtsParser::read_name_or_value):

	For some data types the values where not added to the auto_vars_values
	array.

2008-05-29  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-6-2

	* src/scatrte.cc: Added f_index in calls of opt_prop_gas_agenda.
	* src/montecarlo.cc: As above. 

	* src/agendas.cc (opt_prop_gas_agenda): f_index now specified as
	agenda input. This in order to make this dependency explicit, and
	fix that this agenda works as abs_scalar_gas_agenda.

	* tests/MonteCarlo/TestMonteCarloGeneral.arts: Removed definition of
	spt_calc_agenda. Not used.
	* tests/MonteCarlo/TestMonteCarloGeneralGaussian.arts: As above. 

	* tests/MonteCarlo/TestRteCalcMC.arts: As above. Removed setting
	of f_index. Now not needed with change in opt_prop_gas_agenda.
	
2008-05-29  Cory Davis <corzneffect@gmail.com>

        * tests/testall.py: Made all the assert message lines nicer by
	using format strings

	* arts-1-6-1

	* src/workspace.cc: Added batch_pnd_fields and batch_cloudbox_lims.

	* src/methods.cc: Added Tensor4ExtractFromArrayOfTensor4 and
	ArrayOfIndexExtractFromArrayOfArrayOfIndex. Nasty. If only we
	could use a=b[i].
	
	* src/m_batch.cc: Added the above two methods.

2008-05-20  Stefan Buehler  <sbuehler(at)ltu.se>

	* arts-1-6-0

	* Fixed a bug in the amsub setup in the includes
	directory. Emissivity was set, but the surface_prop_agenda was not
	redefined, so that in fact the calculation was always for a
	blackbody surface. The bug affected the AMSU-B setup in all ARTS
	versions since 1.3.27, where the surface model in general.arts was
	changed.
	
	* Again rearranged the include files for AMSU (hence the new
	version number). Reverted back to having only a single include file
	"amsub.arts". You have to also include general.arts and
	continua.arts. There will be a similar file "amsua.arts" soon.

	* includes/general.arts: Removed the line that set
	surface_emissivity. That line was misleading, since in fact the
	value is not used as long as surface_prop_agenda contains
	surfaceBlackbody.

	* includes/amsu/amsub.arts: Reintroduced this. Fixed surface
	emissivity bug.

	* tests/testall.py (TestAMSUB.test2): Adapted to new surface
	emissivity value.

	* tests/AMSU/TestAMSUB.arts: Adapted to new include file. 

	* tests/ClearSky/TestClearSky.arts: This file also contained the
	surface emissivity bug! Removed the line where the emissivity is
	set and put instead a comment there, that explains how to turn on
	surface modeling.

	* includes/amsu/amsub.f_grid.xml: Removed, since f_grid is now
	generated on the fly with f_gridFromSensor. Verified that the
	difference introduced by this is negligible.

	* includes/amsu/amsu_spectroscopy_with_O3.arts: Removed.
	* includes/amsu/amsu_spectroscopy_no_O3.arts: Removed.
        * includes/amsu/amsua_sensor.arts: Removed.
        * includes/amsu/amsub_sensor.arts: Removed.

	* includes/amsu/amsub.backend.xml: The AMSU bands where a bit too
	narrow, for technical reasons related to the old f_grid. Adjusted
	them to fit the KLM user guide description. Verified that the
	difference introduced by this is negligible.

2008-05-09  Stefan Buehler  <sbuehler(at)ltu.se>

	* arts-1-5-4

	* AMSU-B Test works again.

2008-05-09  Stefan Buehler  <sbuehler(at)ltu.se>

	* arts-1-5-3

	* I'm working on rearranging AMSU setup files. For now they will
	not work. Unfortunately, I am forced to commit anyway, due to the
	restrictions of SVN (modifying and renaming things at the same
	time is not possible). If you are working with AMSU, do not update
	right now! Everything should be stable again early next week.
	
2008-05-09  Stefan Buehler  <sbuehler(at)ltu.se>

	* arts-1-5-2

	* Ups, I should have started with 1-5-0 for the last
	commit. Anyway now I'll just keep counting.

	* Svn added missing Makefile.am files. Adjusted paths in several
	Makefiles. 

	* test/AMSU/: Renamed this directory from AMSUB to AMSU, since it
	will hold also an AMSU-A test case.

2008-05-09  Stefan Buehler  <sbuehler(at)ltu.se>

	* arts-1-5-1

	* Moved sensor specific include files to subdirectories "amsu" and
	"odin" of includes directory. A new second digit version number
	for this, since some control files may break. To fix, replace:
	INCLUDE "amsub.arts" by
	INCLUDE "amsu/amsub.arts"
	likewise:
	INCLUDE "odinsmr_501_1D.arts" by
	INCLUDE "odin/odinsmr_501_1D.arts"

	* includes/odin/: Contains now all Odin specific include files. I
	have moved here also many files (f_grid, backend, antenna, etc.)
	that were in tests/OdinSMR, but should actually be with the
	include files, because the include files will not work without them.

	* includes/amsu/: Contains now all AMSU specific include files.

	* tests/: Adapted all tests to work with the include files in the
	new locations. All tests run through.

2008-05-09  Stefan Buehler  <sbuehler(at)ltu.se>

	* arts-1-4-18

	* Adapted all parallel for loops to correctly handle runtime
	errors. These changes were necessary, because exceptions must be
	handled inside the same parallel region in an OpenMP
	environment. With OpenMP, the program now simply terminates with
	the error message when a runtime error is encountered. Without
	OpenMP, the exception is re-thrown. The consequence of this is
	that the robust option for ybatchCalc will not work with OpenMP,
	but at least without OpenMP.

	* src/m_batch.cc (ybatchCalc_implementation): Use new function
	exit_or_rethrow, instead of arts_exit_with_error_message.

	* src/arts.{cc,h} (arts_exit_with_error_message): Added.
	(exit_or_rethrow): Added.

	* src/m_rte.cc (RteCalc): Added try/catch block for correct
	runtime error handling. 
	(RteCalcMC): Added try/catch block for correct runtime error
	handling. 

	* src/main.cc (main): Use new function
	arts_exit_with_error_message to exit upon runtime error.

	* src/m_abs_lookup.cc (abs_lookupCreate): Added try/catch block
	for correct runtime error handling.
	(abs_fieldCalc): Added try/catch block for correct runtime error
	handling.

	* src/methods.cc (ybatchCalc): Pointed out in documentation that
	robust will only work without OpenMP.

	* src/m_atmosphere.cc (batch_atm_fields_compactFromArrayOfMatrix):
	Added try/catch block for correct runtime error handling.

2008-05-07  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-4-17

	* configure.in:

	Disable unknown pragma warning when compiling without OpenMP.

	* src/m_abs_lookup.cc, src/m_batch.cc, src/m_rte.cc,
	src/m_atmosphere.cc:

	Remove ifdefs around pragma omp directives. Fixes ticket #4.

2008-05-09  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-4-16

	* A small change of control files including a description of
	ppath_step_agenda is needed. You need to define ppath_lmax.

	The keyword arguments lmax and lraytrace are now WSV, denoted as
	ppath_lmax and ppath_lraytrace.  This in order to allow that
	"lmax" can be changed, without needing to specify the complete
	agenda (including a selection if refraction shall be
	considered or not). This allows also a much nicer definition of
	ppath_step_agenda in the ARTS2 format (no need to list all input
	variables).

	* includes/general.arts: Introduced ppath_lmax (value still 10 km).
	* tests/DOIT/TestDOIT.arts: Introduced ppath_lmax (value still -1).
	
	* includes/odinsmr.arts: ppath_lmax set to 20 km to mimic Qsmr.
	
	
	* src/m_ppath.cc (ppath_stepRefractionEuler): Now using ppath_lmax
	and ppath_lraytrace.
	
	(ppath_stepGeometric): Now using ppath_lmax.

	* src/workspace.cc: Introduced ppath_lmax and ppath_lraytrace. To 
	replace the corresponding keyword arguments in ppath_step WSMs.

2008-05-08  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-4-15

	* src/methods_aux.cc (operator<<): 

	Reformat for-loop for better readability.

	* src/scatrte.cc:
	
	Put parenthesis around && when used in proximity of ||.
	(b || c && d) -> (b || (c && d))
	Better readability: http://bytes.com/forum/thread602250.html

	* src/parser.cc (ArtsParser::read_numeric), src/binio.cc:

	Add braces in several places to avoid ambiguous else.

2008-05-08  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-4-14

	* tests/Makefile.am:

	Make TestRteCalcMC depend on TestMonteCarloDataPrepare because the
	former depends on the fgrid generated by the latter. Fixes ticket #3.

2008-05-08  Stefan Buehler  <sbuehler(at)ltu.se>

	* arts-1-4-13

	* src/m_abs_lookup.cc (abs_lookupCreate): Check that dimensions of
	abs_species and abs_lines_per_species match. This as a safeguard
	in case somebody modifies abs_species after abs_lines_per_species
	has been generated.
	(abs_lookupCreate): Put a try/catch block around the entire
	content of the parallelized for loop. This is necessary to avoid a
	core dump if an exception is thrown inside the parallel
	region. The plan is that this will eventually be fixed for all
	parallel for loops by Oliver, using Macros.

	* src/m_abs.cc (abs_xsec_per_speciesAddLines): Check that the
	first line of the line list for each species matches the species
	tag. This as a safeguard in case somebody modifies abs_species
	after abs_lines_per_species has been generated.

	* src/methods.cc (f_gridFromSensor): Added this method.

	* src/m_sensor.cc (f_gridFromSensor): Added this method.

	* includes/{amsu,odin}: Created these directories. Includes is
	getting messy, so I plan split its content into subdirectories for
	the different instruments.
	
	* includes/amsub.arts: Rearranged to use f_gridFromSensor. But not
	yet activated. Needs major rearrangement to be more idiot-proof,
	after two bad bugs.

	* includes/amsua.arts: Started. 

	* src/main.cc (main): Just added a comment concerning arts_exit.

2008-05-08  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-4-12

	* tests/testall.py: Added TestRteCalcMC. Added check of radiance
	produced by OdinSMR test.

	* tests/Makefile.am: Added TestRteCalcMC. 

	* src/rte.cc (iy_calc): Removed private copy flag for rte_agenda.

	(get_radiative_background): As above for all call of agendas.

	* src/ppath.cc: Removed copying of agenda. Now handled in RteCalc. 

	* src/m_rte.cc (RteCalcMC): Polished code and added some comments. The 
	threading appears to work.

	(RteCalc): Local copy of workspace for threading now handled as
	introduced by Oliver in RteCalcMC.

	* tests/MonteCarlo/TestRteCalcMC.arts: Changed from using multiple 
	mblocks, to use an antenna diagram (taken from Odin-SMR). This in
	order to test usage of threads in RteCalcMC.

2008-05-07  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-4-11

	* src/arts_omp.cc (arts_omp_in_parallel):

	omp_in_parallel behaves differently in gcc and icc. omp_in_parallel
	in the intel compiler returns true even if the maximum number of
	threads is set to 1, but false in gcc. On the other hand,
	omp_get_max_threads in gcc always returns 1 instead of the correct
	number of max threads when called inside a parallelized region. So,
	we have to use to use omp_get_max_threads with the intel compiler and
	omp_in_parallel with gcc to determine if we're running multiple threads
	or not. Bummer.

2008-05-07  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-4-10

	* src/m_rte.cc (RteCalcMC): Parallelized za loop.

2008-05-07  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-4-9

	* src/arts_omp.{cc,h} (arts_omp_in_parallel):

	Added. Returns true if current region runs parallelized.

	* src/m_batch.cc (ybatchCalc_implementation),
	src/ppath.cc (ppath_calc), m_abs_lookup.cc (abs_fieldCalc):

	Use arts_omp_in_parallel to determine if the current region is running
	parallelized and only copy the agenda workspace if it does.

	* src/xml_io.cc (xml_write_to_file):

	Make ftype const. Was supposed to be in arts-1-4-6.

2008-05-06  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-4-8

	* tests/MonteCarlo/TestMonteCarloDataPrepare.arts: Added saving of
	scat_data_raw.

	* tests/MonteCarlo/TestRteCalcMC.arts: Created.

	* src/m_ppath.cc (sensor_posAddGeoidWGS84): Indexing when extracting 
	data from matrix r was wrong.

	* src/m_rte.cc (RteCalcMC): Removed f_index as output. Made some 
	work in order to introduce threads. Most importantly, ibdone now
	calculated instead of calculated in += fashion.

	* src/m_rte.cc (RteStdWithTransmissions): Removed *emission* 
	and *abs_scalar_gas* as output.

	              (RteStd): As above. 
	* src/rte.cc (rte_std): As above.

	* src/methods.cc: A quick revision of description for methods with
	me as author, beside sensor and jacobian methods. Fixed spelling and
	som eupdates. Set Claudia as author for some methods.

	* tests/OdinSMR/plot_result.m: Name of files to load had to be changed
	(.generated added).

	* tests/OdinSMR/TestOdinSMR.arts: Changed number of spectra calculated
	to 4 (was set to 31 for test of speed improvement with threads). 
	Removed timer output.

2008-05-06  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-4-7

	* src/methods_aux.cc (operator<<):

	Fix bug in synopsis output. Variables which are specific in- and output
	should not be displayed twice.
	
	* tests/Abs/TestAbs.arts, tests/ClearSky/TestClearSky.arts:

	Changed to new format.

	* tests/Abs/TestAbs2.arts: Removed.

2008-05-05  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-4-6

	* src/xml_io.{cc,h} (xml_write_to_file): Make ftype const.

	(xml_read_arts_catalogue_from_file): Added.

	* src/xml_io_array_types.{cc,h}:

	Added xml_read_from_stream function which reads lines within a certain
	frequency range from an ARTS catalogue.

	* src/m_abs.cc:

	Rename old abs_linesReadFromArts function to
	abs_linesReadFromArtsObsolete and change abs_linesReadFromArts
	to read XML catalogue files.

	* src/methods.cc: Add WSM abs_linesReadFromArtsObsolete.

	* tests/Abs/lines.ac, tests/OdinSMR/linefile.SM_AC2ab.al,
	tests/OdinSMR/linefile.SM_AC1e.al: Removed after conversion to xml.

	* tests/Abs/lines.xml: Added.

	* includes/linefile.SM_AC2ab.xml, includes/linefile.SM_AC1e.xml:

	Added. Moved from the tests directory to here because the linefiles
	are read by the Odin include files.

	* includes/odinsmr_544.arts, includes/odinsmr_501_1D.arts,
	includes/odinsmr_501.arts:

	Read lines from XML file.

2008-05-05  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-4-5

	* tests/testall.py, tests/Makefile.am: Run OdinSMR testcase.

	* tests/OdinSMR/TestOdinSMR.arts, tests/OdinSMR/TestOdinSMR_1D.arts:

	Add .generated to output filenames.

	* tests/OdinSMR/: Update ignores.

2008-05-05  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-4-4

	* src/methods_aux.cc (operator<<):

	Print method's synopsis in online help for easy copy'n'paste.
	
	Refine author list in online help.

2008-05-05  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-4-3

	* Compilation fixes for gcc 4.3

	* configure.in:

	Don't enable -Werror flag for gcc 4.3. Reason: The new gcc is _VERY_
	picky about unsigned->signed conversions and down casting from larger
	to smaller data types (long -> int) which could lead to overflows.
	Fixing those warnings would need substantial code changes (if possible
	at all). Needs further research.

	* src/array.h:

	Include <climits> for LONG_MAX and <iostream> for ostream.operator<<.

	* src/xml_io.cc (xml_read_header_from_stream):

	Use C++ string comparison instead of C function.

	* src/agenda_class.cc:

	Include <algorithm> for set_intersection and set_difference.

	* src/gzstream.cc: Include <cstring> instead of <string> for memcpy.

2008-04-30  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-4-2

	* RteCalc now using threads. The threading added around the zenith
	angle loop. This means that threads are only activated if the
	calculations involve more than one zenith angle (always the case
	if an antenna pattern is used). Tested succesfully with Odin 501
	example.
 	
	* src/ppath.cc (ppath_calc): Added private copy flag for call of
	ppath_step_agenda. Introduced a local copy of ppath_step_agenda
	to avoid conflicts between threads (solution provided by Oliver).

	* src/rte.cc (get_radiative_background): Added private copy flag for
	all called agendas.
	(iy_calc): As above for call of rte_agenda.

	* src/m_rte.cc (RteCalc): Included OpenMP thread around za loop.

	* includes/odinsmr_501_1D.arts: As below.
	* includes/odinsmr_544.arts: As below.

	* includes/odinsmr_501.arts: A (temporary) fix to aviod Stefan's 
	introduction of backend_channel_response (I had selected exactly
	the same name when defining a variable.)

2008-04-30  Stefan Buehler  <sbuehler(at)ltu.se>

	* arts-1-4-1

	* tests/Abs/TestAbs.arts: Removed stuff that is already set in
	general.arts. In particular, the lineshape setting were not only a
	duplicate, but also unreasonable!

	* tests/Abs/TestAbs2.arts: Removed stuff that is already set in
	general.arts. In particular, the lineshape setting were not only a
	duplicate, but also unreasonable!

2008-04-30  Stefan Buehler  <sbuehler(at)ltu.se>

	* arts-1-4-0

	* Changes to arguments of *sensor_responseMultiMixerBackend*,
	hence new version number. Also corrected documentation in old
	absorption part, an error discovered by Claudia.

	* src/workspace.cc (backend_channel_response): Added. The
	documentation is copied from *sensor_responseMultiMixerBackend*. It
	is unclear and should be improved.

	* src/m_sensor.cc (sensor_responseMultiMixerBackend): Made
	*backend_channel_response* a specific input. (Was generic input of
	type Matrix.)

	* src/methods.cc (abs_coefCalc): Fixed documentation.
	(abs_coefCalcFromXsec): Fixed documentation.
	(sensor_responseMultiMixerBackend): Made
	*backend_channel_response* a specific input. (Was generic input of
	type Matrix.)

	* includes/amsua.arts: Added. Not yet finished.

	* includes/amsub.arts: Adapted to change in
	*sensor_responseMultiMixerBackend*. 

	* tests/AMSUB/TestAMSUA.arts: Added. Not yet finished.

	* tests/AMSUB/TestAMSUB.arts: Moved most content to
	TestAMSU_generic.arts. 

	* tests/AMSUB/TestAMSU_generic.arts: Added. This contains the
	general AMSU test, those parts that are the same for AMSU A and
	B. 

2008-04-29  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-3-40

	* src/m_cloudbox.cc (CloudboxGetIncoming): Removed *iy* and *ppath* as
	output variables.
	(CloudboxGetIncoming1DAtm): As above.

	* src/ppath.cc (ppath_calc): Removed *ppath_step* as input.

	* Removed Removed *ppath_step* from these functions:
	* src/m_ppath.cc (ppathCalc): 
	*                (rte_pos_and_losFromTangentPressure): 
	*                (ZaSatOccultation): 
	* src/rte.cc (get_radiative_background): 
	*            (iy_calc): 
	*            (iy_calc_no_jacobian): 
	* src/montecarlo.cc (montecarloGetIncoming):
	*                   (iwp_cloud_opt_pathCalc): 
	* src/m_cloudbox.cc (CloudboxGetIncoming): 
	                    (CloudboxGetIncoming1DAtm): 

	* src/m_montecarlo.cc (MCIPA): Removed *ppath_step* from the function.
	Information now taken from ppath: ppath_step.np replaced by ppath.np
	etc.

	* src/montecarlo.cc (mcPathTraceIPA): Removed *ppath_step* as input.
	
	* src/m_jacobian.cc (yCalc): Adapted to changes in RteCalcNoJacobian.

	* src/m_rte.cc (RteCalc): Output is now only *y* and *jacobians*.
	(RteCalcNoJacobian): Output is now only *y*.

2008-04-29  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-3-39

	* src/m_rte.cc (RteCalc): Changed treatment of some variables as a first
	step to use OpenMP. Clean up of some agendas needed to finish this.

2008-04-29  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-3-38

	* Odin test control files updated to ARTS2 format. Test cases run.
	
	* includes/odinsmr.arts: 
	* includes/odinsmr_501_1D.arts: 
	* tests/OdinSMR/TestOdinSMR_1D.arts: 
	* includes/odinsmr_544.arts: 
	* includes/odinsmr_501.arts: 
	* tests/OdinSMR/TestOdinSMR.arts: 

2008-04-29  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-3-37

	* doc/uguide/main.tex, configure.in, src/*.{cc,h}:

	Update copyright info for 2008.

	* tests/Abs/TestAbs2.arts: Use short call for abs_lookupCreate.

	* tests/AMSUB/: Ignore *.generated* .

2008-04-28  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-3-36

	* Fix 'make distcheck'

	* tests/Makefile.am:

	Add artsXML.py to EXTRA_DIST.

	Also clean files that contain ".generated." somewhere in the filename.

	* test/AMSUB/TestAMSUB.arts:

	Change output filename of jacobians to contain ".generated.".

	* src/xml_io.cc (xml_open_output_file):

	Remove superfluous ".gz" from filename in error message.

2008-04-24  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-3-35

	* src/agenda_class.cc (Agenda::set_outputs_to_push_and_dup):

	Added special treatment for the Delete method. Add its input variable
	to the output variable list. This makes sure that the variable which
	will be deleted is duplicated and restricts the effect of the Delete
	method to the agenda's scope.

	(Agenda::execute):

	Remove code to check if specific inputs are initialized. Not needed
	anymore because all variables are now treated as generic inputs.

	* src/workspace_ng.{cc,h}:

	Add new method 'del' to free a WSV's memory.

	* src/m_delete.h (Delete): Use ws.del instead of ws.pop_free.

	* src/parser.cc (tasklist_insert_set_delete): Remove debug output.

2008-04-23  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-3-34

	* tests/AMSUB/TestAMSUB.arts:

	Copy the ybatch_index to file_index to safe the jacobians to indexed
	files.

	* tests/AMSUB/: Add jacobian output files to svn ignore.

2008-04-22  Stefan Buehler  <sbuehler(at)ltu.se>

	* arts-1-3-33

	* src/m_abs_lookup.cc (choose_abs_nls_pert): Chose always at least
	2 points below and above the reference profile, as for
	temperature. The old strategy led to problems in batch jobs with
	only one profile, together with Jacobian calculation.

2008-04-20  Cory  <corzneffect@gmail.com>

	* arts-1-3-32

	* tests/testall.py (TestMonteCarloSimple):removed this and the
	other test involving ScatteringMonteCArlo (which is broken and
	wont be fixed in the near future). All tests pass.
	
2008-04-17  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-3-31

	* src/getopt.h: Fix compilation on Mac OS X Tiger.

	* src/getopt.cc: Fix 64-bit compilation on Mac OS X Leopard.

2008-04-17  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-3-30

	* autogen.sh:

	Raise requirement for automake to 1.7. 1.6 does not support conditional
	variables. Also add 1.10 to the compatibility list. (Reported by
	Carlos Jimenez).

2008-04-14  Mattias Ekstrom  <mattias.ekstrom@chalmers.se>

	* arts-1-3-29

	* src/methods.cc: Method ArrayOfMatrixSet is now named 
	ArrayOfMatrixInsert. An output array has now to be declared when
	calling the method.

	* src/m_basic_types.cc: Implemented the changes described above.

2008-04-10  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-3-28

	* test/testall.py:

	Update the comparison values for the AMSU-B test case. Because the
	surface is now treated as a blackbody, the BTs have changed
	significantly esp. for the two surface channels which made the test
	fail.

2008-04-10  Mattias Ekstrom  <mattias.ekstrom@chalmers.se>

	* arts-1-3-27

	* test/general.arts: Now treats the surface as a blackbody. 

	* test/odinsmr.arts: Reset the userparameter for N2-SelfContMPM93
	to 1.

2008-04-01  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-3-26

	* test/testall.py: Update values for AMSUB test case.

2008-03-25  Stefan Buehler  <sbuehler(at)ltu.se>

	* arts-1-3-25

	* src/gas_abs_lookup.cc (Extract): Switched to 4th order
	interpolation for T and H2O. 

	* src/m_abs_lookup.cc (choose_abs_nls_pert): Make sure that there
	are at least five points.
	(choose_abs_t_pert): Choose at least two points below and above
	the reference point.

	* src/interpolation_poly.cc: Some minor polishing.

	* src/interpolation_poly.h: Updated.

	* src/parameters.cc (get_parameters): Removed forgotten debug
	output. 

2008-03-19  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-3-24

	* configure.in:

	Disable OpenMP if the user compiles without optimizations and uses the
	Intel compiler. The resulting application is not properly parallelized
	and will execute the same iteration multiple times on different
	threads.

2008-03-18  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-3-23

	* IMPORTANT: In rare cases, the changes in this commit might break your
	controlfiles. This only happens if you have used one of the following
	variables as a supergeneric output:

	arrayofarrayofgriddedfield3_1
	arrayofmatrix_[12]
	arrayofstring_1
	index_1
	matrix_[12]
	numeric_[12]
	sparse_1,
	tensor[3456]_[123]
	vector_[123]

	If this is the case for you, please read on.

	* Continued work on the automatic creation of output WSVs. For
	supergeneric methods we don't know which type the output variable
	should have if it doesn't already exist. For this purpose, Create
	functions for the most commonly used types have been added.

	All workspace variables ending in _[1-3] like vector_1, matrix_1 etc.
	have been removed. They are not needed anymore because they can be
	created at runtime.

	If you have used these variables in your controlfiles as an output
	variable of a supergeneric method, you have to add a call to TYPECreate
	before calling the supergeneric method. Example taken from
	tests/AMSUB/TestAMSUB.arts:

	Before:

	ReadXML(arrayofmatrix_1){"chevallierl91_clear_q_extract.xml"}

	Now:

	ArrayOfMatrixCreate(arrayofmatrix_1)
	ReadXML(arrayofmatrix_1){"chevallierl91_clear_q_extract.xml"}

	* src/parser.{cc,h}:

	(parse_method), (parse_input), (parse_output_and_input):

	Add two parameters: auto_vars and auto_vars_values. They handle
	parameters for which the user passed constant values in the
	controlfile. One holds the indexes of the automatically allocated
	variables and the other one their values.

	(read_name_or_value):

	New function that parses WSV names and values.

	(read_name):

	Throw exception if first character of the WSV name is not a letter.

	(parse_main):

	In case of a runtime_error also output the column number to out0, not
	just to out3.

	(parse_agenda):

	Use tasklist_insert_set_delete.

	(tasklist_insert_set_delete):

	Insert Set and Delete methods for the automatically allocated
	variables into the agenda.

	* src/workspace.cc:

	Remove arrayofarrayofgriddedfield3_1, arrayofmatrix_[12],
	arrayofstring_1, index_1, matrix_[12], numeric_[12], sparse_1,
	tensor[3456]_[123], vector_[123]. Not needed anymore because output
	variables can now be created at runtime.

	* src/methods.cc, src/m_basic_types.cc:

	New methods ArrayOfMatrixCreate, ArrayOfStringCreate, IndexCreate,
	MatrixCreate, NumericCreate, SparseCreate, StringCreate,
	Tensor[34567]Create, VectorCreate.

	* tests/AMSUB/TestAMSUB.arts:

	Use new method ArrayOfMatrixCreate to create arrayofmatrix_1.

	* includes/amsub.arts:

	Use MatrixCreate for matrix_2.

	* src/m_xml.h (WriteXML):

	Better runtime error message.

	* src/m_general.cc (PrintWorkspace):

	When displaying the whole Workspace, mark allocated variables with a
	plus sign.

2008-03-10  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-3-22

	* src/make_auto_md_cc.cc:

	Fix offset in indexing when passing Input workspace variable names.

2008-03-06  Stefan Buehler  <sbuehler(at)ltu.se>

	* arts-1-3-21

	* doc/uguide/interpolation.tex (section{Higher order
	interpolation}): Added this section, describing the new
	interpolation routines.

2008-03-06  Stefan Buehler  <sbuehler(at)ltu.se>

	* arts-1-3-20

	* src/interpolation_poly.{cc,h}: Finished first draft of higher order
	polynomial interpolation routines. It seems to work!

	* src/test_interpolation.cc (test08): A very simple test case for
	the new interpolation routines.

2008-03-05  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-3-19

	* New feature: Creating new workspace variables at runtime.
	If the user specifies an output variable that does not exist, arts
	automatically creates the variable instead of throwing an error. E.g.:

	IndexSet( nelem, 10 )
	VectorNLogSpace( myfancyvector, nelem, 10, 20 )

	In this case a new workspace variable 'myfancyvector' is created and
	initialized.

	This works for outputs as well as generic outputs.

	* src/workspace_ng.{cc,h}:

	Add new function add_wsv to extend the workspace at runtime.

	* src/parser.cc:

	When a output or generic output variable doesn't exist, create it.

	* src/m_general.h (SWITCH_OUTPUT):

	Output a newline after printing the variable.

2008-03-05  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-3-18

	* src/parser.{cc,h}:

	(ArtsParser::parse_generic_keywords):

	Renamed to parse_keywords2 and added docs.

	(ArtsParser::parse_keywords): Added docs.

	(ArtsParser::parse_method): Cleanup and simplify code.

	(ArtsParser::parse_output_and_input): Add docs. Cleanup code.

2008-03-05  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-3-17

	* Continued work on the new controlfile features.

	WSM input and output variables are now treated the same as generic
	inputs and outputs.
	In practice, this means that also for non-generic inputs and outputs
	arbitrary workspace variables (of matching type) can be passed to the
	method in the controlfile.

	* src/parser.{cc,h}:

	(parse_input): Add input variable array to the parameter list.

	(parse_output): Add output variable array to the parameter list.

	Indexes for the actual variables passed as input and output are now
	added to the MRecord's moutput and minput arrays. Before, this was
	only done for generic variables.

	* src/make_auto_md_cc.cc:

	Handle input and output WSVs in the same way as generic variables.

	* src/agenda_class.h (MRecord): Updated docs for minput/moutput.

2008-03-04  Stefan Buehler  <sbuehler(at)ltu.se>

	* arts-1-3-16

	* src/interpolation.{cc,h}: Removed gridpos_extpol. Instead,
	gridpos has an optional argument extpolfac with a default value of
	0.5. Also changed \param for output parameters to \retval in
	doxygen comments.

	* src/special_interp.{cc,h} (p2gridpos): Added optional argument
	extpolfac with a default value of 0.5.
	(p2gridpos_extpol): Removed.

	* src/jacobian.cc: Replace calls to gridpos_extpol by calls to
	gridpos with extpolfac argument.

	* src/interpolation_poly.{cc,h}: Work in progress. Added all
	interpweights and interp functions from interpolation.cc. Adapting
	them to higher order polynomial interpolation.

2008-03-03  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-3-15

	* Started to get rid of the global variables. wsv_data and WsvMap are
	now part of the Workspace class.

	* src/workspace.cc:

	Don't define wsv_data as a global variable anymore. It is now part of
	the Workspace class.

	Make define_wsv_data also part of the Workspace class.

	* src/wsv_aux.h:

	Remove declarations of define_wsv_data and define_wsv_map.
	Moved PrintWsvName to workspace_ng.h.

	* src/workspace_ng.{cc,h}:

	Added wsv_data and WsvMap as static members to Workspace.

	Moved PrintWsvName and define_wsv_map here.

	* src/workspace_aux:

	Removed. define_wsv_map is now part of the Workspace class and
	implementation moved to workspace_ng.{cc,h}.

	* src/Makefile.am:

	Remove workspace_aux.cc.

	(make_auto_wsv_h_SOURCES):

	Remove agenda_class.h, add workspace_ng.{cc,h}.

	* src/m_agenda.cc, src/m_delete.h, src/make_auto_md_h.cc,
	src/make_auto_wsv_h.cc, src/agenda_class.cc, src/methods_aux.cc,
	src/main.cc, src/workspace_ng.cc, src/make_auto_md_cc.cc,
	src/parser.cc:

	Use wsv_data, WsvMap, define_wsv_data, and define_wsv_map from the
	Workspace class.

	* src/agenda_class.h, src/m_general.h:

	Don't include workspace_ng.h. Just declare Workspace.

2008-02-29  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-3-14

	* The AMSUB test now runs with jacobians. Though not checked result.
	But mechanism using
	file_index appears not to work with new agenda definitions.
	No time for me to fix this now.
	
	* tests/AMSUB/TestAMSUB.arts: Added following calls: 
	   IndexSet( file_index ){0}
	   jacobianClose 
	   IndexStep( file_index, file_index ){}

	* includes/amsub.arts: Added: StringSet( jacobian_unit ){ "RJBT" }

2008-02-29  Stefan Buehler  <sbuehler(at)ltu.se>

	* arts-1-3-13

	* src/interpolation_poly.h: Commit before rearranging
	interpolation again.

	* src/interpolation_poly.cc: Commit before rearranging
	interpolation again.

	* src/test_interpolation.cc (test07): First test of new
	polynomial interpolation. Seems to work.

2008-02-29  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-3-12

	* src/make_auto_wsv.h, src/make_auto_wsv_groups.h:

	Move definition of the workspace memory handler from auto_wsv.h to
	auto_wsv_groups.h because it only depends on the WSV groups not the
	WSVs anymore.

	Fix the size of the function pointer arrays. They should have as many
	elements as the WSV group names array, not the WSV array.

	* src/make_auto_wsv.h:

	Do not create the obsolete auto_wsv.txt file anymore.

	Don't include matpackI.h.

	* src/workspace_ng.cc:

	Include auto_wsv_groups.h instead of auto_wsv.h.

2008-02-29  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-3-11

	* configure.in: Add -Wshadow to icc compiler flags.

	* src/agenda_class.cc (Agenda::execute):

	Rename some index variables to avoid shadowing.

	* src/wsv_aux.h (WsvRecord):

	Add member mimplicit which is can be set to true if the variable was
	automatically created.

	* src/methods.cc, src/m_general.{cc,h}:

	Add keyword only_allocated to PrintWorkspace. Can be used to only
	print the allocated variables or the whole list of WSVs.

	* src/parser.cc:

	Make wsv_data non-const. The parser needs to change it in the future
	for creating new variables on the workspace.

	(parser_generic_keywords):

	Add parameter "first". Fixes WSMs which take only keywords.

	(parse_input), (parse_output): Make parameter "first" a reference.

	* src/workspace_ng.{cc,h}:

	Do not use the constant N_WSV to determine the number of WSVs in the
	workspace. We want to be able to add WSVs to the workspace, therefore
	we must rely on runtime information.

	* src/main.cc (main):

	Call Workspace::intitialize.

2008-02-29  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-3-10

	* Intermediate commit continuing work on the new controlfile
	structure. The parser is still backwards compatible with the old
	controlfiles. If this commit breaks anything it's a bug and you should
	let me know...

	* The testall.py script now depends on python-numpy.

	* tests/Abs/TestAbs2.arts, tests/DOIT/TestDOIT2 show how the new
	controlfile structure looks like.

	* src/abs_species_tags.cc, src/m_rte.cc, src/m_abs_lookup.cc,
	src/m_jacobian.cc, src/m_batch.cc, src/m_agenda.cc, src/m_sensor.cc,
	src/m_append.h, src/m_basic_types.{cc,h}, src/m_atmosphere, src/m_copy,
	src/m_ignore.h, src/m_physics.cc, src/m_general.{cc,h},
	src/check_input.cc, src/m_ppath.cc, src/m_refraction.cc,
	src/special_interp.(cc,h), src/montecarlo.cc, src/rte.cc

	Remove generic input/output names from WSMs.

	* src/methods.{cc,h}, src/methods_aux.cc:

	Add flag PASSWSVNAMES. Generic output/input variable names are not
	passed to WSMs anymore. But some functions, like WriteXML and ReadXML,
	must still have the WSV name to derive a default filename from it.
	For those functions this flag can be set to true.

	Set PASSWSVNAMES for ReadXML, WriteXML, WriteXMLIndexed and Delete.

	Implement helper function to retrieve a list of input only variables.

	* src/agenda_class.cc (Agenda::execute):

	Also output the method parameters to out1 in addition to the WSM name.
	(Currently commented out)

	* src/agenda_class.h (MRecord):

	Implement helper function to retrieve a list of generic input only
	variables.

	* src/make_auto_md_cc.cc, src/make_auto_md_h.cc:

	Remove the generic WSV input and output variable names from the
	getaway functions.

	Use new helper function MdRecord::input_only.

	* tests/testall.py:

	Use XML files for data exchange between arts and the python test
	script instead of parsing the arts output. The parsing was tedious and
	only possible with tweaked output formatting of the ARTS Print method.
	With the ongoing changes to the structure of the ARTS screen output
	this would have gotten even more unpractical.
	Using XML files is much more powerful and flexible. Only disadvantage
	is that we have to depend python-numpy as we need its 'array' type.

	* tests/artsXML.py:

	Added a stripped down version from pyarts to read arts XML files
	with the testall.py script.

	* tests/DOIT/TestDOIT.arts,
	tests/MonteCarlo/TestMonteCarloGeneralGaussian.arts,
	tests/MonteCarlo/TestMonteCarloGeneral.arts,
	tests/AMSUB/TestAMSUB.arts, tests/ClearSky/TestClearSky.arts:

	Instead of using the Print method to pass results to the python test
	script, write those variables to a file.

	* tests/AMSUB/TestAMSUB.arts:

	Do not include continua.arts. Already done in amsub.arts include file.

	* tests/: Ignore *.pyc.

	* src/parser.{cc,h}:

	Split up parse_method into several functions.

	Continued work on the new controlfile format. All parameters are now
	given in parenthesis. Curly braces are only used for Agendas.

	* src/m_cloudbox.cc, src/cloudbox.cc, src/m_scatrte.cc, src/m_abs.cc:

	Always indent out2 output by 2 spaces.

	* tests/Abs/TestAbs2.arts, tests/DOIT/TestDOIT2:

	Added to demo the new cfile structure.

2008-02-28  Stefan Buehler  <sbuehler(at)ltu.se>

	* arts-1-3-9

	* tests/AMSUB/TestAMSUB.arts: Tried to switch on Jacobians, but
	this leads to a core dump in RteCalc. I'm leaving this in for
	Patrick to have a case to check.

	* src/interpolation_poly.{cc,h}: New files, home of the higher
	order interpolation functions.

	* src/Makefile.am: Added interpolation_poly.{cc,h}.

	* src/interpolation.cc: Typo fix in comment.

2008-02-26  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-3-8

	* src/make_auto_wsv_h.cc:

	Change the allocation, deallocation, and duplication function pointer
	arrays to store pointers for each WSV group, not each WSV.

	* src/workspace_ng.cc:

	Adapted for the changes in auto_wsv.h. Use the wsv_data array to get
	the group type and pass it to allocate, deallocate, or duplicate.

2008-02-25  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-3-7

	* src/parser.cc:

	Doxygen macros start with a \ not a /...

	Replace also all remains of old doxygen style @ signs with \.

	Updated docs.

2008-02-25  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-3-6

	* src/scatrte.cc (cloud_ppath_update1D_planeparallel),
	src/lineshapes.cc:

	Use _U_ macro in several places to get rid of doxygen warnings.

	* src/agenda_record.cc (write_agenda_wrapper_header):

	Add missing docs for one parameter.

	* src/special_interp.cc (p2gridpos_extpol):

	Add missing docs (FIXME_DOCMISSING) for one parameter.

	* doc/doxygen/Doxyfile.in:

	Add m_abs_o2_models.cc to EXCLUDE list. It is not used ATM.

	Remove old_absorption.cc from EXCLUDE list. The file doesn't exist
	anymore.

	* src/mystring.h (insert_substr): Added helper function.

	* src/make_auto_md_h.cc:

	Escape < and > in WSM description field to fix appearance in doxygen
	documentation.

	* src/mc_antenna.h: Remove spurious . in doxygen comment.

	* src/species_data.cc:

	Remove nested C++ comments in doxygen docs and replace the with HTML
	comments.

	* src/arts_omp.{cc,h}, src/array.h: Mask # signs in doxygen comments.

2008-02-22  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-3-5

	* src/m_abs_lookup.cc:

	Fix doxygen comments. [in] and [out] must be placed after the /param
	keyword, not the variable name.

	* src/parser.cc: Doxygen fixes. Remove obsolete parameters.

	* src/species_data.cc: Doxygen fix. Mask < and > in text.

2008-02-20  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-3-4

	* src/parser.{cc,h}:

	Started to implement features for the new controlfile format.
	The parser is still backwards compatible with old controlfiles. Use
	Arts2 instead of Arts as the main agenda name to tell the parser that
	the controlfile uses the new syntax.

	Added parse_input and parse_output functions.

	Added mcfile_version which holds the controlfile version to
	distinguish between the old and the new format.

	(parse_method): Require the inputs and outputs to be specified with
	the new controlfile format.

2008-02-20  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-3-3

	* src/parser.{cc,h}, src/sourcetext.{cc,h}:

	Move the SourceText class into its own file.

	* src/globals_2.cc: Get rid of the global Workspace variable.

	* src/main.cc (main):

	Execute all controlfiles specified on the commandline.

	Use a local workspace object instead of the obsolete global one.

	* src/m_general.{cc,h} (PrintWorkspace), src/m_delete.h (Delete):

	Use the new passworkspace feature.

	* src/m_scatrte.cc (ScatteringDoit, DoitInit), src/workspace.cc,
	src/methods.cc:

	Add new WSV doit_is_initialized. This way ScatteringDoit can check if
	DoitInit was called before without accessing the workspace object
	directly.

	* src/methods.{cc,h} src/methods_aux.cc:

	Add new option pass_workspace to MdRecord. Since we don't have a global
	workspace anymore, some methods must have direct access to the
	workspace (like Delete). If pass_workspace is true, the getaway
	function will pass a reference to the current workspace to the WSM.

	Add PASSWORKSPACE to Delete and PrintWorkspace.

	* src/make_auto_md_{cc,h}.cc:

	If the PassWorkspace flag is true, pass a workspace reference to the
	WSM.

2008-02-19  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-3-2

	* src/parser.{cc,h}:

	Added.

	Created a new parser class. This is the first object-oriented version
	doing just the same as the old functional parser. This is a
	preparation which should ease the upcoming implementation of new
	features.

	* src/Makefile.am:
	
	Add new parser.{cc,h}, remove parser_old.{cc,h}.

	* src/main.cc: Remove parser_old.{cc,h} and include the new parser.

	* src/parser_old.{cc,h}, src/parser.{cc,h}:

	Move SourceText class from old to new parser.

	* src/parser_old.h: Include parser.h.

2008-02-19  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-3-1

	* src/parser.{cc,h}: Renamed to parser_old.{cc,h}.

	* src/main.cc, src/make_auto_md_h.cc, src/parser.cc:

	Include parser_old.h.

	* src/Makefile.am: Change parser.{cc,h} to parser_old.{cc.h}.

	* src/main.cc (main):

	Reword non-OpenMP error message for --numthreads.

	* tests/DOIT/TestDOIT.arts:

	Cosmetic changes to give nicer diff output for the changes I'm
	testing.

2008-02-15  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-3-0

	Some control files need to be changed !!!
	
	* New sub-version (on request from Stefan) as usage of
	VectorNLinSpace and VectorNLogSpace changed. The number of
	elements now specified by *nelem*.  This in order to be consistent
	with e.g. VectorSet and simplify to make control files where
	vector lengths must be matched.

	* Test case for Odin-SMR created. Data exist for both 501 and 544
	GHz bands. Settings for operational retrievals have been followed
	as closely as possibly. Antenna patterns provided for different
	integration times.

	* tests/DOIT/TestDOIT.arts: Adjusted call of VectorNLin/Log in these 
	* tests/DISORT/TestDISORT.arts: files.
	* tests/ClearSky/TestClearSky.arts: 
	* tests/Abs/TestAbs.arts: 
	* includes/amsub.arts: 

	* tests/OdinSMR/TestOdinSMR_1D.arts: Created.
	* includes/odinsmr_501_1D.arts: Created.
	
	* includes/odinsmr_501.arts: Improved and polished
	* includes/odinsmr_544.arts: Improved and polished
	* includes/odinsmr.arts: Improved and polished
	* tests/OdinSMR/TestOdinSMR.arts: Improved and polished.

	* tests/OdinSMR/plot_results.m: Now also handling 1D case.

	* tests/OdinSMR/setup_input.m: Now creating antenna patterns for
	different integration times.

	* src/m_batch.cc: Adjusted calls of VectorNlogSpace.

	* src/m_basic_types.cc 
	(VectorNLinSpace): Now using *nelem*.
	(VectorNLogSpace): As above.

	* src/workspace.cc: Added sideband_mode. 

	* src/m_sensor.cc (ConvertIFToRF): Now using sideband_mode. 

2008-02-14  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-2-12

	* tests/X/X.arts: Added INCLUDE "continua.arts" in
	test scripts, due to change below.

	* tests/OdinSMR/plot_result.m: Small Matlab help script.
	* tests/OdinSMR/setup_input.m: As above.

	* includes/odinsmr_544.arts: Created.
	* includes/odinsmr_501.arts: Created.

	* tests/OdinSMR/TestOdinSMR.arts: Created. Works, but needs some
	polishing.

	* src/m_ppath.cc (VectorZtanToZaRefr1D): Added 1D to name for
	clarity. Now proper error message if *atmosphere_dim* not equal 1.
	Before just an assert.
	(VectorZtanToZa1D): Now only working for 1D and takes geoid radius
	from WSV *r_geoid*. Added 1D to name.
	(rte_pos_and_losFromTangentPressure): Sorted in alphabetical order.

	* includes/general.arts: Somewhat more detailed description of
	settings around surface_prop_agenda. I first changed to a more
	efficient way to implement a blackbody surface, but noticed that
	some tests had to be changed.
	Removed inclusion of continua.arts. This to make the inclusion
	more transperant and modular.

2008-02-04  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-2-11

	* src/main.cc (main):
	
	Fix syntax error and messages bug in non-OpenMP compilation.

2008-02-04  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-2-10

	* src/parameters.cc (get_parameters), src/parameters.h:

	Sort options in help output alphabetically.

	Added option -n/--numthreads to set the maximum number of threads.

	* src/main.cc (main):

	If --numthreads was given on the commandline set the maximum number of
	threads accordingly.

2008-02-01  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-2-9

	* src/parameters.cc (get_parameters):

	If the environment variable ARTS_INCLUDE_PATH exists, add those paths
	to parameters.includepath as well.

	Update --help documentation.

	* src/methods.cc (INCLUDE): Update documentation.

2008-02-01  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-2-8

	* src/methods.cc (INCLUDE), src/m_general.cc (INCLUDE):

	Add this dummy WSM with documentation for the INCLUDE statement.

2008-02-01  Stefan Buehler  <sbuehler(at)ltu.se>

	* arts-1-2-7

	* src/abs_species_tags.cc (SpeciesTag): Fixed bug reported by
	Patrick. There was no runtime error if the user chose a
	non-existing absorption species, only an assertion failure. The
	reason was a bug in the constructor of SpeciesTag. The helper
	function find_first returns -1 if the search item is not found,
	not nelem(), as was assumed.

2008-01-31  Stefan Buehler  <sbuehler(at)ltu.se>

	* arts-1-2-6

	* src/methods.cc (AtmFieldsRefinePgrid): Added this new method. I
	needed it for absorption lookup table testing. See online
	documentation for details.

	* src/m_atmosphere.cc (AtmFieldsRefinePgrid): Added this method. 

2008-01-31  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-2-5
	
	* src/m_montecarlo.cc (MCGeneral): Now using f_index.

	* src/montecarlo.cc (cloudy_rt_vars_at_gp): Added f_index as input
	argument. Used in abs_scalar_gas_agendaExecute.
	(clear_rt_vars_at_gp): As above.

	(mcPathTraceGeneral): Added f_index as input argument, following
	change above.
	(mcPathTrace): As above.
	(mcPathTraceIPA): As above.

	* src/m_rte.cc (MCGeneral): Conversion to Tb was applied twice!
	f_index now input to MCGeneral and should work for calculations
	involving multiple frequencies.

2008-01-31  Stefan Buehler  <sbuehler(at)ltu.se>

	* arts-1-2-4

	* src/arts_omp.cc: Added. This file contains wrapper functions for
	standard OMP functions, that work with and without OMP
	support. This saves the use of #ifdef statements around omp
	functions in the ARTS main code.

	All functions start with arts_omp. Otherwise, names are the same
	as the standard OMP function names.

	* src/arts_omp.h: Added. Header file for arts_omp.cc

	* src/m_abs_lookup.cc: Adapted to use arts_omp functions.
	(abs_fieldCalc): Fixed the vectorization bug following advice from
	Oliver. I had forgotten to add the flag to clone the workspace.

	* src/messages.h: Adapted to use arts_omp functions.

	* src/m_batch.cc: Adapted to use arts_omp functions.

	* src/main.cc: Adapted to use arts_omp functions.

	* src/agenda_class.cc: Adapted to use arts_omp functions.

	* src/m_cloudbox.cc: Removed unnecessary include of omp.h.

	* src/Makefile.am (libarts_a_SOURCES): Added arts_omp.{cc,h}.

2008-01-31  Stefan Buehler  <sbuehler(at)ltu.se>

	* arts-1-2-3

	* src/messages.h: Set verbosity level independently for each
	OpenMP thread.

	* src/parameters.cc (get_parameters): Fixed online documentation
	to also mention the reporting level 4, which shows suppressed
	agenda output.

	* src/main.cc (set_reporting_level): Set verbosity level
	independently for each OpenMP thread.

	* src/agenda_class.cc: Set verbosity level independently for each
	OpenMP thread.

	* src/messages.cc: Set verbosity level independently for each
	OpenMP thread.

	* src/m_batch.cc (ybatchCalc_implementation): There used to be a
	fix here to manually reset the reporting level after the parallel
	region. Removed the fix, since this should work correctly
	now. Suppress all agenda output, even the first run, since
	simultaneous output from several threads would be confusing. Put
	instead in a message to out2, recommending reporting level 4 for
	those who want to see the agenda output.

	* src/test_geomag_calc.cc (main): Adjusted to still compile with
	the new definition of messages.

	* src/m_abs_lookup.cc (abs_fieldCalc): Tried to vectorize this
	method. Does not yet work correctly!

2008-01-29  Stefan Buehler  <sbuehler(at)ltu.se>

	* arts-1-2-2

	* src/methods.cc (VectorLogSpace): Added this method. Adapted from
	Patrick's VectorLinSpace method. I needed this for abs_lookup
	testing, where I want to prescribe a certain spacing of the log p
	grid, not the number of points as in VectorNLogSpace.

	* src/m_basic_types.cc (VectorLogSpace): Added this function.

2008-01-17  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-2-1

	* src/m_rte.cc (RteCalcMC):

	Revert change from arts-1-1-1209 r5612. Should not be needed anymore.

2008-01-17  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-2-0

	* Merged all changes up to revision r5615 from the
	arts2-controlfile-breakage branch back into trunk.

	* configure.in:

	Increased version number to 1.2.0 to reflect that major changes have
	been made to the controlfiles and the absorption part, and to indicate
	that we're moving closer to the release of arts 2.0.

2008-01-17  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-1-1209-1

	* Merged revisions r5531:5614 from trunk. Last step before merging
	back all the branch changes into the trunk.

2008-01-10  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-1-1209

	* src/m_rte.cc (RteCalcMC): I missed a detail and it turned out that
	this function only works for single frequency calculations. 
	Problem will be fixed in the present branch. A runtime error was
	included in this version to avoid incorrect usage of the function.

2007-12-07  Mattias Ekstrom <mattias.ekstrom@chalmers.se>
	
	* arts-1-1-1208

	* src/workspace.cc: The normalisation of *sensor_pol* is now
	described in the online documentation.

2008-01-14  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-1-1207-54

	* doc/examples/Makefile.am, 3rdparty/disort1.2/Makefile.am:

	Add $(srcdir) to EXTRA_DIST files. Fixes 'make distcheck'.

2008-01-11  Stefan Buehler  <sbuehler(at)ltu.se>

	* arts-1-1-1207-53

	* Easy abs_lookup creation works now, make check runs without
	error. 
	
	* src/m_abs_lookup.cc (abs_lookupSetup): Finally finished this
	method. This was the last part of the absorption lookup puzzle, I
	think. Should be very easy to use now, look at
	TestMonteCarloDataPrepare.arts, where this is used.

	* tests/MonteCarlo/TestMonteCarloDataPrepare.arts: Runs without
	error now with new abs_lookupSetup method.

	* tests/MonteCarlo/TestMonteCarloGeneralGaussian.arts: Fixed.

	* tests/MonteCarlo/TestMonteCarloGeneral.arts: Fixed.

2008-01-07  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-1-1207-52

	* both 'make dist' (to build a distribution package) and
	'make distcheck' (which also unpacks and tries to build the package)
	are now working (properly?), except for the failing MC tests. Only
	catch is that 'make' has to be executed once in the source tree to have
	the auto_* files built before running make dist{check}.

	* doc/reference/Makefile.am:

	Remove arts executable from the auto_*.tex dependencies. The dependency
	breaks 'make dist' and is anyway fulfilled by the subdirectory order
	in the toplevel makefile.

	* includes/Makefile.am: Added the xml files to includes_DATA.

2008-01-07  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-1-1207-51

	* tests/testall.py, tests/Makefile.am:

	Fix path handling so 'make check' works also from the toplevel srcdir.

	Also fix the tests when building arts outside the source directory in
	a separate build directory to come one step closer to get 'make dist'
	working again. When building outside the source tree the test files
	are copied into the build directory.

	* src/check-code-header-consistency.sh:

	Return proper exit code.

	Compile the generated test_include.cc, not the header file itself.

	Pass -c instead of -o to the compiler because we just want to compile,
	not link.

	Works now with gcc and icc.

	* src/m_append.h:

	Include matpackI.h because we use Vector here.

	Include exceptions.h for runtime_error.

	* src/m_basic_types.h: Include gridded_fields.h for the gridded types.

	* src/methods.cc: Remove tab in documentation of abs_lookupSetup.

	* src/check-code-tab-indent.sh: Remove spurious ;.

2008-01-02  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-1-1207-50

	* Unit of *y* and *jacobian* now controlled by WSVs *y_unit* and
	*jacobian_unit*.

	* src/m_jacobian.cc (jacobianUnit): Created.

	* src/m_rte.cc (RteCalc): Now using y_unit and jacobian_unit.
	(yUnit): Created.
	
	* src/m_montecarlo.cc: mc_unit replaced with y_unit. 

	* src/rte.cc (rtecalc_check_input): Updated with respect to y_unit and
	jacobian_unit.

	* src/methods.cc: Replaced keyword argument y_unit in RT methods with
	new WSV with same name. Replaced mc_unit with y_unit in MC methods.

	Added jacobian_unit to jacobianOff and RteCalc.

	Added methods yUnit and jacobianUnit. 
	
	* src/workspace.cc: Improved description of sensor_pos and sensor_los. 
        Added y_unit and jacobian_unit.
	Removed mc_unit (replaced by y_unit).

2007-12-17  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-1-1207-49

	* src/jacobian.cc, src/agenda_class.{cc,h}:

	Make the agenda_append method a member function of the Agenda class.

	Call set_outputs_to_push_and_dup after adding the new methods to
	ensure that the list of WSVs we have to duplicate or push when
	entering the agenda's scope is up to date.

	* src/m_jacobian.cc:

	Replace agenda_append with jacobian_agenda.append.

	* src/m_batch.cc (ybatchCalc_implementation):

	Move "Doing job..." output from out1 to out2.

2007-12-17  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-1-1207-48

	* src/abs_species_tags.cc (SpeciesTag::Name), src/absorption.cc
	(operator<<), src/xml_io.cc (xml_set_stream_precision):

	Instead of using a runtime check (switch statement) to determine the
	floating point precision, use a preprocessor construct. This way we
	can already throw an error at compile time if Numeric is not double
	or float and we know the code will break.

	* src/rng.cc: Remove spurious ; and indent properly.

	* src/sensor.cc (antenna_matrix), src/jacobian.cc (agenda_append),
	src/m_montecarlo.cc (ScatteringMonteCarlo), src/optproperties.cc
	(abs_vecTransform, ext_matTransform, pha_matTransform), src/rng.cc
	(no_error_handler), src/xml_io.cc, src/scatrte.cc
	(cloud_ppath_update1D_planeparallel), src/montecarlo.cc
	(cloudbox_ppath_start_stepping), src/absorption.cc
	(LineRecord::ReadFromArtsStream):

	Removed unused variables.

	* src/optproperties.cc, src/montecarlo.cc
	(cloudbox_ppath_start_stepping):

	Add _U_ to unused function parameters.

	* src/xml_io_basic_types.cc (xml_read_from_stream):

	Add explicit cast when converting from int to char.

	* configure.in:

	Define USE_FLOAT if we use float.

	Disable some 'not-so-helpful-and-most-of-the-time-false-positive'-
	warnings of the icc compiler in case someone decides to compile
	with -w2.

2007-12-14  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-1-1207-47

	* src/matpack{I,III,IV,V,VI,VII}.h:

	Make all destructors virtual and add empty virtual destructors to
	View classes. If the destructors are non-virtual we end up with
	memory leaks under certain circumstances.

	* src/math_funcs.h (fac): Replace sum=sum*i with sum*=i.

	* src/parameters.cc (get_parameters):

	Cast int to char before assigning it to a char var.

	* configure.in: Remove -Wbrief from icc warning options.

2007-12-12  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-1-1207-46

	* configure.in:

	Enable -Werror and -Wall also for the Intel compiler in
	maintainer mode.

	* src/matpack.h, src/arts.h, src/array.h:

	Remove spurious semikolons.

	* src/methods_aux.cc (define_md_map):

	Remove the const from extern md_data. It was already used non-const
	in this file and a redefinition of extern variables from non-const to
	const inside one compilation unit is not allowed.
	
	* src/agenda_record.cc (define_agenda_map, check_agenda_map):

	Remove const from AgendaMap for same reason.

	* src/main.cc (main): Remove const from out_basename for same reason.

	* src/absorption.{cc,h} (LineRecord::ReadFromHitranStream,
	ReadFromHitran2004Stream, LineRecord::ReadFromMytran2Stream,
	LineRecord::ReadFromJplStream, LineRecord::ReadFromArtsStream):

	Define species_data as const.

	Move implementation of LineRecord::Name, LineRecord::IsotopeData and
	LineRecord::SpeciesData from header to cc file to avoid the need of
	making a global variable visible in the header file (and subsequently
	all source files which include this header).

	* src/m_atmosphere.cc (batch_atm_fields_compactFromArrayOfMatrix),
	src/m_abs_lookup (abs_lookupCreate):

	Use constant value in for-loop break condition to make the OpenMP
	for-test conform.

2007-12-12  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-1-1207-45

	* configure.in:

	Also display CC and CXX in the summary. Move OpenMP support to upper
	section.

2007-12-12  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-1-1207-44

	* configure.in:

	Don't add libsvml by default to LDFLAGS with icc, it is only needed
	for processor specific optimizations.

2007-12-11  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-1-1207-43

	* configure.in: Don't add any CPU dependent compiler flags.

2007-12-07  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-1-1207-42

	* configure.in:

	Enable optimizations by default also in maintainer mode.

	* tests/testall.py (TestAMSUB):

	Test all values of ybatch for correctness.

	(ArtsRun::get_val): Parse also multiline return values.

	* src/m_general.h (Print):

	Print the name of the variable again after the output to make the
	parsing in testall.py easier.

	* src/continua.cc:

	Comment out unused variables. 

2007-12-07  Stefan Buehler  <sbuehler(at)ltu.se>

	* arts-1-1-1207-41

	* src/methods.cc (Append): Added this new supergeneric method. It
	appends the contents of one array (of any type) or Vector to
	another.

	* src/m_append.h: Added. Contains implementation of supergeneric
	Append method. Only implemented for Array types and Vector so far.

	* src/workspace.cc (arrayofmatrix_2): Added.

	* src/make_auto_md_cc.cc (main): Added m_append.h

	* src/m_abs_lookup.cc (abs_lookupSetupBatch): Removed runtime
	error on negative fractional VMR values, issue just a warning
	instead. Added keyword *extremes* which allows extreme abs_t_pert
	and abs_nls_pert values to be added by hand. Default for extremes
	is empty, which keeps the old behavior.

	* src/Makefile.am (libarts_a_SOURCES): Added m_append.h

2007-12-07  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-1-1207-40

	* configure.in:

	Add support for the Intel C++ compiler. This includes detecting the
	compiler and setting proper debug/optimization flags.

	Add check for ar. If Intel's compiler is used we switch
	automatically to xiar to support the -ipo (multifile optimizations)
	compiler flag.

	Add --enable-full-optimize option which switches to a more aggressive
	opt level which _might_ affect floating point precision.

	* m4/ax_compiler_vendor.m4: Added.

	* m4/Makefile.am: Added ax_compiler_vendor.m4.

	* src/methods.cc: Replace \% with %.

	* src/m_cloudbox.cc, src/fastem.cc, src/test_integration.cc,
	src/test_complex.cc:

	Replace invalid multibyte characters.

	* src/matpack*.h, src/binio.cc, src/agenda_class.cc, src/binio.{cc,h},
	src/mystring.h:

	Remove all const keywords from return types where they have no effect.

2007-12-05  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-1-1207-39

	* src/main.cc (main):

	Add info about OpenMP support in -v output. Align output nicely.

2007-12-05  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-1-1207-38

	* src/m_cloudbox.cc:

	Fix my last commit. endl doesn't work with out3, use \n instead.

2007-12-05  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-1-1207-37

	* src/gas_abs_lookup.cc (GasAbsLookup::Adapt):

	Comment out debug output.

	* src/m_cloudbox.cc: Use out3 instead of cout for atm_dim output.

	* src/optproperties.cc, src/montecarlo.cc:

	Use out0 instead of cout for error output.

2007-12-05  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-1-1207-36

	* src/m_batch.cc (ybatchCalc_implementation):

	Vectorize the ybatch loop.

	* tests/AMSUB/TestAMSUB.arts:

	Added DEFINITIONS header to enable syntax highlighting in emacs/vi.

2007-12-05  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-1-1207-35

	* src/workspace_ng.cc (Workspace::Workspace):

	Copy the wsv only if it was already allocated. Also copy the
	initialized status from the original wsv.

	* src/make_auto_md_cc.cc (main):

	Ensure that we make a copy of the input agendas in the getaway
	functions if OpenMP is enabled. Otherwise we end up with a very
	schizophrenic workspace.

	* src/xml_io.cc (xml_read_from_file):

	Fix memory leak introduced when changing to dynamically allocating
	the input stream.

	* src/agenda_class.h (Agenda::Agenda): Also copy moutput_*.

	* src/agenda_class.cc (is_input):

	Use the local agenda workspace instead of the global workspace.

2007-12-04  Stefan Buehler  <sbuehler(at)ltu.se>

	* arts-1-1-1207-34

	* src/gas_abs_lookup.cc (Adapt): Fixed a bug in the bugfix. Now it
	works (hopefully).

2007-12-04  Stefan Buehler  <sbuehler(at)ltu.se>

	* arts-1-1-1207-33

	* src/m_abs_lookup.cc (abs_lookupSetupBatch): Throw runtime error
	if there is no data to average at some altitude. (Can happen if
	the various profiles do not overlap.)

	* src/gas_abs_lookup.cc (Adapt): Fixed bug in handling of
	nonlinear species that was reported by Oliver.

2007-11-29  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-1-1207-32

	* src/make_auto_md_cc.cc (main), src/workspace_ng.cc ():

	Remove debugging leftovers.

2007-11-27  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-1-1207-31

	* Thread-safe agendas

	* src/make_auto_md_cc.cc (main):

	When agendaExecute is called with the new parameter
	safe_workspace=true, make a copy of the top workspace variable layer.

	* src/agenda_class.{cc,h}:

	Add member variable agendaworkspace to class Agenda.

	Add copy constructors to Agenda and MRecord. Don't require a properly
	sized object passed to the copy functions, just resize it to the
	necessary size.

	Fix includes.

	(Agenda::push_back): Move from cc to h file and make it inline.

	(Agenda::execute):

	Use the new local agenda workspace instead of the global one.

	* src/workspace_ng.{cc,h}:

	Added a copy constructor for Workspace which copies the top layer of
	the Workspace. It only copies the workspace data structure _NOT_ the
	actual variables.

	Move declaration of the WorkspaceMemoryHandler from the h to the cc
	file.

	Remove spurious includes from h file.

	* src/m_agenda.cc (AgendaSet):

	Don't resize the output agenda, it is done now automatically by the =
	operator.

	* src/agenda_record.{cc,h} (write_agenda_wrapper_header):

	Add parameter write_default_args to optional write default values into
	the generated function header.

	* src/m_general.cc: Include wsv_aux.h as we use PrintWsvName here.

	* src/make_auto_wsv_h.cc (main):

	Shorten the code of the duplicate_wsvg_* functions.

	* src/make_auto_md_h.cc (main):

	Add true as last argument to write_agenda_wrapper_header.

	* src/Makefile.am:

	Add agenda_class.h to make_auto_md_h_SOURCES and
	make_auto_md_cc_SOURCES.

	* src/main.cc (main):

	Set the workspace of the outermost agenda (Arts) to the global
	workspace.

	* src/gzstream.cc: Fix includes.

	* tests/AMSUB/: Ignore *.rep.

2007-11-27  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-1-1207-30

	* configure.in:

	Refine OpenMP check a bit. Add option --disable-vectorize to
	explicitly disable OpenMP even if the compiler supports it. Could be
	helpful for debugging.

	* m4/Makefile.am: Update macro list.

	* tests/AMSUB/TestAMSUB.arts: Remove spurious commas.

	* src/lineshapes.cc:

	Initialize all variables that were static before with 0.

2007-11-27  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-1-1207-29

	* configure.in:

	Automatically detect openmp compiler support and enable it.

	Remove obsolete mpi option.

	* m4/ax_openmp.m4: Added. Autoconf macro to check for openmp support.

2007-11-27  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-1-1207-28

	* src/parser.cc (parse_method):

	Allow an empty pair of () for methods that have no GInput or GOutput.

	Make {} optional for function which either have no keywords, or all
	keywords have defaults.

	* tests/AMSUB/TestAMSUB.arts, tests/Abs/TestAbs.arts,
	tests/ClearSky/TestClearSky.arts, tests/DISORT/TestDISORT.arts,
	tests/DOIT/TestDOIT.arts, tests/MonteCarlo/TestMonteCarlo*.arts,
	include/amsub.arts, include/continua.arts, include/general.arts:

	Remove no longer needed braces.

2007-11-26  Stefan Buehler  <sbuehler(at)ltu.se>

	* arts-1-1-1207-27

	* AMSUB setup with amsub.arts include file, as well as batch
	example in tests is working now.

	* includes/general.arts: Made surface emissivity 1 (blackbody
	surface) the general default case, following suggestion by
	Patrick. 

	* includes/amsub.arts: Added the sensor part. Still open issue:
	How to do more than one viewing angle at a time. (Sensor part
	seems to want sensor_pos also to be a vector if sensor_los is a
	vector.) Have to discuss this with Patrick.

	* includes/amsub.{f_grid,sensor_los,backend}.xml: These are now in
	direct Ascii format, no longer gzipped. Seems pointless to zip for
	such small files, also in this way version diffing will work.
	
	* tests/AMSUB/TestAMSUB.arts: Finished setting this up. It works
	nicely now. Also verified with the Chevallier 91L q data set that
	it gives consistent results with ARTS-1-0 (Viju setup). Ch18 has
	about 0.5 K difference, because O3 is now included. Differences in
	other channels are below approximatel 0.1 K.

	* tests/testall.py (TestAMSUB.test2): Added this test. It checks
	the result of the AMSU simulation. (Only first element of Ch16
	right now.)

	* src/workspace.cc (atm_fields_compact): Updated documentation.

	* src/m_batch.cc (GriddedField4ExtractFromArrayOfGriddedField4):
	Added. It takes the field with the given index from the
	array. Needed inside the ybatch_calc_agenda.

	* src/methods.cc (AtmFieldsFromCompact): Updated documentation.
	(GriddedField4ExtractFromArrayOfGriddedField4): Added.

	* src/m_basic_types.cc (IndexSetFromArrayOfMatrixLength): Removed
	this function. It is not needed, one can use instead the more
	general combination:
	nelemGet(<some_array>){}
        Copy(<some_index>, nelem){}

	* src/m_atmosphere.cc (AtmFieldsFromCompact): The name required
	for species fields in atm_fields_compact is now just "H2O", "O3",
	and so on, no longer "vmr_H2O", "vmr_O3", and so on.

2007-11-26  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-1-1207-26

	* src/m_basic_types.h:

	Create nelemGet functions also for ArrayOfGriddedField[34].

2007-11-26  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-1-1207-25

	* tests/testall.py, test/Makefile.am: Add AMSU-B test.

	* tests/TestAMSUB.arts: Fix path to chevallier data.

2007-11-26  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-1-1207-24

	* src/make_auto_md_cc.c:

	Re-throwing the exception at the _right_ place is a good idea...
	prevents arts from coredumping....

	* src/agenda_class.cc (Agenda::execute):

	Write a } to out1 before re-throwing the exception to keep the output
	nice and clean.

2007-11-26  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-1-1207-23

	* src/make_auto_md_cc.c:

	Catch runtime errors in *agendaExecute, cleanup the workspace and then
	pass on the runtime error. Keeps the workspace in a sane state after
	an agenda method failed.

2007-11-26  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-1-1207-22

	* src/methods.cc:

	Added new WSM Delete. This method can be used to delete workspace
	variables from the workspace to free memory.

	* src/m_delete.h: Added.

	* src/Makefile.am: Added m_delete.h to libarts.a.

	* src/make_auto_md_cc.cc: Include m_delete.h in generated source.

	* src/m_ignore.h: Minor fix in docs.

2007-11-23  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-1-1207-21

	* src/m_abs_lookup.{cc,h} (abs_lookupCreate): Renamed parameters gal
	and abs_nls_tags to match declaration in auto_md.h. To be able to name
	the function parameter abs_nls_tags to abs_nls, I renamed the local
	variable abs_nls to abs_nls_idx.

	* src/continua.cc: Fix doxygen warnings and use _U_ macro.

	* src/xml_io_compound_types.h: Cosmetics.

2007-11-23  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-1-1207-20

	* configure.in:

	Define new preprocessor macro _U_. This can be used to tell the
	compiler that a function parameter is intentionally unused (and thus
	avoid the warning). The macro is more handy than our old workaround to
	comment out the parameter name. Additionally, it has the advantage of
	not breaking the doxygen documentation.

	Before:

	void function_with_unused_param (int i, long /* j */)
	{ return i; }

	Now:
	void function_with_unused_param (int i, long j _U_)
	{ return i; }

	* src/make_auto_md_h.cc (write_method_header_documentation):

	Update doxygen documentation: Instead of just using the keyword param
	for input and output parameters, we now give param[in] of input
	parameters and param[out] for output parameters.

	* src/absorption.cc, src/cloudbox.cc, src/disort.cc, src/jacobian.cc,
	src/m_abs_o2_models.cc, src/mc_interp.cc, src/montecarlo.cc,
	src/check_input.cc, src/fastem.cc, src/optproperties.cc,
	src/parser.cc, src/partition_function_data.cc, src/rte.cc,
	src/scatrte.cc, src/sensor.cc, src/mc_antenna, src/mystring.h,
	src/xml_io.cc, src/xml_io_array_types.cc, src/lineshapes.cc:

	Add missing/remove non-existent parameters in doxygen documentation.

	* src/math_funcs.{cc,h}:

	Remove obsolete pow functions.

	* doc/doxygen/Doxyfile.in:
	
	Reenable treeview.

	Enable expansion of predefined macros (like _U_).

2007-11-23  Stefan Buehler  <sbuehler(at)ltu.se>

	* arts-1-1-1207-19

	* includes/amsub.arts: Added. AMSU-B setup file for arts.

	* includes/amsub.f_grid.xml.gz: Added. Frequency grid for AMSU-B
	simulations. This is the original old frequency grid from
	Viju. Rather course, perhaps not optimal in connection with Ozone
	lines. Might overestimate the O3 impact in band 18, actually.

	* includes/amsub.hitran04_lines.xml.gz: Added. HITRAN04 lines
	between 80 and 200 GHz. These are all lines of all species
	understood by ARTS. No attempt to optimize further, for example by
	taking only the strong O3 lines inside the actual AMSU-B
	bands. This could be optimized to speed up O3 absorption
	calculations, if necessary. (O3 is the only absorption model in
	amsub.arts that needs explicit lines from a catalogue.)

	* tests/AMSUB/TestAMSUB.arts: Added. Test case for AMSU-B batch
	calculations. 

	* tests/AMSUB/chevallierl91_clear_q_extract.xml.gz: Added. These
	are the first 10 cases from the chevallierl91_clear_q data set in
	arts-xml. 

	* tests/MonteCarlo/TestMonteCarloDataPrepare.arts: Generate the
	absorption lookup table, instead of just reading it from a file. 

	* tests/DOIT/TestDOIT.arts: Removed unnecessary abs_lookupInit. 

	* src/workspace.cc (batch_atm_fields_compact): Added.

	* src/methods.cc (abs_lookupSetupBatch): Added.
	(batch_atm_fields_compactFromArrayOfMatrix): Added.
	(sensorOff): Fixed documentation.
	(WriteXML): Added empty default filename.	

	* src/m_abs_lookup.cc (choose_abs_nls): Added.
	(choose_abs_t_pert): Added.
	(choose_abs_nls_pert): Added.
	(abs_lookupSetup): Added runtime error checks on input
	variables. Started to work on the 2D/3D case, but this is not finished.
	(abs_lookupSetupBatch): Added.

	* src/absorption.cc: Removed two unnecessary static declarations. 

	* src/m_abs.cc (abs_h2oSet): Cleaned up, use find_first_species_tg.
	(abs_n2Set): Cleaned up, use find_first_species_tg. Both methods
	used to set their respective abs_xxx profiles to zero if no tag of
	the right species was found. This behaviour is now removed, since
	we have defaults values for abs_h2o and abs_n2 in
	general.arts. The methods should only be used if there really is a
	profile to set. If no suitable profile is found, a runtime error
	is thrown.

	* src/abs_species_tags.{cc,h} (find_next_species_tg): Added this
	function. 
	(find_first_species_tg): Now simply calles find_next_species_tg
	with starting index 0.

	* src/matpackI.{cc,h} (mean): Added the mean function for vectors
	and matrices.

	* src/m_atmosphere.cc (batch_atm_fields_compactFromArrayOfMatrix):
	Added this method.

2007-11-21  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-1-1207-18

	* configure.in, src/Makefile.am:

	Reworked the handling of optimizations. Until now we had explicit
	targets defined for source files which required to be compiled with
	certain CXXFLAGS. Due to changes in automake this mechanism doesn't
	work anymore (and was bad anyway).

	The affected source files are now compiled into a library with
	appropriate compilation flags using the means provided by automake.
	The recommended way to compile arts _with_ optimizations (-O2) is
	to pass the option --enable-optimize to autogen.sh or configure.
	This will turn on -O2 in all places where it's safe to do so.

	MAKE SURE THAT YOUR SHELL ENVIRONMENT VARIABLES CFLAGS AND CXXFLAGS
	ARE UNSET OR AT LEAST DO NOT CONTAIN -O2.
	The flags the user specifies have still precedence over what arts
	things is best to use. If your environment variables contains -O2,
	even files like methods.cc will be compiled with optimizations which
	will take an awful long time and lots of memory.

	When autogen.sh is used, we assume that you are a developer. Thus,
	optimizations are not enabled by default as they have a negative
	impact on debugging. If you want to optimize anyway, call autogen.sh
	--enable-optimize. When configure is used, we assume you are a user
	and optimizations are enable by default, but can be disabled with
	configure --disable-optimize. For debugging flags it is vice versa.

	* src/: Add new libraries to ignore list.

	* src/lineshapes.cc:

	Initialize all a?, b?, c?, d?, e? variables with 0.

2007-11-20  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-1-1207-17

	* includes/general.arts: Some more comments. Changed lmax of
	ppath_stepGeometric.

	* src/Makefile.am (libgzstream_a_ldflags): Changed -lz libgzstream.a
	to libgzstream.a -lz (after hint from Oliver).	

2007-11-20  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-1-1207-16

	* src/xml_io.cc (xml_read_from_file):

	If .xml file is not found, also check for .xml.gz.

2007-11-19  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-1-1207-15

	* src/parser.cc (parse_stringarray_from_string):

	Implement handling default keyword values for ArrayOfString.

2007-11-19  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-1-1207-14

	* src/file.{cc,h} (find_file):
	
	New function to search the include path for a file.

	* src/Makefile.am: Added parameters.cc to auto_* targets.

	* src/xml_io.cc (xml_open_input_file):

	Use new function find_file to search for xml files.

	* src/parser.cc (parse_agenda):

	Use new function find_file to search for control files.

2007-11-19  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-1-1207-13

	* src/m_abs_lookup.cc:

	Put #ifdef _OPENMP around omp.h header and pragmas to avoid compiler
	error/warnings when compiling without openmp.

2007-11-16  Stefan Buehler  <sbuehler(at)ltu.se>

	* arts-1-1-1207-12

	* Played with OpenMP vectorization. Absorption lookup table
	generation now does the temperature variations in parallel. To
	enable this, you must use the g++-4.2 compiler (export
	CXX="g++-4.2") and the -fopenmp command line switch (export
	CXXFLAGS="-fopenmp"). Set these variables before running
	autogen.sh. According to the documentation, GNU compiler versions
	before 4.2 do not include OpenMP.
	
	* src/m_abs_lookup.cc (abs_lookupCreate): Added OpenMP pragmas, so
	that the loop over the temperature perturbations is vectorized.

	* src/lineshapes.cc: Removed all static declarations. I checked
	for VoigtKuntz6 that the result is unchanged, but not for all
	other lineshapes. The result should still be correct, since now
	every run is like the first run with the static variables. Static
	variables lead to core dumps with OpenMP, because several threads
	will try to access the same variable at the same time.

2007-11-08  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-1-1207-11

	* This commit adds support to write and read zipped xml files.

	* src/gzstream.{cc,h}:

	Added. Classes to read/write zipped files.

	Renamed parameters open_name to gz_open_name to avoid shadowing class
	members.

	* src/xml_io_instantiation.h: Remove include bofstream.h/bifstream.h.

	* src/xml_io.cc: Add reading/writing support for zipped xml files.

	* src/xml_io.h: Added FILE_TYPE_ZIPPED_ASCII to FileType.

	* src/methods.cc: Add output_file_formatSetZippedAscii.

	* src/m_xml.h:

	Added output_file_formatSetZippedAscii. Merged the one-liner functions
	output_file_formatSet* from the cc file to the header file.

	* src/m_xml.cc: Removed. Functions moved to header file.

	* src/main.cc (main): Improve output of enabled features.

	* COPYING.LIB: Added. gzstream* is licensed under LGPL.

	* src/: Ignore libgzstream.a.

2007-11-14  Stefan Buehler  <sbuehler(at)ltu.se>

	* arts-1-1-1207-10

	* src/m_abs_lookup.cc (abs_lookupCreate): This works now also if
	no H2O species is present. But you can not use absorption continua
	in that case, since they depend on the H2O VMR. You'll get a
	runtime error if you try anyway.

	* src/m_abs.cc (abs_xsec_per_speciesAddConts): Improved error
	message when abs_h2o is not set.

2007-11-14  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-1-1207-9

	* src/m_abs_lookup.cc (abs_lookupSetup):

	Comment out unused parameters. Fix compilation with -Werror enabled.

2007-11-14  Stefan Buehler  <sbuehler(at)ltu.se>

	* arts-1-1-1207-8

	* includes/general.arts: Added some more things here, taken out of
	TestClearSky.arts. Cleanup of absorption has also allowed to set
	more defaults here. New defaults:
	- abs_n2 is set to 0.7808 (Wallace and Hobbs value).
	  Absorption routines now use this default, if no N2 profile is
  	  specified. 
	- abs_h2o is set to -1. Absorption routines tolerate this default
	  value, as long as the abs_h2o value is not really needed. The
	  place where it really is needed is when you want to add
	  continua. (And one special lineshape for the line spectrum, but
	  this is almost never used.) If you try to do something where
	  abs_h2o is needed, and it is still on its default value, a runtime
	  error is thrown.
	- abs_lineshape is set to VoigtKunz6, VVH normalization, and
	  cutoff at 750GHz. These are the most accurate settings. This is
	  used for all species, unless you specify something else.
	- abs_scalar_gas_agenda is set correctly for on-the-fly
	  absorption. I decided on this default, because end-to-end it is
	  slightly faster than lookup table absorption for 1D cases. You
	  should set it to abs_scalar_gasExtractFromLookup for 3D or batch
	  simulations.
	- r_geoidSpherical is called to define the geoid.
	- surface_prop_agenda is set to take surface_skin_t from the
	  lowest level of t_field.
	- ppath_step_agenda is set to ppath_stepGeometric{5e3}. Patrick,
	  is this good as a general setting?
	- iy_space_agenda is set to cosmic background.
	- rte_agenda is set to RteStd.
	- cloudboxOff{}	is called.
	
	* Absorption routines (m_abs.cc, absorption.cc, methods.cc,
	m_abs_lookup.cc, lineshapes.cc):
	- Added new method abs_lookupSetup, which prepares inputs for
	  abs_lookupCreate. Specifically, it sets abs_p, abs_t, abs_t_pert,
	  abs_vmrs, abs_nls, and abs_nls_pert. The idea is that you need
	  only this method and abs_lookupCreate to switch from on-the-fly
	  absorption to lookup table absorption. Works now for the 1D case
	  (where the lookup table is just a function of pressure). Still to
	  do is to make it work for 3D cases, and to add a similar method
	  for batch calculations. Usage is demonstrated in
	  TestClearSky.arts. 
	- Adapted absorption routines to default values for abs_n2 and
	  abs_h2o. The basic idea is that only when these are needed it is
	  checked if they are present. The scalar default value for N2 is
	  expanded to a profile if necessary.
	- Allow the lineshape settings to be a scalar, in which case they
	  are used for all species. This allows a global default
	  setting. Lineshape settings per species are still possible, of
	  course. abs_lineshapeDefine sets now a scalar value, and thus no
	  longer depends on abs_species.
	
	* tests/ClearSky/TestClearSky.arts: Renovated this test
	case. The file has become much shorter and cleaner, which was the
	idea of the include mechanism. Changes:	
	- Do parallel calculations on-the-fly and with lookup table.
	- Use new method *abs_lookupSetup* to set up the table.
	- Remove things that are now in general.arts.

	* tests/testall.py (TestClearSky): Adapted to new test
	case. Checked are the total radiance and the difference
	between on-the-fly and lookup table.

2007-11-12  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-1-1207-7

	* src/Makefile.am:

	Replace *_CFLAGS with *_CXXFLAGS to make the warning flags work again.

	* src/make_auto_md_h.cc (write_method_header_documentation),
	src/parser.cc:

	Fix warnings.

2007-11-06  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-1-1207-6

	* src/xml_io_private.h (xml_write_header_to_stream):

	Match function prototype to implementation.

2007-11-06  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-1-1207-5

	* src/parser.cc (parse_agenda):

	Add the ending .arts to the name of the include file if it wasn't
	found on the first try.

	* includes/general.arts:

	Include file containing widely used default settings like output
	format=ascii, atmosphere dimension=1, stokes dimension=1,
	emission=Planck, opt_prop_gas_agenda

	* includes/continua.arts:

	Include file with default continua settings. Included by general.arts.

	* includes/Makefile.am: Added.

	* includes: Set svn:ignore property.

	* configure.in: Added includes/Makefile to AC_OUTPUT.

	* Makefile.am: Added includes to SUBDIRS.

	* tests/testall.py:

	Add default include directory to searchpath in arts call.

	* tests/*/*.arts: 

	Remove stuff which is now initialized in general.arts and include it.

2007-11-05  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-1-1207-4

	* src/parser.cc: 

	(parse_main): Don't catch runtime_error, we hunt it down in main.cc.

	(parse_agenda): Give clear error when include file couldn't be found.

2007-11-05  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-1-1207-3

	* src/file.{cc,h}: Added function file_exists.

	* src/parameters.{cc,h}:

	Add command line option -I (--includepath) to specify a search path
	for include files.

	* src/parser.cc (parse_agenda):

	If include file does not exist in current path, search for it in all
	directories given in include path until first hit.

2007-11-05  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-1-1207-2

	* src/agenda_class.h (Agenda):

	Added access function Methods returning the agenda's method list.

	* src/parser.cc:

	(parse_method): Added argument include_file. Contains the include
	filename when the parser found an INCLUDE statement.

	(parse_agenda): If parse_method returns an include_file, call
	parse_main with the contents of this file and append everything to
	the tasklist.

2007-11-02  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-1-1207-1

	* Merged r5530 from trunk.

2007-11-01  Claudia Emde <claudia.emde@dlr.de>

	* arts-1-1-1207

	* src/methods.cc (doit_i_fieldSetClearsky): Included keyword  
	(all_frequencies) which allows to select between using the
	clearsky field always as initial field for DOIT calculations
	or using it only for the first frequency (and take the field from 
	the previous frequency for other frequencies). Default is the 
	first option (so all control files should run as before).
	The second option gives significant 
	speed improvement if the frequencies in f_grid are close. 

	* src/m_cloudbox.cc (doit_i_fieldSetClearsky): Included option 
	described above. 

	* src/m_scatrte.cc (doit_i_fieldIterate): Suppressed agenda output
	of convergence_test_agenda.

2007-11-01  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-1-1206-2

	* src/main.cc, src/methods.cc, src/m_agenda.cc, src/parser.cc,
	tests/Abs/TestAbs.arts, tests/ClearSky/TestClearSky.arts,
	tests/DISORT/TestDISORT.arts, tests/DOIT/TestDOIT.arts,
	tests/MonteCarlo/TestMonteCarloDataPrepare.arts,
	tests/MonteCarlo/TestMonteCarloGeneral.arts,
	tests/MonteCarlo/TestMonteCarloGeneralGaussian.arts,
	tests/MonteCarlo/TestMonteCarloSimple.arts,
	tests/MonteCarlo/TestMonteCarloWithIncomingLookup.arts:

	Renamed Main agenda to Arts.

2007-11-01  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-1-1206-1

	* Test commit in branch.

2007-11-01  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-1-1206

	* src/make_auto_md_h.cc (write_method_header_documentation):

	When the first character in the current line of the Description is a
	space, add a linebreak to the doxygen documentation. Improves the
	readability of input/output variable and keyword descriptions.

2007-11-01  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-1-1205

	* doc/uguide/Makefile.am: Added all missing .tex files to texfiles.

	* doc/uguide/agendas.tex:

	Added DEFAULTS to examples.

	Add item about defaults to the WSM definition documentation.

2007-10-31  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-1-1204

	* Inluded y_unit keyword in RteCalc functions. Only the option
	"1" is allowed when including jacobian calculations.
	
	* src/m_jacobian.cc: Hard-coded y_unit="1" in call of
	RteCalcNoJacobian.

	* src/m_rte.cc: Added handling of y_unit in  RteCalc,
	RteCalcNoJacobian and RteCalcMC.

	* src/rte.cc (rtecalc_check_input): Added check y_unit.

	(apply_y_unit): Function created to apply y_unit. 
	(apply_y_unit_single): Interface to apply_y_unit. Needed to handle
	RteCalcMC.

	* src/methods.cc: Added keyword argument y_unit to RteCalc,
	RteCalcNoJacobian and RteCalcMC.
	
2007-10-31  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-1-1203

	* src/make_auto_md_h.cc (write_method_header_documentation):

	Add keywords defaults to doxygen documentation.

	* src/methods.cc (VectorSetExplicitly): Add missing commas in example.

	* doc/doxygen/Doxyfile.in: Disable tree view. It's not really helpful.

2007-10-31  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-1-1202

	* src/methods_aux.cc (operator<<):

	Show keyword defaults in online help.

	* src/parser.cc (parse_method):

	Improved error messages:

	Also print the name of the WSM if a required keyword is missing.

	Put keywords in quotes and WSMs in *s.

	* src/methods.cc (Print, PrintWorkspace):

	Set default output level to 1.

2007-10-31  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-1-1201

	* src/parser.cc:

	Implemented parsing of defaults for keywords with type Vector.

2007-10-31  Stefan Buehler  <sbuehler(at)ltu.se>

	* arts-1-1-1200

	* src/m_batch.cc (ybatchCalc): Added keyword "robust", with
	default value 0. Value 1 means robust behavior, the same that
	ybatchCalcRobust used to have. (Batch execution continues if
	individual jobs fail.)

	* src/methods.cc: Removed ybatchCalcRobust, added robust keyword
	to ybatchCalc.

	* src/gas_abs_lookup.cc (GasAbsLookup::Adapt): No longer require
	that nonlinear_species are sorted, just require that they are
	unique.  

2007-10-30  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-1-1199

	* src/methods.cc: Added DEFAULTS to all methods.

	* src/methods.h, src/methods_aux.cc, src/parser.cc:

	Added support for keyword default values.

2007-10-30  Stefan Buehler  <sbuehler(at)ltu.se>

	* arts-1-1-1198

	* src/logic.cc (is_unique): This function did not work
	correctly. Fixed it.

	* src/m_abs_lookup.cc (abs_lookupCreate): More details in one
	error output. 

2007-10-30  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-1-1197

	* src/m_cloudbox.cc: Removed change from last commit as it
	resulted in erroneous results. My guess is that the same 
	incoming field is used for all frequencies. The idea was to keep
	the old internal field as first guess for next frequency, but the
	incoming field must be updated.

	I found this by setting pnd_field to zero. I then also noted that 
	doit_za_interp='polynomial' appears to work better than setting
	this variable to 'linear'. The difference between clear sky 
	calculations and DOOIT results with pnd_field=0 decreased with
	30-80% for the cases I tested when going from 'linear' to
	'polynomial'. These cases were all treating limb sounding. This
	choice is probably less critical for down-looking.

2007-10-30  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-1-1196

	* src/parser.cc (parse_method):

	Throw ParseError when the same keyword is set twice.

2007-10-29  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-1-1195

	* src/parser.cc:

	Modify the parser to accept keywords in any order.

2007-10-27  Claudia  <claudia.emde@dlr.de>

	* arts-1-1-1194

	* src/m_cloudbox.cc (doit_i_fieldSetClearsky): Included switch: Now 
	the initial field is by default only calculated for the first 
	frequency. For the next frequencies the solution fields of the 
	previous frequency respectively is used.
	This saves considerable CPU time. 

2007-10-26  Patrick Eriksson  <patrick.eriksson@chalmers.se>

        * arts-1-1-1193

	* src/workspace.cc: Added WSV arrayofarrayofgriddedfield3_1.
	Craziest WSV name so far?

	* At least reading of ArrayOfArrayOfGriddedField3 works (added in 
	last commit).

2007-10-26  Oliver Lemke  <olemke@core-dump.info>

        * arts-1-1-1192

	* src/gridded_fields.h: Added typedef for ArrayOfArrayOfGriddedField3.

	* src/groups.cc: Added ArrayOfArrayOfGriddedField3.

	* src/methods.cc, src/m_batch.cc:

	Added ArrayOfGriddedField3ExtractFromArrayOfArrayOfGriddedField3.

	Warning: !!! UNTESTED !!!

	* src/xml_io_array_types.{cc,h}:

	Added xml_read_from_stream and xml_write_to_stream for
	ArrayOfArrayOfGriddedField3.

	* src/xml_io_instantiation.h:

	Added xml_read_from_file and xml_write_to_file for
	ArrayOfArrayOfGriddedField3.

2007-10-23  Patrick Eriksson  <patrick.eriksson@chalmers.se>

        * arts-1-1-1191

	* src/methods.cc: Impoved description of ybatchCalc.

	* src/workspace.cc: Sorted ybatch_calc_agenda alphabetically.

2007-10-22  Oliver Lemke  <olemke@core-dump.info>

        * arts-1-1-1190

	* src/test_legendre.cc: Removed duplicate include.

	* src/test_sorting.cc:

	Take into account that this test needs POSIX functions.

2007-10-19  Oliver Lemke  <olemke@core-dump.info>

        * arts-1-1-1189

	* configure.in, src/m_general.{cc,h}, src/test_legendre.cc:

	Instead of checking for sys/times.h explicitly, check for
	_POSIX_VERSION as recommended in the autoconf docs.

	* src/math_funcs.{cc,h}:

	Comment out overloaded pow functions. They create problems under some
	circumstances. Compiling with floats as Numeric doesn't work anyway at
	the moment due to problems in ppath.cc and the better way to fix this
	is casting parameters passed to pow to Numeric when needed.

	* src/absorption.cc, src/m_sensor.cc, src/m_rte.cc:

	Cast constants which are passed to the pow function to Numeric.

2007-10-19  Oliver Lemke  <olemke@core-dump.info>

        * arts-1-1-1188

	* configure.in: Check if POSIX functions are available.
	
	* src/m_general.{cc,h}:

	Timers are only available if the build environment has POSIX support.

	* doc/uguide/Figs/Makefile.am:

	Loop over the list of figure directories and add the pdfs in each
	directory separately to EXTRA_DIST. With the */*.pdf wildcard I used
	before we end up with an extra directory called '*' in the
	distribution archive which is not what we want.

2007-10-11  Oliver Lemke  <olemke@core-dump.info>

        * arts-1-1-1187

	* configure.in, src/Makefile.am:

	Instead of adding WARNINGCFLAGS to CFLAGS in configure.in, do it in
	src/Makefile.am for each target. This way it is possible to deactivate
	some warnings for targets which require it (like code created with
	f2c).

	* configure.in: Print WARNINGCFLAGS.
	
	* src/Makefile.am:

	Create a noinst library libarts.a which contains everything except
	main.o. Instead of listing all source files again and again for all
	the more complex tests, just link them against libarts.a. (Reduces
	size of Makefile.am by 60%...)

	Strip -Werror from libdistort.a CFLAGS.

	Only define noinst_LIBRARIES once and add optional libraries when
	necessary.

	According to the automake docs, it is dangerous to overwrite target
	rules to change compilation flags. Instead, the recommended way is to
	build the affected object files as a separate noinst_LIBRARY and
	change the target CFLAGS there.
	See: http://www.gnu.org/software/automake/manual/html_node/Per_002dObject-Flags.html#Per_002dObject-Flags
	Did it this way for continua.cc to add the -fno-strict-aliasing
	option. Unfortunately this doesn't work for the other explicit targets
	we currently have (methods.o, species_data.o,
	partition_function_data.o, xml_io.o) because it can only be used to
	add additional CFLAGS, not modify existing ones.

	Add disort_DISORT.h to libarts_SOURCES.

	* src/: Ignore libarts.a, libdisort.a, libcontinua.a.

	* ./: Ignore compile.

	* TODO: Added a list of people which should be informed of a release.

2007-10-09  Stefan Buehler  <sbuehler_at_ltu.se>

        * arts-1-1-1186

	* src/methods.cc: Added the new method ybatchCalcRobust. This
	method does the same as ybatchCalc and has exactly the same 
	input and output parameters. 
	The difference is that the batch calculation continues even if
	individual jobs fail. In that case, a warning message is written to
	screen and file (out0 output stream), and ybatch for the failed job is
	set to -1. 
	ybatchCalcRobust and ybatchCalc share one implementation, which is
	called with different flags.
	It is planed to merge this again into a single method, if it is
	possible to make keywords optional. (In other words, if it is
	possible to have default values for keywords.)
	
	* src/m_batch.cc (ybatchCalc): Suppress agenda output for all jobs
	except the first.
	(ybatchCalcRobust): Added.

	* Replaced naked exit() commands by arts_exit() commands. Removed
	exit value 1 where it was present. It is not necessary, since
	arts_exit() without arguments does an exit(EXIT_FAILURE). 
	
	* Got rid of the exception "logic_error" completely. This was only
	used in very few places. Replaced either by runtime_error, or
	arts_exit(). 

2007-10-02  Oliver Lemke  <olemke@core-dump.info>

        * arts-1-1-1185

	* src/Makefile.am: Only execute source level tests in maintainer mode.

	* doc/uguide/Makefile.am: Also set BSTINPUTS to srcdir.

	* doc/doxygen/latex/Makefile.am: Remove spurious ).

	* doc/doxygen/html/Makefile.am:

	Move full filenames outside the wildcard function.

	* doc/uguide/Figs/*/Makefile.am: Really remove these...

2007-10-02  Oliver Lemke  <olemke@core-dump.info>

        * arts-1-1-1184

	* doc/uguide/*.tex:

	Remove directory prefixes from all figure names.

	Instead set the graphicspath in every file to Figs/SUBDIRECTORY. Where
	SUBDIRECTORY is equal to the tex filename.

	* doc/uguide/uguide.tex:

	Remove graphicspath. It is now set in every tex file separately to the
	corresponding figure subdirectory. This way all figures from one
	chapter of the user guide are grouped together.

	* doc/uguide/Makefile.am:

	Remove the pdf when errors where encountered while building the user
	guide. Because latex otherwise leaves the pdf file behind a following
	'make' will not build the uguide again.


	* doc/uguide/Figs/*/Makefile.am: Removed.

	* doc/uguige/Figs/Makefile.am:

	Removed SUBDIRS.

	Added */*.pdf to EXTRA_DIST.

	* doc/uguide/Figs/clouds/: Added.

	* configure.in: Remove all Figs/*/Makefile.

2007-10-02  Oliver Lemke  <olemke@core-dump.info>

        * arts-1-1-1183

	* src/abs_species_tags.cc:

	Replaced \begin{verbatim} with \verbatim in doxygen docs.

	* src/absorption.h:

	Use <tt></tt> instead of \texttt{} in doxygen docs.

	Use <ul><li></li></ul> instead of \begin{enumerate}...
	Doxygen cannot handle the latex macros but will translate the html
	tags properly to latex.

	* src/Makefile.am:

	Added auto_wsv.txt to CLEANFILES.

	* doc/doxygen/Makefile.am:

	Re-add copying of arts-splash.gif with proper srcdir.

	Add arts.tag to MAINTAINERCLEANFILES.

	* doc/doxygen/html/Makefile.am:

	Add arts-splash to _DATA.

	Add *.md5 and *.map to MAINTAINERCLEANFILES.

	* doc/doxygen/html/Makefile.am:

	Add *.md5 and *.ttf to MAINTAINERCLEANFILES.

2007-09-28  Oliver Lemke  <olemke@core-dump.info>

        * arts-1-1-1182

	* Fix 'make distcheck' (almost). Only problem left is the tests/
	directory which has to be fixed to not create output in the source
	tree when a separate builddir is used.

	* src/Makefile.am:

	'make distcheck' failed because it builds outside the src directory.
	The explicit rules we have for some targets didn't support that. Fixed.

	* aii/Makefile.am:

	Using plain wildcards (like *) to fill a variable with a list of files
	breaks when building outside the source tree. We have to use make's
	own $(wildcard *) function to expand filenames with taking the builddir
	into account.

	* doc/doxygen/Makefile.am:

	Remove copying of arts-splash.gif, which we don't have anymore.

	Use the wildcard function.

	* doc/uguide/Makefile.am:

	Remove unused variable autotextfiles.

	Add $(srcdir) to TEXINPUTS and BIBINPUTS to be able to create
	uguide.pdf from a separate builddir.

	Use the wildcard function.

	* doc/uguide/{clouds,rte_theory,scattering}.tex:

	Temporary fix for figure paths. Real cleanup will follow.

	* doc/reference/Makefile.am:

	Add $(srcdir) to TEXINPUTS to be able to create references.pdf from a
	separate builddir.

	Call arts_*.sh scripts in $(srcdir).

	Use the wildcard function.

	* src/Makefile.am:

	Pass srcdir to tests and add DEFAULT_INCLUDES to COMPILE variable.

	* src/check-code-header-consistency.sh:

	Look for headers in $SRCDIR.

	* tests/Makefile.am:

	Add support for running the tests from outside the source tree.

	Use the wildcard function for CLEANFILES.

	* test/testall.py:

	Add support for running the tests from outside the source tree.

	* src/main.cc (main):

	Also catch ios_base::failure when trying to open the report file.
	Missing write permissions don't throw a runtime_error but an
	ios_base::failure.

	* src/check-code-header-consistency.sh:

	Trap exit signals and remove test_include.cc on exit.
	Rationale: Doxygen generation depends on _all_ source files and will
	always rebuild if test_include.cc is updated by the test script.

	* src/: Ignore check-code-header-consistency.log.

2007-09-26  Oliver Lemke  <olemke@core-dump.info>

        * arts-1-1-1181

	* docs/uguide/{concept,scattering}.tex:

	Fix for changed test controlfile names.

	* docs/uguide/ppath.tex:

	MatrixSetTakingSizeFromMatrix no longer exists. Replaced example
	accordingly.

	* docs/uguide/introduction.tex:

	Replaces docs/examples with tests/.

	* docs/uguide/development.tex:

	Rewrote section 'How to add an example file'. Now called 'How to add
	a test case'.

	Updated CVS to SVN.

	Revised section 'How to move your arts working directory'.

	* tests/: Updated ignore properties.

2007-09-26  Oliver Lemke  <olemke@core-dump.info>

        * arts-1-1-1180

	* configure.in: Removed tests/data/Makefile from AC_OUTPUT.

2007-09-25  Oliver Lemke  <olemke@core-dump.info>

        * arts-1-1-1179

	* tests/Makefile.am:

	Restructured the tests so that every test has its own directory. All
	files required by a test should be available in that subdirectory.
	A test directory can contain more than one test if they're closely
	related (see tests/MonteCarlo).
	The advantage of having self-contained test directories is that the
	user can just copy one of the directories and use it as a starting
	point for his own calculations (having all necessary input files
	available without collecting them from other directories).

	Convention for naming the tests is to have the testnames all start
	with 'Test', followed by the name of the subdirectory they're in.
	If there's more than one test in the subdirectory append a
	descriptive text to the end of the testname. The controlfiles should
	have the same name as the test + .arts.

	Example for the MonteCarlo case: 

	Test directory:              tests/MonteCarlo

	Tests (named in testall.py): TestMonteCarloDataPrepare
	                             TestMonteCarloGeneral
	                             TestMonteCarloGeneralGaussian

	Corresponding controlfiles:

	tests/MonteCarlo/TestMonteCarloDataPrepare.arts
	tests/MonteCarlo/TestMonteCarloGeneral.arts
	tests/MonteCarlo/TestMonteCarloGeneralGaussian.arts
	
	All tests have to be added to the "check" target in tests/Makefile.am
	and the directories to TESTDIRS in the same Makefile.am.
	Dependencies between tests can also be specified in there.

	Tests can now run in parallel by default. E.g. if you have a computer
	with 4 CPUs run: make -j4 check
	To avoid cluttering when running tests in parallel, all output is
	written to log files (TESTNAME.log).
	
	* tests/testall.py:

	Added the ability to run controlfiles from subdirectories.

	Removed numbering from tests and give them clear names. 

	* tests/data/, tests/*.arts: Removed.

	* tests/{Abs,ClearSky,DISORT,DOIT,MonteCarlo}/: Added.

2007-09-19  Mattias Ekstrom  <mattias.ekstrom@chalmers.se>

        * arts-1-1-1178

        * src/methods.cc: In declaration of sensor_responseMultiMixerBackend
        the WSV sensor_response_pol is moved from input to output.

        * src/m_sensor.cc: In sensor_responseMultiMixerBackend the WSV
        sensor_response_pol is now updated.
        The numbers of polarisations is in this method coupled to the numbers
	of backends and mixers, therefore the number of polarisations should
	not be multiplied with the number of backend frequencies when
	calculating the size of the sensor response.
	To accomodate this the sensor_response_pol is set to 1 by this WSM.

2007-09-19  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-1-1177

	* src/m_rte.cc (RteCalc): Now using rtecalc_check_input.

	RteCalcMC: New WSM. A shell around MCGeneral, allowing multiple
	MC calculations in a single run.

	* src/methods.cc: Commented out ScatteringMonteCarlo and
	MCSetIncomingEmpty.  This as ScatteringMonteCarlo has been found
	not to work anymore (after changes of agenda). Discussed in email
	exchange between Bengt and Cory.

	mc_errorApplySensor: Removed. This is now done as part of RteCalcMC.

	RteCalcMC: Added.
 
	* src/workspace.cc: Commented out mc_incoming. Corrected description of
	mc_error.

	* src/rte.cc (rtecalc_check_input): Moved most check of input in
	RteCalc to this function.

2007-09-05  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-1-1176

	* src/workspace.cc: Fix documentation for xml_output_type.

2007-08-27  Stefan Buehler  <sbuehler@irv.se>

	* arts-1-1-1175

	* ATTENTION: You have to modify your controlfile to run with this
	ARTS version: Change 
	"abs_speciesSet{...}" to
	"SpeciesSet(abs_species){...}".

	* Quite big changes in absorption part:

	* The Lookup table should be fully functional now, including
	cross-dependence of oxygen absorption on H2O. (This was achieved
	by redefining the meaning of nonlinear species. Now it means that
	H2O VMR is varied for these species, not the VMR of the species
	itself. This is less general than what we had originally in mind,
	but covers all relevant cases in the Earth's atmosphere, I believe.)

	* Rewritten code to use physical cross-sections instead of
	pseudo cross-sections (see below).
	
	* Workspace method changes:
	
	* abs_coefCalcFromXsec: Adapted to xsec beeing real cross-sections
	in units of m^2. (Absorption alpha is xsec*n*VMR.)

	* abs_lookupCreate: Changed definition of nonlinear species. It
	now means that cross sections are stored for different H2O VMR
	values. (The perturbing gas is always H2O, not the nonlinear
	species itself.) This is the case that we need in practice. 
	The method no longer uses abs_h2o as input, since this is set
	internally. 
	The species list has to contain H2O, otherwise an error is
	thrown. (In principle one could do without H2O, but then only
	without nonlinear species. And then we would need the reference
	H2O profile again, which causes a mess.)

	* abs_nlsSet: Removed, this functionality is now provided by the
	generic method SpeciesSet.

	* abs_speciesSet: Renamed to SpeciesSet.

	* SpeciesSet: Sets any variable of type ArrayOfArrayOfSpeciesTag,
	can be used instead of the old abs_nlsSet and abs_speciesSet.

	* abs_xsec_per_speciesAddConts: Adapted to using real cross
	sections (see above).

	* Workspace variable changes:

	* abs_nls: Now is an ArrayOfArrayOfSpeciesTag, no longer an
	ArrayOfIndex. 

	* abs_nls_pert: Fixed online documentation.
	
	* abs_t_pert: Fixed online documentation.

	* abs_xsec_per_species: Now contains real absorption
	cross-sections (see above). Also fixed online documentation.
	
	* File changes:
	
	* src/abs_species_tags.cc (get_tagindex_for_Strings): Now uses
	SpeciesSet instead of abs_speciesSet.

	* src/absorption.cc (xsec_species): Now uses real absorption
	cross-sections (see above).

	* src/continua.cc (xsec_continuum_tag): Adapted to use real
	absorption cross-sections (see above). ATTENTION: Coninuum
	functions internally still use the old pseudo-crosssections (now
	renamed to pxsec), because it would have been too much mess to go
	through all functions.

	* src/gas_abs_lookup.cc (Extract): The varied species is now always
	H2O. 

	* src/gas_abs_lookup.h: Kicked out the member *affected_species*,
	which is no longer needed. (This was never really used, but I
	planned to use it when I put it in.)

	* src/logic.cc (is_unique): Added.

	* src/logic.h (is_unique): Added.

	* src/m_abs.cc (abs_coefCalc): Adapted to use real
	absorption cross-sections (see above). 
	(abs_coefCalcSaveMemory): Ditto.
	(abs_coefCalcFromXsec): Ditto.

	* src/m_abs_lookup.cc (abs_lookupCreate): Adapted to use real
	absorption cross-sections (see above). The varied species is now
	always H2O.
	(SpeciesSet): Is now generic, used to be called abs_speciesSet.

	* src/physics_funcs.cc (number_density): Changed assert to ensure
	that T>0 (used to be T>=0), because T is in the denominator.

	* src/xml_io_compound_types.cc (xml_write_to_stream): Changed
	"NonLinear..." to "Nonlinear..." in output tag, to be consistent with
	internal variable name "nonlinear_...".

	* tests/: Replaced "abs_speciesSet{...}" by
	"SpeciesSet(abs_species){...}" in all control files.

2007-08-17  Mattias Ekstrom  <mattias.ekstrom@chalmers.se>

	* arts-1-1-1174

	* src/sensor.{cc,h}: Fixed some bugs in multi_mixer_matrix and 
	changed it so that polarisation states, lo- and backend frequencies
	are now coupled. These of course decreased the number of iterations
	and also give a more compact output.
	The backend channel response is given in a single Matrix, instead
	of and ArrayOfMatrix as for the individual Backend method.

	* src/m_sensor.cc: Changed the input from ArrayOfMatrix to Matrix
	for the channel backend response, and modified some of the tests
	to account for the coupling of polarisation, lo- and backend
	frequencies.

	* src/methods.cc: Changed the declaration of the input and the 
	description of the method.

	* doc/uguide/sensor.tex: Added reference to the sensor modelling
	paper in Internat. J. of Remote Sensing. Fixed some FIXMEs and 
	rewrote the multi-mixer section.

	* doc/uguide/references.bib: Added entry for the sensor response
	paper; eriksson:06.

2007-08-10  Mathias Milz  <mathias.milz@ltu.se>

	*  arts-1-1-1173

	* src/workspace.cc

	Added workspace variable 'index_1' as general placeholder for 
	variables of type index
	

2007-08-02  Oliver Lemke  <olemke@core-dump.info> 

	* arts-1-1-1172

	* src/Makefile.am, src/check-code-header-consistency.sh:

	Added test to check if header files are self-contained. This means
	that a header file itself should include every other header file it
	depends on. E.g. if a header file uses a Tensor3, it must
	include at least matpackIII.h.

	* src/check-code-tab-indent.sh:

	Change shell from bash to sh to increase compatibility with non-GNU
	systems.

	* src/xml_io_instantiation.h, src/optproperties.h, src/continua.h,
	src/m_copy.h, src/iotraits.h, src/disort.h, src/sstream.h, src/rte.h,
	src/montecarlo.h, src/xml_io_array_types.h, src/m_basic_types.h,
	src/geomag_calc.h, src/xml_io_private.h, src/check-code-tab-indent.sh,
	src/check_input.h, src/refraction.h, src/m_ignore.h,
	src/xml_io_basic_types.h, src/fastem.h, src/gridded_fields.h,
	src/scatrte.h, src/geomag_calc.cc, src/gridded_fields.cc:

	Cleanup includes.

2007-08-02  Stefan Buehler  <sbuehler@irv.se>

	* arts-1-1-1171

	* Reorganized the way constant species fields can be added. Now
	you have to add it to atm_fields_compact. This way is safer, since
	species names are checked when the compact fields are broken up.
	
	* src/methods.cc: Added: atm_fields_compactAddConstant.
	Removed: vmr_fieldAddConstantSpecies

	* src/m_atmosphere.cc (AtmFieldsFromCompact): Added checks on
	field names.
	(atm_fields_compactAddConstant): Added.
	(vmr_fieldAddConstantSpecies): Removed.

2007-08-02  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-1-1170

	* src/getopt.{c,h}, src/m_general.h: Fix compilation on MacOS X Tiger.

2007-08-01  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-1-1169

	* src/methods.cc, src/continua.{cc,h}: Remove tabs......

2007-08-01  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-1-1168

	* src/binio.{cc,h}: Cherry-pick some changes from libbinio 1.4.

2007-07-31  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-1-1167

	* configure.in: 

	Bail out with an error if disort is explicitly enabled but f2c.h
	cannot be found.

2007-07-31  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-1-1166

	* ChangeLog: DOH! Fixed another typo.

2007-07-31  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-1-1165

	* configure.in:

	Do not enable disort part by default. The f2c code is messy and might
	generate warnings which break the compilation. It can be enabled by
	passing --enable-disort to configure/autogen.sh.

	* doc/doxygen/Doxyfile.in:
	
	Comment out REFERENCES_LINK_SOURCE and CALLER_GRAPH to further improve
	doxygen backwards compatibility (at least 1.4.6 maybe also older
	version).

	* ChangeLog: Fix typo in last commit message.

2007-07-31  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-1-1164

	* doc/doxygen/Doxyfile.in:

	Comment out DOXYFILE_ENCODING, CPP_CLI_SUPPORT, INPUT_ENCODING,
	EXCLUDE_SYMBOLS, MSCGEN_PATH and DOT_GRAPH_MAX_NODES for better
	compatibility with older doxygen versions.

2007-07-31  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-1-1163

	* src/make_auto_md_h.cc:

	Generate prototypes for supergeneric template functions including the
	doxygen documentation.

	* src/absorption.h, src/wsv_aux.h, src/xml_io_private.h,
	src/make_auto_md_h.cc, src/matpack{I,III,IV,V,VI,VII}.{cc,h},
	src/make_array.h, src/bifstream.{cc,h}, src/binio.{cc,h},
	src/bofstream.{cc,h}, src/optproperties.{cc,h}, src/poly_roots.{cc,h},
	src/mc_antenna.{cc,h}, src/mc_interp.{cc,h}, src/m_xml.{cc,h},
	src/gridded_fields.{cc,h}, src/complex.{cc,h},
	src/gas_abs_lookup.{cc,h}, src/xml_io_compound_types.cc,
	src/xml_io_basic_types.cc, src/xml_io_array_types.cc,
	src/xml_io.cc, src/test_readpp.cc, src/test_integration.cc,
	src/make_auto_wsv_h.cc, src/make_auto_md_cc.cc, src/m_disort.cc,
	src/agenda_class.cc, src/agenda_record.cc:

	Move the &-sign for references beside the type instead of the
	variable name for consistency.

	* src/m_general.{cc,h}:

	Pass keyword parameters as reference.

2007-07-30  Stefan Buehler  <sbuehler@irv.se>

	* arts-1-1-1162

	* src/workspace.cc: Added matrix_2.

	* src/methods.cc: Added MatrixMatrixMultiply and
	VectorMatrixMultiply from arts-1-0.

	* src/m_basic_types.cc: Added MatrixMatrixMultiply and
	VectorMatrixMultiply from arts-1-0.

	* doc/uguide/batch.tex: Fixed bug that I had introduced.

2007-07-26  Stefan Buehler  <sbuehler@irv.se>

	* arts-1-1-1161

	* Working on AMSU batch calculations.

	* src/workspace.cc: Added new variables	atm_fields_compact.

	* src/methods.cc: Added new methods:
	atm_fields_compactFromMatrix,
	AtmFieldsFromCompact,
	IndexSetFromArrayOfMatrixLength,
	MatrixExtractFromArrayOfMatrix,
	vmr_fieldAddConstantSpecies.
	
	Modified VectorExtractFromMatrix to allow selection between row
	and column extraction.

	* src/m_batch.cc (MatrixExtractFromArrayOfMatrix): Added this method.
	(VectorExtractFromMatrix): Added keyword to control if row or
	column is extracted. 

	* src/m_basic_types.cc (IndexSetFromArrayOfMatrixLength): Added this method.

	* src/m_atmosphere.cc (atm_fields_compactFromMatrix): Added this method.
	(AtmFieldsFromCompact): Added this method.
	(vmr_fieldAddConstantSpecies): Added this method.

	* src/gridded_fields.cc: Added GriddedField4, which can be used to
	store several atmospheric fields on the same grid.

	* src/xml_io*: Added GriddedField4.

	* src/gridded_fields.cc: Added GriddedField4.

	* src/groups.cc: Added GriddedField4.

	* src/gas_abs_lookup.cc (Adapt): Fixed bug for non-linear species.

	* doc/uguide/batch.tex: Fixed some minor copy-editing issues.

2007-07-25  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-1-1160

	* src/make_auto_md_h.cc:

	Add workspace variable names to function header to match the doxygen
	\param tags. Use generic names for generic input/output.

	* src/methods.cc: Cosmetics.

2007-07-25  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-1-1159

	* src/make_auto_md_h.cc:

	Add authors to doxygen header.

2007-07-25  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-1-1158

	* src/main.cc, src/arts.cc, src/test_mpi.cc, src/arts_mpi.{cc,h}:

	Remove MPI cruft.

2007-07-25  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-1-1157

	* doc/doxygen/Doxyfile.in:

	Don't use a custom stylesheet. The default one looks _much_ better
	than our own.

2007-07-25  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-1-1156

	* src/make_auto_md_h.cc (md_sanity_checks),
	src/make_auto_wsv_h.cc (wsv_sanity_checks):

	For WSMs check if a valid author is given in the documentation.

	For WSMs and WSVs make sure there is exactly one newline character at
	the end of the description and it is not empty.

	* src/file.{cc,h} (check_newline):

	Added function that checks whether a string has exactly one newline
	character at the end and does not only consist of whitespaces.

	* src/methods.cc: Fixed one misplaced \n.

2007-07-25  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-1-1155

	* src/methods.cc, src/m_batch.cc:

	Completed doxygen WSM cleanup. See arts-1-1-1151 for details.

	* src/methods.cc:

	s/Ekstr�m/Ekstrom/ and s/H�fner/Hoefner/ to avoid encoding problems.

2007-07-25  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-1-1154

	* src/methods.cc, src/m_atmosphere, src/m_optproperties.cc,
	src/m_physics.cc, src/m_refraction.cc, src/m_rte.cc,
	src/m_scatrte.cc, src/m_sensor.cc, src/m_xml.cc, src/m_xml.h:

	Continued doxygen WSM cleanup. See arts-1-1-1151 for details.

	* src/m_optproperties.cc:

	Commented out WSMs ext_matAddGasZeeman and abs_vecAddGasZeeman.
	They were already commented out in methods.cc, so there's no need
	to compile them.

	* src/m_cloudbox.cc: Removed FIXME.

	* src/methods.cc:

	Removed commented out description of doit_i_fieldUpdate3D. It doesn't
	exist anywhere else in the code.

	Fill in unknown WSM authors by using 'svn blame'.

2007-07-24  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-1-1153

	* src/methods.cc, src/m_cloudbox.cc, src/m_copy.h, src/m_general.cc,
	src/m_montecarlo.cc, src/m_disort.cc, src/m_general.h,
	src/m_jacobian.cc, src/m_ignore.h:

	Continued doxygen WSM cleanup. See arts-1-1-1151 for details.

	* src/methods.cc, src/workspace.cc:

	Make sure that (hopefully) every description has a newline at the end
	but no extra empty line.

2007-07-24  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-1-1152

	* src/methods.cc, src/m_atmosphere.cc, src/m_agenda.cc,
	src/m_basic_types.cc, src/m_abs_lookup.cc:

	Continued doxygen WSM cleanup. See arts-1-1-1151 for details.

	* src/m_basic_types.cc: Removed dead function VectorCopy.

2007-07-24  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-1-1151

	* src/methods.cc, src/m_abs.cc, src/m_ppath.cc:

	Started cleaning up the doxygen documentation for workspace methods.

	This includes:
	 1) Merging the current doxygen documentation into the WSM
	 documentation in methods.cc.
	 2) Add the author information to methods.cc.
	 3) Replacing the doxygen header with a comment in the cc file.

	If there is any additional documentation (implementation details) for
	the WSM in the current doxygen documentation it will be left in the
	cc-file as a non-doxygen comment.

	* doc/doxygen/Doxyfile.in:

	Updated. Removed MAX_DOT_GRAPH_WIDTH and MAX_DOT_GRAPH_HEIGHT. Those
	are not supported anymore with newer doxygen version and prevent the
	graphics from being built. Hope it doesn't break with older versions
	now.

2007-07-23  Stefan Buehler  <sbuehler@irv.se>

	* arts-1-1-1150

	* src/workspace.cc (define_wsv_data): Removed WSV abs_vmr, which
	was not really used. (The correct variable is abs_vmrs, note the s
	at the end.)

2007-07-06  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-1-1149

	* src/make_auto_md_h.cc (write_method_header_documentation):

	Added function to generate doxygen documentation automatically for
	workspace methods.

	* src/methods.h, src/methods_aux.cc:

	Added a list of authors to MdRecord.

	* src/methods.cc: Added AUTHORS() macro to all workspace methods.

2007-07-03  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-1-1148

	* src/methods.cc:

	Sort the methods I added some time ago alphabetically.
	Minor indentation fixes.

2007-06-19  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-1-1147

	* Fixes to be able to compile with -Werror again.
	
	* Tested compilation with gcc 4.1 and 3.3. If it doesn't compile for
	you please let me know your compiler version and the compiler output.

	* src/m_xml.cc: Fix runaway comment introduced in last commit.

	* src/configure.in: Reenable -Werror.

	* src/m_disort.cc:

	Avoid warnings when arts is compiled without disort support.

	* configure.in:

	Add variable with CXX flags to deactivate strict aliasing.

	* src/Makefile.am:

	Add specific target for continua.cc and use the no-strict-aliasing
	flag to avoid compile warnings. Not nice, but the f2c code is
	"unfixable".

	* src/montecarlo.cc:

	Initialize lstep, rv_geoid, rv_surface. The compiler misdetects
	uninitialized use of these variables and throws a warning.

	* src/ppath.cc: Replace the deprecated >? operator with the max
	function from the C++ library.

	* src/xml_io_array_types.cc: Comment out unused function parameters.

2007-06-19  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-1-1146

	* Copyright spring cleaning.

	* configure.in, AUTHORS, NEWS, src/*.{cc,h,pl}, src/Makefile.am,
	doc/uguide/main.tex, doc/reference/main.tex:
	
	Update all copyright headers for 2007.

	Change my email address.

	Change Claudia's email address.

	Change Stefan's email address.

2007-06-18  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-1-1145

	* tests/testall.py: Change target value of ClearSkyTest from 276.50 K
	to 276.532 K. The extrapolation with the new abs lookup table is more
	exact than the old one.

2007-06-18  Stefan Buehler  <sbuehler@irv.se>

	* arts-1-1-1144

	* src/gas_abs_lookup.h: Added private member affected_species to
	GasAbsLookup. This is not yet used for anything right now.

2007-06-18  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-1-1143

	* doc/uguide/batch.tex: Update for changes in the batch code.

	* src/methods.cc: Update docs for ybatchCalc.

	* src/m_batch.cc: Remove one line of old unused code.

2007-06-18  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-1-1142

	* src/methods.cc, src/m_batch.cc, src/agendas.cc, src/workspace.cc:

	Rename BatchUpdate... to TypeExtractFromType and add the index to be
	extracted as a GInput.

	Merge batch_update_agenda and batch_calc_agenda and rename it to
	ybatch_calc_agenda. batch_u and batch_c were anyway called directly
	after one another, so everything done in batch_u can also be put in
	batch_c.

	Remove batch_post_agenda. No need to have the post-processing in an
	agenda. Post-process methods can be called directly in the control
	file after running ybatchCalc.

2007-06-01  Stefan Buehler  <sbuehler@irv.se>

	* arts-1-1-1141

	* Absorption handling is implemented and should be working, but
	was so far not tested very carefully. Please use, and test, if you
	want. But do not trust the results blindly.
	
	* New methods added:
	abs_lookupCreate: Create absorption lookup table.

	AbsInputFromRteScalars,
	abs_scalar_gasFromAbsCoef: These two can be used to put an
	explicit line-by-line calculation, using absCalc, in the place of
	a lookup table extraction. Handy for lookup table verification.

	abs_nlsSet: Set list of species for nonlinear treatment.

	VectorInsertGridPoints: General funtion to insert some additional
	points into a grid.

	* Methods modified:
	abs_scalar_gasExtractFromLookup: Now handles nonlinear species. 

	* New workspace variables:
	These are all input to abs_lookupCreate:
	abs_nls:      List of nonlinear species.
	abs_nls_pert: VMR perturbation vector for nls.
	abs_t_pert:   Temperature perturbation vector.

	* Recommended settings: Use T grid spacing of 10 K and abs_nls_pert
	spacing of 1, with 200 pressure grid points for the entire
	atmosphere up to 80 km. Select nonlinear treatment for all species
	with large VMR, that is H2O, O2, N2O. According to first tests,
	these setting should give absorption relative errors below 1%. The
	pressure grid is the most critical one and should not be too
	coarse. The T and VMR interpolations are very well-behaved.

	* Still to do: Further testing. Complete online documentation. Write
	up testing results for small paper. Update absorption section in
	ARTS User Guide.

2007-05-24  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-1-1140

	* doc/uguide/main.tex, doc/reference/main.tex,
	doc/reference/reference.tex, doc/uguide/development.tex:

	Update Stefan's and my post and mail addresses. Replaced @ with (at).

2007-05-22  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-1-1139

	* src/methods.cc, src/m_general.{cc,h}:

	Added new method PrintWorkspace. Lists all initialized WSVs.

	* src/workspace_ng.{cc,h}:

	Add a new flag "initialized" to the WsvStruct. Just using the NULL
	pointer to determine whether a WSV is initialized is not possible for
	agenda outputs.

	Added new function push_uninitialized. This puts a variable onto the
	WSV's stack but flags it as uninitialized. Used for agenda output-only
	variables.

	Rename function is_occupied to is_initialized.

	Fix serious bug in the WSV duplication code. All WSVs that had to be
	duplicated in an agenda call were treated as initialized. Even if they
	didn't exist on the top level.

	Now a duplicate is only created if the WSV already exists, otherwise a
	NULL pointer is put on the next stack level.

	Added function nelem to retrieve the number of WSVs in the workspace.

	* src/make_auto_md_cc.cc:

	Use Workspace::push_uninitialized for all agenda output-only
	variables.

	* src/agendas.cc: Added iy to rte_agenda inputs.

	* src/agenda_class.cc:

	Fix another bug. Some cases were missed in which WSVs needed to be
	duplicated.

	* src/wsv_aux.h (PrintWsvName):

	Also print the WSV index. Helpful for debugging.

	* src/make_auto_md_cc.cc:

	Use workspace.push_uninitialized for agenda output-only variables.

2007-05-18  Stefan Buehler  <sbuehler@irv.se>

	* arts-1-1-1138

	* src/m_abs_lookup.cc (abs_lookupCreate): Created first draft of
	this method. There are still some things to fix, please do not use
	yet. Will continue this on Monday. 

	* src/check_input.cc (chk_if_increasing): Added this function for
	ArrayOfIndex. 

	* src/logic.cc (is_increasing): Added this function for ArrayOfIndex.

	* Small changes in various other files for abs_lookup
	implementation. 

2007-05-16  Stefan Buehler  <sbuehler@irv.se>

	* arts-1-1-1137

	* src/m_abs_lookup.cc: Working on abs_lookupCreate.

2007-05-16  Stefan Buehler  <sbuehler@uni-bremen.de>

	* arts-1-1-1136

	* Still working on absorption part. Purpose of this commit is to
	get my working copy of the laptop.

2007-05-08  Stefan Buehler  <sbuehler@uni-bremen.de>

	* arts-1-1-1135

	* Playing with the absorption lookup table, small changes in
	various files.
	
	* src/m_abs_lookup.cc (abs_lookupCreate): Playing with this
	method. Still very far from complete.

	* src/agendas.cc (define_agenda_data): Put abs_scalar_gas_agenda
	in its right alphabetical place.

2007-05-07  Stefan Buehler  <sbuehler@uni-bremen.de>

	* arts-1-1-1134

	* src/m_abs.cc (AbsInputFromAtmFields): Added safety check that we
	really have a 1D atmosphere (atmosphere_dim==1).

2007-03-29  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-1-1133

	* src/m_atmosphere.cc, src/montecarlo.cc, src/ppath.cc:

	Fix calls to chk_if_in_range. If x is Numeric, also pass x_low and
	x_high as floats, not integers. Fixes compilation with
	--with-index-type=int.

2007-03-23  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-1-1132

	* src/xml_io.cc (xml_data_parse_error):

	Remind the user that parsing errors can result from NaN or Inf values
	in the xml file.

	For now enough to fix ticket #1.

2007-01-15  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-1-1131

	* src/absorption.cc: Add additional eof checks after calling getline
	in several places.

	Note: Remember that the eof() function only evaluates to true if one
	tried to read beyond the file end. It is still false if the file
	pointer is pointing directly at the end of the file.

2006-11-17  Patrick Eriksson  <patrick.eriksson@chalmers.se>

	* arts-1-1-1130

	* src/ppath.cc (interpolate_raytracing_points): Included bug fix by
	Mattias Ekstr�m. It is now ensured that n >= 2. Numerical problems
	apprearently gave negative distances, resulting in n=1.

	This happened in very few cases, but the bug fic could hopefully
	remove some of the problems found when e.g. running MC.
	
2006-09-27  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-1-1129

	* tests/Makefile.am:

	Added a check-parallel target so the testing framework can benefit
	from multiple processor systems.
	E.g. 'make -j4 check-parallel' to run on 4 processors.
	To keep the output readable (as it might mix on parallel systems), it
	is written to a log file for each test.

	TODO: Refurbish/shorten the target rules.

	* test/.cvsignore: Ignore log files.

2006-09-25  Patrick Eriksson  <Patrick.Eriksson@rss.chalmers.se>

	* arts-1-1-1128

	* src/sensor.cc (antenna_matrix): Improved checks to avoid that
	the same calculations are repeated. Basically replaced e.g. p with
	p_this for checks. Some temporary output is left for debugging 
	purposes.

2006-09-14  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-1-1127

	* src/bofstream.cc:

	(operator<<): Fixed bug for writing integer types.

	The bug prevented variables of type Index to be stored in xml binary
	files. The nasty part is that you didn't get any error when reading
	such a broken file. The Index value was just set to zero.

	(putByte): Throw exceptions on errors.

	* src/bifstream.cc:

	(operator>>): Fixed bug for reading integer types.

	(getByte): Throw exception on error.

	* src/binio.cc (binostream::writeInt, binistream::readInt):

	Throw exceptions when the integer type for the binary file format is
	not supported by the current system.

2006-09-06  Patrick Eriksson  <Patrick.Eriksson@rss.chalmers.se>

	* arts-1-1-1126

	* src/m_sensor.cc (sensorOff): Removed sensor_norm and sensor_rot
	from argument list.

	* src/methods.cc: Corrected and improved text for sensorOff and
	sensor_responseInit.

2006-09-04  Patrick Eriksson  <Patrick.Eriksson@rss.chalmers.se>

	* arts-1-1-1125

	* This was an attempt to clean up the Jacobian part. Partly
	succesful but I also realised that particle jacobians and batch
	calculations do not longer work, after introduction of new agenda
	scheme. The "open scope" was used for these parts. 
	There will be an error if you try to use any of the bad parts.
	
	* src/m_jacobian.cc (jacobianAddPointing): Included check that 
	poly_order is not too large compared to length of *sensor_time*.

	Removed all other output from jacobianCalcXxx methods than jacobian.
	This is more logical, helps to avoid side effects and reduces copying
	of data.

	(jacobianAddTemperature): Results in an error as temperature not
	yet handled correctly.

	(jacobianAddParticle): Error also here as present implementation does
	not work.
	
	* src/agendas.cc: Added pnd_field as input to 
	jacobian_particle_update_agenda, which made be realise that 
	jacobianCalcParticle is not working now.

2006-08-31  Patrick Eriksson  <Patrick.Eriksson@rss.chalmers.se>

	* arts-1-1-1124

	* src/m_jacobian.cc,m_rte.cc: Main tag in jacobian_quantities for 
	absorption species is now "Abs. species".

2006-08-29  Patrick Eriksson  <Patrick.Eriksson@rss.chalmers.se>

	* arts-1-1-1123

	* src/m_abs_lookup.cc (abs_speciesAdd2): Created.

	* src/m_jacobian.cc (jacobianAddAbsSpecies): jacobianAddGas is
	renamed, following other changes. The method does now not touch
	*abs_species*. This is functionality is replaced by *abs_speciesAdd2*.

	(jacobianCalcAbsSpecies): New name of jacobianCalcGas.

        (jacobianAddGasAnalytical): Removed.	

2006-08-16  Patrick Eriksson  <Patrick.Eriksson@rss.chalmers.se>

	* arts-1-1-1122

	* src/m_physics.cc:  SparseToTbByRJ and SparseToTbByPlanck removed.
	These functions are now not needed when the jacobian is a matrix.
	There was also some bug in the RJ version.

2006-08-15  Patrick Eriksson  <Patrick.Eriksson@rss.chalmers.se>

	* arts-1-1-1121

	* src/m_jacobian.cc,workspace.cc,m_rte.cc: The WSV jacobian is now a
	matrix, instead of a sparse. Some initial tests look good. 
	Calculations now much quicker.

2006-07-24  Cory Davis  <cdavis@staffmail.ed.ac.uk>

	* arts-1-1-1120

	* src/montecarlo.cc (mcPathTraceGeneral): MOdified the condition
	for the photon path reaching the top of the atmosphere.  Very
	occasionally is_gridpos_at_index_i, wasn't successfully detecting
	this and causing an assert fail elsewhere.  changed to use
	fractional_gp and an error tolerance.  This may have been a
	problem (that only appears very rarely) in other calulcations
	e.g. RteCalc. MCGeneral works very well now.
	(mcPathTraceIPA): fixed the method for choosing the path step increment.

2006-07-12  Cory Davis  <cdavis@staffmail.ed.ac.uk>

	* arts-1-1-1119

	* src/montecarlo.cc (mcPathTraceIPA): quite a big overhaul. This
	is now a more complete IPA treatment.
	(cloudy_atm_vars_at_ppath_end_IPA): deleted.
	(clear_atm_vars_at_ppath_end_IPA): deleted.
	(mcPathTraceGeneral): changed _atm_vars_at_ppath_end calls to _rt_vars_at_gp
	(clear_atm_vars_at_ppath_end): deleted.
	(mcPathTrace): changed cloudy_atm_vars_at_ppath_end calls to cloudy_rt_vars_at_gp
	(cloudy_atm_vars_at_ppath_end): deleted.
	(clear_rt_vars_at_gp): Added. replaces _atm_vars_at_ppath_end
	(cloudy_rt_vars_at_gp): Added. replaces _atm_vars_at_ppath_end
	(clear_atm_vars_by_gp): deleted. Moved contents into
	clear_rt_vars_at_gp, which was the only caller.

2006-07-12  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-1-1118

	* README:

	Updated. Removed obsolete configure switches and added paragraph with
	a plea to cite ARTS if it is used in calculations for scientifc
	publications.

	* doc/uguide/main.tex: Added same paragraph to title page.

2006-07-03  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-1-1117

	* src/m_montecarlo.cc:

	Include math_funcs.h which defines correct overloads of the pow
	function for float compilation.

2006-06-20  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-1-1116

	* Renaming of workspace variables/methods as proposed in
	http://www.sat.uni-bremen.de/pipermail/arts-dev/2005-May/000937.html

	* Renames:

	Old name                       New name
	--------                       --------

	WSMs:

	absCalc                        abs_coefCalc
	absCalcSaveMemory              abs_coefCalcSaveMemory
	absCalcFromXsec                abs_coefCalcFromXsec
	abs_scalar_gas_field_Calc      abs_fieldCalc
	gas_abs_lookupAdapt            abs_lookupAdapt
	gas_abs_lookupInit             abs_lookupInit
	gas_speciesSet                 abs_speciesSet
	gas_speciesAdd                 abs_speciesAdd
	gas_speciesInit                abs_speciesInit
	lineshapeDefine                abs_lineshapeDefine
	lineshape_per_tgDefine         abs_lineshape_per_tgDefine
	lines_per_tgAddMirrorLines     abs_lines_per_speciesAddMirrorLines
	lines_per_tgCompact            abs_lines_per_speciesCompact
	lines_per_tgCreateFromLines    abs_lines_per_speciesCreateFromLines
	lines_per_tgSetEmpty           abs_lines_per_speciesSetEmpty
	lines_per_tgReadFromCatalogues abs_lines_per_speciesReadFromCatalogues
	linesReadFromHitran            abs_linesReadFromHitran
	linesReadFromHitran2004        abs_linesReadFromHitran2004
	linesReadFromMytran2           abs_linesReadFromMytran2
	linesReadFromJpl               abs_linesReadFromJpl
	linesReadFromArts              abs_linesReadFromArts
	cont_descriptionAppend         abs_cont_descriptionAppend
	cont_descriptionInit           abs_cont_descriptionInit
	h2o_absSet                     abs_h2oSet
	n2_absSet                      abs_n2Set
	tgsDefineAllInScenario         abs_speciesDefineAllInScenario
	xsec_per_tgAddConts            abs_xsec_per_speciesAddConts
	xsec_per_tgAddLines            abs_xsec_per_speciesAddLines
	xsec_per_tgInit                abs_xsec_per_speciesInit

	WSVs:

	abs                            abs_coef
	abs_per_tg                     abs_coef_per_species
	abs_scalar_gas_field           abs_field
	cont_description_names         abs_cont_names
	cont_description_models        abs_cont_models
	cont_description_parameters    abs_cont_parameters
	f_mono                         f_grid
	gas_abs_lookup                 abs_lookup
	gas_abs_lookup_is_adapted      abs_lookup_is_adapted
	gas_species                    abs_species
	lines                          abs_lines
	lines_per_tg                   abs_lines_per_species
	lineshape                      abs_lineshape
	h2o_abs                        abs_h2o
	n2_abs                         abs_n2
	p_abs                          abs_p
	t_abs                          abs_t
	vmrs                           abs_vmrs
	xsec_per_tg                    abs_xsec_per_species

	Agendas:

	scalar_gas_absorption_agenda   abs_scalar_gas_agenda

2006-06-28  Patrick Eriksson  <Patrick.Eriksson@rss.chalmers.se>

	* arts-1-1-1115

	* doc/uguide: Fixed incorrect section references. Now no such
	warning.
	
	* doc/uguide/surface.tex: Updated control file examples.

2006-06-28  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-1-1114

	* doc/uguide/concept.tex: Added paragraph about agendas.

2006-06-27  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-1-1113

	* doc/reference/arts_variables_to_latex.sh: Fixed escaping of '&'.

	* tests/data/Makefile.am: Added lines.ac to EXTRA_DIST.

2006-06-09  Patrick Eriksson  <Patrick.Eriksson@rss.chalmers.se>

	* arts-1-1-1112

	Summary:
	
	* rte_pos/los are now mandatory variables for iy_space_agenda
  	  AgendaSet( iy_space_agenda ){
	    Ignore(rte_pos){}
	    Ignore(rte_los){}
	    MatrixCBR( iy, f_grid ){}
          }

	* Surface part revised. Functionality of surfaceCalc is now
	hard-wired and iy_surface_agenda is removed. 
	surfaceEmissivityInterpolate is also removed. See furter below.
	Example on usage:

	AgendaSet(surface_prop_agenda){
          InterpAtmFieldToRteGps( surface_skin_t, t_field ){}
          NumericSet(surface_emissivity){0.9}
          surfaceSimple{}
        } 

	The new WSV can also be set as:
    InterpSurfaceFieldToRteGps(surface_emissivity,surface_emissivity_field){}

	Details:

	* tests/: simpleClearSky test added. All cfiles modified according
	to changes below.
	
	* src/m_atmosphere.cc: surfaceSingleEmissivity is now surfaceSimple and
	using *surface_emissivity*. More flexible solution. Should help to 
	include FASTEM etc.

	InterpSurfaceFieldToRteGps: Created.

	surfaceEmissivityInterpolate: Obsolete (due to WSM above).

	* iy_surface_agenda replaced by surface_prop_agenda at numerous places,
	in several files.
	
	* src/m_montecarlo.cc: Adapted to changes in iy_space_agenda (added
	local versions of rte_pos/los as agenda input).

	* src/methods.cc:

	surfaceCalc: Removed, as *iy_surface_agenda* is removed.

	* src/agendas.cc: 
	
	iy_surface_agenda: Removed. Reasons: The potential extra
	flexibility provided by this agenda would likely never be used. To
	avoid the confusion with surface_prop_aganda. Cfile for this part
	is now always the same between DOIT and clear sky.
        
	iy_space_agenda: rte_los and rte_pos are now mandatory input.
	This to ensure that these variables really are set in all cases.

2006-06-16  Cory Davis  <cdavis@staffmail.ed.ac.uk>

	* arts-1-1-1111

	* src/ppath.cc (ppath_start_stepping): modified the call to assert
	which didn't let you call ppathcalc looking into the cloud from
	the cloudbox boundary.

	* src/workspace.cc (define_wsv_data): Added WSV particle_masses,
	which is a vector holding the mass of each particle type.

	* src/montecarlo.cc (iwp_cloud_opt_pathCalc): Added calculates the
	cloud optical path and the ice water path for a given line of sight.

	* src/methods.cc (define_md_data_raw): Added mc_IWP_cloud_opt_pathCalc.

	* src/m_montecarlo.cc (mc_IWP_cloud_opt_pathCalc):
	Added. calculates the FOV averaged cloud optical path and the FOV
	averaged ice water path.

	* src/mc_antenna.{cc,h} (get_type): Added. Simply returns the antenna
	type (ATYPE_PENCIL_BEAM, ATYPE_GAUSSIAN, ATYPE_LOOKUP)
	(draw_los): Added const to the function desc.

2006-05-16  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-1-1110

	* doc/uguide/agendas.tex:

	Temporarely added description of agendas.
	This file will be merged with development.tex.

	* doc/uguide/development.tex:

	Revised paragraphs about numeric and container types.

	Removed colons from the end of section titles.

	* doc/uguide/uguide.tex:

	Replaced all the disturbing link colors (red, bright green, purple)
	with a dark red which is more pleasant on the eyes but still easy to
	recognize.

	Fill pdf author field.

	* configure.in: Commented out MPI.

	* src/m_abs.cc (AbsInputFromAtmFields):

	Match doxygen comment with other WSMs. And move the function to a
	better place.

	* workspace.cc: Added abs_lookup_t_pert.

	* methods.cc: Added abs_lookupCreate.

	* src/m_abs_lookup.cc (abs_lookupCreate): Added skeleton.

2006-06-13  Cory Davis  <cdavis@staffmail.ed.ac.uk>

	* arts-1-1-1109
	
	* src/montecarlo.cc (cloudy_atm_vars_at_ppath_end_IPA): fixed bug
	in finding the corresponding point on original line of sight.
	(clear_atm_vars_at_ppath_end_IPA): Same bug here too.

2006-06-09  Cory Davis  <cdavis@staffmail.ed.ac.uk>

	* arts-1-1-1108

	* tests/simpleMCWithIncomingLookup.arts: changed keyword argument
	incoming_lookup to 1. 

	* src/m_montecarlo.cc (ScatteringMonteCarlo): changed argument
	pos. of mc_incoming.
	(MCSetIncomingEmpty): Added.

	* src/mc_interp.h (class SLIData2): Added "const" to interpolate desc.

	* src/methods.cc: Added MCSetIncomingEmpty and moved mc_incoming
	to INPUT for ScatteringMonteCarlo

	* tests/simpleMC.arts: Added MCSetIncomingEmpty{} command.

2006-06-08  Cory Davis  <cdavis@staffmail.ed.ac.uk>

	* arts-1-1-1107

	* src/m_montecarlo.cc (MCIPA): fixed bug in surface part.

2006-05-31  Claudia Emde  <claudia@sat.physik.uni-bremen.de>

	* arts-1-1-1106
	
	The surface is fixed now for DOIT-1D calculations.
	A few checks are still missing. The current implemetation 
	works only if a pressure level (cloudbox_limits[0])
	corresponds to z_surface. I would like to leave it like this,
	because in 1D one can always insert a pressure level
	at the gound altitude. 
	
	* src/scatrte.cc (cloud_ppath_update1D): Small correction in
	surface part. 

	* src/rte.cc (surfaceCalc): Initialized ppath_array_index.
	
2006-05-30  Cory Davis  <cdavis@staffmail.ed.ac.uk>

	* arts-1-1-1105

	* src/methods.cc (define_md_data_raw): Added MCIPA.

	* src/montecarlo.cc (clear_atm_vars_at_ppath_end_IPA): Added. Used
	by MCIPA to get optical properties along the original photon path.
	(cloudy_atm_vars_at_ppath_end_IPA): ditto.
	(mcPathTraceIPA): modified IPA path tracing.

	* src/m_montecarlo.cc (MCIPA): Added.  This is a very temporary
	WSM designed to answer a specific question - to what extent is the
	difference between 1D and 3D caused by actual 3D RT effects
	(i.e. transverse photon propagation). This WSM is a modified
	version of MCGeneral that actually performs an independent pixel
	approximation, by keeping the photons in the initial line of sight
	(but still integrating over the antenna pattern).

2006-05-30  Patrick Eriksson  <Patrick.Eriksson@rss.chalmers.se>

	* arts-1-1-1104

	* tests/simpleClearSky.arts: Started on this. Not yet an active
	test.

	* src/m_rte.cc (RteCalc): Some cosmetic changes.

	* src/m_abs_o2_models.cc: Changed some & to \& in function headers
	to avoid latex problems.

2006-05-29  Claudia Emde  <claudia@sat.physik.uni-bremen.de>

	* arts-1-1-1103

	Fixed surface for DOIT calculations. 
	
	* src/scatrte.{cc,h}
	(cloud_RT_surface): Redone. Included a modified version of 
	the surface code that was previously part of cloud_ppath_update1D.
	(cloud_ppath_update1D): Removed surface stuff
	from here and included function call to cloud_RT_surface.

	* src/m_scatrte.cc (doit_i_fieldUpdate1D): Removed
	surface_prop_agenda. Surface is now only included in
	(doit_i_fieldUpdateSeq1D), which is the standard function to be
	used. 
	
	* src/agendas.cc: Included *rte_los* as input to
	surface_prop_agenda. It is needed for *surfaceFlat*. If you use
	surfaceBlackbody you have to include "Ignore(rte_los){}" into
	surface_prop_agenda. 

	* src/m_montecarlo.cc (MCGeneral): Included *local_rte_los* as
	input argument for *surface_prop_agendaExecute*.

	Included "Ignore(rte_los){}" in surface_prop_agenda:       
	* tests/MCDataPrepare.arts
	* tests/simpleMCGeneral.arts
	* tests/simpleMCGeneralGaussian.arts

2006-05-15  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-1-1102

	* tests/simpleAbs.arts:

	Updated. First absorption calculation in arts-1-1!!!

	* src/main.cc (main): Initialize lineshapes.

	* src/m_abs (tgsDefineAllInScenario):

	Look for .xml files instead of .aa files.

	(AbsInputFromAtmFields): Added.

	* src/methods.cc: Added AbsInputFromAtmFields.

	* src/xml_io_array_types.cc:

	Removed commented out/duplicate reading/writing functions for
	ArrayOfSpeciesRecord.

	* tests/data/lines.ac: Added. Generated from Hitran.

	* tests/data/tropical.O3.xml: Added.

2006-05-15  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-1-1101

	* src/xml_io_array_types.cc:

	Implemented reading/writing routines for ArrayOfLineRecord and
	ArrayOfArrayOfLineRecord.

	* src/absorption.cc: Removed write_lines_to_stream.

	* src/m_abs: Removed linesWriteAscii, lines_per_tgWriteAscii.

	(linesReadFromArts): Removed redundant if statement.

2006-05-12  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-1-1100

	* Cory: The following changes seem sane to me and the tests are still
	working fine. If I missed something, please let me know.

	* src/m_montecarlo.cc (ScatteringMonteCarlo):

	Removed rte_gp_* from interface.

	Adapt call to Cloudbox_ppath_rteCalc for changed interface.

	* src/montecarlo.{cc,h} (Cloudbox_ppath_rteCalc):

	Removed rte_gp_* from interface. Removed local pos/los and
	initialization with rte_posShift. This is done in
	get_radiative_background.

	* src/methods.cc:

	ScatteringMonteCarlo: Removed rte_gp_* from interface.

2006-05-08  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-1-1099

	* WARNING: Don't use any of the methods added in this commit and the
	following in your control files. Most of this stuff will be renamed
	anyway after the absorption part is completely ported. The old names
	of WSMs and WSVs will only be kept for my own convenience until then.

	* src/Makefile.am: Added m_abs.cc, continua.{cc,h} to *_SOURCES.

	* src/methods.cc:

	Added linesReadFromHitran, linesReadFromHitran2004,
	abs_linesReadFromMytran2, linesReadFromJpl, abs_linesReadFromArts,
	lines_per_tgSetEmpty, lines_per_tgReadFromCatalogues,
	lines_per_tgCreateFromLines, lines_per_tgAddMirrorLines,
	lines_per_tgCompact, lineshapeDefine, tgsDefineAllInScenario,
	lineshape_per_tgDefine, h2o_absSet, n2_absSet, cont_descriptionAppend,
	cont_descriptionInit, xsec_per_tgAddConts, xsec_per_tgAddLines,
	xsec_per_tgInit, absCalcFromXsec, absCalc, absCalcSaveMemory.

	* src/workspace.cc:

	Added WSV lines, lines_per_tg, lineshape, h20_abs, n2_abs, vmrs,
	cont_description_{names,models,parameters}, xsec_per_tg, abs_per_tg.

	* src/groups.cc:

	Added group ArrayOfLineRecord, ArrayOfArrayOfLineRecord,
	ArrayOfLineshapeSpec.

	* src/xml_io_instantiation.h:

	Added xml_{read_from,write_to}_file for ArrayOfLineRecord,
	ArrayOfArrayOfLineRecord, ArrayOfLineshapeSpec.

	* src/xml_io_array_types.{cc,h}:

	Added xml_{read_from,write_to}_stream for ArrayOfLineRecord,
	ArrayOfLineshapeSpec.

	* src/m_abs.cc:

	Include physics_funcs.h instead of atm_funcs.h.

	Use SpeciesTag instead of OneTag.

	#if 0...#endif around functions that are not yet in methods.cc.

	* src/absorption.{cc,h}:

	Provide dummy output operator for LineshapeSpec.

	* src/continua.{cc,h}:

	Synced from arts-1-0 branch. Fixes several compile warnings.

	* ChangeLog: Added missing line for m_rte.cc in my last commit.

2006-05-11  Stefan Buehler  <sbuehler@uni-bremen.de>

	* arts-1-1-1098

	* src/docu.txt: Removed. The text here was outdated.

	* src/groups.cc: Line catalogues (still commented out).

	* src/notes.txt: Removed. The text here was outdated.

	* src/workspace.cc: Line catalogues (still commented out).

	* src/xml_io_array_types.cc: Line catalogues (still commented out).

	* tests/testall.py: Modified to run absorption test.

	* tests/simpleAbs.arts: Added. Test absorption part.

2006-05-05  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-1-1097

	* src/rte.cc (get_radiative_background):
	
	Removed rte_gp_* from interface and turn them into local variables.

	Removed dummy parameters rte_los and rte_pos from interface as they
	were already implemented as local variables.

	* src/rte.{cc,h} (iy_calc, iy_calc_no_jacobian):

	Removed rte_gp_*, rte_los and rte_pos from interface.

	* src/m_atmosphere.cc (surfaceCalc):

	Adapt calls to iy_calc for changed interface.

	Removed rte_gp_* from interface.

	* src/m_cloudbox.cc (CloudboxGetIncoming, CloudboxGetIncoming1DAtm):

	Adapt calls to iy_calc_no_jacobian for changed interface.

	Removed rte_gp_*, rte_los and rte_pos from interface.

	* src/m_rte.cc:

	(RteCalc): Adapt call to iy_calc for changed interface.

	Removed rte_gp_*, rte_los and rte_pos from interface.

	(RteCalcNoJacobian): Adapt call to RteCalc for changed interface.

	Removed rte_gp_*, rte_los and rte_pos from interface.

	* src/m_rte.cc (RteCalc):

	Removed rte_gp_*, rte_los and rte_pos from interface.

	* src/montecarlo.{cc,h}:

	(Cloudbox_ppath_rteCalc, montecarloGetIncoming): Adapt calls to
	iy_calc_no_jacobian for changed interface.

	(montecarloGetIncoming): Removed rte_gp_* from interface.

	* src/m_montecarlo.cc (ScatteringMonteCarlo):

	Adapt call to montecarloGetIncoming for changed interface.

	* src/m_jacobian (jacobianCalcTemperature, jacobianCalcPointing,
	jacobianCalcParticle, jacobianCalcGas):

	Adapt calls to RteCalcNoJacobian for changed interface.

	Removed rte_gp_*, rte_los and rte_pos from interface.

	* src/agendas.cc:

	iy_surface_agenda: Removed rte_gp_* from outputs as they are now only
	used for input.

	* src/methods.cc:

	surfaceCalc: Removed rte_gp_* from interface.

	CloudboxGetIncoming, CloudboxGetIncoming1DAtm, RteCalc,
	RteCalcNoJacobian, jacobianCalcTemperature, jacobianCalcPointing,
	jacobianCalcParticle, jacobianCalcGas:
	Removed rte_gp_*, rte_los and rte_pos from interface.

	* src/m_agenda.cc (AgendaSet):

	Added missing .Name() to only print the name of the missing output
	WSV, not the complete help string.

2006-05-03  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-1-1096

	* src/rte.cc (get_radiative_background):

	Removed dummy rte_pos, rte_los from interface.

	Pass local ppath, rte_pos, rte_los to iy_surface_agenda.

	Consistent naming of local ppath variable.

	No need to copy the old ppath back.

	* src/methods.cc:

	surfaceCalc: ppath, rte_los and rte_pos must be input as well.
	Otherwise they are used uninitialized.

	* src/agendas.cc:

	iy_surface_agenda: Added ppath, rte_los and rte_pos as input/output.

	* tests/simpleDOIT.arts: Use surfaceFlat.

2006-04-03  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-1-1095

	* src/mystring.h: Include cassert to fix compilation with gcc 4.1.0.

2006-03-29  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-1-1094

	* src/src/disort_DISORT.h: Fix compilation if f2c.h is not available.

2006-03-09  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-1-1093
	
	* src/Makefile.am:

	Added check-code-cheaders.pl and check-code-tab-indent.sh to
	EXTRA_DIST.

2006-03-09  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-1-1092
	
	* Makefile.am: Added 3rdparty to SUBDIRS.

	* 3rdparty/Makefile.am: Added.

	* 3rdparty/disort1.2/Makefile.am: Added. Distribute disort code.

	* configure.in:

	Generate 3rdparty/Makefile and 3rdparty/disort1.2/Makefile.

	* tests/simpleDOIT.arts:

	Save i_field to data/doit_i_field.xml.generated.

	* .cvsignore: Added *.tar.gz.

	* 3rdparty/.cvsignore, 3rdparty/disort1.2/.cvsignore: Added.

	* doc/doxygen/html/.cvsignore: Added tabs.css.

	* src/rte.cc (surface_specular_R_and_b): Fixed typo in docs.

	* src/continua.{h,cc}, src/scatrte.{h,cc}, src/m_cloudbox.cc,
	src/scatrte.cc, src/disort_DISORT.h:

	Un-tabify.

2006-03-06  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-1-1091
	
	* src/array.h: Include <cassert> to fix compilation with gcc-3.3.

2006-03-02  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-1-1090
	
	* src/matpackI.h: Include <cassert>.

	* ChangeLog: Clarify my previous entry.

2006-03-03  Claudia Emde  <claudia@sat.physik.uni-bremen.de>

	* arts-1-1-1089
	
	* src/m_disort.cc (ScatteringDisort): Corrected surface albedo. 

	* src/disort.{cc,h}: Corrected bug in calculation of optical
	depth. 

2006-03-02  Claudia Emde  <claudia@sat.physik.uni-bremen.de>

	* arts-1-1-1088
	
	* src/m_disort.cc (ScatteringDisort): Some variables were not
	initialized in frequency loop. Fixed. 

	* src/disort.cc (pmomCalc): Modified warning if phase function is
	not correctly normalized.
	
2006-03-02  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-1-1087

	* src/Makefile.am:

	Workaround for bug in automake 1.6. Don't use += for noinst_LIBRARIES
	inside conditional.

2006-02-27  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-1-1086

	* Complete the transition to the new agenda scheme. Some work on the
	conversion of agenda communication variables to local variables is
	still to be done.

	* src/montecarlo.{cc,h}:

	(TArrayCalc): Added f_index to inputs.

	Use new agenda scheme for scalar_gas_absorption_agenda and
	opt_prop_gas_agenda.

	(Cloudbox_ppath_rteCalc): Added f_index to inputs.

	* src/m_montecarlo.cc (ScatteringMonteCarlo):

	Added f_index to call to Cloudbox_ppath_rteCalc.

	* src/m_abs_o2_models.cc (test_zeeman): Commented out.

	* src/m_abs_lookup.cc (abs_scalar_gas_fieldCalc):

	Include auto_md.h.

	Use new agenda scheme for scalar_gas_absorption_agenda.

	Make asg, a_pressure, a_temperature, a_vmr_list local variables.

	* src/methods.cc:

	abs_scalar_gas_fieldCalc: Removed abs_scalar_gas, rte_pressure,
	rte_temperature and rte_vmr_list from outputs.

	* src/scatrte.cc: Added some FIXMEs in commented out sections.

2006-02-27  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-1-1085

	* src/Makefile.am:

	Create a matpack library.

	Removed matpack sources/headers from all other *_SOURCES.

	Removed arts*.cc from test_{complex,legendre,matpack,poly,sorting,
	tensor}_SOURCES.

	Removed absorption.h from make_auto_{wsv_h,md_h,md_cc}_SOURCES.

	* src/math_funcs.cc: Don't include messages.h.

	* src/math_func.cc: Don't include arts.h.

	* src/complex.h, src/sorting.h: Include matpack.h instead of arts.h.

	* src/make_auto_wsv_h.cc: Don't include absorption.h.

	* src/make_auto_md_h.cc, src/make_auto_wsv_groups_h.cc,
	src/make_auto_wsv_h.cc:

	Don't include absorption.h in generated sources.

2006-02-27  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-1-1084

	* src/matpack.h: Forgot cvs add in last commit.

2006-02-24  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-1-1083

	* src/Makefile.am: Really solve the linker problems. There is a
	circular dependency between libdisort.a and libf2c. And the only
	way to get the faked main function linked in properly is to specify
	-lf2c twice in the *_LDADD variables.

	Added matpack.h to *_SOURCES.

	* configure.in: Rename DISORT to ENABLE_DISORT.

	* src/m_disort.cc: Rename DISORT to ENABLE_DISORT.

	* src/fastem.cc, src/main.cc, src/cloudbox.cc, src/m_cloudbox.cc,
	src/m_basic_types.cc, src/montecarlo.h, src/montecarlo.cc,
	src/absorption.cc, src/m_refraction.cc, src/sensor.cc:
	
	Cleanup includes to get rid of unnecessary inclusions of auto_md.h
	and auto_wsv.h.

	* src/matpack.h: New file.

	* src/matpackI.h: Include matpack.h instead of arts.h.

	* src/arts.h:

	Moved typedefs of Index and Numeric to matpack.h.

	Include matpack.h.

	* src/array.h: Include matpack.h instead of arts.h.

	* src/matpackII.h:

	Removed friend declaration of xml_write_to_stream.

	Don't include mystring.h.

	Removed forward declaration of bifstream and bofstream.

	Three new functions for read-only access to the private members.

	* src/xml_io_basic_types.cc (xml_write_to_stream):

	Use the new access functions to get the Sparse data.

	* src/exceptions.h, src/mystring.h:

	Include matpack.h instead of arts.h.

	* src/agenda_record.h, src/test_xml.cc: Include arts.h.

2006-02-24  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-1-1082

	* src/Makefile.am: Fix library link order.

2006-02-23  Claudia Emde  <claudia@sat.physik.uni-bremen.de>

	* arts-1-1-1081

	It is now possible to run DISORT within arts. You can look at 
	simpleDISORT.arts to see how to run it. The results look reasonable,
	but testing needs to be done.  

	Notes:
	- DISORT can only be used for randomly oriented particles (p20)
	without polarization (stokes_dim=1)
	- The cloud is defined different from DOIT, because in DISORT cloud 
	properties must be provided for each layer. Therfore there is no 
	linear interpolation at the cloud boundaries as in DOIT, which 
	makes the cloud shape different. Generally the DOIT clouds are 
	thicker for this reason. 
	- DISORT it a plane-parallel model, therefore you can not expect 
	good results for shallow viewing angles. 

	To be done: 
	- I did not include a temperature interpolation of the 
	scattering data (always the first temperature is taken) 
	- When one uses several scattering data files, the scattering angle 
	grid must be the same at the moment, because I did not include 
	an angle interpolation. 
	- Many checks are still missing, so be very careful!!!
	- Testing !!!
	
	* src/m_disort.cc: Some disort array dimensions were wrong. Fixed. 
		
	* tests/simpleDISORT.arts: Cleaned up. 

	* 3rdparty/disort1.2/DISORT.f: Removed debugging output. 
	
2006-02-22  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-1-1080
	
	* The "DOIT-on-diet" release

	* methods.cc:

	doit_i_fieldUpdateSeq1DPP: Removed rte_pressure, rte_temperature,
	rte_vmr_list, ext_mat, abs_vec and scat_p_index from interface.

	doit_i_fieldUpdateSeq1D, doit_i_fieldUpdate1D: Removed iy,
	surface_emission, surface_los and surface_rmatrix from interface.

	* src/scatrte.{cc,h}:
	
	(cloud_ppath_update1D_planeparallel): Use new agenda scheme for
	scalar_gas_absorption_agenda and opt_prop_gas_agenda.

	Made rte_pressure, rte_temperature and rte_vmr_list local variables
	and removed from interface.

	(cloud_ppath_update1D, cloud_ppath_update1D_noseq):

	Made iy, surface_emission, surface_los and surface_rmatrix local
	variables and removed from interface.

	* src/m_scatrte.cc:
	
	(doit_i_fieldUpdateSeq1DPP): Removed rte_pressure, rte_temperature,
	rte_vmr_list, ext_mat, abs_vec and scat_p_index from interface.

	(cloud_ppath_update1D, cloud_ppath_update1D_noseq): Removed iy,
	surface_emission, surface_los and surface_rmatrix from interface.

2006-02-22  Claudia Emde  <claudia@sat.physik.uni-bremen.de>

	* arts-1-1-1079
	
	* src/m_disort.cc (ScatteringDisort): Included frequency loop 
	for spectrally resolved calculations. 
	(cloudboxSetDisort): Included this functions, because for DISORT the
	cloudbox has to be extended over the whole atmosphere since it is 
	only possible to include cosmic background as input at the upper 
	layer. The surface is also treated in DISORT (Lambertian). 

	* src/methods.cc: Included (cloudboxSetDisort) and modified 	
	(ScatteringDisort).
	
	* 3rdparty/disort1.2/DISORT.f: Increased values of some parameters.
		
	* src/disort.{cc,h}(dtauc_ssalbCalc): Removed cloudbox_limits from 
	interface, because the values are now calculated for the full 
	atmosphere. 

	* test/simpleDOIT.arts: Corrected deficient change. The test is 
	now working again.

	* test/simpleDISORT.arts: Updated. 

2006-02-22  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-1-1078

	* src/methods.cc:

	doit_i_fieldUpdate1D, doit_i_fieldUpdateSeq1D,
	doit_i_fieldUpdateSeq3D, doit_i_fieldUpdateSeq1DPP:
	Removed ppath_step, rte_los, rte_pos and rte_gp_p from interface.

	* src/scatrte.{cc,h} (cloud_ppath_update1D,
	cloud_ppath_update1D_noseq, cloud_ppath_update3D):

	Make ppath_step local and remove it from the function interface.

	rte_los, rte_pos and rte_gp_p where unused in most cases. We have to
	deal with the iy_surface_agenda later when it is used somewhere.

	* src/m_scatrte.cc (doit_i_fieldUpdate1D, doit_i_fieldUpdateSeq1D,
	doit_i_fieldUpdateSeq3D, doit_i_fieldUpdateSeq1DPP):

	Removed ppath_step, rte_los, rte_pos and rte_gp_p from interface.

2006-02-06  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-1-1077

	* Intermediate commit of agenda work.

	* If you encounter control files which deliver wrong results and
	worked before, please let me know.

	* It might be necessary in some cases to adapt the control files a
	bit. See the comments on the tests/*.arts files below.

	* The DOIT tests fail at the moment. But this is due to another bug,
	not the agenda changes. Will be fixed soon.

	* tests/simpleDOIT.arts:

	Added DoNothing for ppath in iy_cloudbox_agenda.

	Removed Ignore for rte_gp_p, rte_gp_lat, rte_gp_lon in
	surface_prop_agenda.

	Removed Ignore for rte_pos, rte_los in iy_space_agenda.

	* test/simpleMC.arts, tests/simpleMCWithIncomingLookup.arts:

	Moved the output of mc_error and mc_iteration_count inside the
	iy_cloudbox_agenda.

	* src/methods.cc:

	jacobianInit, jacobianOff: Removed ppath_array_do, ppath_array,
	ppath_array_index, rte_do_vmr_jacs and rte_do_t_jacs from WSM
	inputs/outputs.

	surfaceCalc: Moved ppath_array_do from output to input.
	
	RteCalc: Removed rte_do_vmr_jacs, rte_do_t_jacs from output.

	ScatteringMonteCarlo: Added ppath, rte_pos, rte_los also to input
	because they are first used as such.

	Make f_index input only.

	RteStd, RteStdWithTransmissions: Removed f_index.

	doit_i_fieldUpdate1D, doit_i_fieldUpdateSeq1D, doit_i_fieldUpdateSeq3D:
	Added z_surface to inputs.

	* src/m_atmosphere.cc (surfaceCalc):

	Moved ppath_array_do_ from output to input.

	* src/m_jacobian (jacobianInit, jacobianOff):

	Removed ppath_array_do, ppath_array, rte_do_vmr_jacs and
	rte_do_t_jacs from WSM inputs/outputs.

	* src/rte.{cc,h}:

	(iy_calc): Moved ppath_array_do from output to input.

	(rte_std): Removed f_index from interface. Make it local.

	* src/rte.cc:

	(iy_calc_no_jacobians): Moved ppath_array_do from output to input
	in call of iy_calc.

	(get_radiative_background): Use new agenda scheme for
	iy_cloudbox_agenda, iy_space_agenda and iy_surface_agenda.

	No need to rescue the old ppath anymore, just pass a local ppath
	variable to the agenda.

	Added rte_pos and rte_los to iy_cloudbox_agenda input.

	(iy_calc): Added ppath_array, ppath_array_index, rte_do_vmr_jacs_,
	rte_do_t_jacs_ to rte_agendaExecute.

	Added ppath_array_do, rte_do_vmr_jacs, rte_do_t_jacs to
	get_radiative_background call.

	* src/agendas.cc:

	iy_surface_agenda: Make rte_gp_p, rte_gp_lat, rte_gp_lon input and
	output.

	iy_cloudbox_agenda: Added ppath, rte_pos, rte_los to inputs and outputs.

	Added ppath_array_do, rte_do_vmr_jacs, rte_do_t_jacs to inputs.

	rte_agenda: Added ppath_array, ppath_array_index, rte_do_vmr_jacs_,
	rte_do_t_jacs_ to inputs.

	* src/m_scatrte.cc:

	(doit_i_fieldUpdateSeq1D): Added z_surface to interface.

	Pass z_surface to cloud_ppath_update1D.

	(doit_i_fieldUpdate1D): Added z_surface to interface.

	Pass z_surface to cloud_ppath_update1D_noseq.

	(doit_i_fieldUpdateSeq3D): Added z_surface to interface.

	Pass z_surface to cloud_ppath_update3D.

	* src/scatrte.h (cloud_ppath_update1D, cloud_ppath_update1D_noseq,
	cloud_ppath_update3D):

	Added z_surface to interface.

	(ppath_step_in_cloudbox): Added p_grid to interface.

	* src/scatrte.cc:

	(cloud_RT_surface): Commented out iy_surface_agendaExecute for now.

	(cloud_ppath_update1D, cloud_ppath_update1D_noseq):
	Use new agenda scheme for ppath_step_agenda.

	Create empty lat_grid and lon_grid.

	Added z_surface to interface.

	(ppath_step_in_cloudbox): Use new agenda scheme for ppath_step_agenda.

	Added p_grid and z_surface to interface.

	(cloud_ppath_update3D): Use new agenda scheme for ppath_step_agenda.

	Added z_surface to interface.

	(cloud_RT_no_background, cloud_ppath_update1D_planeparallel,
	cloud_RT_surface):

	Use new agenda scheme for opt_prop_gas_agenda. Commented out for now.

	* src/m_rte.cc:

	(RteCalc): Removed rte_do_vmr_jacs, rte_do_t_jacs from output and
	define them as local variables.

	(RteCalcNoJacobian): Adapt call of RteCalc.

	(get_radiative_background): Added ppath_array_do, rte_do_vmr_jacs,
	rte_do_t_jacs to inputs.

	(RteStd, RteStdWithTransmissions): Removed f_index.

	* src/montecarlo.{cc,h}:

	(Cloudbox_ppath_rteCalc): Removed f_index.

	(opt_depth_calc): Added abs_vec as output and f_grid as input.

	(Cloudbox_ppathCalc): Use new agenda scheme for ppath_step_agenda.

	* src/montecarlo.cc:

	(opt_depth_calc): Use new agenda scheme for
	scalar_gas_absorption_agenda and opt_prop_gas_agenda.

	* src/m_montecarlo.cc (ScatteringMonteCarlo):

	Make f_index input. It is no longer necessary to set f_index back
	to 0.

	* src/ppath.cc (ppath_calc):

	Use new agenda scheme for ppath_step_agenda.

2006-02-21  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-1-1076
	
	* src/m_disort.cc (ScatteringDisort):

	Removed remaining explicit type conversions in disort_ call.

	Use the f2c constants TRUE_ and FALSE_, not the C++ keywords.

	Corrected size of output variables rfldir, rfldn, flup, dfdt, uavg, 
	uu and u0u from nlyr to maxulv (nlyr+1).

	Use maxphi for first dimension of uu instead of 1 for clarity.

	Changed dimension of utau from 1 to maxulv.

	Fixes all memory corruptions. http://valgrind.org/

	Free prnt.

2006-02-21  Claudia Emde  <claudia@sat.physik.uni-bremen.de>

	* arts-1-1-1075
	
	* 3rdparty/disort1.2/DISORT.f (PLKAVG): Included planck function for 
	monochromatic calculatiosn.

	* src/m_disort.f: Small modification regarding wavenumber 
	unit.

2006-02-21  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-1-1074
	
	* 3rdparty/disort1.2/*:

	Added original disort source code and f2c conversion script.

2006-02-21  Claudia Emde  <claudia@sat.physik.uni-bremen.de>

	* arts-1-1-1073
	
	* src/disort.cc: Some modifications, because in DISORT, the 
	grids start from the top and go down to the bottom of the 
	atmosphere. This is opposite to ARTS and was wrong before.

	* src/m_disort.cc: Corrected. 

	* src/disort_DISORT.c: Included the planck function for 
	monochromatic calculation at thermal wavelengths. 
	
2006-02-20  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-1-1072

	* src/DISORT_*.c:

	Regenerate with large enough array sizes:

	MXCLY = 6 -> 100
	MXULV = 5 -> 2*MXCLY
	MXUMU = 10 -> 48

2006-02-20  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-1-1071

	* src/m_disort.cc: Fill header variable with 0s. Length must be 127.

	* src/DISORT_*.c: Regenerate with array bounds check.

2006-02-17  Claudia Emde  <claudia@sat.physik.uni-bremen.de>

	* arts-1-1-1070

	* src/disort.cc (pmomCalc): Set first Legendre polynomial to 1 istead 
	of calculating it. 

	* src/m_disort.cc: Corrected values of some input variables for 
	disort_
	
2006-02-17  Claudia Emde  <claudia@sat.physik.uni-bremen.de>

	* arts-1-1-1069

	* tests/simpleDISORT.arts: Added this file to test DISORT in arts. Not
	yet finished, because so far disort is not running. 

	* tests/data/scat_data_disort.xml: Added this p20 data file, because
	disort can not be used for p30, which is used in the other examples.
	
2006-02-16  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-1-1068
	
	* src/Makefile.am:

	Removed disort sources from test_disort_SOURCES. Instead, link against
	libdisort.a.

2006-02-16  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-1-1067
	
	* src/Makefile.am:

	Only link those programs against libdisort.a which really need it.
	Avoids unnecessary recompilations if disort source changes.

2006-02-15  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-1-1066
	
	* src/m_disort:

	Make all parameters to disort_ non-const.

	Removed type conversions from disort_ call.

	* src/DISORT.h: Renamed to disort_DISORT.h.

	* src/disort_DISORT.h: Added missing ifdefs.

	* src/disort.h: Added missing ifdefs.

	* src/Makefile.am: Added disort_DISORT.h to SOURCES lists.

2006-02-15  Claudia Emde  <claudia@sat.physik.uni-bremen.de>

	* arts-1-1-1065
	
	* src/m_disort.cc (ScatteringDisort): Some modifications, 
	disort call still commented. 

	* src/disort.{cc,h} (planck2): Copied planck from physics_funcs 
	because I need this function but cannot include physics_funcs.h due to 
	a conflict with f2c.h (reason was the definition of complex). 

	* src/DISORT.h: Included double precision. 

2006-02-14  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-1-1064
	
	* src/disort_*.c:

	Regenerate with 'f2c -C++ -r8' for double precision.

2006-02-14  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-1-1063
	
	* src/Makefile.am: Added $(EXEEXT) to test_disort target.

2006-02-14  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-1-1062
	
	* autogen.sh:

	Require automake >= 1.6. automake-1.4 is ancient and its dependency
	tracking is broken. (e.g. tries to compile the auto_ sources on 'make
	clean')

	* src/Makefile.am:

	Move test_disort out of the conditional to make automake-1.6 happy.

2006-02-14  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-1-1061
	
	* src/disort.cc: Removed MAIN__ which is now in disort_FAKEMAIN.c.

	* ChangeLog:

	Forgot to comment some changes made to m_disort.cc in last commit.

2006-02-14  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-1-1060
	
	* configure.in:

	Enable DISORT support if f2c library is found. Can be disabled by
	passing --disable-disort to autogen.sh/configure.

	* src/Makefile.am:

	Added static DISORT library.

	Added test_disort created from disort_DISOTEST.c.

	Both are enabled conditionally.

	* src/m_disort.cc:

	Don't include physics_funcs.h. The real type defined in <complex>
	clashes with the one defined in <f2c.h>.

	Added a runtime_error if DISORT was not enabled at compile time.

	* src/DISORT.c: Renamed.

	* src/disort_D1MACH.c, src/disort_DISORTsp.c, disort_ErrPack.c,
	disort_LINPAK.c, disort_DISORT.c, disort_DISOTEST.c,
	disort_FAKEMAIN.c, disort_R1MACH.c:

	Added. Created with 'f2c -C++' from the fortran code.
	
	* src/disort_FAKEMAIN.c:

	Contains an empty MAIN__ function which is required by the f2c
	library.

	* src/f2c.h: Removed. Changes broke DISORT results.

	* src/matpackI.{cc,h}, src/matpackIII.{cc,h}:

	Return a non-const pointer. The f2c code decrements the array pointers
	by one to get one-based indexing. *shudder*

	* src/.cvsignore: Added test_disort.

2006-02-13  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-1-1059
	
	* src/matpackI.{cc,h}, src/matpackIII.{cc,h}:

	Added get_c_array function to VectorView, MatrixView and Tensor3View.
	This function returns a pointer to the raw data.

	* src/test_matpack.cc: Added test38 to check get_c_array functions.

2006-02-10  Claudia Emde  <claudia@sat.physik.uni-bremen.de>

	* arts-1-1-1058
	
        * src/m_disort.cc (ScatteringDisort): Added this file/WSM.
        Using this method it will be possible to call DISORT as additional
        scattering module.

        The method is not yet working, because arts variables like Vector and
        Matrix can not be converted easily to C-arrays.
		
	* src/methods.cc: Included method above.
	
        * src/disort.{cc,h}: Included this file. Needed to convert
        arts variables to the input varibles required for disort.
        (pmomCalc) Function to calculate Legendre polynomials of phase
        functions.

        * src/DISORT.{c,h}: Original DISORT code available at
         ftp://climate.gsfc.nasa.gov/pub/wiscombe/Multiple_Scatt/
        Transformed to c code by f2c.

        * src/f2c.h: Slightly modified, because of compiler errors.

        * src/Makefile.am: Included disort.cc, disort.h, m_disort.cc

	* configure.in: Commented -Werror, otherwise DISORT.c does not
	compile. To be fixed later.  
	
2006-02-07  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-1-1057

	* src/methods.cc:

	Removed diy_dvmr_ and diy_dt_ from RteCalc inputs.

	Added diy_dvmr_ and diy_dt_ to RteStd inputs because they must be
	initialized before RteStd is called.

	* src/m_rte:

	(RteCalc): Make diy_dvmr and diy_dt local variables.

	(RteCalcNoJacobian): Removed diy_dvmr and diy_dt.

	* src/agendas.cc:

	diy_dvmr_ and diy_dt_ have to be output _and_ input to the rte_agenda
	because they are expected to be initialized outside the agenda.

2006-02-07  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-1-1056

	* src/agendas.cc, src/rte.cc (rte_std):

	Added diy_dvmr and diy_dt to rte_agenda output.

2006-02-06  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-1-1055

	* src/refraction.h:

	Added refr_index as output to get_refr_index_[123]d.

	* src/refraction.cc:

	Include auto_md.h.

	Use new agenda scheme for refr_index_agenda in get_refr_index_[123]d.
	
	Added refr_index as output to get_refr_index_[123]d.

	Added refr_index as parameter to calls of get_refr_index_[123]d in
	refr_gradients_[123]d.

	Fixed documentation for a_pressure, a_temperature and a_vmr_list in
	get_refr_index_[123]d and refr_gradients_[123]d.

	* src/m_ppath.cc (VectorZtanToZaRefr):

	Added refr_index to call of get_refr_index_1d.

	* src/ppath.cc (raytrace_1d_linear_euler, ppath_step_refr_1d):

	Added refr_index to call of get_refr_index_1d.

2006-02-03  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-1-1054

	* src/m_batch.cc:

	(ybatchMetProfiles): Use new agenda scheme for met_profile_calc_agenda.

	Make t_field_raw, z_field_raw, vmr_field_raw, pnd_field_raw,
	p_grid, sensor_los, cloudbox_on, cloudbox_limits, z_surface, y
	local variables.

	(ybatchMetProfilesClear):

	Same as for ybatchMetProfiles. Additionally, a local variable
	cloudbox_on was introduced which is set to zero and an empty
	cloudbox_limits variable. This is needed because the
	met_profile_calc_agenda expects cloudbox_on and cloudbox_limits as
	input.

	* src/methods.cc:

	Removed t_field_raw, z_field_raw, vmr_field_raw, pnd_field_raw,
	p_grid, sensor_los, cloudbox_on, cloudbox_limits, z_surface, y
	from ybatchMetProfiles and ybatchMetProfilesClear input/output list.

	* src/agendas.cc: Fix typo.

2006-02-03  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-1-1053

	* src/m_jacobian.cc:

	(jacobianCalc): Use new agenda scheme for jacobian_agenda.

	(jacobianCalcParticle): Use new agenda scheme for
	jacobian_particle_update_agenda.

	* src/agendas.cc:

	Removed jacobian_quantities from jacobian_agenda input.

2006-02-03  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-1-1052

	* src/m_batch.cc (ybatchCalc):

	Use new agenda scheme for batch_update_agenda, batch_calc_agenda and
	batch_post_agenda.

	ybatch_index and y are now local variables.

	* src/methods.cc:

	Removed ybatch_index, ybatch_n and y from output list of ybatchCalc.

	Make ybatch_n input instead of output because it is not modified by
	ybatchCalc.

2006-02-03  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-1-1051

	* src/m_scatrte (doit_scat_fieldCalc1D):

	Removed for now. See discussion on arts-dev mailing list
	http://www.sat.uni-bremen.de/pipermail/arts-dev/2006-February/000986.html
	Beside the physical problems, there were also some issues on the
	implementation side.

	* src/methods.cc: Removed doit_scat_fieldCalc1D.

2006-02-02  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-1-1050

	* src/rte.{cc,h}:

	(iy_calc): Use new agenda scheme to execute rte_agenda.

	(rte_std): Use new agenda scheme to execute emission_agenda and
	scalar_gas_absorption_agenda.

	Make rte_pressure, rte_temperature, rte_vmr_list local variables.

	* src/methods.cc, src/m_rte.cc:

	Removed agenda communications variables rte_pressure, rte_temperature,
	rte_vmr_list from RteStd and RteStdWithTransmissions output list.

	* src/agendas.cc:

	Removed scalar_gas_absorption_agenda from input list for rte_agenda.

	Added rte_temperature to input list of emission_agenda.

2006-02-02  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-1-1049

	* src/m_cloudbox.cc (CloudboxGetIncoming):

	Shorten some duplicated code by putting it into for loops.

	* ChangeLog: Never put anything else into the line with the
	version number. Thank you!

2006-01-31  Stefan Buehler  <sbuehler@uni-bremen.de>

	* arts-1-1-1048
	
	* Just some cosmetic changes

	* doc/uguide/scattering.tex (subsection{DOIT frame}): Fixed typo.
	(subsection{Single scattering approximation}): Removed mention of
	PhD thesis by citation.

	* src/scatrte.cc (cloud_ppath_update1D_planeparallel): Fixed typo
	in error message.

	* src/m_scatrte.cc (doit_i_fieldUpdateSeq1DPP): Fixed typo in
	documentary output.

	* tests/simpleDOIT.arts: Fixed wrong method names in comments.

	* src/methods.cc (define_md_data_raw): Fixed typo in
	DoitScatteringDataPrepare. 

	* doc/uguide/main.tex: Extended copyright to 2005 and 2006.

	* doc/uguide/clouds.tex (subsection{Work space methods and
	variables}): Fixed typo.

2005-12-16  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-1-1047

	* tests/MCDataPrepare.arts tests/simpleMC*.arts tests/data/Makefile.am
	tests/data/.cvsignore:

	Changed .generated.xml to .xml.generated to prevent those files from
	ending up in the distribution.

2005-12-16  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-1-1046

	* src/parser.cc (is_whitespace):

	Rework the switch statement a bit to avoid a warning when compiling
	with -O3.

	* tests/MCDataPrepare.arts:

	Removed .bin postfix from output files.
	Instead added a '.generated.' prefix to the file endings to distinguish
	them from the static data files.

	* tests/simpleMC*.arts: Adapted for changed file names.

	* tests/data/.cvsignore: Added *.generated.xml*

	* tests/data/Makefile.am: Added *.generated.xml* to CLEANFILES.

2005-12-05  Cory Davis  <cdavis@staffmail.ed.ac.uk>

	* arts-1-1-1045

	* tests/testall.py (MCDataPrepareTest): Added 

	* tests/MCDataPrepare.arts: This file does a lot of the
	atmospheric field and scattering data preparation that was common
	to all of the MC tests.  Now this is done once instead of 4 times.

	* tests/simpleMC[WithIncomingLookup].arts: Modified to use files
	produced by MCDataPrepare.arts
	
	* tests/simpleMCGeneral[Gaussian].arts: Modified to use files
	produced by MCDataPrepare.arts
	
	* src/physics_funcs.cc (invrayjean): deleted assert (i >= 0).
	What was this for? How are you supposed to deal with negative
	higher value Stokes components?

	* src/workspace.cc (define_wsv_data): Added WSV mc_unit.

2005-12-04  Cory Davis  <cdavis@staffmail.ed.ac.uk>

	* tests/testall.py (MonteCarloTest4): Added.

2005-12-02  Cory Davis  <cdavis@staffmail.ed.ac.uk>

	* arts-1-1-1044

	* src/mc_antenna.{cc,h}: Added. Now we can incorporate FOV
	characteristics in ARTS-MC scattering calculations!!!More later.

	* tests/simpleMCGeneralGaussian.arts: Added. 

	* src/Makefile.am (test_xml_SOURCES): added mc_antenna.cc,
	mc_antenna.h in several places.

	* tests/simpleMCGeneral.arts: included mc_antennaSetPencilBeam{}

	* src/make_auto_wsv_h.cc (main): include mc_antenna.h

	* src/make_auto_wsv_groups_h.cc (main): include mc_antenna.h

	* src/m_montecarlo.cc (mc_antennaSetGaussian): Added.
	(mc_antennaSetPencilBeam): Added.
	(mc_antennaSetGaussianByFWHM): Added

	* src/methods.cc (define_md_data_raw): included mc_antenna in
	MCGeneral arguments, and added all the functions above.

	* src/m_montecarlo.cc (MCGeneral): implemented mc_antenna for
	sampling the field of view. 

	* src/workspace.cc (define_wsv_data): Added WSV mc_antenna

	* src/groups.cc (define_wsv_group_names): Added group MCAntenna.


2005-11-10  Sreerekha T.R.  <rekha@uni-bremen.de>

	* arts-1-1-1043
	
	* src/scatrte.cc (cloud_ppath_update1D):  Included the doit surface
	reflection part here. Updated the input and output variables for
	this function.  Comparison with the old version looks fine.

	* src/scatrte.h: Updated the list of input and output variables.

	* src/m_cloudbox.cc: *cloudbox_on* variable is set to 0 in the
	beginning of the function and set to 1 in the end.  The
	*dummy_cloudbox_on* variable is removed. 

	* src/m_scatrte.cc: Added surface variables as input and output in
	the doit_i_field_UpdateSeq1D method.  

	* src/methods.cc: Added surface variables as input and output in
	the doit 1D update methods. 

	* src/ppath.cc: Had a problem here. Copied the copying of
	ppath.l_step from an old version of ARTS because as it is
	implemented now, the program crashes when the cloudbox is extended
	to the ground. This happened before the surface part was
	implemented, if we try to put the lowest cloudbox_limit at the
	lowest p_grid level.  Patrick perhaps can have a look.
	
	* tests/simpleDOIT.arts: Updated with surface part. The agenda
	*surface_prop_agenda* has to be set.  All the tests are OK!

2005-11-08  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-1-1042

	* tests/data/Makefile.am: Also distribute *.xml.bin.

2005-11-08  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-1-1041

	* tests/Makefile.am: subdirs -> SUBDIRS

2005-11-08  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-1-1040
	
	* tests/data/Makefile.am: Added.

	* tests/data/.cvsignore: Added.

	* tests/Makefile.am:

	Added *.arts and *.py to EXTRA_DIST.

	Added data to subdirs.

	* configure.in: Added test/data/Makefile.am to AC_OUTPUT.

	* src/check_input.h:

	Include exceptions.h for declaration of runtime_error. Fixes
	compilation with gcc >4.0.2.

2005-09-29  Claudia Emde  <claudia@sat.physik.uni-bremen.de>

	* arts-1-1-1039
	
	* doc/uguide/scattering.tex: Finished the technical descriptions. 

	* doc/uguide/clouds.tex: Fixed some typos. 

	* doc/uguide/atmosphere.tex: Minor corrections. 

	* src/methods.cc: Fixed online documentation for (DoitAngularGridsSet).

2005-09-28  Claudia Emde  <claudia@sat.physik.uni-bremen.de>

	* arts-1-1-1038
	
	* doc/uguide/scattering.tex: Included more control file
	description.  

2005-09-27  Claudia Emde  <claudia@sat.physik.uni-bremen.de>

	* arts-1-1-1037
	
	* doc/uguide/scattering.tex: Included control file parts and
	comments including descriptions of workspace methods. 

	* doc/uguide/clouds.tex: Minor modifications. 

2005-09-26  Claudia Emde  <claudia@sat.physik.uni-bremen.de>

	* arts-1-1-1036
	
	* doc/uguide/clouds.tex: Included a new section describing
	particle number density fields and ARTS
	workspace methods related to cloud properties. 

	* doc/uguide/atmosphere.tex: Small correction. 

	* doc/uguide/references.bib: Included new references.

	* doc/uguide/symbol_defs.tex: Included symbols for IMC and Reff.

2005-09-23  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-1-1035
	
	* src/arts.h:

	New macro DEBUG_ONLY (). Use this macro around code that should only
	be included in debug builds. E.g. around function parameter names
	which are only used in assertions:

	Instead of 

	function x(
	#ifndef NDEBUG
	           Index a
	#else
		   Index
	#endif
	) { assert (a==1); }

	please now write:

	function x( Index DEBUG_ONLY (a) ) { assert (a==1); }

	It can also be used around a single line of code. For example around
	definitions of variables which are only used in assertions:

	DEBUG_ONLY (const Index np = cloudbox_limits[1] - cloudbox_limits[0]);

	Please don't use this macro around multiple statements. If you have
	two 'assert-only' variable definitions put each of them in a separate
	DEBUG_ONLY. For multiple line debug code use the common
	#ifndef NDEBUG.

	Hopefully that makes the code cleaner and clearer.

	* src/{agenda_record,gas_abs_lookup,main,mc_interp,ppath,methods_aux,
	m_ppath}.cc:

	Use DEBUG_ONLY where appropriate.

	* src/partition_function_data.cc:

	Removed #ifndef NDEBUG around assertions. They are useless.

	* src/cloudbox.cc (iy_interp_cloudbox_field):

	Fix non-debug compilation.

2005-09-23  Claudia Emde  <claudia@sat.physik.uni-bremen.de>

	* arts-1-1-1034
	
	* src/rte.cc (get_radiative_background): Included backgound
	"inside cloudbox". I have now tested to put the sensor inside the
	cloudbox and it works!!

	* src/agendas.cc: Adapted INPUT of *doit_mono_agenda*.

	* src/m_scatrte.cc: Adjusted INPUT of *doit_mono_agenda*.

	* src/methods.cc: Adjusted INPUT of *doit_mono_agenda*.

	* src/cloudbox.cc: Fixed small bug related to sensor in cloudbox. 

	* src/m_cloudbox.cc: Included output message for sensor pos. in
	cloudbox. 
	
2005-09-19  Claudia Emde  <claudia@sat.physik.uni-bremen.de>

	* arts-1-1-1033	
	
	* src/m_cloudbox.cc (iyInterpCloudboxField),
	(iyInterpCloudboxField), (DoitCloudboxFieldPut): Modifications for
	1D-calculations of observations inside the cloudbox.
	(not yet tested !!!)
	
	* src/cloudbox.{cc,h} (iy_interp_cloudbox_field): Implemeted the
	option to put the sensor inside the cloudbox. 

	* src/methods.cc: Adapted Input/Output of WSM above.

	* src/workspace.cc: Included WSV *doit_i_field1D_spectrum*
	(Radiation field for a full freqeuncy spectrum). 
	
2005-09-16  Cory Davis  <cdavis@staffmail.ed.ac.uk>

	* arts-1-1-1032

	* src/partition_function_data.cc (spec):inserted dumb code
	becaues name is only used in an assert ... 
	(iso): ditto ...

	* src/lineshapes.cc (lineshape_norm_no_norm): inserted dumb code
	becaues f_mono is only used in an assert ...

	* src/absorption.h: commented out three lines 517-519 a variable
	was only used in asserts.

2005-09-15  Claudia Emde  <claudia@sat.physik.uni-bremen.de>

	* arts-1-1-1031
	
	* doc/uguide/clouds.tex: Created this file. This chapter should
	include parts related to scattering, which are commonly used by MC
	and DOIT. Included the desription of the class
	SingleScatteringData.  Documentaion of pnd_field will be added. 

	* doc/uguide/atmosphere.tex: Created this file. Should include
	infromation about atmospheric grids and fields, mainly what is now
	in Section 3.1, which is currently too long as introduction. 
	Included a short description of the class GriddedField3 here. 

	* doc/uguide/scattering.tex: Removed the short single scattering
	data description from here. Some description of arts WSMs and WSVs
	related to DOIT will be added. 

	* doc/uguide/main.tex: Included new files. 

	* doc/uguide/Makefile.am: Dito.

	* doc/uguide/symbol_defs.tex: Included acronym \ScaMat. 
	
2005-09-13  Cory Davis  <cdavis@staffmail.ed.ac.uk>

	* arts-1-1-1030

	* src/interpolation.cc (gridpos_force_end_fd): Commented out
	troublesome assertions.

	* src/special_interp.cc (fix_gridpos_at_boundary): Another small
	change to deal with grid positions that are just outside the cloudbox.

2005-09-08  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-1-1029

	* src/xml_io.cc: Kill endian and numeric type warnings.

2005-09-07  Cory Davis  <cdavis@staffmail.ed.ac.uk>

	* arts-1-1-1028

	* src/methods.cc (define_md_data_raw): Added
	surfaceEmissivityInterpolate
	
	* src/workspace.cc (define_wsv_data): Added
	surface_emissivity_field.  This is to allow for variation in
	emissivity with latitude and longitude.  Useful for realistic 3D
	simulations.
	
	* src/m_atmosphere.cc (surfaceEmissivityInterpolate): Added.
	Interpolates surface emissivity from surface_emissivity_field -
	otherwise the same as surfaceSingleEmissivity.

2005-09-01  Cory Davis  <cdavis@staffmail.ed.ac.uk>

	* arts-1-1-1027

	* src/ppath.cc: increased RTOL to 1e-2 (for double)

2005-08-31  Cory Davis  <cdavis@staffmail.ed.ac.uk>

	* arts-1-1-1026

	* src/m_atmosphere.cc (surfaceSingleEmissivity): surface_emission
	was not being initialised, so there were some rubbish values for
	Q,U,V.

2005-08-29  Cory Davis  <cdavis@staffmail.ed.ac.uk>

	* arts-1-1-1025

	* src/xml_io_basic_types.cc (xml_read_from_stream): this function
	(for Strings) was failing for empty strings. 

2005-08-23  Cory Davis  <cdavis@staffmail.ed.ac.uk>

	* arts-1-1-1024
	
	* src/ppath.cc: increased RTOL.

	* src/m_montecarlo.cc (MCGeneral): fixed surface part.

2005-08-05  Claudia Emde  <claudia@sat.physik.uni-bremen.de>

	* arts-1-1-1023

	* src/m_cloudbox.cc (CloudbocGetIncoming1DAtm): Made this function
	more efficient. The same calculation was repeated unnecessarily
	inside loops over latitudes and longitudes.

	* sec/scatrte.cc (cloud_ppath_update3D): Made this function
	shorter and nicer by using function (fix_gridpos_at_boundary).

2005-08-01  Cory Davis  <cdavis@staffmail.ed.ac.uk>

	* arts-1-1-1022

	* src/methods.cc (MCSetSeedFromTime): Added

	* src/workspace.cc (mc_seed): Added.  The integer seed for the
	random number generator used by ScatteringMonteCarlo and
	MCGeneral. Formerly a keyword argument. 

	* src/m_montecarlo.cc (ScatteringMonteCarlo): updated for new WSV mc_seed 
	(MCGeneral): updated for new WSV mc_seed
	(MCSetSeedFromTime): Added. Sets the value of mc_seed from system time.

	* src/rng.cc (seed): removed annoying output to out1

	* src/rng.h: removed default value for seed method.

	* tests/simpleMCGeneral.arts: updated for new WSV mc_seed 

	* tests/simpleMC.arts: updated for new WSV mc_seed 

	* tests/simpleMCWithIncomingLookup.arts: updated for new WSV mc_seed 

2005-07-28  Claudia Emde  <claudia@sat.physik.uni-bremen.de>

	* arts-1-1-1021

	* src/m_optproperties.cc (opt_prop_sptFromData),
	(opt_prop_sptFromMonoData), (pha_mat_sptFromData),
	(pha_mat_sptFromMonoData): Fixed a bug which is important if more
	than one particle type is considered. The problem was that if the
	pnd of the first particle type was zero, the pnds for the other
	particle types were also assumed to be zero. This bug can cause
	big errors, esprcially if liquid clouds are considered !!!

	* src/m_cloudbox.cc (i_fieldSetClearsky): Modified, so that it can
	be used also for IR calculations. 

2005-07-25  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-1-1020

	* src/absorption.cc:
	(LineRecord::ReadFromHitran2004Stream)
	(LineRecord::ReadFromHitranStream):

	Handle catalogues in unix and dos encoding properly.
	Merged from arts-1-0.

2005-07-21  Patrick Eriksson  <Patrick.Eriksson@rss.chalmers.se>

	* arts-1-1-1019

	* src/m_jacobian.cc (jacobianCalcParticle): Variables lat_cbox and
	lon_cbox were not initialized in a good way. Caused assert
	failure, but only sometimes!

2005-07-07  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-1-1018

	* configure.in: Require python.

2005-06-15  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-1-1017

	* src/agenda_class.{cc,h}:

	Removed Agenda members magenda_only_out_wsm_in and
	magenda_only_in_wsm_out.

	(Agenda::get_agenda_only_out_wsm_in)
	(Agenda::get_agenda_only_in_wsm_out): Removed.

	(Agenda::set_outputs_to_push_and_dup): Use local variables for
	agenda_only_in_wsm_out and agenda_only_out_wsm_in.

	Throw runtime error instead of warnings if agenda_only_in_wsm_out or
	agenda_only_out_wsm_in are not empty.

	* src/absorption.h (LineRecord):

	Fix example value in documentation for air broadened width 20 -> 20000
	Hz/Pa.

2005-07-06  Cory Davis  <cdavis@staffmail.ed.ac.uk>

	* arts-1-1-1016

	* MCGeneral now gives consistent results with ScatteringMonteCarlo
	(and RteCalc) for pencil beam and blackbody surfaces, which are
	the only cases I can actually compare.  Next step: try other
	surface models (and compare with DOIT?)

	* src/montecarlo.cc (mcPathTraceGeneral): Some tinkering,
	including calls to is_inside_cloudbox. same for MCPathTrace.
	
	* src/m_montecarlo.cc (MCGeneral): changes input and output
	arguments, and other minor fixes.
	
        * src/workspace.cc: Added mc_points, which is a Tensor3 that holds
	the number of Monte Carlo end points in each grid cell.  Can be
	used to make pictures like http://www.met.ed.ac.uk/~cory/plot1.png
	
	* src/methods.cc: Changed inputs to MCGeneral (sensor_{pos,los}
	instead of rte_{los,pos}) and added mc_points as an output.

	* src/special_interp.cc (fix_gridpos_at_boundary): fixed bug.

	* src/scatrte.cc (is_inside_cloudbox): added include_boundaries
	argument which lets you decide whether points on the boundary are
	inside the cloudbox or not.

	* tests/simpleMCGeneral.arts: Added. 

	* tests/testall.py (MonteCarloTest3): Added test for MCGeneral. 

2005-07-04  Cory Davis  <cdavis@staffmail.ed.ac.uk>

	* arts-1-1-1015

	* src/scatrte.cc (is_inside_cloudbox): re-wrote. It seems I am the
	only one who now uses this function.

	* src/montecarlo.cc (mcPathTraceGeneral): debugging.

	* src/agendas.cc (define_agenda_data): surface_prop_agenda. Added
	rte_gp_p, rte_gp_lat, rte_gp_lon as input variables. I think this
	suits better the new agenda scheme. Well, its suits me anyway.

	* src/m_montecarlo.cc (MCGeneral): debugging. Now its running but
	not yet giving quite the right answers.

	* arts-1-1-1014

	* src/m_montecarlo.cc (MCGeneral): Added. A generalised 3D
	reversed Monte Carlo radiative algorithm, that allows for 2D
	antenna patterns, surface reflection and arbitrary sensor
	positions. So far the sensor part has not been implemented so it
	still only does pencil beam calculations - but the framework is
	there to allow for antenna functions. All of the current
	surface types should work.  This WSM has not yet been tested
	Also did some general reworking in this file and montecarlo.cc
	introducing the new Agenda system.

	* src/methods.cc (define_md_data_raw): add MCGeneral

2005-07-01  Cory Davis  <cdavis@staffmail.ed.ac.uk>

	* src/m_montecarlo.cc: (scat_iPutMonteCarlo): removed.

2005-07-01  Patrick Eriksson  <Patrick.Eriksson@rss.chalmers.se>

	* arts-1-1-1013
	
	* src/m_jacobian.cc (jacobianAddParticle): Old version contained at 
	least two bugs. Wrong sizes were extracted, affecting the number of
	particle types and particle retrieval quantities that were considered.

	Each particle variable forms now a retrieval quantity.

	All fields of jacobian_quantities are now set (though not used).

	Changes and rearrangement of code to handle this.

	(jacobianCalcParticle): As above.
	
2005-06-30  Mattias Ekstrom  <ekstrom@rss.chalmers.se>

	* arts-1-1-1012

	* src/m_jacobian.cc: Fixed bug with jacobianAddParticle eating up
	all memory (and harddrive?).

2005-06-30  Mattias Ekstrom  <ekstrom@rss.chalmers.se>

	* arts-1-1-1011

	* doc/uguide/sensor.tex: Started on fixing FIXMEs.

	* src/m_jacobian.cc: Particle jacobians are now only calculated
	within the cloudbox, the retrieval grids for particle jacobians
	are therefore confined to the cloudbox range. Using grids that
	extends outside the cloudbox will result in an error.

	* src/methods.cc: Cloudbox limits are now needed for 
	jacobianAddParticle.

2005-06-24  Mattias Ekstrom  <ekstrom@rss.chalmers.se>

	* arts-1-1-1010

	* src/m_jacobian.cc (jacobianCalcGas): Fixed bug with nd_field, the
	size of the tensor now matches the size of t_field to handle different
	atmospheric dimensions.

	* src/xml_io_compound_types.cc: Fixed typo for ppath.

2005-06-23  Patrick Eriksson  <Patrick.Eriksson@rss.chalmers.se>

	* arts-1-1-1009

	* src/m_jacobian.cc (jacobianAddTemperature): Removed options of
	relative perturbations.

	* src/m_jacobian.cc (jacobianCalcTemperature): Removed options of
	relative perturbations.

	* src/jacobian.cc (check_retrieval_grids): Included checks that grids
	are sorted correctly.

	* src/m_physics.cc (SparseToTbByXxx): DO NOT USE!!!
	These functions appear not to work. 

	* src/m_physics.cc (SparseToTbByPlanck): Innermost if-statement used
	y_out. Should be y_in.

	* src/m_physics.cc (SparseToTbByRJ): As above.
	
2005-06-16  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-1-1008
	
	* doc/uguide/development.tex:

	Updated section on how to add a WSV group.

2005-06-16  Claudia Emde  <claudia@sat.physik.uni-bremen.de>
	
	* arts-1-1-1007
	
	* src/m_scatrte.cc (doit_conv_flagAbs, doit_conv_flagAbsBT):
	Replaced runtime error with warning if number if iterations is
	>100.

	* doc/uguide/scattering.tex: Included missing '+' noticed by
	Patrick. 

2005-06-16  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-1-1006

	* Fixes for float compilation.

	* src/math_funcs.{cc,h} (pow):

	Added overloaded pow function with first argument of type double and
	second argument of type float.

	* src/m_montecarlo.cc, src/test_interpolation.cc:

	Include math_funcs.h for overloaded pow functions.

	* ChangeLog: Removed conflict marker.

2005-06-16  Patrick Eriksson  <Patrick.Eriksson@rss.chalmers.se>

	* arts-1-1-1005

	* doc/uguide/rte.tex: Started on this chapter.

	* doc/uguide/rte_theory.tex: Removed a double numbering of an equation.

2005-06-13  Mattias Ekstrom  <ekstrom@rss.chalmers.se>

	* arts-1-1-1004

	* src/m_jacobian.cc: Fixed bug found by Patrick, by flipping the 
	iteration order for the perturbation calculations when doing
	jacobians. 
	
2005-06-13  Patrick Eriksson  <Patrick.Eriksson@rss.chalmers.se>

	* arts-1-1-1003

	* doc/uguide/surface.tex: Removed two FIXME about theory to check.
	These things have not been looked at, and the equations appear to be
	correct. Added a control file example.
  
	* doc/uguide/ppath.tex: Included new fields of Ppath structure, and
	some comments on new WSV ppath_array.

	* doc/uguide/concept.tex: Revised and added example on supergeneric
	method.

	* doc/uguide/fm_definitions.tex: Revised. Added some small text about
	DOIT and MC.

2005-06-10  Patrick Eriksson  <Patrick.Eriksson@rss.chalmers.se>

	* arts-1-1-1002

	* Code for gas analytical jacobians appears ready. But not complete 
	tests have been performed.
	
	* src/m_rte.cc (RteCalc): Finished handling of jacobians.

	* src/m_atmosphere.cc (surfaceCalc): Finished to include jacobian
	part.

	* src/rte.cc
	(include_trans_in_diy_dq): Created.
	(iy_calc): Now handling analytical jacobians.
	(iy_calc_no_jacobian): Interface with dummy jacobian variables.
	
	* src/: Changed diy_dt to be ArrayOfTensor4. This to make it easy
	to use same functions as for diy_dvmr. Caused smalle modifications 
	in several functions.

	iy_calc_no_jacobian is now used inside MC and DOIT parts.

2005-06-09  Patrick Eriksson  <Patrick.Eriksson@rss.chalmers.se>

	* arts-1-1-1001

	* Further work on jacobians. Not yet finished :-(
	
	* src/groups.cc (define_wsv_group_names): Introduced ArrayOfTensor4.
	(Turned out that things become much simpler if diy_dvmr is of this
	type).

	* src/ppath.cc (ppath_copy): Included copying of new fields, and
	replaced some loops by using joker and Range.

	(ppath_append): Included handling of new fields.

2005-06-09  Mattias Ekstrom  <ekstrom@rss.chalmers.se>

	* arts-1-1-1000

	* src/jacobian.cc: Fixed bug in get_perturbation_gridpos, The
	perturbation pressure grid can not contain the value zero.
	Now we use a tenth of the smallest value in the atmospheric grid.
	Also fixed stupid assertion bug in calc_nd_field.

	* src/m_jacobian.cc: Fixed bug, calc_nd_field should be called when
	perturbation is given in ND, not the other way around.
	
2005-06-09  Oliver Lemke  <olemke@core-dump.info>

	* arts-1-1-999

	* src/agenda_class.cc (Agenda::set_outputs_to_push_and_dup):

	Fix warning message.

	(printWsvNamesToOut3): Really remove as promised in 1-1-996.

	* src/absorption.cc, src/m_optproperties.cc, src/scatrte.cc:

	Fix indentation.

2005-06-09  Patrick Eriksson  <Patrick.Eriksson@rss.chalmers.se>

	* arts-1-1-998

	* Rearrengement to more easily handle jacobians for cases where the
	propagation path has several parts, such as for surface reflections.

	Not finished. New code in iy_calc_test. Started to update RteCalc
	and RteStd.

	Changes here and there as argument list for iy_calc and RteCalc
	has been changed (again).

	* src/ppath.h: Added definition of ArrayOfPpath. Added some fields to
	Ppath structure: p t, vmr and next_parts.
	
	* src/workspace.cc: 
	Removed: ppath_index, ppath_p, ppath_t and ppath_vmr.
	Added: ppath_array and ppath_array_do.
	Redefined diy_dvmr to ArrayOfArrayOfTensor3 and diy_dt to 
	ArrayOfTensor3.

2005-06-08  Mattias Ekstrom  <ekstrom@rss.chalmers.se>

	* arts-1-1-997

	* src/methods.cc: Removed "mode" from keyword list of
	jacobianAddPointing. This means absolute perturbation is hardcoded.
	Added "hse" keyword for temperature jacobians, so far only "off"
	is implemented.

	* src/m_jacobian.cc: Implemented number density as unit for gas
	perturbation. Removed calculations of reference spectra and fixed
	some FIXMEs. Pointing jacobians are now calculated using an absolute
	perturbation. 
	The method to calculate temperature jacobians also check whether
	HSE is "on" or "off". Only "off" is implemented, error message is
	given for "on".
	The calculation of gas jacobians can now take ND as input.

	* src/jacobian.[cc,h]: Fixed FIXMEs. Added function calc_nd_field
	to calculate number densities for each grid point in *vmr_field*.
	Also fixed problem with perturbation grid extending outside the 
	atmospheric grid.

2005-06-08  Oliver Lemke  <olemke@core-dump.info>

        * arts-1-1-996

	* src/wsv_aux.h:

	(PrintWsvName): Prints the name of the WSV at given index to the
	output stream.

	(PrintWsvNames): Prints the names of the list of WSV indexes to the
	output stream. The List can be any STL container with elements of type
	index (Array, vector...).

	* src/agenda_class.cc:

	(printWsvNamesToOut3): Removed.

	(Agenda::set_outputs_to_push_and_dup): Use new helper function
	PrintWsvNames.

2005-06-07  Cory Davis  <cdavis@staffmail.ed.ac.uk>

        * arts-1-1-995

        This work was to address problems in the MC code caused by the
        change in size of pnd_field.  There was a small problem in
        Claudia's fix. itws were calculated using gps.  Then the gps were
        "fixed", but in the final interpolation the old itws were used
        with the new gps.  As well as solving this problem, all field
        variables are now looked up in the same way - i.e. inside the
        cloudbox only the appropriate subset of the *field variables are
        used.  python testall.py -v now works again.

        * src/montecarlo.{cc,h} (cloud_atm_vars_by_gp): Added.  Returns
        pressure, temperature, VMRs and PNDs, at points corresponding to
        arrays of grid positions gp_p, gp_lat, and gp_lon.  The field and
        grid input variables all span only the cloudbox. 
        (atm_vars_at_ppath_end): Changed to call
        cloud_atm_vars_by_gp
        (TArrayCalc): Changed to call
        cloud_atm_vars_by_gp
        (Cloudbox_ppath_rteCalc): updated call to TArrayCalc.
        (mcPathTrace): updated call to atm_vars_at_ppath_end.

2005-06-07  Oliver Lemke  <olemke@core-dump.info>

        * arts-1-1-994

        * src/workspace_ng.{cc,h}:

        Remove unneeded EMPTY_WSV.

        (Workspace::is_occupied): Improve readability.

        (Workspace::pop):

        Fix memleak. Thanks to claudia and 'valgrind --tool=massif' :-)

        (Workspace:operator[]): Use NULL instead of EMPTY_WSV.

        (Workspace:Workspace): Removed EMPTY_WSV initialization.

2005-06-03  Oliver Lemke  <olemke@core-dump.info>

        * arts-1-1-993

        * src/methods.cc:

        Add scat_i_p_, scat_i_lat_, scat_i_lon_ as Input to ScatteringDoit.

        * src/agendas.cc:

        Add scat_i_p_, scat_i_lat_, scat_i_lon_ as Input to doit_mono_agenda.

        * src/agenda_class.{cc,h}:

        (AgendaSet): Determine WSVs which need to be pushed and duplicated
        here instead of doing it in the Execute wrappers.

        (Agenda::get_output2push,
        Agenda::get_output2dup,
        Agenda::get_agenda_only_out_wsm_in,
        Agenda::get_agenda_only_in_wsm_out): New functions.

        (Agenda::set_outputs_to_push_and_dup):

        Renamed get_ to set_.

        Find out special cases. 1. A WSV is defined only as agenda input but
        used as output in one of the WSMs. 2. A WSV is defined only as agenda
        output but first used as input in one of the WSMs.
        A warning message is shown if one of these cases occurs.

        (printWsvNamesToOut3): Temporary debugging function.

        * src/m_atmosphere.cc (InterpAtmFieldToRteGps):

        Fix function name in doxygen header.

        * src/make_auto_md_cc.cc (main):

        Use agenda member functions to determine which WSVs need a push/dup.

2005-06-06  Patrick Eriksson  <Patrick.Eriksson@rss.chalmers.se>

        * arts-1-1-992

        * src/m_jacobian.cc (jacobianCalcGas): Error is thrown if number
        density is selected (not yet implemented).

        * src/jacobian.cc (jacobian_from_path_to_rgrids): Now using the extpol
        gridpos functions.

        * src/interpolation.cc (gridpos_extpol): This is old gridpos, extended
        with a selectable extrapolation factor. It turned out that the simplest
        fix for a part of the analytical jacobian calculations is to allow
        extrapolation to infinity and this was fixed in this way.

        (gridpos): Is now only a filter to gridpos_extpol, with a hard-coded
        extrapolation factor of 0.5.

        * src/special_interp.cc (ArrayOfGridPosPrint): Removed this obselete
        function.

        (p2gridpos_extpol): Created.

2005-06-06  Claudia Emde  <claudia@sat.physik.uni-bremen.de>

        * arts-1-1-991

        * src/m_scatrte.cc: Made output from *scat_mono_agenda* silent, if
        more than one frequency is calculated.

        * src/cloudbox.cc (iy_interp_cloudbox_field): Fixed bug in polynomial 
        interpolation.
        
2005-06-03  Oliver Lemke  <olemke@core-dump.info>

        * arts-1-1-990

        * src/workspace_ng.h (is_occupied): Fix crash.

2005-06-03  Patrick Eriksson  <Patrick.Eriksson@rss.chalmers.se>

        * arts-1-1-989

        * src/: Introduced new workspace group ArrayOfArrayOfindex.

        * src/workspace.cc: Introduced jacobian_indices. 

        * src/m_physics.cc: Created SparseToTbByRJ and SparseToTbByPlanck.

        * src/m_basic_types.h (ArrayInit): Created this supergeneric method.

        * src/methods.cc: Added gas_species as input to gas_speciesAdd and
        jacobianAddGas, to make sure that gas_species is properly set.

        * src/m_jacobian.cc 
        (jacobianInit): jacobianInit and jacobianOff are now internally
        the same function, with functionality of old jacobianOff. This
        means that jacobianInit can always be used
        (this simplified the coding for qarts in Atmlab).

        Changes here and there following introduction of jacobian_indices.

        * src/m_rte.cc: Code extracted to create jacobian_from_path_to_rgrids.

        * src/jacobian.cc (jacobian_from_path_to_rgrids): Help function to
        RteCalc, to map jacobians from positions along the propagation path
        to the retrieval grids.

        * src: *opt_prop_agenda* is not any longer used by *rte_agenda*. 
        A fixed mapping from *abs_scalar_gas* to extinction matrix is assumed.
        The scheme must later be extended to include Zeeman.
        
        Changes in several files to adopt to this change.

2005-06-02  Oliver Lemke  <olemke@core-dump.info>

        * arts-1-1-988

        * src/make_auto_md_cc.cc (main):

        Full agenda scoping nearly finished. Still commented out.
        'make check' runs fine but there are some problem cases left
        which need special treatment.

        TODO: Trigger the get_outputs_to_push_and_dup on AgendaSet instead of
        calling it on every Execute.

        * src/agenda_class.{cc,h} (get_outputs_to_push_and_dup):

        New function replacing get_all_{output,input}.

2005-06-02  Mattias Ekstrom  <ekstrom@rss.chalmers.se>

        * arts-1-1-987

        * src/jacobian.[cc,h]: Change name of field Unit in the retrieval
        quantity to Mode. This as it better represent the use of the field.

        * src/m_jacobian.cc: See above.

        * src/m_rte.cc: See above.

        * src/xml_io_compound_types.cc: See above.

2005-06-02  Oliver Lemke  <olemke@core-dump.info>

        * arts-1-1-986

        * src/workspace_ng.{cc,h}:

        Let the workspace keep track of variables which were allocated by
        itself and which where added from outside. The destructor only frees
        WSVs which were allocated by the workspace itself. Avoids double
        free corruption when runtime errors occur inside agendas.

2005-06-02  Oliver Lemke  <olemke@core-dump.info>

        * arts-1-1-985

        * src/m_scatrte (doit_i_fieldIterate):

        Don't use doit_rte_agendaScopeExecute.

2005-06-01  Patrick Eriksson  <Patrick.Eriksson@rss.chalmers.se>

        * arts-1-1-984

        * src/m_jacobian.cc (jacobianAddGas): Changed possible strings for
        field unit and method.

        * src/m_rte.cc (RteCalc): Complete code for analytical gas jacobians.
        1D tested OK. No  tests for higher dimensions. Code shall be broken out
        to be put in sub-functions.

2005-06-01  Claudia Emde  <claudia@sat.physik.uni-bremen.de>

        * arts-1-1-983

        * src/scatrte.cc (cloud_ppath_update3D): Fixed small bug
        introduced in latest changes (pressure interpolation).

        * src/m_rte.cc (RteCalc): Initialized ji0_t and jin_t because of
        compiler warning.
        
2005-06-01  Patrick Eriksson  <Patrick.Eriksson@rss.chalmers.se>

        * arts-1-1-982

        * src/m_rte.cc (RteCalc): More jacobian coding for gases. Mapping
        from ppath to retrieval grids not yet included. But everything else
        appears to work (can be tested for 1D with retrieval grid = p_grid).

        * src/rte.cc (rte_std): Finished code for analytical VMR jacobian
        calculations.

        * src/m_jacobian.cc (jacobianCalcGas): Included assert to ensure that
        not analytical calculations are selected.

        (jacobianAddGas): Now nothing is added to jacobian_agenda if
        analytical calculations selected.
        Retrieval units are now: "vmr", "nd" and "rel".
        Calculation methods are now: "analytical" and "perturbation"

2005-05-31  Stefan Buehler  <sbuehler@uni-bremen.de>

        * arts-1-1-981

        * Most of the absorption code from arts-1-0 is here now. Methods
        are not yet working.
        
        * src/test_sparse.cc: Removed definition of joker.

        * src/species_data.cc: Moved code from arts-1-0 here.

        * src/partition_function_data.cc: Moved code from arts-1-0 here.

        * src/methods.cc: Not much changed.

        * src/m_atmosphere.cc: Include abs_species_tags.h.

        * src/m_abs_lookup.cc: Include <map>.

        * src/m_abs.cc: Moved code from arts-1-0 here.

        * src/lineshapes.cc: Moved code from arts-1-0 here.

        * src/gas_abs_lookup.h: Include abs_species_tags.h.

        * src/continua.h: Moved code from arts-1-0 here.

        * src/continua.cc: Added. (From arts-1-0.)

        * src/constants.cc: Added HZ2CM (from arts-1-0).

        * src/absorption.h: Moved code from arts-1-0 here.

        * src/absorption.cc: Moved code from arts-1-0 here.

        * src/abs_species_tags.h: Added. Stuff related to species tags.

        * src/abs_species_tags.cc: Added. Stuff related to species tags. 

        * src/Makefile.am: Added abs_species_tags.h and
        abs_species_tags.cc. Updated sources for all tests. (This is a
        mess.) 

2005-05-31  Oliver Lemke  <olemke@core-dump.info>

        * arts-1-1-980

        * Preparations for full scoping in agendas.

        * src/workspace_ng.{cc,h}

        (Workspace::pop_free): New function. Pops a WSV and frees its memory.

        (Workspace::duplicate): New function. Duplicates the topmost entry on
        the WSVs stack.

        * src/make_auto_wsv_h.cc (main):

        Added new functions in WorkspaceMemoryHandler to duplicate WSVs.

        * src/agenda_class.{cc.h}:

        Move implementation of Agenda::operator=, Agenda::resize,
        Agenda::nelem and MRecord::operator= from cc file to header file. We
        need these functions for make_auto_wsv_h. But because agenda_class.cc
        itself depends on auto_wsv.h we cannot link make_auto_wsv_h against
        agenda_class.o as this would create a circular dependency.

        (doit_rte_agendaScopeExecute): Test wrappers featuring scope.

        * src/m_scatrte.cc (doit_i_fieldIterate):

        Use doit_rte_agendaScopeExecute to test the scoping.

        * src/Makefile.am (make_auto_wsv_h_SOURCES):

        Depend on agenda_class.h.

2005-05-31  Stefan Buehler  <sbuehler@uni-bremen.de>

        * arts-1-1-979

        * src/m_absorption.cc: Removed.

        * src/m_abs_lookup.cc: Added. (Used to be m_absorption.cc)

        * src/Makefile.am: Replaced m_absorption.cc by m_abs_lookup.cc.

2005-05-31  Stefan Buehler  <sbuehler@uni-bremen.de>

        * arts-1-1-978

        * src/methods.cc: Added planned new names for absorption methods
        as comments. Sorted according to the new names. All absorption
        methods are now at the beginning of the list.

2005-05-31  Stefan Buehler  <sbuehler@uni-bremen.de>

        * arts-1-1-977

        * src/workspace.cc: Commented out abs_vec_zee, ext_mat_zee,
        zeeman_o2_onoff, zeeman_o2_pressure_limit,
        zeeman_o2_line. Move all these commented-out WSVs to the end of
        the list.
        Added planned new names for absorption variables as
        comments. Sorted according to the new names. All absorption
        variables are now at the beginning of the list.

2005-05-31  Stefan Buehler  <sbuehler@uni-bremen.de>

        * arts-1-1-976

        * Removed obsolete ARTS-1-1 absorption files, WSVs, WSMs, and
        agendas.
        
        * src/workspace.cc: Removed WSVs: abs_model, abs_user_parameters,
        els, els_agenda, els_f_grid, ls, ls_cutoff, ls_f0, ls_gamma,
        ls_sigma.
        
        * src/methods.cc: Removed WSMs: absCKDMT_H2O_AIR,
        absCKDMT_H2O_H2O, absMPM02_H2O, absO2Model, elsDoppler,
        elsLorentz, elsVoigt_Drayson, elsVoigt_Kuntz6, lsWithCutoffAdd. 
        Commented out: absO2ZeemanModel, abs_vecAddGasZeeman,
        ext_matAddGasZeeman, ZeemanO2Settings, test_zeeman. Moved the
        commented-out Zeeman methods to the end of the list.

        * src/agendas.cc: Removed els_agenda.

        * src/Makefile.am: Removed m_lineshapes.cc and
        m_continua_ckd.cc from the source file list. The files themselves
        have also been deleted. Removed abs_o2_models.h and
        m_abs_o2_models.cc from the source file list. The files themselves
        are still there, in case somebody wants to resume the work on
        Zeeman. 

        * src/m_lineshapes.cc: Removed.

        * src/m_continua.cc: Removed.

        * src/m_continua_ckd.cc: Removed.

        * src/old_absorption.cc: Removed.

2005-05-30  Patrick Eriksson  <Patrick.Eriksson@rss.chalmers.se>

        * arts-1-1-975

        * Main changes:
           - DoNothing and IndexStep now need both global input and output.
           - Cfiles must now include jacobianOff{}
             (you can also use RteCalcNoJacobian, but it is mainly intended
              for internal use)

        Otherwise some more jacobian code added (not yet activated).

        * src/m_basic_types.cc (IndexStep): Now works as out = in + 1,
        where in and out can be same WSV. This also ensures that the WSV
        has been init correctly when doing a = a + 1.

        (MatrixCopy): Removed this obselete function.

        * src/m_ignore.h (DoNothing): The variable to ignore must now be
        given as both input and output. This to ensure that the variable
        has been init correctly.

        * src/m_rte.cc (RteCalcTmp): Added this as a temporary solution to
        test/develop jacobians, making old cfiles to run.
        Started to make jacobian code.

        (RteCalcNoJacobian): Added. 
        
        * src/workspace.cc: Added rte_do_gas_jacs and rte_do_t_jacs.

        * src/jacobian.h: Removed speciesindex as field for RetrievalQuantity,
        and renamed field method to analytical.

        * src/m_jacobian.cc: Adopted to changes in fields for
        RetrievalQuantity.

        (jacobianOff): Added.

        * src/xml_io_compound_types.cc: Adopted to changes in fields for
        RetrievalQuantity.

2005-05-30  Claudia Emde  <claudia@sat.physik.uni-bremen.de>

        * arts-1-1-974
        
        * src/agendas.cc: Fixed entry for *doit_mono_agenda*.
        
        * src/m_scatrte.cc (ScatteringDoit): Used new agenda wrapper for 
        *doit_mono_agenda*. Fixed WS OUTPUT of the function. 

        (i_fieldUpdateSeq3D): Included new ageda wrappers, now here also 
        only *iy_surface_agenda* and *ppath_step_agenda* remain. 

        * src/scatrte.{cc,h} (cloud_ppath_update3D): Used new agenda 
        wrappers, used (cloud_RT_no_background).

        (cloud_RT_no_background): Generalized to handle 1D and 3D. Before
        the function worked only for 1D.
        
        * src/methods.cc: Adapted ScatteringDoit and i_fieldUpdateSeq3D entries.
        
2005-05-30  Claudia Emde  <claudia@sat.physik.uni-bremen.de>
        
        * arts-1-1-973

        * src/agendas.cc: Fixed INPUT and OUTPUT of the following 
        agendas: 
        scalar_gas_absorption_agenda, spt_calc_agenda,
        opt_prop_part_agenda
        
        * src/m_scatrte.cc: Used new agenda wrappers for the agendas above in 
        (i_fieldUpdateSeq1D), (i_fieldUpdate1D), (i_fieldUpdateSeq3D). 
        3D function not yet completed.
        
        * src/methods.cc: Adaptes WS OUTPUT of methods above. Most of the 
        output variables could be removed, only the communication
        variables for *iy_surface_agenda* and *ppath_step_agenda* remain. 
        
        * src/scatrte.{cc,h}: Used new agenda wrappers in the following 
        functions:
        cloud_fieldsCalc, cloud_RT_no_background, cloud_ppath_update1D,
        cloud_ppath_update1D_noseq                                

2005-05-27  Oliver Lemke  <olemke@core-dump.info>

        * arts-1-1-972
        
        * src/agenda_record.cc (write_agenda_wrapper_header):

        Fixed stupid bug introduced by myself: Make all input 'const' but
        omit the reference for Index and Numeric types. Not the other
        way round!

2005-05-27  Claudia Emde  <claudia@sat.physik.uni-bremen.de>

        * arts-1-1-971
        
        * src/m_cloudbox.cc (pnd_fieldCalc): Changed the size *pnd_field*.
        From now on it is defined only inside the cloudbox. 

        * src/m_optproperties.cc: Adapted the following functions to 
        pnd_field modification:
        (pha_matCalc) only documentation

        * src/m_scatrte.cc:  Adapted the following functions to 
        pnd_field modification:
        (doit_scat_fieldCalc)

        * src/scatrte.cc (cloud_fieldsCalc): Adapted to pnd_field 
        modification. 

        * src/montecarlo.{cc,h}: 
        Adapted the following functions to 
        pnd_field modification:
        (TArrayCalc), (atm_vars_at_ppath_end)

        * src/special_interp.{cc,h} (fix_gridpos_at_boundary): Created
        this functionn. It is needed to interpolate the pnd_field in 
        montecarlo.cc.
        
        * src/m_workspace.cc: Modified entry for *pnd_field*.

        * src/methods.cc: Adapted entry for (pnd_fieldCalc).

2005-05-26  Oliver Lemke  <olemke@core-dump.info>

        * arts-1-1-970

        * configure.in: Enable -Wshadow also for gcc 4.x.

        * src/make_auto_md_cc.cc (main): Avoid shadowing of i.

2005-05-26  Oliver Lemke  <olemke@core-dump.info>

        * arts-1-1-969

        * ChangeLog:

        Add missing entry for src/make_auto_md_cc.cc in my previous commit.

2005-05-26  Oliver Lemke  <olemke@core-dump.info>

        * arts-1-1-968

        * src/Makefile.am:

        Added agendas.cc and agenda_record.{cc,h} to make_auto_md_h_SOURCES
        and make_auto_md_cc_SOURCES.

        * src/agenda_record.{cc,h} (write_agenda_wrapper_header):

        New function used by make_auto_md_{cc,h}.cc to generate the wrapper
        function headers.

        * src/make_auto_md_h.cc (main):

        Generate agenda wrapper function prototypes.

        * src/make_auto_md_cc.cc (main):

        Generate agenda wrapper functions.

        * src/agenda_class.{cc,h}:

        Removed agenda wrappers. They are now automatically generated in
        auto_md.{cc,h}.

2005-05-25  Oliver Lemke  <olemke@core-dump.info>

        * arts-1-1-967

        * src/agenda_class.{cc,h}:

        More constness in wrapper arguments.

        Pass elementary data types (Index, Numeric) by value not by reference
        if they are input parameters.
        This avoids the need to declare local variables in the calling
        function if you want to pass literals as input to the agenda.

2005-05-25  Patrick Eriksson  <Patrick.Eriksson@rss.chalmers.se>

        * arts-1-1-966

        * Some work towards analytical gas jacobians. Nothing yet operational
        or used.
        
        * src/rte.cc 
        (rte_step_std_clearsky): Started, not finished. 

        (rte_std): Started to include jacobian code.
        
2005-05-25  Claudia Emde  <claudia@sat.physik.uni-bremen.de>

        * arts-1-1-965              
        
        * src/scatrte.{cc,h}(interp_cloud_coeff1D): Created this 
        function in order to clean up the cloud_ppath_updateXX functions. 

        (cloud_ppath_update1D),(cloud_ppath_update1D_noseq): Replaced a 
        big part of the functions by calling (interp_cloud_coeff1D).    

        * src/m_scatrte.cc (doit_i_fieldIterate):
        Use new agenda wrappers. Use local variable dor doit_sact_field.

        * src/methods.cc:
        Adapted INPUT, OUTPUT of doit_i_fieldIterate
            
        * agenda_class.{cc,h}: Modified wrapper for
        doit_scat_field_agendaExecute.

        * src/agendas.cc:
        Adapted INPUT and OUTPUT for doit_scat_field_agenda.
        
2005-05-25  Oliver Lemke  <olemke@core-dump.info>

        * arts-1-1-964

        * src/methods.cc:

        Removed agenda communication variables from doit_scat_fieldCalcLimb.

        * src/m_scatrte.cc (doit_scat_fieldCalcLimb):

        Use new pha_mat_spt_agendaExecute wrapper.

        Use local variables for agenda communication.

        * src/agenda_class.{cc,h}: New wrapper pha_mat_spt_agendaExecute.

        * src/agendas.cc: Adapt INPUT, OUTPUT for pha_mat_spt_agenda.

2005-05-24  Oliver Lemke  <olemke@core-dump.info>

        * arts-1-1-963

        * src/agendas.cc:

        Adapted INPUT and OUTPUT for doit_rte_agenda, doit_scat_field_agenda
        and doit_conv_test_agenda.

        * src/methods.cc:

        Adapted INPUT, OUTPUT of doit_i_fieldIterate.

        * src/m_scatrte.cc (doit_i_fieldIterate):

        Use new agenda wrappers. Use local variables for communication with
        the agendas.

        * src/agenda_class.{cc,h}:

        Pass silent flag to the agenda wrapper.

        Added mockups for doit_rte_agendaExecute
        doit_scat_field_agendaExecute wrappers.

2005-05-24  Claudia Emde  <claudia@sat.physik.uni-bremen.de>

        * arts-1-1-962
        
        * src/test_interpolation.cc (test07): interp_cubic --> interp_poly

        * tests/simpleDOIT.arts: Only minor changes in documentation of 
        file. 
        
2005-05-24  Claudia Emde  <claudia@sat.physik.uni-bremen.de>

        * arts-1-1-961
            
        * src/workspace.cc (define_wsv_data): Removed 
        *doit_grid_optimization_agenda*. Agenda is not needed for this 
        purpose. It is sufficent to use *doit_za_grid_optCalc*. 

        * src/m_scatrte.cc: Removed (DoitGridOptimization). 
        (doit_za_grid_optCalc): Included missing checks.
        interp_cubic --> interp_poly
        "cubic" --> "polynomial"
        (ScatteringDoit): Included missing checks. 

        * src/methods.cc: Improved online docu of the methods above.    
        
        * src/interp.{cc,h}: Renamed (interp_cubic) to (interp_poly). The name
        was misleading, because what is done in the function is a 
        3 point polynomial interpolation and not a cubic interpolation. 

        * src/scatrte.cc: interp_cubic --> interp_poly
        "cubic" --> "polynomial"
        
        * src/cloudbox.cc: interp_cubic --> interp_poly
        "cubic" --> "polynomial"
        
        * src/m_cloudbox.cc: Renamed: (iyInterpCubicCloudboxField) -->
        (iyInterpPolyCloudboxField)

        * tests/simpleDOIT.arts: Adapted to changes above.
        
2005-05-24  Oliver Lemke  <olemke@core-dump.info>

        * arts-1-1-960
                
        * misc/README: This file does not belong in this branch.

2005-05-23  Claudia Emde  <claudia@sat.physik.uni-bremen.de>
                    
        * arts-1-1-959
                
        * src/m_scatrte.cc: Included missing checks in the 
        following functions:
        (doit_i_fieldUpdateSeq3D)
        (DoitInit)
        (doit_scat_fieldCalc)
        (doit_scat_fieldCalcLimb)

        * src/methods.cc: Improved online docu of the methods above.    

2005-05-23  Oliver Lemke  <olemke@core-dump.info>

        * arts-1-1-958

        * ChangeLog: Fixed typo in my last entry.

        * src/workspace_ng.{cc,h}: Added push and pop functions.

        * src/m_scatrte.cc (doit_i_fieldIterate):

        Misuse this function as a test case for the new agenda wrapper.

        * src/agenda_class.{cc,h}:
        
        New function doit_conv_test_agendaExecute. This is just for testing.
        Later we'll have auto-generated functions for this.

        * test/simpleDOIT.arts: convergence_flagAbs -> doit_conv_flagAbs.

2005-05-23  Oliver Lemke  <olemke@core-dump.info>

        * arts-1-1-957

        * Fix compile errors with GCC 4.0.1. Mostly because now the use of
        undeclared names is deprecated.

        * src/matpackI.h:

        Added forward declaration of classes ConstVectorView and
        ConstMatrixView before using them.

        * src/make_auto_wsv_groups_h.cc:

        Include matpackII.h in auto-generated code to have Sparse declared.

        * src/check_input.h:

        Include matpack{IV,V,VI,VII} because we use Tensors here.

        (chk_contains): 

        Added dummy return at the end of the function so all (theoretically
        possible) control paths return a value.

2005-05-19  Patrick Eriksson  <Patrick.Eriksson@rss.chalmers.se>

        * arts-1-1-956

        * Mail with control file examples for changes of this commit
        sent to arts-dev.

        Main changes are:
             - RteEmissionStd -> RteStd
             - You must set emission_agenda. Standard choice is:
                AgendaSet( emission_agenda ){
                   emissionPlanck{}
                }
             - Atmospheric variables (pressure, temperature and VMR) along
               ppath now accessible.
               This change simplifies also to make new functions for 
               rte_agenda.
               The transmission along ppath also accessible by 
               ppath_transmissions.
             - Files with index number can now be generated.
             - DoNothing implemented, to complement Ignore.

        * Changes at many places to adapt to new WSVs ppath_p, ppath_t and 
        ppath_vmr.
        
        * src/m_rte.cc: 
        (RteStd): Renamed RteEmissionStd to RteStd.
        (RteStdWithTransmissions): Made this interface to rte_std.

        * src/rte.cc 
        (rte_step_std): The function now returns trans_mat, the transmission 
        of the path step.

        (iy_calc): Included calculation of ppath_p, ppath_t and ppath_vmr.

        (rte_std): Created this core function for versions of RteStd, and: 
           - Included emission and emission_agenda.
           - Removed unused variables ext_mat_ppath and abs_vec_ppath.
           - Adapted to ppath_p, ppath_t, ppath_vmr and ppath_transmission.

        * src/m_physics.cc 
        (emissionPlanck): Created.
        (MatrixUnitIntensity): Created. 

        * src/workspace.cc: Added emission, emission_agenda, ppath_p, ppath_t, 
        ppath_vmr, ppath_transmission and file_index.
        
        * src/m_jacobian.cc (jacobianAddGasAnalytical): Created.

        * src/xml_io.cc (filename_xml_with_index): Added.

        * src/m_xml.h (WriteXMLIndexed): Added.

        * src/m_ignore.h (DoNothing): Added.

2005-05-18  Patrick Eriksson  <Patrick.Eriksson@rss.chalmers.se>

        * arts-1-1-955

        * src/m_atmosphere.cc (surfaceCalc): Results were completely wrong. 
        Sent local variable to iy_calc, instead of *iy* which (obviously) 
        does not work.

        * src/cloudbox.cc (chk_pnd_data): The index for cloudbox_limits were
        wrong for lat and lon checks.

2005-05-13  Claudia Emde  <claudia@sat.physik.uni-bremen.de>

        * arts-1-1-954
        
        Splitted the function (cloud_ppath_update1D), because it was 
        getting too complex. 
        
        * src/scat_rte.{cc,h} (cloud_RT_no_background): Radiative transfer
        without background (inside cloudbox). 

        (cloud_RT_surface): Dummy function for the surface part.
        Copied the commented surface part from *cloud_ppath_update1D* to 
        this function. 
        Sreerekha: You can put everything related to the surface into this
        function. 
        
        (cloud_ppath_update1D),(cloud_ppath_update1D_noseq) 
        Included new functions here. 

2005-05-13  Oliver Lemke  <olemke@core-dump.info>

        * arts-1-1-953
        
        * src/m_scatrte.cc:

        Fix broken build. Replay my change from arts-1-1-948.

2005-05-12  Claudia Emde  <claudia@sat.physik.uni-bremen.de>

        * arts-1-1-952
        
        * src/m_cloudbox.cc: Included additional checks in 
        (ParticleTypeAdd{All}).
        The size of pnd_field will be changed later and checks will be 
        adapted accordingly. Included warning if pnd is non-zero on cloudbox
        boundary.
        Cory: For you nothing changes if you still use *ParticleTypeAdd* 
        with empty filename for pnd. 

        * src/cloudbox.{cc,h}: Included and modified several functions to check
        pnd_field: (chk_pnd_raw_data), (chk_pnd_data),
        (chk_if_pnd_zero_p), (chk_if_pnd_zero_lat), (chk_if_pnd_zero_lon)

        * src/m_scatrte.cc: Included missing checks for input variables of 
        the following methods: 
        DoitAngularGridsSet
        doit_conv_flagXXX
        doit_i_fieldIterate
        i_fieldUpdateSeq1D
        i_fieldUpdate1D

        (i_fieldUpdate1D): Updated this function, it was not working 
        anymore as we haven't used it for a long time. 

        (i_fieldUpdate3D): Removed this functions, because it is very,
        very inefficient and it is not worth to update it.

        * src/scatrte.{cc,h} (cloud_ppath_update1D_noseq): Added. Used in 
        *i_fieldUpdate1D*.
        
        * src/methods.cc: Improved online docu for some DOIT related methods. 
        Commented entry for *i_fieldUpdate3D*.
        
        * tests/simpleDOIT.arts: Decreased number of azimuth angles. 10 is
        usually sufficient.

        * tests/data/pnd_field_1D.xml: Modified. Now pnd = 0 on cloudbox
        boundary. 

        * tests/testall.py: Adapted DOIT test to modifications.
        
2005-05-11  Mattias Ekstrom  <ekstrom@rss.chalmers.se>

        * arts-1-1-951

        * src/jacobian.{cc,h}: Turned get_perturbation_grid into
        get_perturbation_gridpos and re-used it in m_jacobian.cc.
        This was crucial, since the function creates the interpolation
        GridPos which are used as basefunctions for adding the 
        perturbation to the atmospheric fields.

        * src/m_jacobian.cc: Added the call to get_perturbation_gridpos
        in jacobianCalc-functions.

2005-05-11  Mattias Ekstrom  <ekstrom@rss.chalmers.se>

        * arts-1-1-950

        * src/methods.cc: Added atmospheric grids as input to the jacobian
        add-functions. They are used to check the consistency of the 
        retrieval grids.

        * src/jacobian.[cc,h]: Moved check done in get_perturbation_grid
        to check_retrieval_grids, which is called from jacobianAdd...
        The function get_perturbation_grid is now obsolete, but not
        removed yet...

        * src/m_jacobian.cc: Changes to the function affected by the above
        mentioned changes i jacobian.cc.

2005-05-11  Oliver Lemke  <olemke@core-dump.info>

        * arts-1-1-949

        * src/wsv_aux.cc: Go away!

2005-05-11  Oliver Lemke  <olemke@core-dump.info>

        * arts-1-1-948

        * Merged changes from WORKSPACE_REWORK_BRANCH back to HEAD.

        * This was lying around for some time now. As it doesn't break
        anything (hopefully), further development can be done in HEAD.

        * src/m_scatrte.cc (ScatteringDoit):

        Use new Workspace instead of old WorkSpace.

        * src/wsv_aux.cc: Removed.

        * src/Makefile.am: Removed wsv_aux.cc.

        2004-11-26  Oliver Lemke  <olemke@core-dump.info>

        * arts-1-1-911-wr3

        * src/make_auto_wsv_h.cc (main):

        More documentation.

        Better function names in WorkspaceMemoryHandler.
        alloc->allocate, free->deallocate

        * src/workspace_ng.h: Adapt to new function names in WMH.

        2004-11-18  Oliver Lemke  <olemke@core-dump.info>

        * arts-1-1-911-wr2

        * src/workspace_ng.cc:

        Added documentation.

        (Workspace::~Workspace): Empty ws array in destructor.

        (Workspace::Workspace): Define void pointer inside loop.

        * src/workspace_ng.{cc,h}: Added documentation.

        * ChangeLog: Fixed some typos in my previous entries.

        2004-11-04  Oliver Lemke  <olemke@core-dump.info>

        * arts-1-1-907-wr5

        * src/{main.cc,make_auto_md_cc.cc,wsv_aux.h,Makefile.am}:

        We don't need wsv_pointers anymore.

        * src/make_auto_wsv_pointers_cc.cc: Removed.

        * src/workspace_ng.h: Don't include vector.

        * src/{globals_2.cc,wsv_aux.cc,agenda_class.h,make_auto_wsv_h.cc}:

        Remove leftovers from old workspace.

        2004-11-01  Oliver Lemke  <olemke@core-dump.info>

        * arts-1-1-907-wr4

        * First working version of the new workspace. No new features yet, but
        at least it does the same as the old one in the same amount of time.

        * src/workspace_ng.{cc,h}:

        Make wsv_data only visible in cc file.

        Use Array instead of vector for ws.

        Added function is_occupied to imitate functionality of old workspace.

        Implemented destructor to clean up the mess we create on the heap.

        Kick out wsv_data, we only need N_WSV (include auto_wsv.h for this).

        (Workspace::operator[]): Allocate memory for wsv on first access.

        * src/agenda_class.cc:

        (Agenda::execute): Use the new workspace.

        Commented out workspace.set which no longer exists.

        * src/{globals_2.cc,make_auto_md_cc.cc,make_auto_md_h.cc}:

        Switch over to the new workspace.

        2004-10-29  Oliver Lemke  <olemke@core-dump.info>

        * arts-1-1-907-wr3

        * src/workspace_ng.{cc,h}:

        (Workspace::Workspace): Allocate a null pointer for each workspace
        variable.

        (Workspace::operator[]): Return the top of the stack of the workspace
        variable at index i.

        * src/Makefile.am:

        Added workspace_ng.{cc,h} to arts_SOURCES and make_auto_md_h_SOURCES.

        * src/make_auto_wsv_h.cc:

        Include supergeneric.h in auto source.

        Created class WorkspaceMemoryHandler. It contains a list of allocation
        and deallocation routines for all workspace groups. Additionally, it
        defines two lists of function pointers which link to the
        corresponding allocation/deallocation routine for each workspace
        variable. These lists enable the Workspace class to dynamically
        allocate workspace variables at runtime.

        2004-10-29  Oliver Lemke  <olemke@core-dump.info>

        * arts-1-1-907-wr2

        * src/workspace_ng.{cc,h}: Added.

        * src/Makefile.am: Added workspace_ng.{cc,h}.

        * src/globals_2.cc: Also create global instance of the new workspace.

        2004-10-28  Oliver Lemke  <olemke@core-dump.info>

        * arts-1-1-907-wr1

        * Created branch for reworking the workspace and agendas. Also
        includes creation of scope handling in control files.

2005-04-28  Claudia Emde  <claudia@sat.physik.uni-bremen.de>

        * arts-1-1-947
        
        * src/m_cloudbox.cc, m_scatrte.cc, m_batch.cc: Moved default setting of
        *doit_za_interp* from (cloudboxSetManually/Altitude) to
        (DoitInit), where it fits better.

        * src/m_optproperties.cc (pha_mat_sptFromDataDoitOpt): Modified
        temperature interpolation to make it a bit more efficient.
        
        * src/methods.cc, workspace.cc: Looked through online docu of functions related
        to DOIT. Minor corrections and modifications.
        
2005-04-26  Sreerekha T.R.  <rekha@uni-bremen.de>

        * arts-1-1-946

        * src/scatrte.cc (cloud_ppath_update1D_planeparallel): Fixed a bug
        in this function.  The function was not working before for
        stokes_dim > 1.  

        * src/m_optproperties.cc (pha_mat_sptFromDataDOITOpt,
        pha_mat_sptFromData): Another small bug.  Here, if you had more 
        than one pnd profile and if the first file had zero pnd, the function
        returned without going to the next profile. 

        * src/cloudbox.cc: In the temperature check, the maximum was set
        to 320 K, instead of 300 K. 

2005-04-26  Claudia Emde  <claudia@sat.physik.uni-bremen.de>

        * arts-1-1-945
        
        * src/cloudbox.cc (chk_single_scattering_data): Removed azimuth
        angle check for p20, because it is not needed. 

        * src/m_scatrte.cc: Increased maximum number of iterations in the
        convergence test functions, now it is 100. 

2005-04-20  Cory Davis  <cdavis@staffmail.ed.ac.uk>

        * arts-1-1-944

        * src/montecarlo.cc (Sample_ppathlengthLOS): Fixed a very silly
        bug that caused MC to fail for very optically thick cases. This
        bug only caused failure for cases where the first ppath step
        inside the cloud had a transmittance of less than 1e-12. (Patrick:
        This was the cause of problems I had with 640 GHz simulations last
        month)
        
2005-04-15  Claudia Emde  <claudia@sat.physik.uni-bremen.de>

        * arts-1-1-943
        
        * src/m_scatrte.cc (doit_iteration_counter): Put initialization of
        iteration counter at the beginning of this function so that the
        counting starts at zero for each frequency. 

        * src/m_scatrte.cc (DoitInit): Removed iteration counter here. 

2005-04-11  Oliver Lemke  <olemke@core-dump.info>

        * arts-1-1-942

        * src/matpackI.cc:

        Move VectorView constructor to the other VectorView functions.

        * src/make_array.h:

        Changed MakeArray<base>::MakeArray<base> to
        MakeArray<base>::MakeArray.
        Avoids invalid use of the constructor as a template.

        * src/make_auto_wsv_groups_h.cc:

        Add virtual destructor to class WsvP as every class that defines 
        virtual functions must have a virtual destructor.

        * src/m_abs_o2_models.cc:

        Comment out unused Numeric BE[] constant.

        (Zeeman_o2_line_splitting):

        Use BN_r++ instead of BN_r = BN_r++ to avoid undefined behaviour.
        Same for AN_r--.

2005-04-11  Oliver Lemke  <olemke@core-dump.info>

        * arts-1-1-941

        * src/matpackI.{h,cc}: Added two new VectorView constructors.

        (VectorView::VectorView(const Vector&)): Fail immediately if someone
        tries to create a VectorView from a const Vector.

        (VectorView::VectorView(Vector&)): Added to allow the creation of a
        VectorView from a non-constant Vector. Without this constructor, the
        VectorView::VectorView(const Vector&) will always be called which is
        not what we want.

        * src/cloudbox.{cc,h} (chk_single_scattering_data):
        
        Use ConstVectorView instead of 'const VectorView'.

2005-04-11  Claudia Emde  <claudia@sat.physik.uni-bremen.de>

        * arts-1-1-940

        * tests/data/pnd_field_1D.xml: Modified. The pnd_field did not
        match the p_grid for Cory's simpleMC, which resulted in a
        assertion error. This is now fixed.     

        * tests/data/(gas_abs_lookup.xml, gas_abs_lookup.xml.bin): Converted
        lookup table to binary format to make reading faster. 
        
        * tests/simpleDOIT.arts: Slightly modified.
        
        * tests/testall.py: Modified DOIT test. 

        python testall.py -v works !!!
        
2005-04-08  Claudia Emde  <claudia@sat.physik.uni-bremen.de>

        * arts-1-1-939
        
        * tests/simpleDOIT.arts: Added. It uses almost the same data as
        the Monte Carlo test file, only a different pnd_field for 1D and
        an optimized zenith angle grid for DOIT.

        * tests/data/doit_za_grid_opt.xml, pnd_field_1D.xml: Added.

        * tests/testall.py: Included simple DOIT test here. 

        * src/m_cloudbox.cc(ParticleTypeAdd): Included a warning, if no
        pnd_field_file is specified. Now it works to use (ParticleTypeAdd)
        and read pnd_field_raw separately, but I think it is not such a
        nice solution. In my opinion it is nicer to use
        (ParticleTypeAddAll) instead.

        * src/m_atmosphere.cc: Fixed a bug:
        
        surface_specular_los( surface_los , atmosphere_dim );

        needs as first input a vector but surface_los is a
        matrix. Included 

        surface_los(0, joker)

        instead. 
        Patrick, please check whether this is correct. 

2005-04-07  Patrick Eriksson  <Patrick.Eriksson@rss.chalmers.se>

        * arts-1-1-938

        * Changed slightly handling of surface properties, and fixed bug
        in surface WSMs.

        The old way works. An example:
        
            AgendaSet(iy_surface_agenda){
               InterpAtmFieldToRteGps(surface_skin_t,t_field){}
               surfaceFlat{"water-liebe93"}
               surfaceCalc{}
            }

        The new is that the surface properties can be specified seperately.
        This will make DOIT implementation simpler and needed for future
        Jacobian calculations (and for MC?). An example:

            AgendaSet(surface_prop_agenda){
               InterpAtmFieldToRteGps(surface_skin_t,t_field){}
               surfaceFlat{"water-liebe93"}
            }
            AgendaSet(iy_surface_agenda){
               AgendaExecute(surface_prop_agenda){}
               surfaceCalc{}
            }

        This tested through Qarts runs. Tests in /tests did not work. See email
        to arts-dev.

        * Fixed also a bug. I knew that I hade tested
        
        * src/agendas.cc: Added surface_prop_agenda. Removed i_space_agenda.

        * src/rte.cc (surface_calc): Created this function. Most code
        extracted from surfaceCalc.

        * src/m_atmosphere.cc (surfaceCalc): Now using surface_calc.

        * src/m_atmosphere.cc (surfaceFlat): Fixed bug. LOS was not changed
        to specular reflection. Got stuck in endless loop.
        (surfaceSingleEmissivity): As above.
        
2005-04-06  Claudia Emde  <claudia@sat.physik.uni-bremen.de>

        * arts-1-1-937

        * src/m_scatrte.cc (DoitAngularGridsSet): Included all
        angular grids here (fine grid for RT calculation and coarse
        grid for scattering integral). 
        (ScatteringDoit): Included check, whether *DoitInit* is performed
        before calling this function.

        * src/m_optproperties.cc: Adapted some variable names. 
        
        * src/workspace.cc: Corrected online docu for 
        *single_scattering_data*.

        * src/methods.cc: Included changes above. 
                
2005-04-05  Claudia Emde  <claudia@sat.physik.uni-bremen.de>

        * arts-1-1-936

        Renamed agenda, WSMs and WSVs. Long time back, we decided that all
        variables/methods related to scattering should start with scat... 
        Now it turned out theat most of the scat... variables are only
        used for doit, so I renamed them doit.... 
        I will put an updated working control file on the ARTS Wiki ASAP. 
        
        Updated the online documentation for many renamed agendas,
        WSMs and WSVs. 

        * src/agendas.cc: Renamed the following agendas: 
        grid_optimization_agenda --> doit_grid_optimization_agenda
        scat_field_agenda --> doit_scat_field_agenda
        scat_mono_agenda --> doit_mono_agenda   
        scat_rte_agenda --> doit_rte_agenda
        convergence_test_agenda --> doit_conv_test_agenda

        * src/methods.cc: Renamed the following WSM:    
        convergence_flagAbs --> doit_conv_flagAbs
        convergence_flagLsq --> doit_conv_flagLsq
        convergence_flagAbs_BT --> doit_conv_flagAbsBT
        i_fieldIterate --> doit_i_fieldIterate
        i_fieldSetClearsky --> doit_i_fieldSetClearsky
        i_fieldSetConst --> doit_i_fieldSetConst
        i_fieldUpdate1D --> doit_i_fieldUpdate1D
        i_fieldUpdateSeq1D --> doit_i_fieldUpdateSeq1D
        i_fieldUpdateSeq1D_PlaneParallel --> doit_i_fieldUpdateSeq1DPP 
        i_fieldUpdate3D --> doit_i_fieldUpdate3D
        i_fieldUpdateSeq3D --> doit_i_fieldUpdateSeq3D
        ScatteringDataPrepareDoitOpt --> DoitScatteringDataPrepare
        ScatteringGridOptimization --> DoitGridOptimization
        ScatteringMain --> ScatteringDoit
        scat_fieldCalc --> doit_scat_fieldCalc
        scat_fieldCalc1D --> doit_scat_fieldCalc1D      
        scat_fieldCalcLimb --> doit_scat_fieldCalcLimb
        scat_iPut --> DoitCloudboxFieldPut
        scat_za_gridOptimize --> doit_za_grid_optCalc
        scat_za_interpSet --> doit_za_interpSet
        grid_sizeSet --> DoitAngularGridsSet
        
        * src/workspace.cc: Renamed the following WSV:
        convergence_flag --> doit_conv_flag
        iteration_counter --> doit_iteration_counter
        i_field --> doit_i_field
        i_field_old --> doit_i_field_old
        scat_field --> doit_scat_field
        scat_za_grid_opt --> doit_za_grid_opt
        scat_za_interp --> doit_za_interp
        za_grid_size --> doit_za_grid_size

        * src/m_cloudbox.cc, m_optproperties.cc, m_scatrte.cc,
        scatrte.cc: Included new WSM, WSV and agenda names.     
        
2005-04-05  Claudia Emde  <claudia@sat.physik.uni-bremen.de>

        * arts-1-1-935
        
        * src/m_atmosphere.cc (AtmFieldsCalc): Included checks for the 
        dimension of the atmospheric data. 

        * src/m_cloudbox.cc (ParticleTypeAdd, ParticleTypeAddAll):
        Included checks for the single scattering data and the particle 
        numbre density fields.

        * src/cloudbox.{cc,h} (chk_pnd_data, chk_pnd_raw_data  
        chk_single_scattering_data): Created these functions. The last one
        checks the consistency of the single scattering properties file, 
        whether the dimensions of the data is consistent with the chosen 
        particle type. 

        * src/methods.cc: Modified input of WSMs ParticleTypeAdd and
        ParticleTypeAddAll.

        * AUTHORS: Updated.
        
        * doc/uguide/Figs/rte_theory/coordinate_system.pdf: Modified. Used the
        common ARTS symbols in this plot.
        
2005-03-29  Oliver Lemke  <olemke@core-dump.info>

        * arts-1-1-934

        * src/matpackII.cc: Include cmath for abs.

2005-03-22  Patrick Eriksson  <Patrick.Eriksson@rss.chalmers.se>

        * arts-1-1-933

        * src/m_montecarlo.cc (mc_errorApplySensor): Finished this function.

2005-03-21  Mattias Ekstrom  <ekstrom@rss.chalmers.se>

        * arts-1-1-932

        * doc/uguide/sensor.tex: Changed from MetaPost to pdf figures.

        * doc/uguide/Figs/sensor/integration.[mps,pdf]: Removed the mps
        version and added the pdf version.

        * doc/uguide/Figs/sensor/folding.[mps,pdf]: Removed the mps version
        and added the pdf version.

        * src/matpackII.[cc,h]: Added function abs( Sparse, const Sparse)
        that makes a copy of absolute values of the elements in the second
        input matrix.

        * src/test_sparse.cc: Test function for the abs method.

2005-03-16  Cory Davis  <cdavis@staffmail.ed.ac.uk>

        * arts-1-1-931

        * src/rng.cc: Changed output of rng seed from stream out2 to 
        stream out1.

2005-03-15  Patrick Eriksson  <Patrick.Eriksson@rss.chalmers.se>

        * arts-1-1-930

        * src/m_montecarlo.cc (mc_errorApplySensor): Started on this method.
        It is not completely finished. The absolute value of a sparse matrix
        elements must calculated. Mattias help!

        The only relevant sensor response with MC so far is polarisation.
        The idea is that, if the sensor is set-up:
           mc_errorApplySensor{}
        will give an error estimate for measured polarisations.

        Cory: What do you say. Look at on-line doc for assumptions.
        
        * src/m_atmosphere.cc (surfaceFlat): Fixed bug caused by unexpected
        matrix/vector interaction. Mail sent to arts-dev on the subject.

        (surfaceSingleEmissivity): As above.

        * src/rng.cc: Changed output of rng seed from stream cout to 
        stream out2.

2005-03-11  Oliver Lemke  <olemke@core-dump.info>

        * arts-1-1-929

        * ChangeLog: Removed conflict marker.

2005-03-07  Mattias Ekstrom  <ekstrom@rss.chalmers.se>

        * arts-1-1-928

        * src/agendas.cc: Added *jacobian_paarticle_update_agenda* which
        is used to update the scattered field when the particle number
        density field is perturbed during the calculation of the Jacobian.
        The agenda has to be specified by the user, and should for DOIT
        at least contain a call to ScatteringMain.

        * src/jacobian.[cc,h]: In get_perturbation_grid added flag for
        when dealing with pressure grid. Also fixed problems with
        finding the perturbation limits.

        * src/m_absorption.cc: Added WSM *gas_speciesAdd* that appends
        species to the end of *gas_species*. Can be used together
        with jacobianAddGas when you want the retrieval species first
        in the list.

        * src/m_jacobian.cc: Rewritten the particle part. Now the 
        particle jacobian is calculated using a predefined pertrubation
        field *pnd_field_perturb*, that has the same setup as *pnd_field*
        apart from having an extra dimension. The jacobian is calculated
        by iterating through all retrieval grid points and applying the
        the perturbation from *pnd_field_perturb* at that point. Note that
        the jacobian is only calculated for retrieval points inside or just
        outside the cloudbox, since no particles are allowed outside the 
        cloudbox.
        Also moved some stuff around for the pointing offset jacobian.

        * src/methods.cc: Added entry for *gas_speciesAdd*, and rewritten
        some of the jacobian online help texts.

        * src/workspace.cc: Added text to *jacobian* and added the 
        agenda *jacobian_particle_update_agenda*.

2005-03-07  Oliver Lemke  <olemke@core-dump.info>

        * arts-1-1-927
        
        * doc/index.html.in: Revert my previous change. OF COURSE we HAVE
        examples. There were just missing in the dist-tarball. :-(

        * doc/examples/Makefile.am: Add examples to EXTRA_DIST.

2005-03-07  Oliver Lemke  <olemke@core-dump.info>

        * arts-1-1-926
        
        * doc/index.html.in: Removed examples section.

2005-03-02  Cory Davis  <cdavis@staffmail.ed.ac.uk>

        * arts-1-1-925
        
        * src/montecarlo.cc (matrix_exp_p30): Added.  When we have p30
        particles (or a mixture of p20 and p30) there is a very
        simple and exact expression for the matrix exponential of the
        extinction matrix.  Using this instead of matrix_exp has given me
        a speed-up of approximately 2x for MC simulations.  Replaced all
        calls to matrix_exp in montecarlo.cc.  Claudia: it might be worth
        using this in DOIT?

        * src/montecarlo.{cc,h}: Moved all interpolation functions to
        mc_interp.{cc,h}
        
        * tests/simpleMC.arts : Modified for new
        ScatteringMonteCarlo keyword "z_field_is_1D" 

        * tests/simpleMCWithIncomingLookup.arts : Modified for new
        ScatteringMonteCarlo keyword "z_field_is_1D" 

2005-03-01  Cory Davis  <cdavis@staffmail.ed.ac.uk>

        * src/methods.cc (define_md_data_raw): removed scat_iPutMonteCarlo
        and added z_field_is_1D keyword parameter in ScatteringMonteCarlo.

        * src/m_montecarlo.cc (scat_iPutMonteCarlo): removed. Not
        used. Implemented z_field_is_1D keyword parameter in
        ScatteringMonteCarlo.
        
        * src/montecarlo.{cc,h}: removed mcGetIncomingFromData,
        ppathRecordMC, Sample_ppathlength

2005-02-28  Cory Davis  <cdavis@staffmail.ed.ac.uk>

        * arts-1-1-924

        * src/groups.cc (define_wsv_group_names): Added SLIData2

        * src/workspace.cc (define_wsv_data): changed group of mc_incoming
        to SLIData2.

        * src/xml_io_compound_types.{cc,h} (xml_read_from_stream): Added.
        (xml_write_to_stream): Added.

        * src/make_auto_wsv_h.cc (main): added << "#include
        \"mc_interp.h\"\n\n";

        * src/make_auto_wsv_groups_h.cc (main): added << "#include
        \"mc_interp.h\"\n\n";
        
        * src/Makefile.am (arts_SOURCES): added mc_interp.{cc,h}.

        * src/m_montecarlo.cc (ScatteringMonteCarlo): update
        incoming_lookup option.

        * src/xml_io_instantiation.{cc,h}: Added entries for SLIData2

        * src/mc_interp.{cc,h}: Added.

        * tests/simpleMCWithIncomingLookup.arts: Added. 

        * tests/testall.py (MonteCarloTest2): Added tests for new control
        file simpleMCWithIncomingLookup.arts. 

2005-02-25  Mattias Ekstrom  <ekstrom@rss.chalmers.se>

        * arts-1-1-923

        * src/jacobian.[cc,h]: Made helper function for finding perturbation
        limits for particle fields, considering that perturbations only take
        place in the cloudbox.

        * src/methods.cc: Added WSM AgendaExecute, and made changes to the
        jacobian WSM online help.

        * src/workspace.cc: Added WSV pnd_field_perturb, a Tensor5 that is
        used to input the perturbation field for particle jacobians to the
        WSM.

        * src/m_agenda.cc: Implemented AgendaExecute which takes an agenda
        as a generic input and executes it.

        * src/m_jacobian: New version of jacobianAddParticle and
        jacobianCalcParticle, not finished yet. Needs method to calculate
        the scattering properties.

2005-02-23  Claudia Emde  <claudia@sat.physik.uni-bremen.de>

        * arts-1-1-922
        
        * doc/uguide/scattering.tex: Removed old scattering chapter and
        included Chapter 4 from my thesis instead. How to use the
        different WVM is not yet included. Remover old descriptions
        because they are partly out-dated. 

        * doc/uguide/rte_theory.tex: Included here Chpter 1 from my
        thesis, a short description of radiative transfer theory in
        scattering media. Patrick's text is kept as a special case. The
        notation should be made consistent. 

        Fixed some links to equations in scattering chapter in the
        following files: 
        * integration.tex
        * lin_alg.tex
        * polarization.tex      
        * ppath.tex
        * references.bib

        * symbol_defs.tex: Included some new symbols for scattering part
        and also added \charef, \secref ... 
        May be we could all use these definitions in order to have
        consistent references.

        * Figs/scattering: Included figures.

        * Figs/rte_theory: Included figures. 
        
2005-02-21  Cory Davis  <cdavis@staffmail.ed.ac.uk>

        * arts-1-1-921

        * src/m_montecarlo.cc (ScatteringMonteCarlo): Incoroporated new
        arguments (see below), switch for incoming radiance calculation,
        and the use of mcPathTrace.  Changed variable name T to evol_op
        (evolution operator).

        * src/montecarlo.cc (mcGetIncomingFromData): Added.  For a given
        rte_pos, rte_los, this function returns the incoming 1D clear sky
        radiance by interpolating mc_incoming.
        (mcPathTrace): Added.  Performs the tasks of pathlength sampling,
        ray tracing (but now only as far as determined by pathlength
        sampling) and calculation of the evolution operator and several 
        atmospheric variables at the new point.

        * src/ppath.h: Added entry for ppath_start_stepping.

        * src/workspace.cc (mc_incoming): Added.  This is an ArrayOfMAtrix
        that holds precalculated incoming radiances on an [r, za] grid.

        * tests/simpleMC.arts: Updated for changes in
        ScatteringMonteCarlo. Still does `on the fly' incoming radiance
        calculations (incoming_lookup=0).  Will provide example using
        incoming_lookup=1 soon.

        * src/methods.cc (ScatteringMonteCarlo): Added mc_incoming as an
        output variable.  This is really an input variable, but is listed
        as an output so you dont have to define it if you are not using
        the "incoming_lookup" option.  If anyone has a better idea ...
        Added incoming_lookup keyword argument (boolean/Index). Updated
        doxygen string.

2005-02-16  Oliver Lemke  <olemke@core-dump.info>

        * arts-1-1-920

        * autogen.sh: Also test for automake 1.9.

        * Update on my last commit: automake1.9 was not the
        problem. SuSE picks up a dependency from make_auto_wsv_h.cc to class
        binio through absorption.h which defines a friend function with
        bifstream (derived from binio) as a parameter. So, I would tend to say
        SuSE's gcc is right when complaining about
        'undefined reference to `typeinfo for binio`' in
        make_auto_wsv_h.o (and others), but why all other gcc's don't see this
        is a mystery to me.

2005-02-16  Oliver Lemke  <olemke@core-dump.info>

        * arts-1-1-919

        * src/Makefile.am:

        Added binio.[cc,h] to make_auto_*SOURCES. Fixes build on SuSE 9.x.
        It seems automake1.9 has a different (not sure if better or worse yet)
        dependency tracking than prior versions.

2005-02-15  Patrick Eriksson  <Patrick.Eriksson@rss.chalmers.se>

        * arts-1-1-918

        * src/m_cloudbox.cc (cloudboxSetManuallyAltitude): The code allowed 
        that given altitudes were outside *z_field*, but run time errors were
        still issued. Removed these run time errors to more easily extend the
        cloud box to the atmospheric vertical limits (surface and TOA).

2005-02-15  Patrick Eriksson  <Patrick.Eriksson@rss.chalmers.se>

        * src/m_cloudbox.cc (cloudboxSetManuallyAltitude): 

        * arts-1-1-917

        * src/ppath.cc (ppath_start_stepping): Included RTOL when comparing
        surface radius with start of ppath. Numerical inaccuracy can here give
        problems.

2005-02-14  Mattias Ekstrom  <ekstrom@rss.chalmers.se>

        * arts-1-1-916

        * doc/uguide/Figs/sensor/integration.mps: Added this figure.

2005-01-25  Mattias Ekstrom  <ekstrom@rss.chalmers.se>

        * arts-1-1-915

        * doc/uguide/sensor.tex: Minor fixes.

        * src/methods.cc: Added WSM for calculating jacobians for particle
        number densities; jacobianAddParticle and jacobianCalcParticle

        * src/m_jacobian.cc: Implemented jacobianAddParticle and 
        jacobianCalcParticle. These functions bears a lot of similarities
        with the functions related to gas species. But instead of perturbing
        the vmr_field they change the pnd_field, and the perturbations are
        applied to all particle types not just one.
        The jacobianCalcParticle function is not yet functional, it still 
        remains to implement the actual rte calculations. Now this method
        only returns zero values for the jacobian.
 
2005-01-21  Mattias Ekstrom  <ekstrom@rss.chalmers.se>

        * arts-1-1-914

        * doc/uguide/sensor.tex: Updated the sensor part of the user guide.
        I've fixed all references and figures, but there are still a few
        fixme's that has to be fixed and probably som polishing of the text.

        * doc/uguide/Figs/sensor/folding.mps: Added figure that visualises
        the folding of the spectra in the mixer. 

2005-01-18  Mattias Ekstrom  <ekstrom@rss.chalmers.se>

        * arts-1-1-913

        * src/m_sensor.cc: Made changes to sensor_responseMultiMixer.

        * src/sensor.[cc,h]: Adapted multi_mixer_matrix to the changes.

2005-01-05  Mattias Ekstrom  <ekstrom@rss.chalmers.se>

        * arts-1-1-912

        * doc/uguide/sensor.tex: Worked on the sensor chapter.

        * src/jacobian.[cc,h]: Added function to automatically create the
        agenda for the jacobian. The agenda is filled with the WSM 
        jacobianCalc... methods, with gas species as keywords when needed.

        * src/m_jacobian.cc: Added the call to the agenda creating function.

        * src/m_sensor.cc: Included number of measurement blocks in the 
        conversion of RF to IF.

        * src/methods.cc:  Included *jacobian_agenda* as output in the
        jacobianAdd... methods.
 
2004-11-18  Mattias Ekstrom  <ekstrom@rss.chalmers.se>

        * arts-1-1-911

        * src/m_sensor.cc (ConvertIFToRF): Fixed small bug.

2004-11-16  Cory Davis  <cdavis@staffmail.ed.ac.uk>

        * arts-1-1-910

        * src/m_montecarlo.cc (ScatteringMonteCarlo): Fixed bug in
        termination condition for std_err

2004-11-15  Cory Davis  <cdavis@staffmail.ed.ac.uk>

        * arts-1-1-909

        * src/m_montecarlo.cc (ScatteringMonteCarlo): Fixed bug in input
        keyword check.

2004-11-12  Patrick Eriksson  <Patrick.Eriksson@rss.chalmers.se>

        * arts-1-1-908

        * doc/uguide/batch.tex: Some polishing of text. 

2004-10-28  Oliver Lemke  <olemke@core-dump.info>

        * arts-1-1-907

        * src/{geomag_calc.h,geomag_calc.cc,special_interp.h,agendas.cc,
        binio.cc,fastem.h,fastem.cc,legendre.cc,continua.h,m_abs_o2_models.cc,
        math_funcs.cc,m_continua.cc,m_continua_ckd.cc,m_optproperties.cc,
        m_scatrte.cc,optproperties.cc,montecarlo.h,scatrte.h,scatrte.cc}:

        Reindented. Please run make check in the src directory before
        committing to check whether your editor accidentally used tabs for
        indentation. (X)Emacs users should put the following in their startup
        file:

        (add-hook 'c-mode-common-hook
          (lambda ()
            (progn
              (setq indent-tabs-mode nil))))

        Vim users please add this to .vim/ftplugin/c.vim:

        setlocal expandtab
        setlocal cindent
        setlocal shiftwidth=2
        setlocal tabstop=2
        setlocal textwidth=78
        setlocal cino=>2s,e-s,n-s,f0,{s,}0,^-s,:s,=s,l0,g0,hs,ps,t0,+s,c3,/N0,(0,u0,)100,*100
        setlocal formatoptions=croqlt

2004-10-27  Claudia Emde  <claudia@sat.physik.uni-bremen.de>

        * arts-1-1-906
        
        * src/cloudbox.cc (iy_interp_cloudbox_field): Fixed bugs in the
        check, whether a pont is on the cloudbox boundary. rte_gp_p was is
        several places wher is should be rte_gp_{lat, lon}.

2004-10-26  Mattias Ekstrom  <ekstrom@rss.chalmers.se>

        * arts-1-1-905

        * src/absorption.[cc,h]: Moved part functionality of gas_speciesSet
        here to method array_species_tag_from_string.

        * src/m_absorption.cc: Moved the conversion from String to 
        ArrayOfSpeciesTag to absorption.cc. This function is also needed 
        by the jacobian functions for gases.

        * src/agendas.cc: Added *jacobian_agenda* used to perform the final
        calculations of the Jacobian matrix.

        * src/methods.cc: Added methods for setting up the Jacobian for
        gas species (*jacobianAddGas* and *jacobianCalcGas*) and  temperature
        (*jacobianAddTemperature* and *jacobianCalcTemperature*). Also 
        implemented function for calculating the zenith angle pointing
        jacobian (*jacobianCalcPointing*) and the function *jacobianCalc* 
        that calls the *jacobian_agenda*.

        * src/workspace.cc: Added *jacobian_agenda* and a vector 
        *sensor_time* used to add a time dimension to the measurement
        blocks. Currently only used while calculating polynomial pointing
        offsets by *jacobianCalcPointing*.

        * src/xml_io_compound_types.cc: Changed type of jacobianindices
        from Vector to ArrayOfIndex.

        * src/jacobian.[cc,h]: Changed JacobianIndices to ArrayOfIndex.
        Added helper functions for the jacobian WSM.
        check_retrieval_grids, get_perturbation_grid,
        get_perturbation_range, perturbation_field_1d, perturbation_field_2d
        and perturbation_field_3d.

        * src/m_jacobian.cc: Implemented *jacobianAddGas*, 
        *jacobianAddTemperature*, *jacobianCalc*, *jacobianCalcGas*,
        *jacobianCalcPointing* and *jacobianCalcTemperature*. Some minor
        changes to already existing functions. 
        
2004-10-26  Oliver Lemke  <olemke@core-dump.info>

        * arts-1-1-904

        * src/parameters.cc: Added commandline option --plain.

        * src/parameters.h: Added attribute plain to Parameters.

        * src/main.cc (option_methods, main):

        Omit special formatting for method, group, and wsv lists if --plain
        was specified.

        * doc/reference/{arts_groups_to_latex.sh,arts_methods_to_latex.sh,
        arts_variables_to_latex.sh}:

        Use --plain instead of grep/sed.

2004-10-21  Patrick Eriksson  <Patrick.Eriksson@rss.chalmers.se>

        * arts-1-1-903

        * doc/uguide/surface.tex: When looking for other stuff, I found 
        that Vol. 1 of Ulaby contains equations that relates surface
        reflectivity and emissivity. Based on this, I now feel more sure that
        the general expression for emission from flat surfaces I derived is
        correct. I then updated section.

        However, some things must be confirmed. Can anyone having the
        Mischenko book check if it confirms Eq. 7.7, 7.8 and 7.14, or if
        it says something different. As the scattering part is based on
        Mischenko, we should use those definitions as far as possible. For
        example, it seems that different text books differs with a factor
        of -1 for the Fresnel expression of Rv. 

2004-10-14  Cory Davis  <cory@geosl504>

        * arts-1-1-902

        * Main points: Some improvements in usability for
        ScatteringMonteCarlo.  Now, you can specify max_iter as before,
        and/or the desired standard error in the simulated radiance *std_err*,
        and/or the maximum amount of time you are willing to wait for the
        answer *max_time*.  ScatteringMonteCarlo terminates once any of
        these criteria are met.  If std_err, max_iter, or max_time (all
        keyword arguments) are negative, then the relevant criteria is
        ignored.  I think this is nice :)
        
        * src/workspace.cc (mc_error):Used to be called
        i_montecarlo_error.  Now it refers to the actual error *at* the
        sensor!, which is much more useful.  This has been enabled by
        calculating the clear-sky optical depth between the cloudbox and
        sensor in the first step of ScatteringMonteCarlo 

        * src/m_montecarlo.cc (ScatteringMonteCarlo): Changed input and
        output variables, and allowed error-based or time-based termination
        criteria.  See ArtsWiki for details!

        * src/workspace.cc (mc_iteration_count): Added.  This is output by
        ScatteringMonteCarlo. Useful when you use std_err of max_time to
        terminate ScatteringMonteCarlo.

        * src/montecarlo.cc (opt_depth_calc):
        Added. (Cloudbox_ppath_rteCalc) For some reason all the other
        changes here did something to Patricks recent ppath_calc changes
        in the MC algorithm, which resulted in an assert failure in
        ppath_calc.  This problem went away when I changed back to using
        Cloudbox_ppathCalc.  This is a temporary measure until I find out
        what is going on.

        * tests/testall.py (MonteCarloTest): Used *mc_error* to determin
        allowed range for Stokes Vector. 

        * tests/simpleMC.arts : Changed to account for changes in
        ScatteringMonteCarlo.  Used max_time = 20 seconds.

        
2004-10-13  Oliver Lemke  <olemke@core-dump.info>

        * arts-1-1-901

        * ChangeLog: Removed conflict markers.

2004-10-12  Patrick Eriksson  <Patrick.Eriksson@rss.chalmers.se>

        * arts-1-1-900

        * Main things:
        Some cleaning and fixed so ppath_calc can be used from MC part.
        Some code and functions in MC are now obselete but left until changes
        are tested more carefully (testall.py runs fine!).

        Some old code removed in clear sky part.
        
        Code now compiles with Numeric=float. Clear sky part seems to
        work. Error when reading a scattering properties file. See email to
        arts-dev.

        Obvoius error in iy_interp_cloudbox_field fixed.
        
        * src/cloudbox.cc (iy_interp_cloudbox_field): Fixed problem pointed
        out by Cory. Typo made that scat_i_p was used instead of scat_i_lon.

        * src/rte.cc: Removed rte_calc_old and get_radiative_background_old.

        * src/m_rte.cc (RteEmissionStd): Mean of log(p) is now used (instead
        of mean of p).
        
        * src/m_abs_o2_models.cc (CEF): 
        src/m_atmosphere.cc (surfaceFlat):      
        src/refraction.cc (refr_index_ir): 

        Included type casting of fixed numeric values to avoid compilation
        warning with Numeric = float.

        * src/interpolation.cc: Changed FD_TOL from 1e-4 to 1e-3 to get
        Numeric=float to run. 

        * src/ppath.cc (ppath_calc): Made necessary changes to allow
        that the function is also used for MC inside the cloud box.

        * src/m_montecarlo.cc 
        (scat_iPutMonteCarlo): Replaced i_rte with
        iy, which is new variable with same purpose. This method is obselete
        but is left until things have been checked more carefully. 

        (ScatteringMonteCarlo): Replaced call of Cloudbox_ppathCalc with
        call of ppath_calc.
        
        * src/montecarlo.cc (Cloudbox_ppath_rteCalc): Replaced call of
        Cloudbox_ppathCalc with call of ppath_calc.

        * src/workspace.cc: Removed surface_refl_coeffs and i_rte.

        * src/m_atmosphere.cc: Removed surfaceTreatAsBlackbody.

        * src/agendas.cc: Removed surface_agenda. 

        * Untabified some files, but stop to avoid possibel merge problems
        if someone else does the same until I have a chance to commit.

2004-10-12  Cory Davis  <cory@fog>

        * arts-1-1-899

        * src/cloudbox.cc (iy_interp_cloudbox_field): scat_i_lon is only
        used in asserts. Added stupid code until someone fixes this properly.

2004-10-11  Cory Davis  <cory@fog>

        * arts-1-1-898

        * src/rng.cc: untabified.

        * src/rng.h: untabified.

        * src/m_montecarlo.cc: untabified.

        * src/montecarlo.cc: untabified.

        * src/montecarlo.h: untabified.

2004-10-06  Oliver Lemke  <olemke@core-dump.info>

        * arts-1-1-897

        * tests/Makefile.am: Run testall.py with 'make check'.

        * tests/.cvsignore: Ignore *.rep.

2004-10-07  Cory Davis  <cory@fog>

        * arts-1-1-896

        * tests/simpleMC.arts: Changed the scenario to one that is similar
        to a scenario that failed yesterday due to a problem with
        ppath_calc.  This problem has been temporarily fixed by reverting
        to Cloudbox_ppathCalc, so the tests described below now pass.

        * tests/data: removed files associated with the previous MC
        scenario and replaced them with new ones.  This has involved
        including a single p30 scattering data file, which is quite large
        (4MB). Oliver, can you suggest a way to mitigate any slow-down
        this will cause CVS? (admin -kb ?). Although this large file is a
        bit of a pain, I think it is vital to include a p30 test case
        because it really tests the polarization performance of arts.

        * tests/testall.py: Changed accuracy thresholds for new scenario.
        Here is the new output:

        [cory@fog tests]$ python testall.py -v
        Simple Monte Carlo test should run with no errors ... ok
        Total radiance should be close to 201.8 K ... ok
        Polarization difference should be close to 7.6 K ... ok
        
        ----------------------------------------------------------------------
        Ran 3 tests in 39.393s
 
        OK

        Can I ask that people please run this before
        committing to arts?  If you are uncomfortable with the length of
        time the test takes (40s), we can reduce the photon numbers and
        increase the accuracy tolerance. 

2004-10-07  Cory Davis  <cory@localhost.localdomain>

        * arts-1-1-895
        
        * tests/testall.py (ArtsRun): A baby arts run class for the
        handling of test cases. 
        (MonteCarloTest): Added tests for the accuracy of the total
        radiance and polarization difference. OK Oliver, lets see your
        makefile do this! ;)
        

2004-10-06  Cory Davis  <cory@localhost.localdomain>

        * arts-1-1-894

        * src/m_montecarlo.cc (ScatteringMonteCarlo): Although MC was
        running without crashing - it was giving the wrong answer by a
        mile. Something was wrong with using ppath_calc inside the
        cloud-box.  Maybe in particular when starting from the boundary
        looking in.  Changed back to using Cloudbox_ppathCalc.  Now I seem
        to be able to replicate some old runs.

        * src/montecarlo.{cc,h}: moved Cloudbox_ppathCalc here from m_montecarlo.cc.

2004-10-06  Cory Davis  <cory@geosl504>

        * arts-1-1-893

        * tests/testall.py: Added.  Performs arts unit tests.  Usage:
          python testall.py -v.

        * tests/simpleMC.arts: This is basically the control file created
        by Patrick after recent arts changes.  The only difference is that
        I have used ParticleTypeAddAll, which makes the control file a lot
        shorter.  This control file should run with no errors.

        * tests/data/*.xml: Added all the files needed to run simpleMC.arts.

2004-10-06  Oliver Lemke  <olemke@core-dump.info>

        * arts-1-1-892

        * src/check-code-tab-indent.sh:

        Added. Checks if tabs are used in source code for indentation.

        * src/check-code-cheaders.pl: Less output.

        * src/Makefile.am: Added check-code-tab-indent.sh to tests.

2004-10-06  Oliver Lemke  <olemke@core-dump.info>

        * arts-1-1-891

        * tests/Makefile.am: Added.

        * tests/.cvsignore: Added.

        * tests/data/.cvsignore: Added.

        * configure.in: Create tests/Makefile.

        * Makefile.am: Added tests to SUBDIRS.

        * doc/examples/Makefile.am: Commented out check target.

2004-10-05  Patrick Eriksson  <Patrick.Eriksson@rss.chalmers.se>

        * arts-1-1-890

        * Monte Carlo calculations now works again. And even better, works
        with iy_cloudbox_agenda. This makes a control file for MC much
        simpler. I will send out an example.

        * src/m_scatrte.cc (DoitInit): Renamed ScatteringInit to DoitInit.
        This as I got confused of the name and it took me quite some time
        to check what it does. I though it did general tasks, but it does
        only pure DOIT stuff.

        * src/rte.cc (get_radiative_background): Included improved error
        message made by Cory for other backgrounds than space.

        * src/interpolation.cc (is_gridpos_at_index_i): Moved back to old code,
        that was replaced for version 1-1-885. New code clearly a bad idea
        after more careful consideration.

2004-10-04  Cory Davis  <cory@localhost.localdomain>

        * arts-1-1-889

        * src/montecarlo.{cc,h}: Made innumerable changes dealing with Patrick's
        changes.

        * src/m_montecarlo.cc: Made innumerable changes dealing with Patrick's
        changes.  ScatteringMonteCarlo will now run, but will eventuallly
        run into as assert failure due to a new problem with ppath_calc.

        * src/methods.cc: Modified ScatteringonteCarlo reference.  Removed
        Cloudbox_ppathCalc.
        

2004-09-30  Oliver Lemke  <olemke@core-dump.info>

        * arts-1-1-888

        * doc/doxygen/latex/.cvsignore: Added *.ttf.

        * src/m_batch.cc: Include cmath to fix compilation with newer gcc.

2004-10-01  Patrick Eriksson  <Patrick.Eriksson@rss.chalmers.se>

        * arts-1-1-887

        * DOIT part updated to recent changes. Warnings/limitations:
           - iyInterpCloudboxField not tested practically for 3D
           - CloudboxGetIncoming1DAtm not tested after modification
           - Cloud box can not include the surface (which anyhow was not 
             possible for 3D before). This should be fixed on the same time
             as sensor positions inside the cloud box are accomodated.
        
        * src/scatrte.cc (cloud_ppath_update1D): Removed old surface
        variables and changed to iy_surface_agenda.
        (cloud_ppath_update1D_planeparallel): As above.

        * src/m_scatrte.cc 
        (i_fieldUpdateSeq1D): Removed old surface variables and changed to
        iy_surface_agenda.
        (i_fieldUpdateSeq1D_PlaneParallel): As above.

        * src/cloudbox.cc (cloudbox_boundary_check): Removed this function.
        (cloudbox_getOutgoing3D): Removed this function.
        (cloudbox_getOutgoingCubic1D): Removed this function.
        (cloudbox_getOutgoing1D): Removed this function.

        * src/m_cloudbox.cc 
        (CloudboxSetIncomingForTauCalc1D): Removed this method.
        (CloudboxGetIncomingOld): Removed this method.
        (CloudboxGetOutgoing): Removed this method.
        (CloudboxGetOutgoingCubic): Removed this method

        (CloudboxGetIncoming1DAtm): Modified to use iy_calc instead of
        rte_Calc_old. And included check that 3D atmosphere is set.
        
        * src/m_batch.cc 
        (ybatchMetProfiles): Moved function from m_cloudbox.cc.
        (ybatchMetProfilesClear): Moved function from m_cloudbox.cc.

2004-09-30  Patrick Eriksson  <Patrick.Eriksson@rss.chalmers.se>

        * arts-1-1-886

        * src/cloudbox.cc (iy_interp_cloudbox_field): Complete code for 3D
        added, but no practical tests.

        * src/m_cloudbox.cc (CloudboxGetIncoming): Put in if statement to
        only make calculations for first azimuth angle for za = 0 and 180,
        and use that result for all azimuth angles. This is possible as
        all azimuth angles give the same result, and accordingly some time
        is saved. This only for 3D, of course.

2004-09-29  Patrick Eriksson  <Patrick.Eriksson@rss.chalmers.se>

        * arts-1-1-885

        * Bug fixed. And succesful test with a 1D DOIT case. Same result
        obtained with this version and 1-1-873.

        * src/rte.cc (rte_step_std): Included assert moved from RteEmissionStd:
           assert (!is_singular( ext_mat_av ));   

        * src/m_rte.cc (RteEmissionStd): Removed unnecessary variables
        ext_mat_av and abs_vec_av. Moved an assert to rte_step_std.

        * src/m_atmosphere.cc (surfaceCalc): Some cheks of input do not
        make sense when surface is treated to be a blackbody. Fixed.

        (surfaceBlackbody): Values of surface_emission for stokes_dim > 1
        were not set to zero.

        * src/interpolation.cc (is_gridpos_at_index_i): Added a missing
        fabs. This was the reason to the general bug in the ppath part.

2004-09-29  Patrick Eriksson  <Patrick.Eriksson@rss.chalmers.se>

        * arts-1-1-884

        * WARNING: There seems to be some problem in the ppath part.
        Anyhow, no correct spectra are provided. Will look at this ASAP,
        but can not right now.
        
        * src/cloudbox.cc (iy_interp_cloudbox_field): Moved code from
        iyFromCloudboxField to create this function, and continued coding.
        1D is now complete but not tested.

        * src/m_cloudbox.cc: 
        (iyInterpCloudboxField): Introduced this WSM.
        (iyInterpCubicCloudboxField): Introduced this WSM.
        (iyFromCloudboxField): Removed.

2004-09-28  Patrick Eriksson  <Patrick.Eriksson@rss.chalmers.se>

        * arts-1-1-883

        * No new external functionality, but some internal improvements and
        further work on iyFromCloudboxField.

        * src/m_cloudbox.cc (iyFromCloudboxField): More work, but not 
        finished.

        * src/ppath.cc (ppath_calc): Included usage of fractional_gp.

        * src/interpolation.cc: Introduced file-global constant FGP_TOL,
        to set a measure on precision on fractional grid distances.

        (fractional_gp): Made this function. Basically adds gp.idx and
        gp.fd[0].

        (gridpos): Included description of allowed extrapolataion of half
        grid range in function header. Was only commnted inside function.

        (is_gridpos_at_index_i): Modified, now uses FGP_TOL and will be more
        robust than old version.

2004-09-27  Patrick Eriksson  <Patrick.Eriksson@rss.chalmers.se>

        * arts-1-1-882

        * src/m_cloudbox.cc (iyFromCloudboxField): Just a start for a
        replecement of CloudboxGetOutgoing (time to go home!).

        * src/m_atmosphere.cc (surfaceTreatAsBlackbody): Reintroduced this
        method. Just for the purpose to get a test case running (needed 
        to define an old surface_agenda for i_fieldUpdateSeq1D).

        * src/m_cloudbox.cc 
        (CloudboxGetIncoming): Made new version of
        this function. Now works with new agendas, iy_calc etc.

        (CloudboxGetIncomingOld): The old version, renamed.

        * src/rte.cc (iy_calc): Introduced local variable outside_cloudbox.

        * src/interpolation.cc (gridpos_force_end_fd): Small change
        in header.

2004-09-24  Patrick Eriksson  <Patrick.Eriksson@rss.chalmers.se>

        * arts-1-1-881

        * src/rte.cc (surface_specular_R_and_b): Made this function.

        * src/m_atmosphere.cc (surfaceFlat): The function now works. But
        there is only a dielectric model for water at 10 - 1000(?) GHz.
        Please add more.

2004-09-22  Patrick Eriksson  <Patrick.Eriksson@rss.chalmers.se>

        * arts-1-1-880

        * doc/uguide/surface.tex: Finished chapter up to specular
        reflections.

        BUT EQUATIONS 7.11 AND 7.17 MUST BE CONFIRMED (Sreerekha please
        compare to the part in Mischenko you mentioned. Is my derivation of
        surface emission correct?)

        * doc/uguide/ppath.tex: Updates of surface, space and cloudbox parts
        to recent changes in code.
        
        * doc/uguide/ppath.tex: ppath_step_agenda was indexed as WSV. 

        * doc/uguide/scattering.tex: Fixed one indexing of an agenda as WSV.

        * doc/uguide/montecarlo.tex: Commented out two labels with same name,
        but with no reference. Tex-ing gives now no reference/label warnings.

        * doc/uguide/agendas.tex (section{Workspace Variables or WSVs}): 
        Removed reference to removed appendix.

2004-09-21  Patrick Eriksson  <Patrick.Eriksson@rss.chalmers.se>

        * arts-1-1-879

        * src/m_atmosphere.cc (surfaceFlat): Further work on this WSM. Not yet
        ready. Dielectric constant for "water-liebe93" checked against
        epswater93.m in Atmlab.

        * src/physics_funcs.cc (fresnel): Created this function. Checked
        against Atmlab function with same name.

2004-09-21  Patrick Eriksson  <Patrick.Eriksson@rss.chalmers.se>

        * arts-1-1-878

        * Surface part slightly changed. Basically the same scheme as used
        before last changes, but moved outside RteCalc. That is,
        surface_emission etc. are back, with the change that
        surface_refl_coeffs is now called surface_rmatrix.  These
        variables shall be provided to surfaceCalc, which is a totally
        general method for iy_surface_agenda. An example:
        
        AgendaSet(iy_surface_agenda){
              InterpAtmFieldToRteGps( surface_skin_t, t_field ){}
              NumericSet( numeric_1 ){ 0.75 }
              surfaceSingleEmissivity( numeric_1 ){}
              surfaceCalc{}
           }

        * src/m_atmosphere.cc: Created WSMs:
           surfaceBlackbody 
           surfaceCalc
           surfaceSingleEmissivity 

        Started on
           surfaceFlat (specular reflection where a model for dielectric
                        constant is specified)
        
        * src/workspace.cc: Introduced numeric_1 and numeric_2 (this has 
        nothing to do with the emails exchange about Set methods, needed
        for e.g. surfaceSingleEmissivity).

        Surface WSVs are now (with possible update of old descriptions):
          surface_emission
          surface_los
          surface_rmatrix
          surface_skin_t

2004-09-20  Oliver Lemke  <olemke@core-dump.info>

        * arts-1-1-877

        * src/workspace.cc:

        Added variables nelem, ncols, nrows, npages, nbooks, nshelves,
        nvitrines, nlibraries.

        * src/methods.cc:

        Modified VectorSet, MatrixSet, Tensor[34567]Set. Size are now
        determined by input variables and no longer by keywords.

        Old:
        MatrixSet( matrix_1 ){ nrows=2 ncols=3 value=5. }

        New:
        IndexSet( nrows ){ 2 }
        IndexSet( ncols ){ 2 }
        MatrixSet( matrix_1 ){ 5. }

        Added WSMs nelemGet, ncolsGet, nrowsGet, npagesGet, nbooksGet,
        nshelvesGet, nvitrinesGet, nlibrariesGet. These methods retrieve the
        size from the given workspace variable and store them in the
        corresponding workspace variable. Example: To set p_grid to the same
        size as f_grid you can use:

        nelemGet( f_grid ){}
        VectorSet ( p_grid ){}

        nelemGet sets the WSV *nelem* to the size of f_grid. And VectorSet
        resizes p_grid taking the value of *nelem*.

        Removed MatrixSetTakingSizeFromMatrix and
        VectorSetTakingLengthFromVector.

        * src/m_basic_types.cc:

        Replaced all occurences of shelfs with shelves.

        Removed MatrixSetTakingSizeFromMatrix and
        VectorSetTakingLengthFromVector.

        * src/m_basic_types.h: Added.

        Added functions for WSMs nelemGet, ncolsGet, nrowsGet,
        npagesGet, nbooksGet, nshelvesGet, nvitrinesGet, nlibrariesGet.

        * src/make_auto_md_cc.cc:

        Include m_basic_types.h in auto_md.cc.

        * src/Makefile.am: Added m_basic_types.h to ARTS_SOURCES.

        * src/m_general.h:

        Removed duplicate doxygen comment. First time I saw too much
        documentation in a file. ;-)

2004-09-20  Patrick Eriksson  <Patrick.Eriksson@rss.chalmers.se>

        * arts-1-1-876

        * Larger changes. Calculations without cloudbox shall work. Test
        runs look OK. Changes needed in MC and DOIT parts.

        New and removed WSVs and WSMs commented in emal to arts-dev.

        * src/m_rte.cc: General revision of RteCalc, and inclusion of code
        form rte_calc.

        * src/rte.cc: General revision of get_radiative_background and iy_calc.
        Code of rte_calc moved to RteCalc.

        (rte_step_std): Renamed to rte_step to this name. To indicate that
        other versions are possible,a nd in line with WSM RteEmissionStd.
        
        (surface_specular_los): Surface tilt is now NOT considered.

        * src/m_atmosphere.cc: Put all surface methods at end and behind //

        (surfaceSpecular): Created this method.

        * src/m_cloudbox.cc (cloudboxOff): Changed to a smaller set of 
        variables given dummy values.

        * src/m_physics.cc (MatrixPlanck): Temperature is now general WS input,
        and not keyword argument.

        * src/m_general.cc (Error): Created this WSM. 

2004-09-19  Patrick Eriksson  <Patrick.Eriksson@rss.chalmers.se>

        * arts-1-1-875

        * First step of cleaning up RT part. No changes in control
        filesyet needed.
        
        * src/ppath.cc: Removed not used input argument agenda_verb.

        * src/rte.h: Removed unneccessary headers (one function did not even
        exist!).

        * src/workspace.cc: 
         
        iy: Added. This WSV will replace i_rte. I had a very hard time to
        decide the name of this variable. I was not happy with old
        name. New name is more compact which makes connected aganda and
        method names nicer, and indicates the connection to *y*. New name
        not perfect, but better.

        yi_cloudbox_agenda: Added.
        
        yi_space_agenda: Added. Will replace i_space_agenda.

        * src/rte.cc:

        (rte_calc_old): Created copy of old version.

        (get_radiative_background_old): Created copy of old version.

        (rte_step): Included code from stokes_vecGeneral to avoid some 
        calculation repitions. I could not see any use to keep the functions
        seperated.

        (stokes_vecGeneral): Removed this function.

        (iy_calc): Created this function.

2004-09-16  Patrick Eriksson  <Patrick.Eriksson@rss.chalmers.se>

        * arts-1-1-874

        * src/methods.cc: Removed batch_pre_agenda. I realised that it just
        made things more difficult. Involved function fixed.

        * doc/uguide/batch.tex: Finished the chapter. 

2004-09-16  Mattias Ekstr�m <ekstrom@rss.chalmers.se>

        * arts-1-1-873

        * src/Makefile.am: Added m_jacobian in test_geomag_calc sources.

        * src/jacobian.h: Added functions for setting fields in class
        RetrievalQuantity.

        * src/m_jacobian.cc: Added WSM jacobianAddPointing used to add a 
        pointing offset (polynomial) to the jacobian.
        Also added function jacobianClose that finalises the WSV jacobian
        and jacobian_quantities. It also sets some of the fields in the
        RetrievalQuantity that are not set by the user.
        And finally WSM jacobianInit that starts up the process of defining
        what the user wants to retrieve, has been implemented.

        * src/methods.cc: Added WSMs jacobianInit, jacobianAddPointing and
        jacobianClose.

        * src/xml_io_compund_types.cc: Changes to xml routine for
        RetrievalQuantity.

2004-09-16  Patrick Eriksson  <Patrick.Eriksson@rss.chalmers.se>

        * arts-1-1-872

        * doc/uguide/batch.tex: Started on writing.

2004-09-16  Claas Teichmann  <claas@sat.physik.uni-bremen.de>

        * arts-1-1-871

        * doc/uguide/polarization.tex (section{Plane monochromatic waves}): 
        fixed sign in {eq:polarization:stokesparam_U}

2004-09-16  Oliver Lemke  <olemke@core-dump.info>

        * arts-1-1-870

        * src/Makefile.am:

        Added m_batch.cc to test_geomag_calc sources to remove compilation
        problem.

2004-09-16  Patrick Eriksson  <Patrick.Eriksson@rss.chalmers.se>

        * arts-1-1-869

        * Batch calculations tested with success. It works. 

        * src/gas_abs_lookup.h/cc: Made member functions GetFgrid and
        GetPgrid.

        * src/methods.cc: Some smaller changes for batch variables. Added
        f_gridFromGasAbsLookup and p_gridFromGasAbsLookup. 

        * doc/uguide/batch.tex: Just created this file and included it in
        main. No writing yet.

2004-09-15  Patrick Eriksson  <Patrick.Eriksson@rss.chalmers.se>

        * arts-1-1-868

        * src/m_batch.cc: Added this file and implemented WSMs added to
        methods.cc. It compiles but no practical test yet.

        * src/methods.cc: Arranged methods in alphabetical order. Or
        at least something close to it. There were many many methods
        to move around. After an update I got a crash with Mattias commit
        and there were so many merge problems that I could not resolve
        it. I had to make a seperate checkout, copy that methods.cc
        and start all over. In total I have spent > 1 hour on this. 
        So please try to think about things like these. Not fun at
        all to sort it out.

        Added: ybatchCalc, BatchUpdateMatrix, BatchUpdateNumeric,
        BatchUpdateTensor3 BatchUpdateTensor4 and BatchUpdateVector.

        * src/agendas.cc: Added agendas for batch calcations 
        (batch_XXX_agenda).

        * src/workspace.cc: Arranged variables in alphabetical order. 
        Added: ybatch, ybatch_index, ybatch_n, tensor3_2, tensor4_1, 
        tensor4_2, tensor5_2.

2004-09-15  Mattias Ekstr�m <ekstrom@rss.chalmers.se>

        * arts-1-1-867

        * src/Makefile.am: Added jacobian.h and jacobian.cc to 
        test_geomag_calc sources to remove compilation problem.

2004-09-15  Mattias Ekstr�m <ekstrom@rss.chalmers.se>

        * arts-1-1-866

        * src/jacobian.[cc,h]: Added these to files. The header files 
        describes the class RetrievalQuantity, which will be used to set up 
        the jacobian matrix. It also defines ArrayOfRetrievalQuantity.

        * src/m_jacobian.cc: Added this file. Empty so far.

        * src/Makefile.am: Added the above mentioned files to arts sources.

        * src/groups.cc: Added ArrayOfRetrievalQuantity.

        * src/make_auto_wsv_groups_h.cc: Included jacobian.h in
        auto_wsv_groups.h.

        * src/make_auto_wsv_h.cc: Included jacobian.h in auto_wsv.h.

        * src/workspace.cc: Added *jacobia*,*jacobian_quantities*,
        *jacobian_lat_grid*,*jacobian_lon_grid* and *jacobian_p_grid*.
        The *jacobian* variable is the Jacobian matrix itself, 
        *jacobian_quantities* describes the retrieval quantities and the
        grid variables are definition grid for the jacobian quantities.

        * src/xml_io_compund_types.[cc,h]: Added functions for reading and
        writing RetrievalQuantity to xml files.

        * src/xml_io_array_types.[cc,h]: Added functions for reading and
        writing ArrayOfRetrievalQuantity.

        * src/xml_io_instantiation.h: Added headers for the functions
        added in xml_io_compund_types.[cc,h] and xml_io_array_types.[cc,h].

        * src/sensor.cc: Changes made to multi_mixer_matrix.

2004-09-13  Oliver Lemke  <olemke@linux.net>

        * arts-1-1-865

        * src/file.{cc,h}:

        Removed unimplemented function prototypes binfile_*.

        Removed obsolete string io and matrix/vector io routines.

        Only functions needed by the parser and for the writing of the report
        files are left.

2004-09-13  Oliver Lemke  <olemke@linux.net>

        * arts-1-1-864

        * src/main.cc (main): Remove HDF info in --version output.

2004-09-09  Claudia Emde  <claudia@sat.physik.uni-bremen.de>

        * arts-1-1-863

        * src/m_cloudbox.cc (ParticleYypeAddAll): Modified. Now it takes
        as input for the scattering data one filename. This file should
        contain all the filenames which  belong to the pnd_field_raw,
        which is also added in this function. 
        The file containing the filenames can be generated with PyARTS. 

        * methods.cc: Modified entry for (ParticleTypeAddAll).
        
2004-09-08  Claudia Emde  <claudia@sat.physik.uni-bremen.de>

        * arts-1-1-862
        
        * src/workspace.cc: Included variable *arrayofstring_1* for test
        purposes.

2004-09-03  Claudia Emde  <claudia@sat.physik.uni-bremen.de>

        * arts-1-1-861

        * src/m_optproperties.cc: Modified T-interpolation. Now the
        temperature can be slightly outside the T_gerid in the scattering
        data and the data will be extrapolated. 

2004-08-25  Claudia Emde  <claudia@sat.physik.uni-bremen.de>

        * arts-1-1-860
        
        * src/m_optproperties.cc (pha_mat_sptFromMonoData): 
        Fixed problem. I ignored pnd smaller than 0.001. Now the value is 
        set to 1e-12.

        * src/m_cloudbox.cc (ParticleTypeAddAll): Minor modification.

        * src/m_scatrte.cc (za_interpSet): Cubic interpolation is only 
        implemented for 1D. Included check to assure that it is not used for 
        3D.

        * src/methods.cc: Included *atmosphere_dim* as input for
        (za_interpSet).

2004-08-13  Oliver Lemke  <olemke@linux.net>

        * arts-1-1-859

        * autogen.sh:

        Change head option from '-1' to '-n 1' as the former is obsolete and
        maybe removed in future versions.

        * m4/{lf_warnings.m4,lf_cxx.m4}:

        Fix quoting of LF_CHECK_CC_FLAG, LF_CHECK_F77_FLAG,
        LF_SET_WARNINGS, LF_CONFIGURE_CXX, and LF_CPP_PORTABILITY for
        automake >= 1.8.

2004-08-12  Oliver Lemke  <olemke@linux.net>

        * arts-1-1-858

        * src/Makefile.am: Added fastem.{cc.h} to test_geomag_calc_SOURCES.

        * Removal/fixing of examples files: 3 examples are left. Whoever feels
        responsible for the removed examples could maybe try to readd a
        working version. Input files for the examples should go into the data
        directory. Only small input files are desired. The examples are not
        allowed to depend on arts-xml-data, all necessary input has to be
        provided.
        Maybe we should think about an arts-examples cvs package which might
        contain examples more close to the real world.

        * doc/examples/Makefile.am:

        Added data directory to SUBDIRS.

        Removed arts_examples_in variable.

        Removed arts_examples_in from EXTRA_DIST.

        Removed amsu_example.arts, clouds_example.arts, cont_example.arts,
        cloud_rad_field1D_example.arts, fullmodels_example.arts,
        i_field_example.arts, old_absorption_example.arts,
        radiosonde_example.arts, rt_example.arts, scatproperties_example.arts.

        Removed f_mono.aa, batch_input* and radiosondes.aa.

        * doc/examples/.cvsignore: Don't ignore .arts files anymore.

        * doc/examples/*.arts.in: Removed.

        * doc/examples/absorption_example.arts: Added.

        Use VectorSetTakingLengthFromVector instead of CloneSize for ls.

        Set output_file_format to ascii.

        * doc/examples/absorption_lookup_example.arts: Added.

        Set output_file_format to ascii.

        * doc/examples/cont_simple_example.arts: Added.

        Fixed method name absCKDMT_H2O_AIR.

        * doc/examples/{amsu_example.arts,clouds_example.arts,
        cont_example.arts,fullmodels_example.arts,old_absorption_example.arts,
        radiosonde_example.arts,rt_example.arts,batch_example.arts}:

        Not added.

        Missing tgsDefine and/or depends on arts-data.

        * doc/examples/{batch_input*.ab,f_mono.aa,clearsky.xml,radiosondes.aa}:

        Removed.

        * doc/examples/cloud_rad_field1D_example.arts: Not added.

        Depends on arts-xml-data and lookup table with hardcoded path.

        * doc/examples/{i_field_example.arts,scatproperties_example.arts}:

        Not added. CE: "Makes no sense. Outdated." :-(

        * doc/examples/data:

        Added. Directory for input files needed by examples.

        * doc/examples/data/{Makefile.am,.cvsignore}: Added.

        * configure.in:

        Added doc/examples/data/Makefile.

        Removed doc/examples/*.arts.

2004-08-12  Sreerekha T.R.  <rekha@uni-bremen.de>

        * arts-1-1-857
        
        * src/m_atmosphere.cc (surfaceFastem): First implementation of
        Fastem emissivity model. This method is not tested and would need
        modifications.

        * src/fastem.cc : The core fastem calculations are done here.

        * src/fastem.cc (fastem): The function which contains the fastem
        model. 

        * src/fastem.h: Added.

        * src/Makefile.am: Added fastem.cc and fastem.h.

        * src/methods.cc: Added the method (surfaceFastem).  The surface
        methods are moved to their right place after renaming them from
        ground_xxx.

        * srf/workspace.cc:  Added new workspace variables for
        surface. They are *surface_emissivity_field*,
        *surface_wind_field*, *surface_temperature*,
        *surface_emission_field*, *surface_refl_coeffs_field*,
        *surface_fastem_constants*.     

2004-08-12  Claudia Emde  <claudia@sat.physik.uni-bremen.de>

        * arts-1-1-856
        
        * src/m_optproperties.cc (ScatteringDataPrepareDOITOpt),
        (pha_mat_sptFromDataDOITOpt): These methods can now also be used for
        horizonthally aligned particles (p30).

        * methods.cc: Improved documentation. 
        
2004-08-11  Claudia Emde  <claudia@sat.physik.uni-bremen.de>

        * arts-1-1-855
        
        * src/m_optproperties.cc: 
        (ScatteringDataPrepareDOITOpt): Cleaned up this function. Now it 
        uses (pha_mat_transform) like (pha_mat_sptFromMonoData).
        The output *pha_mat_sptDOITOpt* includes now the transformed 
        phase matrix, therefore *scat_theta* is no longer needed. 

        (pha_mat_sptFromDataDOITOpt): Adjusted to modifications above.
                        
        Included consistent temperature interpolation. In both cases 
        (optimized and non-optimized) the phase matrix is first transformed 
        in the laboratory frame and then interpolated on the temperature.
        
        * src/methods.cc: (ScatteringDataPrepareDOITOpt) 
        (pha_mat_sptFromDataDOITOpt) - removed 
        *scat_theta* from Output/Input.
        (pha_mat_sptFromMonoData): Fixed bug in input variable list.
        
        * src/workspace.cc: *pha_mat_sptDOITOpt* - modified. Now it holds
        the phase matrices for all incoming and scattering angle combinations.
        *scat_theta* - removed.
        
        * src/groups.cc: Included ArrayOfTensor7 needed for 
        *pha_mat_sptDOITOpt*.

        * src/xml_io_array_types.{cc,h}: Included ArrayOfTensor7.

        * src/xml_io_instantiation.h: Included ArrayOfTensor7.

2004-08-09  Patrick Eriksson  <Patrick.Eriksson@rss.chalmers.se>

        * arts-1-1-854

        * src/ppath.cc (geompath_za_at_r): A fix to handle cases ending up
        below the tangent altitude by numerical inaccuracy. A deviation
        of RTOL is now allowed.

        An attempt to fix a problem reported by Cory Davis. No test  runs
        performed.

2004-08-09  Cory Davis (rsh)   <cory@fog>

        * arts-1-1-853

        * src/montecarlo.cc (Sample_ppathlength,Sample_ppathlengthLOS):
        In really optically thick cases transmittances can become lower
        than the smallest double precision number, this could cause errors
        when trying to interpolate a vector of transmittance values.
        Included code that truncates the transmittance vector below a
        certain threshold (1e-12) 

2004-08-09  Sreerekha T.R.  <rekha@uni-bremen.de>
        
        * arts-1-1-852

        * src/m_scatrte.cc: Added the method (scat_fieldCalc1D) which does
        integration only over the zenith angles.  The function is tested
        only for p20 type and here it is not giving the same result as
        including the azimuth angle integration, this is because the phase matrix
        components are not constant for the azimuth angles. So use
        (scat_fieldCalc) or (scat_fieldCalcLimb) in the calculations. 
        
        * src/methods.cc: Included the method (scat_fieldCalc1D).
        
        * src/scatrte.cc:  Modifications in
        (cloud_ppath_update1D_planeparallel).

        * src/m_cloudbox.cc: Some modifications in (ybatchMetProfiles) to
        include liquid water cloud. 

2004-08-05  Claudia Emde  <claudia@sat.physik.uni-bremen.de>

        * arts-1-1-851
        
        * src/m_optproperties.cc (opt_prop_sptFromData) 
        (opt_prop_sptFromMonoData), (pha_mat_sptFromDataDOITOpt), 
        (pha_mat_sptFromMonoData): Included a switches. If the temperature 
        grid in the single scattering data has only one element, no 
        temperature interpolation is performed.

2004-08-04  Claudia Emde  <claudia@sat.physik.uni-bremen.de>

        * arts-1-1-850
        
        * src/m_optproperties.cc (ScatteringDataPrepareDOITOpt),
        (pha_mat_sptFromDataDOITOpt): Included error message, which assures 
        that these methods are not used for p30 calculation. 
        This was the reason for the 500 GHz problems we discussed in
        Bredbeck.

2004-08-03  Claudia Emde  <claudia@sat.physik.uni-bremen.de>

        * arts-1-1-849
        
        * src/m_cloudbox.cc (cloudboxSetEmpty): Included this method. It sets 
        the particle number density field to zero and includes a 
        dummy *scat_data_raw*. The method can be used for clearsky DOIT 
        calculattions. One can compare the radiation field obtained in 
        this way with the clearsky calculation without cloudbox, to estimate
        interpolation errorsin the DOIT calculations.

        * src/methods.cc: Included (cloudboxSetEmpty).
        
        * src/m_scatrte.cc (convergence_testXXX): Included check. If number 
        of iteration > 50, the program will interrupt with an error 
        message.

2004-08-02  Cory Davis (rsh)   <cory@fog>

        * arts-1-1-848

        * src/sensor.cc (multi_mixer_matrix): H was only used in asserts.
        Inserted stupid piece of code until someone fixes this properly.

2004-07-30  Claudia Emde  <claudia@sat.physik.uni-bremen.de>

        * arts-1-1-847
        
        * src/m_scatrte.cc 
        (i_fieldUpdateSeq1D,
        i_fieldUpdateSeq3D,
        i_fieldUpdateSeq1Dplane_parallel,
        scat_fieldCalc, 
        scat_fieldCalcLimb): 
        Included temperature dependance of single scattering properties into 
        all these methods.

        * methods.cc: Included *t_field* and *rte_temperature* im methods 
        above. 
        
        * src/scatrte.{cc,h}(cloud_fieldsCalc): Included temperature.
        
        * src/m_optproperties.cc (pha_mat_sptFromDataDOITOpt): Minor change.  
        
2004-07-16  Cory Davis (rsh)   <cory@fog>

        * arts-1-1-846

        * src/montecarlo.cc (opt_propCalc): Returns the extinction matrix
        and absorption coefficient vector from scat_data_mon given local
        temperature, a vector of pnd values and the propagation
        direction. Replaced spt_calc_agenda.execute with call to
        opt_propCalc. This allowed the removal of a few parameters. Also
        added function opt_propExtract, which gets K and K_abs from a
        single SingleScatteringData object for given za, aa, and T.  Also
        added similar functions for the phase matrix
        *pha_mat_singleExtract* and modified *pha_mat_singleCalc* to call
        this function.  Added function *interp_scat_angle_temperature*
        which is called by *pha_mat_singleExtract*.

        All of these functions are very well suited for use
        by the Monte Carlo algorithm, and have resulted in a significant
        speedup. Claudia - if you want to use these feel free to shift
        them to optproperties.cc

        * src/m_montecarlo.cc (ScatteringMonteCarlo): altered calls to
        TArrayCalc and removed some parameters.

2004-07-09  Mattias Ekstr�m <ekstrom@rss.chalmers.se>

        * arts-1-1-845

        * Forgot to set the new version number.

2004-07-09  Mattias Ekstr�m <ekstrom@rss.chalmers.se>

        * src/methods.cc: Removed sensor_pol as input to RteCalc.
        Added sensor_responseMultiMixerBackend, which intended to
        be used instead of sensor_responseMixer and
        sensor_responseBackend whenever there are more than one
        mixer in the sensor configuration.
        Implemented sensor_responseRotation

        * src/m_sensor.cc: Removed sensor_pol as a required WSV and
        adjusted calls to sensor matrix functions.

        * src/rte.[cc,h]: Removed sensor_pol as input to rte_calc.

        * src/[montecarlo,m_cloudbox].cc: Removed sensor_rot dummy
        variables and in calls to rte_calc.

        * src/sensor.[cc,h]: Changed from *_transfer_matrix to
        *_matrix. Added multi_mixer_matrix. Implemented
        rotation_matrix that called by sensor_responseRotation.

        * src/test_sensor.cc: Adjusted calls to sensor matrix
        functions.

        * src/workspace.cc: Changed *lo* from numeric to vector for
        use with multiple mixer configuration.

2004-07-07  Oliver Lemke  <olemke@linux.net>

        * arts-1-1-844

        * doc/uguide/arts_methods_to_latex.sh,
        doc/uguide/arts_groups_to_latex.sh,doc/uguide/app_groups.tex,
        doc/uguide/app_methods.tex : Removed. Now in doc/reference.

        * doc/uguide/main.tex: Removed workspace reference appendix.

        * doc/uguide/Makefile.am: Removed auto_groups.tex, auto_methods.tex,
        arts_methods_to_latex.sh, and arts_groups_to_latex.sh.

2004-07-06  Oliver Lemke  <olemke@linux.net>

        * arts-1-1-843

        * configure.in: Removed hdf checks.
        Removed options --with-arts-data and --with-arts-xml-data.

        * src/Makefile.am: Removed m_hdf.cc, m_io.cc from *_SOURCES.

        * src/methods.cc (define_md_data_raw):
        Removed all ascii and hdf routines.

        * src/m_io.cc, src/m_hdf.cc: Removed.

        * src/reference/arts_variables_to_latex.sh,
        src/reference/app_variables.tex: Added.

        * src/reference/Makefile.am: Added new files for variables docs.

        * src/reference/main.tex: Include app_variables.
        Cleanup.

        * src/reference/app_groups.tex: Fixed history entry.

        * src/reference/.cvsignore: Added auto_variables.tex.

2004-07-05  Cory Davis (rsh)   <cory@fog>

        * arts-1-1-842

        * src/montecarlo.{cc,h} ( Sample_los ): included rte_temperature
        as an argument. (pha_matSingleCalc): included interpolation over
        temperature and rte_temperature as an input argument. Also changed
        so that phase matrix is only looked up and transformed if the pnd
        value is non-zero. (findZ11max): search for maximum over all
        temperature values

        * src/m_montecarlo.{cc,h} (ScatteringMonteCarlo): changed call to Sample_los.

        * src/m_optproperties.cc: Added runtime error for when
        rte_temperature is outside SingleScatteringData.T_grid.

2004-07-02  Cory Davis (rsh)   <cory@fog>

        * arts-1-1-841

        * src/xml_io_compound_types.cc (xml_read_from_stream) for
        SingleScatteringData)): updated f_grid size check for new
        size of pha_mat_data.

        * src/workspace.cc (t_value): Removed. We can use
        *rte_temperature* instead.

        * src/methods.cc: replaced all occurances of t_value with
        rte_temperature.
        
        * src/m_optproperties.cc (opt_prop_sptFromMonoData): included
        temperature interpolatiion.  Replaced all occurances of t_value with
        rte_temperature.
        
2004-07-01  Claudia Emde  <claudia@sat.physik.uni-bremen.de>

        * arts-1-1-840
        
        * src/m_optproperties.cc:
        (ScatteringDataPrepareDOITOpt),(scat_data_monoCalc): Temperature 
        interpolation removed from this place, as it has to be part of  
        *pha_mat_spt_agenda*. Kept temperature grids in *pha_mat_sptDOITOpt*
        and *scat_datta_mono*.
        (pha_mat_sptFromDataDOITOpt): Included temperature interpolation 
        here.
        (pha_mat_sptFromMonoData): Included temperature interpolation.

        T-interpolation is still missing in (opt_prop_sptFromMonoData)!
                                
        * src/workspace.cc: Changed *pha_mat_sptDOITOpt* from Tensor6 to 
        ArrayOfTensor6 to include temperature dimension. 
        
2004-06-29  Oliver Lemke  <olemke@linux.net>

        * arts-1-1-839

        * You might have to re-run autogen.sh after this update.

        * Started to split the workspace reference from the user guide
        into a separate document. This is just an intermediate commit,
        please don't look at it yet.

        * doc/uguide/Makefile.am: Removed outdated comment about uguide.dvi
        dependency.

        * configure.in: Added doc/reference/{Makefile,auto_version.tex}.

        * doc/Makefile.am: Added reference to SUBDIRS.

        * doc/reference/{Makefile.am,.cvsignore,arts_groups_to_latex.sh,
        arts_methods_to_latex.sh}: Copied from uguide.

        * doc/reference/reference.tex: Copied and adapted from uguide.tex.

        * doc/reference/main.tex: Copied and adapted from uguide.

        * doc/reference/arts_methods_to_latex.sh: Sort methods.

2004-06-28  Claudia Emde  <claudia@sat.physik.uni-bremen.de>

        * arts-1-1-838

        IMPORTANT: Temperature dependance for *SingleScatteringData* class is 
        included now, but it is not yet included into all 
        functions using this class. Will be fixed soon!
        Please use older version for scattering calculation.
        
        * src/optproperties.h: Modified *SingleScatteringData* class. 
        Now pha_mat_data is a Tensor7 and ext_mat_data and abs_vec_data are
        Tensor5, that means, the temperature dimension is now included. 

        * src/workspace.cc: Included *t_value*. It holds a temperature value.
        The value is needed for the interpolation of *SingleScatteringData*.

        The interpolation of the single scattering data on the right 
        temperature will be done in the functions below, together with the 
        frequency interpolation.  
        An additional input to *pha_mat_spt_agenda* and 
        *opt_prop_spt_agenda* is now the t_value. 
                
        * src/m_optproperties.cc:
                (pha_mat_sptFromData): Included t_value. 
                (opt_prop_sptFromData): Included t_value.
                (ScatteringDataPrepareDOITOpt): Included temperature 
                interpolation.
                (scat_data_monoCalc): Included temperature 
                interpolation.

        * src/m_scatrte.cc (scat_fieldCalcLimb): Included *t_field* and 
        defined *t_value* to be used in *pha_mat_spt_agenda*.

        * src/m_montecarlo.cc: Included in some places 0 for temperature 
        dimension of pha_mat_data. Marked by "//CE: Included ...".
        Cory: Please check.
        
        * src/methods.cc:(pha_mat_sptFromData) Included t_value. 
                (opt_prop_sptFromData): Included t_value.
                (ScatteringDataPrepareDOITOpt): Included t_value.       
                (scat_fieldCalcLimb): Included t_field.
                (scat_data_monoCalc): Included t_value. 
                                
2004-06-28  Oliver Lemke  <olemke@linux.net>

        * arts-1-1-837

        * doc/uguide/Figs/{montecarlo, sensor}: Added .cvsignore.

        * doc/doxygen/html/.cvsignore: Added *.ttf.

2004-06-28  Oliver Lemke  <olemke@linux.net>

        * arts-1-1-836

        * Bredbeck AI

        * doc/uguide/*.tex: Replaced \level[abcde] by \chapter, \section...

        * doc/uguide/uguide.tex: Removed \level[abcde] macros.

2004-06-24  Patrick Eriksson  <Patrick.Eriksson@rss.chalmers.se>

        * arts-1-1-835

        IMPORTANT: Note that you need to change your control files.
        Change "ground_refl_agenda" to "surface_agenda", and change all
        "ground_" to "surface_" and all "_ground" to "_surface".

        This follows a decision at the Bredbeck workshop.
        
        * General change from calling the bottom level "ground", to call it
        "surface". To avoid confusion, pressure surfaces are now denoted as
        pressure levels. On the same time, ground_refl_agenda is renamed to
        surface_agenda.
        
        * doc/uguide/fm_definitions.tex: Wrote a section on Stokes
        dimensionality, and short text for absorption section explaining
        that a look-up table must be used so far. Reviewed clear sky RT 
        section.

        * doc/uguide/main.tex: Some cleaning. Moved integration chapter to
        correct part. Put first chapters into a part (Overview).

        * doc/uguide/uguide.tex: Moved around stuff to clean up and improve
        logic.

2004-06-18  Mattias Ekstr�m <ekstrom@rss.chalmers.se>

        * arts-1-1-833

        * src/physics_funcs.cc: Added note to header for planck function.

        * src/methods.cc: Added sensor_responseRotation.

        * src/workspace.cc: Added *antenna_los*. Changed definition of
        *sensor_rot*

        * src/m_sensor.cc: Changed polarisation function to include azimuth
        angle grid. Added rotation function, but so far only performs tests.

        * src/rte.cc: Fixed bug found by Sreerekha. Now rte_calc should set
        *y* to the correct size.

2004-06-17  Mattias Ekstr�m <ekstrom@rss.chalmers.se>

        * arts-1-1-833

        * doc/uguide/Figs/sensor: Added folder with files Makefile.am,
        ant_diag.mp and ant_diag.pdf to CVS repository.

        * configure.in: Added above mentioned folder to compilation.

2004-06-17  Mattias Ekstr�m <ekstrom@rss.chalmers.se>

        * arts-1-1-832

        * src/[methods,m_sensor].cc: Added *sensor_norm* to method sensorOff.
        sensorOff now sets *sensor_norm* to zero since it is not used.

        * src/check_input.cc: Minor change to runtime error string.

        * src/rte.cc: *y* is resized to the number of rows in sensor_response.

        * doc/uguide/sensor.tex: Written sensor stuff.

        * doc/uguide/Figs/sensor/: Added this directory for sensor figures.

        * doc/uguide/Figs/Makefile.am: Added sensor as subdir.

        * doc/uguide/Figs/sensor/Makefile.am: Copied file from interpolations
        folder.

        * doc/uguide/Figs/sensor/ant_diag.[mp,pdf]: Added figure to describe
        antenna diagram.

2004-06-10  Patrick Eriksson  <Patrick.Eriksson@rss.chalmers.se>

        * arts-1-1-831

        * doc/uguide/Figs/ppath/mkfigs_refraction.m: Small modification 
        following variable name changes in ARTS.

2004-06-09  Mattias Ekstr�m  <ekstrom@rss.chalmers.se>

        * arts-1-1-830

        * src/rte.[cc,h]: Removed polarisation calculation from rte_calc.
        This means that rte_calc does not need sensor_pol as input variable,
        so it is removed from all calling functions.

        * src/[methods,m_rte,].cc: Removed sensor_pol as input variable.

        * src/[m_cloudbox,montecarlo].cc: Removed sensor_pol_dummy
        declarations and from calls to rte_calc.

2004-06-04  Mattias Ekstr�m  <ekstrom@rss.chalmers.se>

        * arts-1-1-829

        * src/[m_sensor,methods].cc: Removed sensor_los as input variable
        for sensor_responseAntenna1D and sensor_responseInit.
        The reason I added them was a miss-understanding. The sensor_response
        should only be calculated once per mblock.

        * src/sensor.[cc,h]: Commented out merge_grids, since it is not used.

2004-06-04  Mattias Ekstr�m  <ekstrom@rss.chalmers.se>

        * arts-1-1-828

        * src/workspace.cc: Added WSV sensor_norm which sets whether sensor
        responses should be normalised or not.
        Also added WSV sensor_response_pol to keep track of the number of
        polarisations measured by the sensor. It is initially set to be
        equal to *stokes_dim*, and is updated by the polarisation function,
        sensor_responsePolarisation.

        * src/[m_sensor,methods].cc: Added sensor_norm as input variable in
        sensor_responseAntenna1D, ...Mixer, ...Backend and ...Init methods.
        In sensor_responseInit sensor_norm is checked to be set correctly.
        If no sensor is used it is unnecessary to set sensor_norm, so in
        sensorOff when sensor_responseInit is called sensor_norm is hard
        coded to 0.
        Implemented sensor_response_pol.

        * src/sensor.[cc,h]: Moved the normalisation from the methods
        sensor_integration_vector and sensor_summation_vector to
        the calling, block specific, methods (antenna_transfer_matrix,
        backend_transfer_matrix and mixer_transfer_matrix).

2004-06-03  Mattias Ekstr�m  <ekstrom@rss.chalmers.se>

        * arts-1-1-827

        * src/methods.cc: Added sensor_los to sensor_responseInit and
        sensor_responseAntenna1D.

        * src/m_sensor.cc: Changed sensor_responseAntenna1D to incorporate
        multiple antennas, these are given as the generic input vector and
        should be relative to sensor_los. The method checks that the
        mblock_za_grid and the antenna grid plus diagram is consistent, but
        performs calculations on the merged sensor_los-mblock_za_grid and
        sensor_los-antenna grid.
        Also added sensor_responsePolarisation that sets up the polarisation
        response matrix.
        Implemented sensor_los in sensor_responseInit and
        sensor_responseAntenna1D.
        Updated sensorOff, as it calls sensor_responseInit.

        * src/sensor.cc: Added polarisation_transfer_matrix that is called by
        sensor_responsePolarisation, it uses the
        rw() operator instead of insert_row to speed up the computation.
        Added new method merge_grids to compute the total
        sensor_response_za from sensor_los and mblock_za_grid, since the size
        of the output is unknown on beforehand the output is resized.
        Fixed minor bug in sensor_summation_vector. Now vector is initialised
        to zero and values are added to it. Before elements were set to the
        value, which doesn't work in the case where the same element is
        calculated twice.
        Also fixed bug in sensor_integration_vector, now x_f is only used to
        produce the reference vector x_ref, actual calculations are made on
        x_ftot which contains all the grid points of f.
        Fixed sorting bug in mixer_transfer_matrix. Finally some cosmetics.

        * src/sensor.h: Added header for polarisation_transfer_matrix.

2004-06-02  Claudia Emde  <claudia@sat.physik.uni-bremen.de>

        * arts-1-1-826
        
        * src/m_cloudbox.cc (CloudboxGetIncoming, CloudboxGetIncoming1DAtm): 
        Included checks for range of angular grids.

        * src/m_scatrte.cc (i_fieldUpdataSeqXD): Included checks for 
        atmospheric dimensionality. 
        
        * src/scatrte.cc (cloud_ppath_update3D): Included a fix for 
        ppath step calculations in za=0 and za=180 direction. 
        Pppath_step_agenda sometimes returns nan values for ppath_setp.los.

2004-05-31  Cory Davis (rsh)   <cory@fog>

        * arts-1-1-825

        * doc/uguide/montecarlo.tex, doc/uguide/references.bib: Fixed
        references. Added flowchart figure.

        * doc/uguide/Figs/montecarlo/,
        doc/uguide/Figs/montecarlo/flowchart.pdf,
        doc/uguide/Figs/montecarlo/Makefile.am: Added. Also made
        appropriate changes to Figs/Makefile.am, and configure.in

2004-05-31  Cory Davis  <cory@met.ed.ac.uk>

        * arts-1-1-824

        * doc/uguide/montecarlo.tex: Began a chapter on the Monte Carlo
        code

        * doc/uguide/main.tex: Put montecarlo chapter after scattering
        chapter and included myself as an author

2004-05-24  Patrick Eriksson  <Patrick.Eriksson@rss.chalmers.se>

        * arts-1-1-823

        * doc/uguide/polarization.tex: Made an extension of the scattering
        matrices part.

2004-05-19  Christian Melsheimer  <melsheimer@uni-bremen.de>

        * arts-1-1-822

        * doc/uguide/polarization.tex: included factor 1/2 sqrt(epsilon/mu) 
        to make the Stokes components real intensities (radiances) 
        instead of just squared electric fields. Restated definition of 
        Stokes components in the general case, i.e. with the ensemble
        averages.

        * doc/uguide/symbol_defs.tex: added definition of ensemble average 
        \EnsAvr, denoted by angular brackets.
 
2004-05-17  Oliver Lemke  <olemke@linux.net>

        * arts-1-1-821

        * src/test_readpp.cc: Parsing header and reading the data into vector
        basically works. Still have to find out why there are 3 more fields
        in the data block than specified in the header.

        * src/Makefile.am: Updated dependencies for test_readpp.

2004-05-17  Oliver Lemke  <olemke@linux.net>

        * arts-1-1-820

        * src/.cvsignore, src/Makefile.am: Added test_readpp.

        * src/test_readpp.cc: Added. First try on reading meto pp files.

2004-05-15  Oliver Lemke  <olemke@linux.net>

        * arts-1-1-819

        * doc/uguide/Makefile.am: Added uguide.pdf to CLEANFILES in maintainer
        mode.
        Removed no longer existent uguide.ps and uguide.dvi from
        MAINTAINERCLEANFILES.

        * doc/uguide/.cvsignore: Added make.log.

2004-05-14  Oliver Lemke  <olemke@linux.net>

        * arts-1-1-818

        * doc/uguide/Makefile.am: Store the latex output of the last run into
        make.log for later review.

2004-05-14  Patrick Eriksson  <Patrick.Eriksson@rss.chalmers.se>

        * arts-1-1-817

        * doc/uguide/surface.tex: Moved every thing for the surface to
        this new chapter. Derived the reflection matrix for specular
        reflection, based on new part in polarization.tex.

        * doc/uguide/rte.tex: Is now empty, and is commented out from the
        texing.
        
        * doc/uguide/polarization.tex: Wrote a section, describing the
        relationship between amplitude and Stokes scattering matrices.

        * doc/uguide/uguide.tex: Set badness limit to 10000 for the whole
        document to avoid warnings that anyhow will be ignored.

2004-05-11  Oliver Lemke  <olemke@linux.net>

        * arts-1-1-816

        * doc/uguide/ppath.tex: Small fix. s/fotnote/footnote/

        * doc/uguide/arts_methods_to_latex.sh: Use section* instead of levelb.
        Set badness limit to 10000 for method descriptions.

2004-05-10  Oliver Lemke  <olemke@linux.net>

        * arts-1-1-815

        * src/matpack{I,III,IV,V,VI,VII}.{h,cc}: Completed work on
        debug_{tensor[3-7],matrix}view_get_elem functions.

2004-05-06  Oliver Lemke  <olemke@linux.net>

        * arts-1-1-814

        * src/matpackI.{h,cc}: Added debugging helper function
        debug_matrixview_get_elem. This function makes it possible to access
        Matrix elements in gdb. The operator() could not be used because of
        inlining.
        I'll add the same for Tensors tomorrow.

2004-04-27  Patrick Eriksson  <Patrick.Eriksson@rss.chalmers.se>

        * arts-1-1-813

        * doc/uguide/rte.tex: Opened this chapter. Started the description
        of surface reflections. 

        * doc/uguide/main.tex: Included rte.tex.

        * doc/uguide/symbol_defs.tex: Added wavelelngth (\Wvl).

2004-04-27  Oliver Lemke  <olemke@linux.net>

        * arts-1-1-812

        * src/xml_io.cc (xml_open_output_file): Catch ios::failure to omit
        core-dump if output file could not be created.

2004-04-16  Christian Melsheimer  <melsheimer@uni-bremen.de>

        * arts-1-1-811

        * doc/uguide/polarization.tex: Added new subsection on the 
        definition of the polarization directions (vertical or 
        theta and horizontal or phi)

        * doc/uguide/Figs/polarization/pol_directions.{fig,pdf}: Added 
        this figure (still have to cut away the "Figure 1" from the 
        bitmap) 
 
2004-04-16  Oliver Lemke  <olemke@linux.net>

        * arts-1-1-810

        * configure.in: Fix check for szip.

2004-04-15  Claudia Emde  <claudia@sat.physik.uni-bremen.de>
        
        * arts-1-1-809
        
        * src/agendas.cc (scat_grid_optimization_agenda): Included this agenda
        which allows to perform grid optimization in a modular way. 
                
        * src/m_scatrte.cc (ScatteringGridOptimization): Method which exectues
        *scat_grid_optimization_agenda*.
        (scat_za_gridOptimze): Modified. Does now only grid optimization, 
        not the scattering calculation on a very fine grid.

        * src/scatrte.{cc,h} (za_gridOpt): Minor modifications. Removed 
        debugging output.
        
        * src/workspace.cc: Included *scat_za_grid_opt*. A workspace variable 
        containing the optimized zenith angle grid. 

        * src/methods.cc: Included (ScatteringGridOptimization) and modified
        (scat_za_gridOptimze).

2004-04-15  Oliver Lemke  <olemke@linux.net>

        * arts-1-1-808

        * src/test_interpolation.cc: Minor fix. Include cmath for pow.

        * doc/uguide/arts_{groups,methods}_to_latex.sh: tail +5 is not POSIX
        compliant and fails with newer coreutils. Replaced by appropriate
        grep command.

        * configure.in: On some systems HDF is compiled with szip support. In
        that case we have to link against it. Added check.

2004-04-13  Cory Davis  <cory@zvi.jpl.nasa.gov>

        * arts-1-1-807

        * src/scatrte.{cc,h} (za_gridOpt): initialised ind_p to avoid warning 
        and hence compilation error

2004-04-06  Claudia Emde  <claudia@sat.physik.uni-bremen.de>

        * arts-1-1-806
        
        * src/m_scatrte.cc (scat_za_gridOptimize): Included first version
        of this method - will probably be modified later.
        It can be used for optimizing the zenith angle grid for scattering 
        calulation. 

        * src/scatrte.{cc,h} (za_gridOpt): Added this function for 
        zenith angle grid optimization. 
        
        * src/interpolation.cc (interp_cubic): Added differt interpolation
        methods (different selection of grid points) for testing. Later, only 
        one on the cubic interpolation methods will be kept.

        * src/m_cloudbox.cc (CloudboxGetIncoming) (CloudboxGetIncoming1DAtm):
        Included a check for testing, whether the cloudbox is set.

        * src/m_optproperties.cc (ScatteringDataPrepareDOITOpt) 
        (scat_data_monoCalc): Included check: Is the frequency in *f_grid*
        in the range of the single scattering data?

        * src/methods.cc: Added *scat_za_gridOptimize*.
        
2004-03-31  Stefan Buehler  <sbuehler@uni-bremen.de>

        * arts-1-1-805

        * TODO: Put contents of two mails from Patrick here, which have
        been sitting in my inbox for a long time.

2004-03-26  Christian Melsheimer  <melsheimer@uni-bremen.de>

        * arts-1-1-804

        * doc/uguide/uguide.tex: Commented out the
        \includeonly{polarization} again...

        * doc/uguide/polarization.tex: Fixed some small error (undefined
        control sequence) that prevented uguide from being pdflatex'ed...
        should work now.
        
2004-03-26  Christian Melsheimer  <melsheimer@uni-bremen.de>

        * doc/uguide/polarization.tex: 

        * arts-1-1-803
        
        * doc/uguide/polarization.tex: Corrected some minor errors, and
        added new subsection on antenna (sensor) polarization. 

2004-03-23  Claudia Emde  <claudia@sat.physik.uni-bremen.de>

        * arts-1-1-802

        * src/m_scatrte.cc (convergence_flagLsq): Added this method. Perfromes
        a least square convergence test. I think the method is especially 
        useful for off-limb cases as that convergence there is much better. 
        For these calculations a least square test should be sufficient.

        (iteration_counterIncrease): Removed. It is now part of the 
        convergence test methods. The convergence test functions output
        the number of required iterations. 

        (convergence_flagAbs), (convergence_flagAbsBT): Included iteration 
        counter.
                        
        (scat_za_interpSet): Added. This method can optionally if one wants
        to use cubic interpolation in the zenith angle dimension. By default
        linear interpolation is used. 

        (i_fieldUpdateSeq{1D,3D}): Included switch for cubic interpolation
        *scat_za_interp*.
                
        (scat_fieldCalcLimb): Included *scat_za_interp* switch for 1D.
        
        * src/scatrte.{cc,h}: (cloud_ppath_update1D): Included switch
        for cubic interpolation.
        (cloud_ppath_update3D): Included already the variable *scat_za_interp*
        but not yet the interpolation.
        
        * src/m_rte.cc: Included *scat_za_interp* in (RteCalc),
        which has to be used to get the radiative background when cloudbox 
        is switched on. 

        * src/rte.{cc,h}: Included *scat_za_interp* in (rte_calc). 

        Included in all (rte_calc) calls a 0 for scat_za_interp, where 
        this veriable is not needed, because the radiative background is 
        definetely not the cloudbox:

        * src/m_cloudbox.cc, src/m_montecarlo.cc
        (cloudboxOff),(cloudboxSetManually), (cloudboxSetManuallyAltitude)
         Initialized *scat_za_interp* in these functions which can be used 
        alternatively.

        * src/workspace.cc: Included *scat_za_interp*.
        
        * src/methods.cc: Added (scat_za_interpSet).

        Note: Cubic interpolation is so far only implemented for 1D!!!

        
2004-03-15  Claudia Emde  <claudia@sat.physik.uni-bremen.de>

        * arts-1-1-801
        
        * src/interpolation.{cc,h} 
        (polint): Added. Polynomial interpolation routine, mostly taken from 
        the "Numerical Recipes".
        (interp_cubic): Added. Performs a cubic interpolation. Input and output
        adjusted to ARTS WSVs. The function uses (polint).
        
        * src/m_cloudbox.cc (CloudboxGetOutgoingCubic): Added. This 
        method uses cubic interpolation in zenith angle dimension for 
        outgoing radiances (so far only for 1D calculations). 
        It seems that this interpolation is much more accurate, especially for 
        directions between nadir and limb, where the zenith angle resolution 
        is rather coarse.
        (CloudboxGetOutgoing): Splitted the method in sub-functions (shifted
        to cloudbox.cc).
                
        * src/cloudbox.{cc,h}: Added the following functions:
        cloudbox_getOutgoing1D
        cloudbox_getOutgoingCubic1D
        cloudbox_getOutgoing3D
        cloudbox_boundary_check
        Created these functions to split up (CloudboxGetOutgoing), to make
        the code more readable. 

        * src/test_interpolation.cc: Added (test07). Tests cubic interpolation
        for different functions.

        * src/methods.cc (CloudboxGetOutgoingCubic): Added.  

2004-03-10  Claudia Emde  <claudia@sat.physik.uni-bremen.de>

        * arts-1-1-800

        Some spring cleaning of the function related to scattering
        (although it is still winter). All functions and variables 
        related to the old scattering data format (amplitude matrix) 
        have been removed, as they can not be used. Additionally some 
        minor improvements in the documentation.
        
        * src/cloudbox.cc: Corrected doxygen documentations for
        (cloud_fieldsCalc, cloud_ppath_update3D).

        * src/m_optproperties.cc: Removed unused functions related to 
        amplitude matrix data format:
        (abs_vec_sptCalc, amp_matCalc, ext_mat_sptScat, ext_mat_sptCalc, 
        pha_mat_sptCalc)

        * src/m_scatrte.cc: Removed unused functions related to 
        amplitude matrix data format:
        (scat_fieldCalcFromAmpMat, ScatteringInitAmpMat)
        Removed also (grid_stepsizeCheck).

        * src/scatproperties.{cc,h}: Removed. This file included only functions
        related to the amplitude matrix format. 

        * src/test_scatproperties.cc: Removed.

        * Makefile.am: Removed scatproperties.{cc,h}.

        * src/workspace.cc: Removed some unused WSV:
        amp_mat_raw, amp_mat, part_types, sca_vec, i_field_dim
        Updated documentation.

        * src/methods.cc: Updated.
        
2004-03-09  Claudia Emde  <claudia@sat.physik.uni-bremen.de>

        * arts-1-1-799  
        
        * src/m_cloudbox.cc (i_fieldSetConst): Removed variables which were 
        only used in assertions. 

        * src/m_scatrte.cc: (grid_sizeSet), (i_fieldIterate), 
        (i_fieldUpdate1D), (i_fieldUpdateSeq1D)
        (i_fieldUpdate3D), (i_fieldUpdateSeq3D)
        Improved documentation.

        * src/scatrte.cc: (cloud_ppath_update1D)
        
        * src/methods.cc: Adapted entries to the changes above.
        
2004-03-09  Cory Davis  <cory@met.ed.ac.uk>

        * arts-1-1-798

        * src/montecarlo.cc (interpTArray,TArrayCalc): Bug fixes.

2004-03-09  Claudia Emde  <claudia@sat.physik.uni-bremen.de>

        * arts-1-1-797
        
        * src/m_cloudbox.cc (ParticleTypeAddAll): Added this method (wished
        by Cory). It allows to add all particle types at the same time. The
        user has to give a file including *pnd_field_raw* and the 
        coresponing file names of single scattering data.

        * src/methods.cc: Added method above.  

2004-03-09  Oliver Lemke  <olemke@linux.net>

        * arts-1-1-796

        * configure.in: Put the ACLOCAL flags in the Makefile. Fixes error
        about undefined macros when running toplevel make after configure.in
        has changed.

2004-03-08  Cory Davis   <cory@met.ed.ac.uk>

        * arts-1-1-795

        * src/montecarlo.cc (interpTArray,TArrayCalc): Fixed an error in
        the way interpTArray interpolates the evolution operator.  Made
        optimisations in both functions for the stokes_dim=1 and diagonal
        ext_mat cases.  Increased the accuracy parrameter in matrix_exp calls. 

2004-03-03  Oliver Lemke  <olemke@linux.net>

        * arts-1-1-794

        * src/xml_io_compound_types.cc (xml_read_from_stream,
        write_to_stream): Ensure consistency of GriddedField3 with runtime
        check. Sizes of p_grid, lat_grid and lon_grid must match the size of
        the data.

        * src/arts.h: Create empty std namespace. The namespace should be
        known before using it. (Fix compilation with HP C++ compiler).

2004-03-03  Oliver Lemke  <olemke@linux.net>

        * arts-1-1-793

        * src/arts.h: Only use namespaces if the compiler supports it.

        * src/sorting.h, src/test_xml.cc, src/test_sorting.cc,
        src/test_mpi.cc, src/test_integration.cc, src/test_binaryio.cc,
        src/arts_mpi.cc, src/b[io]fstream.{cc,h}:
        Removed 'using namespace std' which is already done in includes.

2004-03-02  Oliver Lemke  <olemke@linux.net>

        * arts-1-1-792

        * .cvsignore: Added config.guess, config.sub.

        * src/array.h: Renamed second parameter of constructor from fill to
        fillvalue. Avoid clash with function of same name.

        * src/absorption.cc, src/agenda_record.cc, src/array.h, src/arts.h,
        src/binio.cc, src/binio.h, src/globals_2.cc, src/interpolation.cc,
        src/interpolation.h, src/m_abs.cc, src/m_agenda.cc, src/main.cc,
        src/make_array.h, src/matpackI.cc, src/matpackI.h, src/matpackII.cc,
        src/matpackII.h, src/matpackIII.cc, src/matpackIII.h, src/matpackIV.cc,
        src/matpackIV.h, src/matpackV.cc, src/matpackV.h, src/matpackVI.cc,
        src/matpackVI.h, src/matpackVII.cc, src/matpackVII.h,
        src/methods_aux.cc, src/mystring.h, src/old_absorption.cc,
        src/parser.cc, src/sensor.cc, src/sorting.h, src/workspace_aux.cc:
        Removed all occurences of 'std::'. Either the compiler supports
        namespaces, then this is covered by 'using namespace std', or the
        compiler does not know about namespaces. For the latter, everything has
        global scope and trying to specify the namespace will most likely
        break the compilation. In this case, the 'using namespace std'
        directive can be omitted by implementing a macro that utilizes the
        information gathered by the configure script (AC_CXX_NAMESPACES
        in 1.1.791).

2004-03-02  Oliver Lemke  <olemke@linux.net>

        * arts-1-1-791

        * autogen.sh: Add m4 directory to aclocal flags.

        * configure.in: Removed AC_PROG_CC_STDC. Merged into AC_PROG_CC in
        autoconf >= 2.57. Unknown in autoconf <= 2.13.
        Removed own check for sstream header. Use macro from cxx_checks.m4
        instead.

        * m4/cxx_checks.m4: Added macros to test for C++ compiler features.
        Contains the following macros:

        AC_CXX_HAVE_STD       - Does compiler support ISO C++ Standard
                                library? iostream, cmath - Essential for us.
        AC_CXX_HAVE_SSTREAM   - Check for sstream header, sets a define in
                                config.h if it is not found we use our own
                                sstream.h.
        AC_CXX_NAMESPACES     - Needed by AC_CXX_HAVE_SSTREAM.
        AC_CXX_STATIC_CAST    - We use static_cast<> in some places.
        AC_CXX_CONST_CAST     - Needed in one place.
        AC_CXX_TEMPLATES      - We love templates.
        AC_CXX_BOOL           - Check whether bool is a built-in type.

        The point in all these checks is to let the user know as soon as
        possible that he's in trouble if his compiler does not support one of
        the required features. At the moment, he will just become aware of the
        problem during compilation with probably not so clear error messages
        from the compiler.
        My plan is to give a clear statement at the end of the configure run
        that the compiler is missing some features instead of exiting
        the configure with an error message. This gives the user the
        opportunity to try a compilation in spite of the problems and maybe
        fix some of the not-so-critical issues (e.g. the {static,const}_cast
        or the ISO C++ headers which probably just have different names in the
        respective compiler environment).

2004-02-24  Claudia Emde  <claudia@sat.physik.uni-bremen.de>
                
        * arts-1-1-790

        * src/groups.cc: Added GriddedField3 as data type. It is a structure
        for storing atmospheric fields along with the grids. This new structure
        replaces the ArrayOfTensor3.
        GriddedField3 includes four fields: p_grid, lat_grid, lon_grid, data
        The structure itself has already been included by Oliver in 
        gridded_fields.h.
        Furthermore ArrayOfGriddedFields3 has been included. 

        * src/workspace.cc: Changed t_field_raw, z_field_raw, vmr_field_raw 
        and pnd_field_raw from ArrayOfTensor3 to GriddedField3.
        
        * src/gridded_fields.{cc,h}: Included typedef for ArrayOfGriddedField3
        and output operators.

        * src/make_auto_wsv_h.cc: Added gridded_fields.h to include files.

        * src/make_auto_wsv_groups_h.cc: Added gridded_fields.h to include 
        files.

        * src/xml_io_array_types.{cc,h}: Added reading and writing routine
        for ArrayOfGriddedField3.

        * src/xml_io_instantiation.h: Added ArrayOfGriddedField3.
        
        * src/m_atmosphere.cc: Adapted the following methods to use 
        GriddedField3 instead of ArrayOfTensor3:
        AtmFieldsCalc
        AtmFieldsCalcExpand1D
        AtmRawRead

        Shifted pnd_fieldCalc to m_cloudbox.cc and modified it.

        * src/m_cloudbox.cc: Adapted the following methods:
        ParticleTypeInit
        ParticleTypeAdd
        ybatchMetProfilesClear
        ybatchMetProfiles

        Removed unused methods related to the old amplitude matrix concept:
        ParticleTypeInitAmpl
        ParticleTypeAddAmpl

        * src/methods.cc: Removed above methods.
        
        * src/m_scatrte.cc (scat_fieldCalc):
        Cosmetic changes and removed a small bug which I 
        had accidentally included duing the last commit.
        
2004-02-20  Claudia Emde  <claudia@sat.physik.uni-bremen.de>

        * arts-1-1-789
        
        * src/m_cloudbox.cc (cloudboxSetManuallyAltitude): Added this function.
        Cloudbox limits can be specified in altitude instead of pressure. In 
        the altitudes corresponding to the first latitude and first longitude 
        are used.

        * src/m_scatrte.cc (scat_fieldCalc), (scat_fieldCalcLimb): Removed 
        variables only used in assertions. 
        (i_fieldIterate): Moved frequency assertion to (ScatteringMain) and 
        removed variables only used in assertions. 

        * src/methods.cc: Included (cloudboxSetManuallyAltitude) and modified
        (scat_fieldCalc), (scat_fieldCalcLimb).

        * src/agendas.cc: Modified scat_field_aganda input variables. 

2004-02-20  Oliver Lemke  <olemke@linux.net>

        * arts-1-1-788

        * autogen.sh: Added AC_PROG_CC_STDC.

        * src/Makefile.am: Use CXXFLAGS_FIXED for compilation of
        partition_function_data.cc. Fixes compilation problem with enabled
        optimizations with certain g++ versions.

2004-02-16  Mattias Ekstr�m  <ekstrom@rss.chalmers.se>

        * arts-1-1-787

        * src/Makefile.am: Enabled xml I/O for test_sensor.cc.

        * src/test_sensor.cc Added testfunction to find a bug in sensor.cc.

        * src/sensor.cc: Found and corrected bug in sensor_integration_vector.

        * doc/uguide/sensor.tex: Added more text to the sensor chapter. Still
        a working document.

2004-02-11  Claudia Emde  <claudia@sat.physik.uni-bremen.de>

        * arts-1-1-786

        * src/methods.cc: Removed (ScatteringDataPrepareDOIT), as it is
        not used. Only (ScatteringDataPrepareDOITOpt) is used. 
        Removed also (ScatteringDataPrepareOff).
        Included new WSM: (pha_mat_sptFromMonoData), a monochromatic version
        of (pha_mat_sptFromData). It can be used in combination with 
        (scat_monoCalc).
                
        * src/workspace.cc: Removed now unused WSVs
        *scat_theta_gps*, *scat_theta_itws*.
                
        * src/optproperties.{cc,h}: Removed (interpolate_scat_angleDOIT).
        Modified (pha_matTransform) accordingly. 
        
        * src/m_optproperties.cc: Included (pha_mat_sptFromMonoData) and 
        removed (ScatteringDataPrepareDOIT).
        (pha_mat_sptFromData) modified according to changes above. 

        * src/m_montecarlo.cc (ScatteringMonteCarlo): Removed 
        scat_theta, scat_theta_gps, scat_theta_itws as input parameters.

        * src/montecarlo.{cc,h} (Sample_los, pha_mt_singleCalc): See above. 
        
2004-02-03  Cory Davis <cory@met.ed.ac.uk>

        * arts-1-1-785
        
        * src/montecarlo.{cc} (Sample_ppathlength, Sample_ppathlengthLOS)
        Removed parameters only used in asserts.

        * src/m_montecarlo.cc: changed calls to Sample_ppathlength,
        Sample_ppathlengthLOS. Improved comments.
        
2004-02-04  Oliver Lemke  <olemke@linux.net>

        * arts-1-1-784

        * autogen.sh: Fixed bug reported by Carlos. Use -o for find because
        non gnu versions don't support -or.

2004-02-02  Cory Davis  <cory@met.ed.ac.uk>

        * arts-1-1-783

        * src/m_montecarlo.cc: Began a big tidy-up of my code - mainly
        removing obsolete stuff. Removed montecarlo_p_from_belowCscaAdapt,
        updated ScatteringMonteCarlo accordingly.

        * src/montecarlo.{cc,h}: Discarded obsolete sampling
        options. Removed p_from_belowCscaCalc, Sample_los.  Renamed
        Sample_losZ -> Sample_los.

        * src/methods.cc: Removed montecarlo_p_from_belowCscaAdapt,
        updated ScatteringMonteCarlo accordingly

        * src/workspace.cc: Removed montecarlo_p_from_belowCsca

2004-02-01  Cory Davis  <cory@met.ed.ac.uk>

        * arts-1-1-782

        * /src/montecarlo.{cc,h}: Added two functions is_anyptype30 and
        findZ11max.  These are there to account for the fact that Z11 is
        not a maximum for forward scattering in the ptype=30 case.  A
        suitable bounding value for Z11 is needed when sampling incident
        directions. Small modifications were made in ScatteringMonteCarlo
        and sample_losZ to accomodate these changes.

2004-01-30  Claudia Emde  <claudia@sat.physik.uni-bremen.de>
        
        * arts-1-1-781

        * /src/workspace.cc (pha_mat_sptDOITOpt): Included dimension for 
        particle types.

        * src/m_optproperties.cc (ScatteringDataPrepareDOITOpt) and 
        (pha_mat_sptFromDataDOITOpt): Genearalized these functions. They can now
        be used for several particle types. Before they couls only be used for 
        particle type.
        
        * src/optproperties.cc (pha_mat_labCalc): Included special cases when
        arguments of acos becomes 1 or -1 because of numerical problems.

2004-01-23  Oliver Lemke  <olemke@linux.net>

        * arts-1-1-780
        
        * aux/abundances/*, aux/iup_forward_comp/H2O_183GHz/*,
        aux/iup_forward_comp/fascod/*, aux/iup_forward_comp/master_b/*,
        aux/iup_forward_comp/o2_spin_rot, aux/part_fct/*: Removed.

2004-01-23  Claudia Emde  <claudia@sat.physik.uni-bremen.de>

        * arts-1-1-779
        
        * src/m_cloudbox.cc (CloudboxGetOutgoing): Minor correction 
        again due to numerical problems with interpolation weights.

2004-01-22  Cory Davis  <cory@met.ed.ac.uk>

        * arts-1-1-778

        * src/montecarlo.cc (Sample_ppathlength,Sample_ppathlengthLOS):
        Minor changes are were required in path length sampling to
        properly accomodate non-diagonal extinction matrices
        (i.e. ptype=30). 

2004-01-21  Claudia Emde  <claudia@sat.physik.uni-bremen.de>

        * arts-1-1-777
        
        * src/m_cloudbox.cc (CloudboxGetOutgoing): Fixed interpolation
        on cloudbox boundary in 3D part of the function.
        Interpolation was only done for angles, not for positions.

        Fixed numerical problem.
        One has to compare the grid-positions with cloudbox limits.
        It is not sufficient to take just the index as it is  
        ambiguous. If for example a point lies on the lower pressure 
        boundary of the cloudbox, the index of the grid-position for 
        the pressure coordinate can correspond to cloudbox_limits[0]
        or to cloudbox_limits[0]-1 depending on the interpolation 
        weights. This had not been taken into account.

        * src/rte.cc: Only cosmetic change. 
        
2004-01-15  Cory Davis  <cory@met.ed.ac.uk>

        * arts-1-1-776

        * src/optproperties.cc (ext_matTransorm): Fixed bug in ptype=30
        case. 
        (pha_mat_labCalc): It was causing spurious diagonal polarization.  
        The reason for this is that the existing transformation formulae
        were only valid for 0<aa_scat-aa_inc<180.  This only affects 
        stokes_dim>2.  For aa_scat-aa_inc<0 elements Z13, Z23,Z24,Z31,Z32, 
        and Z42 change sign. I have implemented this, and it has fixed the 
        diagonal polarization problem.
        

2004-01-14  Claudia Emde  <claudia@sat.physik.uni-bremen.de>

        * arts-1-1-775
        
        * src/m_cloudbox.cc (CloudboxGetOutgoing): (Hopefully) fixed bug 
        reported by Cory.
        Azimuth angle of outgoing radiation from cloudbox was wrong (in 3D
        part of the function)
        
2004-01-14  Axel von_Engeln  <engeln@uni-bremen.de>

        * arts-1-1-774

        * src/workspace.cc: new workspace variable zeeman_o2_line that
        selects the line to calculate with Zeeman splitting (only one line
        currently possible)

        * src/methods.cc: added Zeeman parameters zeeman_o2_line

        * src/m_abs_o2_models.cc: heavily modified with Rosenkranz O2 absorption
        plus Zeeman splitting, commit as a backup, not yet in working
        condition. If you want to see some nice programming, look
        somewhere else!

        * src/test_zeemanproperties.cc, src/zeemanproperties.cc,
        src/zeemanproperties.h: removed from repository

        * src/Makefile.am: removed several old zeeman files

2004-01-13  Cory Davis  <cory@met.ed.ac.uk>

        * arts-1-1-773

        * src/optproperties.cc (pha_matTransform): Fixed bug in ptype=30 
        case that was causing spurious diagonal polarization. 

2004-01-08  Oliver Lemke  <olemke@uni-bremen.de>

        * arts-1-1-772

        * src/methods.cc: Restore version from 1.1.769.

2004-01-08  Oliver Lemke  <olemke@uni-bremen.de>

        * arts-1-1-771

        * src/logic.cc (is_increasing): Remove debug output.

        * src/m_optproperties.cc: Restore version from 1.1.769.

2004-01-08  Nikolay Koulev  <nkoulev@uni-bremen.de>

        * arts-1-1-770

        * src/m_abs_o2_models.cc: Added documentation on functions and
        variables in (Zeeman_o2_line_splitting). Got rid of redundant
        lines and made small change of the use of the
        (HUMLIK_Faddeeva_Wells), also there.

2003-12-30  Oliver Lemke  <olemke@uni-bremen.de>

        * arts-1-1-769

        * configure.in: Changed terminology to be more consistent, use
        Numeric type instead of floating-point type and Index type instead
        of integer type.

        * autogen.sh: Add support for automake-1.8.

        * doc/doxygen/Doxyfile.in: Removed obsolete tags.

        * doc/doxygen/html/.cvsignore: Added *.md5, *.eps, *.ps, _formulas.*,
        generated by new doxygen.
        
        * doc/doxygen/latex/.cvsignore: Added *.md5.

        * src/matpack{I,III,IV,V,VI,VII}.h, src/matpackI.cc, special_interp.h:
        Cleanup of includes.

2003-12-24  Oliver Lemke  <olemke@uni-bremen.de>

        * arts-1-1-768

        * src/rng.cc: Include cstring for memcpy to fix compilation with
        gcc 2.96.

        * Fixes for upcoming gcc 3.4

        * src/array.h, src/mystring.h: Prepend this-> to all call of member
        functions that do not depend on the template type.
        (See http://gcc.gnu.org/onlinedocs/gcc/Name-lookup.html for detailed
        explanation).

        * src/array.h: Include iomanip for setw.

        * src/m_general.h: Include stdexcept for runtime_error.

        * src/b[io]fstream.cc (pos): Return value of tellg/tellp is of type
        streampos which cannot be casted in long directly. Casting to
        streamoff fixes this problem.

2003-12-23  Claudia Emde  <claudia@sat.physik.uni-bremen.de>

        * arts-1-1-767
                
        * src/m_scatrte.cc(i_fieldUpdateSeq1D) and (i_fieldUpdateSeq3D): Fixed 
        bug reported by Sreerekha. When cloudbox extends to ground level and 
        the zenith propagation angle is above 90� (downlooking), 
        ppath_step_agenda gives an error. Included a switch to avoid this case.

        * src/scatrte.cc: Replaced fabs with abs.

2003-12-19  Oliver Lemke  <olemke@uni-bremen.de>

        * arts-1-1-766

        * src/montecarlo.cc: Comment assertion to fix compilation.

2003-12-17  Cory Davis   <cory@met.ed.ac.uk>

        * arts-1-1-765

        * src/m_optproperties.cc (opt_prop_sptFromMonoData):
        Added. Calculates ext_mat_spt and abs_vec_spt from scat_data_mono.

        * src/methods.cc: Added *opt_prop_sptFromMonoData*

2003-12-17  Claudia Emde  <claudia@sat.physik.uni-bremen.de>

        * arts-1-1-764
        
        * src/m_rte.cc (RteEmissionStd): Included ppath_index needed for 
        *absO2ZeemanModel*

        * src/methods.cc: Modified *RteEmissionStd*.

2003-12-16  Cory Davis  <cory@met.ed.ac.uk>

        * arts-1-1-763

        * src/workspace.cc: Added *scat_data_mono*, which is scat_data_raw 
        interpolated by frequency.

        * src/m_optproperties.cc, src/methods.cc: added function 
        *scat_data_monoCalc*, changed 
        #define pha_mat_data to #define pha_mat_data_raw, and changed all
        affected functions. The former meant I could not access
        scat_data_mono members.

        * src/montecarlo.cc (pha_mat_singleCalc): Changed to use
        scat_data_mono instead of scat_data_raw.

        * src/m_montecarlo.cc (ScatteringMonteCarlo):Changed to use
        scat_data_mono instead of scat_data_raw.

2003-12-16  Nikolay Koulev  <nkoulev@uni-bremen.de>

        * arts-1-1-762

        * doc/examples/o2_can_zeeman_do.arts: Updated according the last
        changes to the (opt_prop_gas_agenda) done by Claudia.

2003-12-16  Claudia Emde  <claudia@sat.physik.uni-bremen.de>

        * arts-1-1-761
        
        * src/m_scatrte.cc (scat_fieldCalcLimb): Fixed small bug in 3D part. 
        The latitude and longitude indices where not right in the pha_matCalc.
        Furthermore  changed loops, so that azimuth angle 0� (=360�) 
        is not calculated twice. Did the same in (i_fieldUpdateSeq3D).
        (scat_fieldCalc): Fixed the same bug. 

        Now, the 3D model seems to work perfectly, the problem with the 
        cloudbox boundaries is solved!!!

2003-12-15  Nikolay Koulev  <nkoulev@uni-bremen.de>

        * arts-1-1-760

        * src/m_abs_o2_models.cc: Change in the summation scheme in
        (Zeeman_o2_line_splitting), seems to be the right one now. Other
        minor changes. Moved out the Lagrange interpolation routine of
        Thomas to src/math_funcs.cc. 

        * doc/examples/o2_can_zeeman_do.arts: updated.

        * src/math_funcs.cc: Included the Lagrange interpolation of Thomas.
        

2003-12-12  Oliver Lemke  <olemke@uni-bremen.de>

        * arts-1-1-759

        * test commit

2003-12-09  Claudia Emde  <claudia@sat.physik.uni-bremen.de>

        * arts-1-1-758

        * src/m_scatrte(i_fieldUpdateSeq3D): Some modifications. The 3D method 
        gives too high values at the upper lat/lon boundaries. Problem is 
        still not solved!

        * src/scatrte.{cc,h}: (cloud_fields_calc) Removed unused variables 
        *scat_za_index* and *scat_aa_index*. They are only used inside
        *opt_prop_spt_agenda*.
        (cloud_ppath_update3D): Fixed a numerical problem for lower cloudbox
        boundaries. The index of the gridposition of the lower latitude 
        boundary for example is cloudbox_limits[2]-1 and the interpolation 
        weights were fd[0]=1 and fd[1]=0. These points were not recocnized
        as part of the cloudbox.

        * src/rte.cc (get_radiative_background): Included out3 message to 
        see in output, what background is taken for the RT calculation. 
        Quite important for 3D cloud scenarios. 

        Removed *zeeman_prop_agenda* and adjusted the affected methods. 
        The method *absO2ZeemanModel* can be called inside 
        *opt_prop_gas_agenda. Now you don't need any changes in the 
        controlfile if you don't want to calculate the zeeman effect.
        
        * src/m_abs_o2_models.cc (test_zeeman): Removed  *zeeman_prop_agenda*.

        * src/m_rte.cc (RteEmissionStd):  Removed  *zeeman_prop_agenda* and
        other zeeman input.

        * src/methods.cc: Modified (RteEmissionStd).

        * src/agendas.cc: Commented *zeeman_prop_agenda*, should be removed 
        later.

        * src/workspace.cc: Commented *zeeman_prop_agenda*.
         
2003-12-09  Cory Davis   <cory@met.ed.ac.uk>

        * arts-1-1-757

        * src/optproperties.cc
        (abs_vecTransform,ext_matTransform,pha_matTransform): Implemented
        ptype=30 (i.e horizontally aligned) single scattering data.  Have
        tested this once in a Monte Carlo simulation and it seems to give
        sensible answers, but there is a dramatic increase in CPU time,
        which I will look into tomorrow.

2003-12-09  Mattias Ekstr�m  <ekstrom@rss.chalmers.se>

        * arts-1-1-756

        * doc/uguide/sensor.tex: More text about the sensor modelling. Thinking
        about introducing the name 'forward matrix' for the sensor response
        matrix.

        * doc/uguide/main.tex: Included sensor section in contribution list.
 
2003-12-09  Oliver Lemke  <olemke@uni-bremen.de>

        * arts-1-1-755

        * Missed this with last commit. :-(

        * autogen.sh: Don't call automake with --force. Breaks compatibility
        with automake 1.4.

2003-12-09  Oliver Lemke  <olemke@uni-bremen.de>

        * arts-1-1-754

        * configure.in: Fixed bug reported by Cory. Macro AC_HELP_STRING is
        not supported by autoconf2.13. Removed.

2003-12-09  Oliver Lemke  <olemke@uni-bremen.de>

        * arts-1-1-753

        * src/binio.cc: Replace c header includes with c++ headers.
        Explicitly specify second argument to pow as floating point value
        instead of int to support the compiler in picking the right function.

        * src/rng.{cc,h}: Replace c header includes with c++ headers.
        Removed duplicate includes.

2003-12-09  Oliver Lemke  <olemke@uni-bremen.de>

        * arts-1-1-752

        * src/Makefile.am: Added check-code-cheaders.pl to TESTS.
        To execute the tests use 'make check'.

        * src/check-code-cheaders.pl: Added. Checks for inclusion of plain C
        header files. First one, more to come.

2003-12-08  Cory Davis   <cory@met.ed.ac.uk>

        * arts-1-1-751

        * src/m_montecarlo.cc (ScatteringMonteCarlo): Untabification and
        bug fixing stratified sampling.

2003-12-08  Mattias Ekstr�m  <ekstrom@rss.chalmers.se>

        * arts-1-1-750

        * doc/uguide/matrix_vector.tex: This should have been along with the
        last commit. Sorry. Added section for make_I method for sparse matrix.

        * doc/uguide/sensor.tex: Started on the sensor part of the user guide.

2003-12-08  Oliver Lemke  <olemke@uni-bremen.de>

        * arts-1-1-749

        * src/m_abs_o2_models.cc (test_zeeman): Changed author. Patrick does
        not deserve it to be blamed for this. :-)

2003-12-08  Mattias Ekstr�m  <ekstrom@rss.chalmers.se>

        * arts-1-1-748

        * src/m_sensor.cc: Fixed FIXME, assertion should have already been a
        runtime_error check.

2003-12-08  Oliver Lemke  <olemke@uni-bremen.de>

        * arts-1-1-747

        * Fix warnings when compiling with --disable-debug

        * There are a lot of variables and parameters which are only used in
        assertions. Please have a look at your functions whether they are
        really necessary. I put a FIXME in all questionable places.

        * src/methods_aux.cc (subst_any_with_group): Only declare
        wsv_group_names in debug mode (only needed for assertion).

        * src/m_cloudbox.cc (i_fieldSetConst): Omit name for parameter f_index
        in non-debug mode. It is only used in assertion. FIXME.

        * src/m_optproperties.cc (ext_mat_sptScat), (abs_vec_sptCalc):
        Only define nza and naa in debug mode (only needed in assertion).

        * src/m_ppath.cc (VectorZtanToZaRefr): Omit name for parameter
        atmosphere_dim in non-debug mode because it is only used in assertion.
        FIXME.

        * src/m_scatrte.cc (i_fieldIterate), (scat_fieldCalc),
        (scat_fieldCalcLimb), (scat_fieldCalcFromAmpMat): Put all
        variable/parameters in ifndef block to be only defined in debug mode.
        FIXME.

        * src/m_sensor.cc (sensor_responseAntenna1D): Put parameter in ifndef
        block to be only used in debug mode (only needed for assertion).
        FIXME.

        * src/main.cc (check_built_headers): Variables wsv_group_names,
        wsv_data only needed in debug mode.

        * src/montecarlo.cc (interp): Put definition of sum_check_epsilon in
        ifndef block because it is only used in assertion.

        * src/partition_function_data.cc (spec), (iso): Parameter name only
        used in debug mode. FIXME.
        Removed unneeded ifndef block around assertions.

        * src/ppath.cc (do_gridcell_3d), (ppath_start_1d), (ppath_start_2d),
        (ppath_start_3d), (ppath_step_refr_1d), (ppath_step_refr_2d),
        (ppath_step_refr_3d): Put all debug mode only variables/parameters
        inside ifndef blocks. FIXME.

        * src/scatrte.cc (cloud_fieldsCalc): Put stokes_dim in ifndef block.
        FIXME.

        * src/special_interp.cc (z_at_lat_2d), (z_at_latlon): Put parameters
        in ifndef block which are only used in debug mode. FIXME.

        * src/agenda_record.cc (AgRecord::AgRecord): Put variables only used
        in assertion in ifndef block.

        * src/gas_abs_lookup.cc (GasAbsLookup::Extract): n_p_grid only needed
        in assertion. FIXME.

        * src/geomag_calc.h: Removed const Numeric a;

        * src/test_geomag_calc.cc: Use EARTH_RADIUS instead of a.

2003-12-08  Thomas Kuhn  <tkuhn@uni-bremen.de>

        * arts-1-1-746

        * src/m_abs_o2_models.cc: bug fix in internal function
        PWRO2VoigtMixing. The use of the output of the Faddeeva function
        was wrong. 

2003-12-08  Oliver Lemke  <olemke@uni-bremen.de>

        * arts-1-1-745

        * src/binio.cc, src/geomag_calc.cc, src/legendre.cc,
        zeemanproperties.cc: Initialize variables which might be used
        unitialized.

        * src/m_abs_o2_models.cc (PWRO2VoigtMixing): Define lnpi as const
        Numeric.

2003-12-06  Oliver Lemke  <olemke@uni-bremen.de>

        * arts-1-1-744

        * autogen.sh: Ripped from gnome-common. Adapted for arts.
        Call configure with --enable-more-warnings.

        * COPYING: Updated.

        * configure.in: Removed -pedantic from compiler flags.
        Removed -Wunreachable-code from more warnings.
        Add -Wshadow only for gcc3. gcc2 gives false alarms if this warning is
        enabled (also in system header files).
        Add -Werror if configure is called with --enable-more-warnings.

        * src/bifstream.cc (getByte): Renamed variable 'read' to avoid
        shadowing of member attribute.

        * src/b[io]fstream.{cc,h} (seek): Renamed parameter 'pos' to
        avoid shadowing of member attribute.

        * src/m_cloudbox.cc: Commented out names of unused function parameters
        to omit warning.

        * src/m_io.cc (VectorWriteAscii): Removed static_cast.

        * src/m_montecarlo.cc (ScatteringMonteCarlo): Commented out unused
        variable K11.

        * src/m_sensor.cc (sensor_responseAntenna1D): Renamed some
        ostringstream to avoid shadowing of other local variable.

        * src/ppath.cc (ppath_start_stepping): Rename itw to itw2 in inner
        block to avoid shadowing of itw defined in outer block.
        (ppath_calc): Commented out name of unused parameter.

        * src/rte.cc (rte_calc): Commented out unused variables.

        * src/sensor.cc (mixer_transfer_matrix), (sensor_integration_vector):
        Renamed loop variable i to e to avoid later shadowing of i.

        * src/scatrte.cc (cloud_fieldsCalc): Commented out unused parameters.
        (cloud_ppath_update1D): Renamed stokes_vec to stokes_vec2 in inner
        block to avoid shadowing of afore defined variable.
        (cloud_ppath_update3D): Commented out unused variable atmosphere_dim.
        (cloud_ppath_update1D_planeparallel): Inner and outer loop variables
        where both called i. :-( This is very confusing and should be avoided.
        Renamed inner loop vars to k.
        Renamed stokes_vec in inner block to stokes_vec2 to avoid shadowing of
        variable defined in outer block.
        Commented out names of unused parameters.
        FIXME: Indentation in this file uses tabs!

        * src/zeemanproperties.cc (Zeemann): Removed first definition of
        Matrix P. It was never used but defined again in inner block.

        * src/test_matpack.cc (test10): Replaced static_cast by normal cast to
        const Vector.

        * src/test_sparse.cc (test41): Renamed loop variable to ri and ci to
        avoid shadowing of other local variables.

        * src/test_zeemanproperties.cc (main): Removed first declaration of
        f_grid. Only redefined variable from inner block is used.

        * src/test_integration.cc (get_stepsize): Removed empty function.

        * src/m_abs_o2_models.cc: Include cstdlib for abs(int). With gcc2 abs
        is not overloaded for int in cmath.

2003-12-07  Cory Davis  <cory@met.ed.ac.uk>

        * arts-1-1-743

        * src/m_abs_o2_models.cc: This file wouldn't let me compile again
        :( This time I got the following error -
        m_abs_o2_models.cc:1979: call of overloaded `abs (const long int
        &)' is ambiguous
        /usr/include/stdlib.h:699: candidates are: int abs (int)
        /usr/include/g++-3/cmath:40:                 float abs (float)
        /usr/include/g++-3/cmath:42:                 double abs (double)
        /usr/include/g++-3/cmath:72:                 long double abs (long
        double)
        As a quick fix I changed the offending line to ...(abs(int(QM[l]))
        > 0) ). Please tell me off if this was a daft thing to do.

        * src/montecarlo.cc, src/m_montecarlo.cc: Some bug fixes.


2003-12-05  Thomas Kuhn  <tkuhn@uni-bremen.de>

        * arts-1-1-742

        * src/m_rte.cc: added the zeeman splitting part into 
        RT calculation in method RteEmissionStd. HOWEVER, SINCE 
        THE O2 ZEEMAN SPLITTING STILL PRODUCES NON-SENSE TURN THE 
        ZEEMAN OFF IN YOUR CONTROL FILE. This can be done by setting 
        # 0=false 1=true
          ZeemanO2Settings{
              ZeemanO2OnOff = 0
              ZeemanO2PressureLimit = 1.000e3
          }
        in your control file.
        
        * src/methods.cc added the agenda zeeman_prop_agenda and 
        workspace variables zeeman_o2_onoff (Index) and 
        zeeman_o2_pressure_limit (Numeric) to the method RteEmissionStd.

        * src/m_abs_o2_models.cc: bug fix in functions absPWRO2Model and 
        ZeemanO2Settings. Additionally started to use Faddeeva function
        for line mixing stuff (function PWRO2VoigtMixing, but not 
        working yet).

2003-12-05  Mattias Ekstr�m  <ekstrom@rss.chalmers.se>

        * arts-1-1-741

        * src/methods.cc: Changed text and input variables to
        sensor_responseAntenna1D.

        * src/m_sensor.cc: Changed input variable as above.

2003-12-05  Thomas Kuhn  <tkuhn@uni-bremen.de>

        * arts-1-1-740

        * src/methods.cc: removed method "absO2Model" for the moment. An
        equivalent method will follow later. Added a preliminary method
        test_zeeman which executes the zeeman agenda for test purposes.
        This is not a permanent construction. Furthermore the I/O of
        method absO2ZeemanModel is modified according to the interface to
        the RT method from which it is called. Additionally a new method 
        ZeemanO2Settings is introduced which fills two workspace variables
        named zeeman_o2_onoff and zeeman_o2_pressure_limit. these two
        workspace variables sets the flag if Zeeman splitting should be
        considered or not and from which pressure level on the Zeeman
        effect should be calculated.
        
        * src/workspace.cc: definition of the Index workspace variable
        zeeman_o2_onoff and the numeric variable
        zeeman_o2_pressure_limit. The variable zeeman_o2_onoff is a flag
        for turning Zeeman effect in O2 extinction calculation off or on
        and zeeman_o2_pressure_limit gives the pressure level from which
        on the O2 Zeemen effect should be considered when zeeman_o2_onoff=1.
        Furthermore species_index is added as workspace variable. This
        ArrayOfIndex yields the tag position of key species like N2, O2,
        H2O, O3, CO2. See also SPECIES_INDEX_* in src/absorption.h for the
        order of the specified tags.
        
        * src/absorption.h: included definitions for species_index which
        is used to identify key species from the tags. The specified key
        species are SPECIES_INDEX_N2=0, SPECIES_INDEX_O2=1,
        SPECIES_INDEX_H2O=2, SPECIES_INDEX_O3=3, SPECIES_INDEX_CO2=4.
        
        * src/agendas.cc: geomag_los removed from INPUT in
        zeeman_prop_agenda. In opt_prop_gas_agenda abs_scalar_gas removed 
        from INPUT. BOTH ARE PRELIMINARY VERSIONS TO GET ZEEMAN RUNNING. 

        * src/m_abs_o2_models.h: blank, not used at the moment.

        * src/m_abs_o2_models.cc: modified the structure of the oxygen
        absorption calculation with/without Zeeman splitting. The original
        Zeeman code is divided into several parts. There are the internal
        functions CEF (complex) which returns the complex error function
        according to Hui et al. JQSRT, 1978 which is reproduced in the Janssen
        book Chapter 2 (P. W. Rosenkranz) p.66. Furthermore the function
        Zeeman_o2_splitting_factors (void) returns the center frequency
        shift and intensity scaling factor for the O2 lines due to the
        Zeeman effect. The function PWRO2Mixing (void) returns the
        original absorption coefficient with Van Vleck-Weisskopf + line
        mixing line shape function from the Rosenkranz O2 absorption
        model. Both, PWRO2Mixing and the function Zeeman_o2_line_splitting
        (void) are called from the internal function absPWRO2Model which
        is itself called by the method absO2ZeemanModel.
        !WARNING! THIS IS STILL AN INTERNAL VERSION AND NOT FOR 
        SCIENTIFIC USE.

        * doc/examples/o2_can_zeeman_do.arts update to test Zeeman

2003-12-05  Mattias Ekstr�m  <ekstrom@rss.chalmers.se>

        * arts-1-1-739

        * src/matpackII.cc: Removed bug, now make_I sets the correct size.

        * src/methods.cc: Changed input variables to ConvertIFToRF.

        * src/m_sensor.cc: Changed to using make_I in sensor_responseInit, the
        change in speed was encouraging. Also changed input to ConvertIFToRF
        so that it takes sensor_response_za and sensor_response_aa, instead
        of mblock variables. Also some cosmetics to the output strings.

        * src/m_ppath.cc Cosmetics to output strings.

2003-12-05  Mattias Ekstr�m  <ekstrom@rss.chalmers.se>

        * arts-1-1-738

        * src/matpackII.{cc,h}: Created function make_I which makes a Sparse
        to be the Identity matrix for given number of rows and columns.
        This method should be faster than assigning ones to the diagonal 
        elements.

        * src/test_sparse.cc: Created test for the make_I function, test47.

2003-12-04  Cory Davis  <cory@met.ed.ac.uk>

        * arts-1-1-737

        * src/workspace.cc: Added WSV *montecarlo_p_from_belowCsca*, which
        has a horrible name.  It holds externally calculated data that
        describes the probability of a scattered photon having an upward
        direction before the scattering event.  This is multiplied by the
        scattering cross-section.  The above should illustrate why I had a
        hard time choosing a variable name.  This is used in stratified 
        sampling.

        * src/methods.cc (montecarlo_p_from_belowCscaAdapt): Reduces the
        raw montecarlo_p_from_belowCsca in the frequency dimension to
        accomodate only the frequency used in the current calculation.
          Added *montecarlo_p_from_belowCsca* as input to
          *SingleScatteringMonteCarlo*, also added keyword argument
          strat_sampling, which enables stratified sampling.

        * src/m_montecarlo.cc (ScatteringMonteCarlo): Made input/output
        changes mentioned above, and (hopefully) finished implementing
        stratitified sampling. Yet to be tested.  Also added WSM
        *montecarlo_p_from_belowCscaAdapt* described above

        * src/montecarlo.{cc,h} (p_from_belowCscaCalc): Added.  Interpolates
        *montecarlo_p_from_belowCsca* by the propagation zenith angle, and
        sums over particle types.
        
2003-12-04  Mattias Ekstr�m  <ekstrom@rss.chalmers.se>

        * arts-1-1-736

        * src/methods.cc: Some cosmetics for the ConvertIFToRF help text and
        added a few more input variables.

        * src/m_sensor.cc: Finalised ConvertIFToRF. It's tested and it works.

2003-12-02  Mattias Ekstr�m  <ekstrom@rss.chalmers.se>

        * arts-1-1-735

        * src/workspace.cc: Added WSV *lo* for the mixers local oscillator.

        * src/methods.cc: Removed the keyword multiply from sensor_response???
        functions (Antenna1D, Backend and Mixer), so now all functions returns
        the total sensor_response. Also removed keyword lo from the mixer
        function since it's now a WSV.
        Added function ConvertIFToRF for conversion between intermediate
        frequencies (IF) and radio frequencies (RF).

        * src/m_sensor.cc: Made changes to the sensor_response??? functions
        and started on ConvertIFToRF.

2003-12-02  Cory Davis  <cory@met.ed.ac.uk>

        * arts-1-1-734

        * src/m_continua_ckd.cc: arts not compiling on gcc 2.96, so I added
        #include <cmath>, which seems to have worked.

        * src/m_abs_o2_models.cc: changing "AN_r = abs(N_r)-1" to 
        "AN_r = abs(Numeric(N_r))-1" and others like it fixed compilation 
        errors (ambiguity with overloaded function abs) with gcc 2.96.  Feel 
        free to flame me if these were not the right fixes. 
        

2003-12-02  Thomas Kuhn  <tkuhn@uni-bremen.de>

        * arts-1-1-733

        * src/m_continua.cc: removed the Lgrange interpolation function
        from this file.

        * src/m_abs_o2_models.h: added semicolon at the end of the class
        definition.

        * src/m_abs_o2_models.cc: modified the structure of the oxygen
        absorption calculation. first a method absO2Model is called from
        the control file with detailed information about O2 model and
        Zeeman effect. Then, internally in this method it branches further
        to the specific O2 model function (e.g. Rosenkranz or Liebe) and 
        fills there the necessary line information. After this for each 
        frequency of f_grid this function calculates the ordinary O2 
        absorption or considers Zeeman splitting. At the end the function 
        returns ext_mat_zee and abs_vec_zee to the method absO2Model. 
        To do this the original Zeeman function is divided into suitable 
        moduls which can be assecced by the O2 model function. 
        !WARNING! THIS IS STILL AN INTERNAL VERSION AND NOT FOR 
        SCIENTIFIC USE.
        
2003-12-02  Claudia Emde  <claudia@sat.physik.uni-bremen.de>

        * arts-1-1-732
        
        * src/m_cloudbox.cc (CloudboxGetOutgoing): Fixed a bug in the 
        3D part of the function. A wrong azimuth angle was taken on the 
        cloudbox boundary as background for the clearsky part. 

2003-12-01  Nikolay Koulev  <nkoulev@uni-bremen.de>

        * arts-1-1-731

        * src/workspace.cc: Added documentation for *geomag_los*,
        *ext_mat_zeeman*, *abs_vec_zeeman*.

        * src/agendas.cc: Added documentation for *zeeman_prop_agenda* and
        *geomag_calc_los_agenda*.

        * src/methods.cc: Added documentation for (ext_matAddGasZeeman) and
        (abs_vecAddGasZeeman).  

2003-12-01  Cory Davis  <cory@met.ed.ac.uk>

        * arts-1-1-730

        * src/montecarlo.{cc,h} (Sample_ppathlength): Implemented new
        pathlength sampling method that uses the actual evolution
        operator, instead of using an exponential PDF and an averaged
        extinction coefficient.  This makes a huge improvement,
        particularly in optically thick inhomogeneous cases. However
        the old method is still there and can be selected by setting the
        new input variable *method* to 1.

        * src/m_montecarlo.cc (ScatteringMonteCarlo): Changed calls to
        Sample_ppathlength and began implementing stratified sampling.
        This will reduce error by considering photons entering from above,
        photons entering from below, and photons emitted in the cloud box
        seperately.
        

2003-12-01  Mattias Ekstr�m  <ekstrom@rss.chalmers.se>

        * arts-1-1-729

        * src/matpackII.cc: Corrected loop in transpose function. This should
        remove the bug in the mult (sparse-sparse) function.

        * src/test_sparse.cc: Added function for testing of transpose, and 
        changed the mult test. The both functions reads matrices from xml files
        to make testing of large matrices easier.

2003-12-01  Sreerekha T.R.  <rekha@uni-bremen.de>

        * arts-1-1-728  

        * src/m_optproperties.cc : Implemented *ext_matAddGasZeeman* and
        *abs_vecAddGasZeeman*. 

        * src/methods.cc : Added the above two methods.
        
2003-12-01  Sreerekha T.R.  <rekha@uni-bremen.de>

        * arts-1-1-727
        
        * src/m_scatrte.cc (i_fieldUpdateSeq1D_PlaneParallel): Renamed and
        modified the planeparallel method to be consistent with the
        spherical model. The results from planeparallel model are tested
        and are closer to the spherical case.  

        * src/methods.cc : Renaming of the planeparallel method.

        * src/scatrte.cc : Implemented the new function
        cloud_ppath_update1D_planeparallel which is consistent with
        cloud_ppath_update1D.  

        * src/scatrte.h : Added the function
        cloud_ppath_update1D_planeparallel.     
        
2003-12-01  Mattias Ekstr�m  <ekstrom@rss.chalmers.se>

        * arts-1-1-726

        * src/m_continua.cc: Commented out the Lagrange 4-point interpolation
        in this file, since it gives 'multiple definition' compilation error
        together with the one in m_abs_o2_models.cc. 

2003-11-30  Thomas Kuhn  <tkuhn@uni-bremen.de>

        * arts-1-1-725

        * src/m_continua.cc: smaller changes according to Stefan's 
        suggestions. Furthermore the Lagrange 4-point interpolation 
        function is moved to the file m_abs_o2_models.cc for possible 
        use in interpolating the magnetic field to the LOS points.
        * src/methods.cc: add method "absPWRO2Model" which is a
        PRELIMINARY version of the method which should at the end
        calculate O2 absorption in the 1-1000GHz range according to
        P. W. Rosenkranz's absorption model written in F77. YUST FOR
        INTERNAL USE IN THIS VERSION!
        * src/m_abs_o2_models.cc: added code for method "absPWRO2Model"
        as descibed above. Furthermore the Lagrange 4-point interpolation
        function is at the moment located here (moved from
        src/m_continua.cc). Additionally the F77 code of R. J. Wells  
        (Rapid approximation to the Voigt/Faddeeva function and its
        derivatives, JQSRT, vol.62, pp.29-48, 1999) is implemented. This
        internal function gives the perspective to use a Voigt function in
        connection with line mixing. Intended to be used in future for 
        O2 60GHz band. The implementation is not completely checked with
        original code. What is done is that the original F77 function
        humlik.for is translated into C code and both are compared to each
        other. Afterwards the the C code is transformed into appropriate
        form for arts (mainly parameter declarations). 
        * doc/examples/o2_can_zeeman_do.arts: added a PRELIMINARY CONTROL
        FILE FOR SIMPLE O2 ABSORPTION/EXTINCTION CALCULATIONS. NOTE THIS 
        IS ONLY FOR INTERNAL USE AT THIS MOMENT.
        
2003-11-28  Cory Davis   <cory@met.ed.ac.uk>

        * arts-1-1-724

        * src/montecarlo.{cc,h}: Added functions *montecarloGetIncoming*,
        and *ppathRecordMC*, as part of a general tidy-up which also
        eliminates unnecessary calls to rte_calc.

        * src/m_montecarlo.cc (ScatteringMonteCarlo): modified to
        incorporate new functions

2003-11-28  Oliver Lemke  <olemke@uni-bremen.de>

        * arts-1-1-723

        * src/Makefile.am: Added dependencies needed for xml reading to
        test_sparse_SOURCES.

        * src/test_sparse.cc: Uncommented xml_read_from_file.
        Added try/catch block around calls to xml_read_from_file.

2003-11-28  Mattias Ekstr�m  <ekstrom@rss.chalmers.se>

        * arts-1-1-722

        * src/test_sparse.cc: Added test45() to test sparse-sparse
        multiplication using matrices from xml files. However, need help with 
        enabling xml support in test_sparse.

2003-11-28  Claudia Emde  <claudia@sat.physik.uni-bremen.de>

        * arts-1-1-721  
        
        * src/workspace.cc (workspace.cc): Included workspace variables 
        for Zeeman implementation. Proper documentation should be added 
        by Nikolay.
        Added WSVs:
        geomag_los: Magnetic field along los (absolute value + angle between 
                los and magnetic field. 
        ext_mat_zeeman: Zeeman extinction matrix.
        abs_vec_zeeman: Zeeman absorption vector.
        ppath_index: Index needed for communication with zeeman prop_agenda.

        Included agenda definitions for agendas added to agenda.cc.

        * src/agendas.cc: Included agendas for  Zeeman implementation.
        zeeman_prop_agenda: Calculation of extinction matrix and absorption
                vector for Zeeman effect.
        geomag_calc_los_agenda: Agenda to calculate the magnetic field along
                the propagation path.

        * src/m_scatrte.cc (scat_fieldCalcLimb): Included this method. It 
        calculates the scattering integral, if different zenith angle grids
        are used for the calculation of *scat_field* and the radiative
        transfer. Interpolations on the different grids are necessary.
        (scat_fieldCalc): If one uses the same grids in both parts (e.g.) for
        nadir geometry, the interpolations are not needed, so it makes 
        sense to have two separate functions. *scat_fieldCalcLimb* is slower, 
        if one has equal grids in both parts.

        * src/methods.cc: Included *scat_fieldCalcLimb*.

2003-11-28  Oliver Lemke  <olemke@uni-bremen.de>

        * arts-1-1-720

        * src/m_abs_o2_models.cc: Added.
        Copied Zeeman function to this place and renamed it ZeemanO2.

        * src/abs_o2_models.h: Added. Includes class ZeemanSettings.

        * src/Makefile.am: Added m_abs_o2_models.cc and abs_o2_models.h.

        * src/matpackI.cc (mult): Removed mult_old.
        Added assertion for matrix of size 0x0.

        * src/matpackI.h: Removed mult_old.

2003-11-27  Stefan Buehler  <sbuehler@uni-bremen.de>

        * arts-1-1-719

        * src/m_continua.cc: Cosmetic changes in doxygen headers.

        * doc/examples/cont_simple_example.arts.in: Tested Thomas new method.

2003-11-27  Cory Davis  <cory@met.ed.ac.uk>

        * arts-1-1-718

        * src/montecarlo{cc,h} (Sample_los_Z): Added.  This is a new
        method for sampling the line of sight in monte carlo scattering
        calculations, and can be enabled by setting the
        ScatteringMonteCarlo keyword parameter 'los_sampling_method' to 3.
        Incident propagation directions are sampled according to a
        probability density function proportional to Z11*sin(za_inc),
        where Z11 is the 1st element of the extinction matrix. This is
        achieved using the rejection method.  This function should provide
        better performance in optically thick cases.
        
        (pha_mat_singleCalc): Added. This is required by the function
        above - it simply returns the phase matrix for given incident and
        scattered directions, summed over all particle types.

        * src/m_montecarlo.cc (ScatteringMonteCarlo): Implemented new
        functions described above. Now testing...

2003-11-27  Thomas Kuhn  <tkuhn@uni-bremen.de>

        * arts-1-1-717

        * src/m_continua.cc: added CKD_MTv1.00 self and foreign continua
        as a prototype for the other continua/abs. models. The way one can
        call these two continua is by calling their methodes as defined in
        methods.cc (i.e. abs_CKDMT_H2O_H2O{} and
        abs_CKDMT_H2O_AIR{}). More description will follow after a first
        round of discussions.
        * src/methods.cc: added new methods abs_CKDMT_H2O_H2O and 
        abs_CKDMT_H2O_AIR for the CKD_MTv1.00 H2O cont. abs.

2003-11-18  Claudia Emde  <claudia@sat.physik.uni-bremen.de>

        * arts-1-1-716

        * src/m_scatrte.cc (scat_fieldCalc): Used *AngIntegrate_trapezoid* 
        instead of *AngIntegrate_trapezoid_opti*. There seems to be a bug in
        the optimized routine for very fine zenith angle resolution. 

2003-11-14  Claudia Emde  <claudia@sat.physik.uni-bremen.de>

        * arts-1-1-715

        Major changes in calculation of the scattering integral. The 
        requirements for the zenith angle discretisation are different for the 
        calculation of the scattering integral and for the radiative transfer
        part inside the cloudbox. For the radiative transfer part, it is very
        important to have a fine discretisation about 90�. This is not so 
        important for the scattering integral. Here we need the same 
        discretisation everywhere as the position of the peak of the 
        phase matrix depends on incoming and outgoing directions. 
        Normally it is sufficient to take 10� steps to get sufficiently 
        high accuracy. 
        I included a new workspace variable *za_grid_size* (the name is
        not very good, I should probably change it) which is set by
        the user and includes the number of grid points of the zenith angle 
        grid used to calculate the scattering integral.
        This modification makes the scattering calculations a lot faster.
                
        * src/m_scatrte.cc (scat_fieldCalc): Included modifications 
        described above.
        (ScatteringInit): Adjusted initialisation of *pha_mat_spt* and 
        *pha_mat*.
        Made some agenda output silent. Now the report file (level 1) is no
        longer useless for scattering calculations. 

        * src/m_optproperties.cc (pha_mat_sptFromDataDOITOpt) and
        (ScatteringDataPrepareDOITOpt): Adapted to the
        new concept. *pha_mat_spt* is now calculated on the zenith angle 
        grid for the scattering integral calculation.
        Note: *pha_mat_sptFromData* shoulds be adapted as well. 

        * src/scatrte.cc: Made agenda output silent.

        * src/optproperties.{cc,h} (interpolate_scat_angleDOIT): Removed
        unused variables. 

        * src/workspace.cc: Included *za_grid_size*.
        
        * src/agendas.cc: Modified input of *pha_mat_spt_agenda* according to 
        new functions.
        
        * src/m_cloudbox.cc (scat_iPut): Fixed 3D part. Adjusted to "new" sizes
        of *scat_i_XXX*.

        * src/ppath.cc: Made *ppath_step_agenda* totally silent. In the 
        scattering calculations there were too many outputs from this agenda.

        * src/rte.cc: Made *ppath_step_agenda* totally silent.
        I hope this is o.k. For clearsky calculation one might like to have
        the agenda output, but in the scattering part it is useless.

2003-11-17  Sreerekha T.R.  <rekha@uni-bremen.de>

        * arts-1-1-714
        
        * src/m_cloudbox.cc: Modified *ybatchMetProfiles* according to the
        suggestions at Structured Programming seminar. There are some
        small modifications. The main things are documentation, especially
        for variables relating to agendas, avoiding copying, setting the
        cloudbox so that the upper cloudbox limit has 0 pnd, and including 
        the pathnames for atmopheric fields are keywords.

        * src/methods.cc: Modified keyword list to include the profile
        path names.
                
        * src/workspace.cc: Removed the variable *met_profile_path* which
        sets the path of temperature, altitude and humidity fields. Now,
        keywords are used for this information.  Also removed
        *met_profile_basenames* as it is not used.
                
        * src/agendas.cc:  Modified the input output list of the agenda
        *met_profile_calc_agenda*. 
        
2003-11-16  Stefan Buehler  <sbuehler@uni-bremen.de>

        * arts-1-1-713

        * src/workspace.cc: Added new variables input variables for the
        absorption models:
        abs_p:     Pressures
        abs_t:     Temperatures
        abs_vmr:   VMR values (these three must have same length)
        abs_model: Model string
        abs_user_parameters: Vector of model parameters
        Also implemented a variable to hold absorption coeffients, abs.

        * src/methods.cc: Added new methods VectorSetExplicitly and absMPM02_H2O.

        * src/m_basic_types.cc: Added method VectorSetExplicitly, which
        can be used to specify a vector directly in the controlfile,
        rather than reading it from a file.

        * src/Makefile.am: Removed continua.cc and continua.h,
        added m_continua.cc.

        * src/continua.cc: Removed.
        
        * src/continua.h: Removed.

        * src/m_continua.cc: Added. Implemented dummy case for
        MPM02 H2O model to define interfaces.

        * doc/examples/cont_simple_example.arts.in: Added. Continuum for one species.

        * doc/examples/Makefile.am: Added the new file.

2003-11-13  Oliver Lemke  <olemke@uni-bremen.de>

        * arts-1-1-712
        
        * configure.in: Add COMPILE_FLAGS to config.h.

        * src/main.cc: Display compile flags with -v.

2003-10-28  Claudia Emde  <claudia@sat.physik.uni-bremen.de>

        * arts-1-1-711  
        
        * src/m_scatrte.cc (scat_fieldCalc): Fixed new bug. I changed
        loop indicies and forgot to adjust p_index for pha_matCalc. 
        Initialization of product_field shifted to right place. 

2003-10-24  Claudia Emde  <claudia@sat.physik.uni-bremen.de>

        * arts-1-1-710
                
        * src/m_scatrte.cc (scat_fieldCalc): Modifications to gain 
        efficiency. Removed mult function, as it is not efficient for 
        small matrices. 
        Removed cloudbox_limits check. Should be put in cloudboxSetManually.
        
        * src/scatrte.cc (cloud_ppath_update3D): Replaced 2 Vectors 
        (los_grid_za and los_grid_aa) by VectorViews. 
        
        * src/math_funcs.{cc/h} (AngIntegrate_trapezoid) and 
        (AngIntegrate_trapezoid_opti): Changed type
        of variable Itegrand from MatrixView to ConstMatrixView.

        * src/m_optproperties.cc (pha_mat_sptFromDataDOITOpt):
        Changed type of pha_mat_int from 
        Vector to VectorView to avoid copying of the variable.

        * src/optproperties.{cc/h}: Replaced  const VectorView by 
        ConstVectorView.

        * src/m_cloudbox.cc (CloudboxGetIncoming1DAtm): Fixed a bug. Now 
        I have tested the method and it works correctly.

2003-10-23  Sreerekha T.R.  <rekha@uni-bremen.de>

        * arts-1-1-709  
        
        * src/m_scatrte.cc (scat_fieldCalc): Added a check that when you
        define a cloud in terms of the pnd_field,  it is within the limits
        of the cloudbox.  

2003-10-22  Oliver Lemke  <olemke@uni-bremen.de>

        * arts-1-1-708

        * src/matpackI.cc (mult): Small loop optimization to gain another 10%
        performance.

2003-10-22  Oliver Lemke  <olemke@uni-bremen.de>

        * arts-1-1-707

        * src/matpackI.cc (mult): Reimplemented Matrix-Vector multiplication.

        * src/matpackI.h: Made mult function friend of Range, ConstVectorView
        and ConstMatrixView.

2003-10-21  Mattias Ekstr�m  <ekstrom@rss.chalmers.se> 

        * arts-1-1-706

        * src/scatrte.cc (cloud_ppath_update1D): Added resizing of rte_vmr_list
        before assigning values to it. The resizing is added right after the 
        calculations of N_species, which also is the size of rte_vmr_list.

        * src/m_cloudbox.cc (CloudboxSetIncomingForTauCalc1D): Removed call to
        rte_calc and returned to first version, just setting the scat_i_p,
        scat_i_lat and scat_i_lon.

        * src/methods.cc: Changed input/output arguments for
        CloudboxSetIncomingForTauCalc1D.

2003-10-21  Mattias Ekstr�m  <ekstrom@rss.chalmers.se> 

        * arts-1-1-705

        * src/M_cloudbox.cc (scat_iPut): Moved calculation of N_lat and N_lon
        to the 3D part of the function.

2003-10-20  Claudia Emde  <claudia@sat.physik.uni-bremen.de>

        * arts-1-1-704  
        
        * src/m_cloudbox.cc (CloudboxGetIncoming1DAtm): Inlcuded this method.
        It calcultes the incoming field for a 3D cloudbox for cases where we
        may assume a spherically symmetric clearsky atmosphere.
        
        * src/methods.cc: Included (CloudboxGetIncoming1DAtm).

2003-10-20  Mattias Ekstr�m  <ekstrom@rss.chalmers.se> 

        * arts-1-1-703

        * src/m_cloudbox.cc: Changed CloudboxSetIncomingForTauCalc1D, so that it
        calls rte_calc. This is acctually unnecessary, but set sets some
        underlying parameters correctly.

        * src/methods.cc: Changed CloudboxSetIncomingForTauCalc1D to accomodate
        for the rte_calc call.

2003-10-17  Claudia Emde  <claudia@sat.physik.uni-bremen.de>

        * arts-1-1-702

        * src/scatrte.{cc,h} (cloud_ppath_update3D): Some modifications were
        necessary because of latest changes.
        The ground emission is not yet implemented in the 3D function.
        
        * src/m_scatrte.cc (scat_fieldCalc): Fixed thescattering integral
        bug also for 3D (had only been fixed in the 1D part).
         
        * src/interpolation.h: Included two missing headers for
        calculation of interpolation weights of "blue" interpolations.
         
        * src/m_cloudbox.cc (scat_iPut): Fixed the 3D part. Size of
        interface variables had to be adjusted.

2003-10-16  Oliver Lemke  <olemke@uni-bremen.de>

        * arts-1-1-701

        * src/m_general.{h,cc} (Print): Added Print method for ArrayOfGridPos.
        Replaced calls to ArrayOfGridPosPrint with Print(...).
        Removed some couts which should not have been there. :-(

2003-10-15  Mattias Ekstr�m  <ekstrom@rss.chalmers.se> 

        * arts-1-1-700

        * src/m_cloudbox: Added WSM CloudboxSetIncomingForTauCalc1D which can
        be used to set the clearsky field on the cloudbox. This function is
        made for transmission calculations.

        * src/methods.cc: Added CloudboxSetIncomingForTauCalc1D.

2003-10-14  Patrick Eriksson  <Patrick.Eriksson@rss.chalmers.se>

        * arts-1-1-699

        * src/ppath.cc (do_gridcell_3d): Added RTOL in the following statement:
                  if( r_ground+RTOL >= rlow  &&  r_end <= r_ground+RTOL )
                    { inside = false;   endface = 7; }
        Without RTOL it did not work always if the ground is exactly on a 
        pressure surface, and with O2. It did work if I just printed the
        difference of the compared radii!

        * src/workspace.cc: Removed a stray \ that caused a compiler warning. 

2003-10-10  Stefan Buehler  <sbuehler@uni-bremen.de>

        * arts-1-1-698

        * src/m_sensor.cc (sensor_responseAntenna1D): Put in a FIXME
        comment for Mattias.

        * src/test_sparse.cc: Modified test cases.

        * src/matpackII.cc: Just put in some commented-out debugging lines.

2003-10-07  Cory Davis  <cory@met.ed.ac.uk>

        * arts-1-1-697

        * src/methods.cc,m_montecarlo.cc,montecarlo.{cc,h}: Overhauled the
        way optical properties were looked up in ScatteringMonteCarlo.
        This was needed because it wasn't working for cases with
        non-uniform pnd_fields. Untested.

2003-10-05  Cory Davis  <cory@met.ed.ac.uk>

        * arts-1-1-696

        * src/optproperties.cc (interpolate_scat_angle): I found that
        numerical gremlins were occasionally causing NaNs for theta_rad in
        perfectly forward scattering cases.  I fixed this problem by
        including two special cases - one for (abs(aa_sca-aa_inc)<ANG_TOL)
        and one for (abs(abs(aa_sca-aa_inc)-180)<ANG_TOL).

2003-10-03  Cory Davis    <cory@met.ed.ac.uk>

        * arts-1-1-695 

        * src/m_montecarlo.cc(ScatteringMonteCarlo): Some significant
        changes to the monte carlo algorithm in the name of improving 
        performance.
        New random number determines whether we have scattering or
        emission. In original line of sight direction pathlength is chosen
        from a different PDF so that a scattering/emission event is
        guaranteed. These changes have not been tested.

        * src/montecarlo{cc,h}: Added Sample_ppathlengthLOS - a new PDF
        for the initial line of sight.  Added the extinction matrix to the
        output of interpTArray.  (Sample_ppathlength) Changed PDF so that
        it is based on the ppath averaged extinction matrix.

2003-10-03  Mattias Ekström  <ekstrom@rss.chalmers.se> 

        * arts-1-1-694

        * src/sensor.cc: Should h in mixer_transfer_matrix be normalised?

        * src/msensor.cc: Fixed bug.

2003-10-02  Cory Davis  <cory@met.ed.ac.uk>

        * arts-1-1-693

        * src/m_montecarlo.cc (ScatteringMonteCarlo): Fixed a bug that occured
        in cases where there are multiple particle types.

2003-10-01  Mattias Ekstr�m  <ekstrom@rss.chalmers.se> 

        * arts-1-1-692

        * src/methods.cc: Changed input parameters for sensor_responseMixer.

        * src/m_sensor.cc: Added consistency checks for all input, and made
        new call to underlying function mixer_transfer_matrix.

        * src/sensor.{cc,h}: Changed sensor_summation_vector to calculate IF
        band frequencies, instead of RF. Now this function doesn't need to
        know about primary- and image band. Also altered mixer_transfer_matrix
        to incorporate number of polarisations and zenith angles/antennas.

2003-09-22  Oliver Lemke  <olemke@uni-bremen.de>

        * arts-1-1-691

        * ChangeLog: Corrected.

2003-09-22  Nikolay Koulev  <nkoulev@uni-bremen.de>

        * arts-1-1-690

        * src/legendre.{cc,h}: Added new (g_legendre_poly_norm_deriv...)
        functions.

        * src/geomag_calc.cc: Small changes.    

2003-09-22  Oliver Lemke  <olemke@uni-bremen.de>

        * arts-1-1-689

        * src/legendre.cc: Added missing 'include cmath' to fix compilation
        problem with gcc2.96 as reported by Cory.

2003-09-22  Oliver Lemke  <olemke@uni-bremen.de>

        * arts-1-1-688

        * ChangeLog: Corrected version numbers in recent entries.

        * src/methods.cc, src/m_basic_types.cc: Removed ArrayOfMatrixAppend.

2003-09-19  Stefan Buehler  <sbuehler@uni-bremen.de>

        * arts-1-1-687
        
        * src/gas_abs_lookup.cc: Fixed bug reported by Patrick and Cory:
        No runtime error was thrown if the frequencies of the calculation
        were not included in the lookup table.
        (find_new_grid_in_old_grid): Completely rewritten. Now the function
        does its task directly, without using gridpos. It is now shorter
        and probably faster. Throws a runtime error if the new frequency
        grid points can not be found in the old grid.

2003-09-19  Claudia Emde  <claudia@sat.physik.uni-bremen.de>

        * arts-1-1-686
        
        * src/m_optproperties.cc (pha_mat_labCalc): Included analytically
        calculated limiting values for the cases were the transformation formulas
        according to Mishchenko are not defined. Now the result for stokes-dim=2
        for a nadir measurement is as expected almost 0. 

2003-09-18  Cory Davis <cory@met.ed.ac.uk>

        * arts-1-1-685

        * src/m_ppath.cc (rte_pos_and_losFromTangentPressure): Cory gets the
        No runtime error was thrown if the frequencies of the calculation
        were not included in the lookup table.
        (find_new_grid_in_old_grid): Completely rewritten. Now the function
        does its task directly, without using gridpos. It is now shorter
        and probably faster. Throws a runtime error if the new frequency
        grid points can not be found in the old grid.

2003-09-19  Claudia Emde  <claudia@sat.physik.uni-bremen.de>

        * arts-1-1-686
        
        * src/m_optproperties.cc (pha_mat_labCalc): Included analytically
        calculated limiting values for the cases were the transformation formulas
        according to Mishchenko are not defined. Now the result for stokes-dim=2
        for a nadir measurement is as expected almost 0. 

2003-09-18  Cory Davis <cory@met.ed.ac.uk>

        * arts-1-1-685

        * src/m_ppath.cc (rte_pos_and_losFromTangentPressure): Cory gets the
        record for the WSM with the longest name.  For limb sounding
        calculations I wanted to be able to easily set up the sensor los
        and pos by specifying the tangent pressure.  The method
        interpolates z from z_field and log p and then uses ppath_calc to
        find the appropriate sensor point at the edge of the atmosphere.  Since
        ppath_calc is used, refraction can be considered by setting
        ppath_step_agenda accordingly.  Only works in the 1-D case at the moment.

        * src/methods.cc: Added rte_pos_and_losFromTangentPressure.
        
2003-09-16  Claudia Emde  <claudia@sat.physik.uni-bremen.de>

        * arts-1-1-684
        
        * src/m_scatrte.cc (scat_fieldCalc): Fixed the bug in the calculation of 
        the scattering integral. Now, the model results are in good agreement 
        with the RAL calculations. 
        
        * src/m_cloudbox.cc (i_fieldSetConst): Slightly modified checks of input 
        variables.

2003-09-04  Mattias Ekstr�m  <ekstrom@chalmers.se>

        * arts-1-1-683

        * arts/src/sensor.cc: Corrected loop in spectrometer_transfer_matrix.

        * arts/src/methods.cc: Added keyword "multiply" to the sensor response
        functions for antenna and backend. This keyword tells arts whether it
        should multiply the current sensor_response with the particular
        antenna/backend response. If not, the antenna/backend response is
        returned as *sensor_response*. This is only a temporary solution.

        * arts/src/m_sensor.cc: Included the multiply kewyword in
        sensor_responseAntenna1D and sensor_responseBackend.

2003-09-04  Nikolay Koulev  <nkoulev@bremen.de>

        * arts-1-1-682
                
        * src/legendre.h: Removed a bug.

2003-09-04  Nikolay Koulev  <nkoulev@bremen.de>

        * arts-1-1-681

        * src/legendre.cc: Added new functions with prefix (g_) for the
        calculations of the legendre polynomes and their derivatives
        specially for the case of utilization of the IGRF coefficients.
        
        * src/legendre.h: Changed accordingly.
        
        * src/geomag_calc.cc: Changed accordingly.
                
2003-08-28  Nikolay Koulev  <nkoulev@bremen.de>

        * arts-1-1-680

        * src/legendre.cc: Changed the derivative expression for one of
        the cases in (legendre_poly_deriv) and
        (legendre_poly_norm_schmidt_deriv).

        * src/geomag_calc.cc: Changed the component definitions of the
        magnetic field.

2003-08-28  Mattias Ekstr�m  <ekstrom@rss.chalmers.se>

        * arts-1-1-679

        * src/sensor.cc (antenna_transfer_matrix): Corrections to indexing, in
        distribution of vector elements into the sparse matrix.

        * src/m_sensor.cc (sensor_responseAntenna1D): Correction again to index
        but this time setting the size of the output matrix.

        * src/test_sensor.cc (test1): Changed the test to a more 'realistic'
        scenario.
 
2003-08-27  Mattias Ekstr�m  <ekstrom@rss.chalmers.se>

        * arts-1-1-678

        * src/m_basic_types.cc: Changed behaviour of ArrayOfMatrixSet.

2003-08-27  Mattias Ekstr�m  <ekstrom@rss.chalmers.se>

        * arts-1-1-677

        * src/sensor.cc: Corrected loop in spectrometer_transfer_matrix

        * src/methods.cc: Added WSM for ArrayOfMatrixSet, which should take
        the place of the previous ArrayOfMatrixAppend method.

        * src/m_basic_types.cc: Implemented ArrayOfMatrixSet, which can set a
        specific element or append a Matrix.

2003-08-26  Oliver Lemke  <olemke@uni-bremen.de>

        * arts-1-1-676

        * src/legendre.cc (legendre_poly_deriv): Removed code from doxygen
        header accidently pasted there before my last commit.
        Reindented the file.

2003-08-26  Mattias Ekstr�m  <ekstrom@rss.chalmers.se>

        * arts-1-1-675

        * arts/src/test_sensor.cc: Changes made to test1, test2 and test6 which
        test the functionality of antenna_transfer_matrix and
        spectrometer_transfer_matrix.

        * arts/src/methods.cc: Added WSM antenna_diagramAppendArray and
        ArrayOfMatrixAppend. Changed input and comments for WSM
        sensor_responseAntenna1D and sensor_responseBackend.

        * arts/src/m_sensor.cc: Major changes in input to methods
        sensor_responseAntenna1D and sensor_responseBackend. The antenna
        method now takes WSV antenna_diagram and a vector as input. The vector
        describes the viewing angles of a multiple antenna/multiple beam
        antenna. The backend method takes a ArrayOfMatrix as input.
        For more information, see arts -d FUNCTION.
        Also added tests to check the input and to call underlying functions
        in the right way. Added function antenna_diagramAppendArray which
        appends a ArrayOfMatrix to WSV antenna_diagram.

        * arts/src/sensor.cc: Made changes to antenna_transfer_matrix
        and backend_transfer_matrix according to the corresponding WSM.
        They now use ArrayOfArrayOfMatrix for the antenna, and ArrayOfMatrix
        for the backend as input.

        * arts/src/workspace.cc: Added WSV antenna_diagram, which is of type
        ArrayOfArrayOfMatrix. Also added arrayomatrix_1 which is an arbitrary
        ArrayOfMatrix and can be used to store intermediate data for example
        to put in antenna_diagram or it can describe the backend channel
        response.

        * arts/src/m_basic_types.cc: Added WSM ArrayOfMatrixAppend to be able
        to append matrices to an array. This can be used to set the response
        for the spectrometer or as an intermediate in setting the antenna
        diagram.

        * arts/src/array.h: Added typedefs for ArrayOfArrayOfMatrix.

        * arts/src/groups.cc: Added ArrayOfArrayOfMatrix (inspired by Claudias
        GridPos arrays :)

        * arts/src/xml_io_array_types.{h,cc}: Added XML read and write methods
        for ArrayOfArrayOfMatrix.

        * arts/src/xml_io_instantiation.h: Added templates for the xml methods.

2003-08-26  Nikolay Koulev  <nkoulev@uni-bremen.de>

        * arts-1-1-674
        
        * src/geomag_calc.cc: Cleaning up and debugging.

        * src/test_geomag_calc.cc: Cleaning up and debugging.
        
2003-08-26  Nikolay Koulev  <nkoulev@uni-bremen.de>

        * arts-1-1-673
        
        * src/legendre.cc: Fixed a bug in the normalizazion factor of
        (legendre_poly_norm_schmidt) and added another special case for
        this normalization.
        
2003-08-26  Nikolay Koulev  <nkoulev@uni-bremen.de>

        * arts-1-1-672
        
        * src/legendre.cc: Added the last [hopefully] special case for
        (legendre_poly_deriv) and (legendre_poly_norm_schmidt_deriv).
        
2003-08-26  Claudia Emde  <claudia@sat.physik.uni-bremen.de>

        * arts-1-1-671
                
        * src/m_optproperties.cc (ScatteringDataPrepareDOITOpt). Further 
        optimization for 1D cases. 

        * src/methods.cc: Included *stmosphere_dim* as input for 
        (ScatteringDataPrepareDOITOpt).
        
2003-08-25  Oliver Lemke  <olemke@uni-bremen.de>

        * arts-1-1-670
        
        * src/legendre.cc: Improved handling of runtime errors.

2003-08-25  Claudia Emde  <claudia@sat.physik.uni-bremen.de>

        * arts-1-1-669
        
        * src/agendas.cc (pha_mat_spt_agenda): Included this agenda 
        to be able to include optimizations. To use the general methods
        it should include **pha_mat_sptFromData*.
        
        * src/m_optproperties.cc (ScatteringDataPrepareDOITOpt): Included.
        This function can be used for spped optimization for the 
        special case of randomly oriented particles. The method can be used
        in *scat_mono_agenda* to interpolate the phase matrix on the 
        frequency and on all possible scattering angles. It turned out 
        that this optimization is much more efficient that the 
        pre-calculation of grid-position and interpolation weights, 
        especially for optically thick scatetring media.
        (pha_mat_sptFromDataDOIT): To use the optimized routines 
        *pha_mat_sptFromData* has to be replaced by this function in 
        *pha_mat_spt_agenda*. It uses the precalculated phase matrix data.
        
        * src/methods.cc: Included the two new methods. Modified entry 
        for *scat_fieldCalc*.

        * src/workspace.cc: Included pha_mat_sptDOITOpt and entry for 
        *pha_mat_spt_agenda*.

        * src/m_scatrte (scat_fieldCalc): Included agenda for calculating
        *pha_mat_spt*.
                
2003-08-25  Oliver Lemke  <olemke@uni-bremen.de>

        * arts-1-1-668

        * src/legendre.cc (legendre_poly_norm_schmidt_deriv),
        (legendre_poly_deriv): Throw runtime error if l==1 && m!=1 && m!=0.
        Include exceptions.h.

2003-08-25  Nikolay Koulev  <nkoulev@uni-bremen.de>

        * arts-1-1-667

        * src/legendre.cc: Debugged the previous modification of the
        special case l=1 in (legendre_poly_norm_schmidt_deriv).

2003-08-25  Nikolay Koulev  <nkoulev@uni-bremen.de>

        * arts-1-1-666

        * src/geomag_calc.cc: Small change, taking into account that
        (legendre_poly_norm_schmidt_deriv) in src/legendre.cc calculates
        the derivative in this case with respect to cos(theta) and not to
        (theta).

        * src/legendre.cc: Modified the special case l=1 in
        (legendre_poly_norm_schmidt_deriv) with regard to the
        normalization and added this case to
        (legendre_poly_deriv).
        
2003-08-22  Oliver Lemke  <olemke@uni-bremen.de>

        * arts-1-1-665

        * src/legendre.cc (legendre_poly_norm_schmidt_deriv): Added special
        case for l = 1.

        * src/sorting.h: Use Index instead of int in comparison functor.
        
        * src/test_sorting.cc: Added testcase which sorts a vector with the
        approximate size needed by claudia's routines.

        * src/.cvsignore: Added test_geomag_calc.

2003-08-21  Nikolay Koulev  <nkoulev@uni-bremen.de>

        * arts-1-1-664

        * src/geomag_calc.{cc,h}: Added these files containing the
        prelimmanary calculating routine of the geomagnetic field.

        * src/test_geomag_calc.cc: Added test file for the geomagnetic
        calculation.
        
2003-08-21  Nikolay Koulev  <nkoulev@uni-bremen.de>

        * arts-1-1-663

        * src/legendre.cc: Fixed a bug in (legendre_poly_deriv) and
        (legendre_poly_norm_schmidt_deriv).
        
2003-08-21  Oliver Lemke  <olemke@uni-bremen.de>

        * arts-1-1-662

        * src/sorting.h: Include functional.

2003-08-21  Claudia Emde  <claudia@sat.physik.uni-bremen.de>

        * arts-1-1-661

        * src/m_optproperties.{cc,h}: Included new methods for speed 
        optimization
        of the DOIT (Discrete Order of ITerative) - this is now the official
        name - method. The program is slow because of the transformation 
        from the scattering frame into the laboratory frame. For each 
        combination of incoming and scatterd direction the scattering angle
        is calculated and then the data is interpolated on the scattering 
        angle. The calculation of the gridpositions is most time consuming.
        To avoid recalculating gridpositions and scattering angle over and
        over again I included a new method:

        (ScatteringDataPrepareDOIT): The method shall calculate scattering
        angle, gridpositions and interpolation weights and stores them in 
        the WSVs *scat_theta*, *scat_theta_gps*, *scat_theta_itws*. These 
        variables are used then in (pha_matTransform).
        - The method is not finished yet- 

        If you do not want to use the DOIT method you have to include
        (ScatteringDataPrepareOFF) in yopur control file and everything works 
        as before. This methods sets the WSVs *scat_theta*, *scat_theta_gps*,
        *scat_theta_itws* empty.

        * src/optproperties.{cc,h} (pha_matTransform): Included switch. If 
        *scat_theta* is empty the old transformation including the full 
        interpllation is performed. 
        If not, a now function (interpolate_scat_angleDOIT) is executed.
        - this function is also not finished yet-
        
        * src/m_optproperties (pha_mat_sptFromData): Adjusted function call 
        to (pha_matTransform).
        
        * src/m_scatrte.cc (scat_fieldCalc): Adjusted function call to 
        (pha_mat_sptFromData) and included new WSVs as input.
        (i_fieldUpdate***): Removed unused variables. 
        
        * src/m_montecarlo.cc: Adjusted function call to (pha_mat_sptFromData)
        and included new WSVs as input.
        
        * src/methods.cc: Included the new methods and adjusted interfaces of 
        (scat_fieldCalc), (ScatteringMonteCarlo) and (i_fieldUpdate***). 

        * src/workspace.cc: Included WSVs *scat_theta*, *scat_theta_gps*,
        *scat_theta_itws*.
        
        * src/groups.cc: Included ArrayOfArrayOfArrayOfArrayOfGridPos needed
        for *scat_theta_gps*.
        
        * src/interpolation.h: Included typedefs for ArrayOfArrayOfGridPos,
                ArrayOfArrayOfArrayOfGridPos and 
                ArrayOfArrayOfArrayOfArrayOfGridPos.

        * src/xml_io_array_types.{cc,h}: Added reading and writing routines for
        the grid position arrays.

        * src/xml_io_instantiation.h: Included templates for xml routines.

2003-08-21  Oliver Lemke  <olemke@uni-bremen.de>

        * arts-1-1-660

        * src/sorting.h: Include algorithm.

2003-08-20  Oliver Lemke  <olemke@uni-bremen.de>

        * arts-1-1-659

        * src/Makefile.am: Added sorting.h and target test_sorting.

        * src/sorting.h: Template function to get the sorted indexes for a
        simple container type like Array or Vector.

        * src/test_sorting.cc: Added for testing and as an example for sorting
        a Vector and an Array.

        * src/matpackI.h: Added typedefs for iterators to class for
        compatibility with STL.

        * src/.cvsignore: Added test_sorting.

        * ChangeLog: Cleanup.

2003-08-19  Cory Davis    <cory@met.ed.ac.uk>

        * arts-1-1-658

        * src/m_montecarlo.cc, methods.cc: changed (shift_rte_pos) to
        (rte_posShift), modified the method to also change rte_gp_XXX
        to the corresponding values at the end of ppath.  It should
         work for all values of atmosphere_dim now.  This is a 
        workaround to get cloud box exit radiances as well as the
        measurement Stokes vector in DOSO scattering runs for
        comparison with Monte Carlo scattering results.

        * src/montecarlo.cc (Cloudbox_ppath_rteCalc): changed call to 
        shift_rte_pos

2003-08-19  Claudia Emde  <claudia@sat.physik.uni-bremen.de>

        * arts-1-1-657

        * src/optproperties.{cc,h}: Fixed bug in (pha_matCalc). If incoming
        and outgoing directions lie on a great circle through the 
        north pole the transformations are not defined. This was 
        the reason for the nan values, which sometimes appeared.
        
        Furthermore cleaned up the code: Removed unused vaiable and 
        included dummys to remove warnings during compilation. 

        Included some defines to avoid copying variables. 
        
        * src/m_optproperties.cc: Included defines.

2003-08-19  Nikolay Koulev  <nkoulev@uni-bremen.de>

        * arts-1-1-656
        
        * src/test_legendre.cc: Added function
        (legendre_poly_norm_schmidt_deriv) to test the derivative of the
        Schmidt quasi-normalized Legendre polynomials.

2003-08-19  Oliver Lemke  <olemke@uni-bremen.de>

        * arts-1-1-655
        
        * src/test_legendre.cc: Updated. Use renamed function
        legendre_poly_norm_schmidt.

2003-08-18  Nikolay Koulev  <nkoulev@uni-bremen.de>

        * arts-1-1-654

        * Changelog: Corrected typos in my arts-1-1-653 and arts-1-1-652
        entries.
        
2003-08-18  Nikolay Koulev  <nkoulev@uni-bremen.de>

        * arts-1-1-653
        
        * src/legendre.h: Added (legendre_poly_norm_schmidt_deriv) and
        changed (legendre_poly_norm) to (legendre_poly_norm_schmidt).   
        
2003-08-18  Nikolay Koulev  <nkoulev@uni-bremen.de>

        * arts-1-1-652

        * src/legendre.cc (legendre_poly_norm_schmidt_deriv): Added this
        function for calculating the derivative of the Schmidt
        quasi-normalized Legendre polynomials.
        
        * src/legendre.cc (legendre_poly_norm_schmidt): Changed the name
        of (legendre_poly_norm) to (legendre_poly_norm_schmidt) in order
        to reflect the fact that it is a quasi-normalisation in terms of
        Schmidt's defition. Due to this normalization the partial order
        sum of the squares of the two polynomial coefficicients for a
        given degree remains invariant under an arbitrary rotation of the
        (theta, phi) coordinate system in the description of the scalar
        potential, and thus of the magnetic field B.
        [Peddie, N. W., International Geomagnetic Reference Field: The
        Third Generation, J. Geomag. Geoelectr., 34, pp. 309-326, 1985.;
        Langel, R. A., Main Field, Chapter Four in Geomagnetism,
        ed. J. A. Jacobs, Academic Press, London, 1987.]

        * src/zeemanpoppertis.{cc,h}: Minor changes. Still being updated.

        * src/test_zeemanpoppertis.{cc,h}: Minor changes. Still being updated.
        
2003-08-18  Oliver Lemke  <olemke@uni-bremen.de>

        * arts-1-1-651

        * src/legendre.cc (legendre_poly_deriv): Forget the doxygen
        documentation. Shame on me. :-(

2003-08-15  Oliver Lemke  <olemke@uni-bremen.de>

        * arts-1-1-650

        * src/legendre.{cc,h}: Added function to calculate legendre
        derivatives.

        * src/test_legendre.cc: Added test for legendre derivative.

        * src/math_funcs.cc (fac): Cosmetics.

2003-08-15  Mattias Ekstr�m  <ekstrom@rss.chalmers.se>

        * arts-1-1-649

        * arts/src/sensor.cc: Changed antenna_transfer_matrix so that calls
        to sensor_integration_vector is only done for changing antenna diagram.
        For spectrometer_transfer_matrix changes are made to incorporate the
        changes in sensor_responseBackend.
        Removed obsolete functions at end of file.

        * arts/src/m_sensor.cc:  Added some extra input tests to
        sensor_responseBackend and also the possibility to use one channel
        reponse for all channels or individual ones, in analogy with
        sensor_responseAntenna1D.

2003-08-15  Oliver Lemke  <olemke@uni-bremen.de>

        * arts-1-1-648

        * src/math_funcs.{cc,h}: Added function fac to calculate factorials.

        * src/legendre.{cc,h}: Rename legendre_polynomial to legendre_poly.
        Added function legendre_poly_norm to calculate normalized associated
        legendre polynomials.

        * src/test_legendre.cc: Updated.

        * src/Makefile.am: Added math_funcs.{cc,h} and dependencies to
        test_legendre target.

2003-08-13  Mattias Ekstr�m  <ekstrom@rss.chalmers.se>

        * arts-1-1-647

        * src/sensor.{cc,h}: Altered the scale_antenna_diagram function, 
        now it does not return any object. Also made changes to
        antenna_transfer_matrix so that it make use of the new insert_row
        for Sparse and to fit the new handle of antenna diagrams.

        * src/m_sensor.cc: Added a way to handle different antenna diagram
        input methods and an extra test that the antenna diagram does not
        expand outside the zenith angle measurement block.
        This function has not yet been tested.

2003-08-14  Oliver Lemke  <olemke@uni-bremen.de>

        * arts-1-1-646

        * src/legendre.cc: Declare variables inside the blocks where they are
        used, not at the top of the function.
        Minor optimizations.

        * src/legendre.h: Cosmetics.

        * src/test_legendre.cc: Added CPU time measurement over loop of
        1000000 calculations.

2003-08-14  Oliver Lemke  <olemke@uni-bremen.de>

        * arts-1-1-645

        * src/legendre.{cc,h}: Added. Function calculates associated Legendre
        polynomials. The code is based on the Numerical recipes. Results were
        compared to the Legendre calculations from the GNU Scientific library
        and found to be identical.

        * src/poly_roots.cc: Added reference to the GNU Scientific library in
        doxygen header.

        * src/Makefile.am: Added legendre.{cc,h} and test_legendre.

        * src/test_legendre.cc: Added.

        * src/.cvsignore: Added test_legendre.

2003-08-13  Mattias Ekstr�m  <ekstrom@rss.chalmers.se>

        * arts-1-1-644

        * src/test_sparse.cc: Added test function for insert_row.

2003-08-13  Mattias Ekstr�m  <ekstrom@rss.chalmers.se>

        * arts-1-1-643

        * src/matpackII.{cc,h} (insert_row): Added function to insert a whole
        row at a time.

        * doc/uguide/main.tex: Added myself as contributor.

2003-08-13  Cory Davis  <cory@met.ed.ac.uk>

        * arts-1-1-642

        * src/optproperties.cc (pha_mat_labCalc):changed za_inc_rad == PI
        etc to za_inc_rad > PI-ANGTOL etc.  This seems to have fixed the
        problem of nans in 1D scattering calculations for stokes_dim==2.
        ANGTOL = 1e-6.

2003-08-13  Oliver Lemke  <olemke@uni-bremen.de>

        * arts-1-1-641

        * src/main.cc: Fixed bug reported by Christian. Option -b was not
        working (implementation was missing!?).

2003-08-12  Stefan Buehler  <sbuehler@uni-bremen.de>

        * arts-1-1-640

        * src/matpackII.cc (operator=): I had forgotten to delete previous
        content of the target in the assignment operator, introducing a
        memory leak. Fixed this.

        * src/test_sparse.cc: Extended copying test to confirm memory
        leak. 

        * src/m_hdf.cc (binfile_write_vector): Fixed mismatched delete
        operator bug.
        (binfile_write_matrix): Fixed mismatched delete
        operator bug.

        * src/mystring.h (operator=): Correction in doxygen header.

        * doc/uguide/matrix_vector.tex: Fixed typo.
        Rephrased the part about transpose for sparse slightly.

2003-08-08  Stefan Buehler  <sbuehler@uni-bremen.de>

        * arts-1-1-639

        * src/matpackI.cc: Replaced delete by delete[] in destructors, to
        fix bug reported by valgrind. 

        * src/matpackIII.cc: Replaced delete by delete[] in destructor, to
        fix bug reported by valgrind. 

        * src/matpackIV.cc: Replaced delete by delete[] in destructor, to
        fix bug reported by valgrind. 

        * src/matpackV.cc: Replaced delete by delete[] in destructor, to
        fix bug reported by valgrind. 

        * src/matpackVI.cc: Replaced delete by delete[] in destructor, to
        fix bug reported by valgrind. 

        * src/matpackVII.cc: Replaced delete by delete[] in destructor, to
        fix bug reported by valgrind. 

2003-08-09  Mattias Ekstr�m  <ekstrom@rss.chalmers.se>

        * arts-1-1-638

        * src/matpackII.cc: Inserted <algorithm> again, I need it for
        compilation.

        * doc/uguide/matrix_vector.tex: Added section about Sparse.

2003-08-08  Stefan Buehler  <sbuehler@uni-bremen.de>

        * arts-1-1-637

        * src/matpackII.cc: Moved inclusion of <set> here from matpackII.h.
        (operator=): Added this assignment operator for Sparse to fix a
        bug found by Mattias. It was a familiar problem (though it was
        still hard to find, because I had forgotten about it): If no
        assignment operator is defined explicitly, the compiler will
        automatically generate one, which does not do the right thing.

        * src/matpackII.h: Removed some unnecessary #includes.
        Added assignment operator.

        * src/test_sparse.cc: Added a test for sparse copying.

2003-08-07  Oliver Lemke  <olemke@uni-bremen.de>

        * arts-1-1-636

        * doc/doxygen/Makefile.am: Prevent doxygen from overwriting our own
        Makefile in latex/.

        * doc/doxygen/latex/Makefile.am: Added targets from doxygen Makefile.
        Define targets only in maintainer mode.
        If you want to get a ps or pdf version of the doxygen documentation,
        go to the latex directory and run:

        make refman.ps
        or
        make refman.pdf

        But note that the document is really large (resulting postscript file
        has >1800 pages and is nearly 30 MB in size). It might not even work
        with all doxygen versions. PS creation tested with doxygen v1.3.3.
        Pdf version does not build.

2003-08-07  Oliver Lemke  <olemke@uni-bremen.de>

        * arts-1-1-635

        * src/matpackII.cc (mult): Removed FIXME. Nothing to fix. :-)

2003-08-07  Oliver Lemke  <olemke@uni-bremen.de>

        * arts-1-1-634

        * src/matpackII.cc (transpose): Cast loop variable c of type size_t
        explicitly to Index in find function. c can never be >MAX(Index)
        because mrowind and mcolptr are themselves of type Index, so
        downcasting is ok here.

2003-08-06  Mattias Ekstr�m  <ekstrom@rss.chalmers.se>

        * arts-1-1-633

        * src/matpackII.cc (transpose, mult): Implemented changes proposed by
        Stefan.

2003-08-07  Oliver Lemke  <olemke@uni-bremen.de>

        * arts-1-1-632

        * doc/doxygen/latex/Makefile.am: Unset thisdoc_DATA to avoid automatic
        build of postscript file.

2003-08-06  Stefan Buehler  <sbuehler@uni-bremen.de>

        * arts-1-1-631

        * src/matpackII.cc (mult): Put in some comments, marked by FIXME.
        (transpose): Made one modification and put in some comments,
        all marked by FIXME.

        * src/test_sparse.cc: Test transpose.

2003-08-06  Mattias Ekstr�m  <ekstrom@rss.chalmers.se>

        * arts-1-1-630

        * src/matpackII.cc: Remade the sparse-sparse mulitplication method and
        the transpose method for the new simplified sparse matrix. Removed old
        functions.

        * src/matpackII.h: Removed old functions and added inclution of 
        <algorithm> and <set> needed by transpose and mult.

        * src/test_sparse.cc: Added two test function for testing transpose and
        multiplication.

2003-07-31  Oliver Lemke  <olemke@uni-bremen.de>

        * arts-1-1-629

        * src/m_montecarlo.cc (ScatteringMonteCarlo): Use ios::out. ios_base is
        undefined in gcc 2.x.

        * src/montecarlo.cc: l.562 Multiline string literals are not allowed
        in ANSI-C++. Leads to compiler error in gcc >= 3.3.

2003-07-31  Oliver Lemke  <olemke@uni-bremen.de>

        * arts-1-1-628

        * src/m_general.cc: Include unistd.h. Otherwise function sysconf is
        unknown on gcc2 systems.

2003-07-31  Oliver Lemke  <olemke@uni-bremen.de>

        * arts-1-1-627

        * src/methods.cc, src/m_general.cc: Added dummy Print method for
        group Timer.
        Added methods timerStart and timerStop.

        * src/m_general.h: Added dummy Print method for group Timer.
        Fixed filename in doxygen header.

        * src/workspace.cc: Added WSV timer.

        * src/groups.cc: Added group Timer.

        * src/make_auto_wsv_groups_h.cc: Include m_general.h in
        auto_wsv_groups.h.

        * src/make_auto_wsv_h.cc: Include m_general.h in auto_wsv.h.

        * src/Makefile.am: make_auto_wsv_h and make_auto_wsv_group_h must
        depend on m_general.h.

        * src/xml_io_basic_types.{h,cc}, src/xml_io_instantiation.h: Added
        dummy read/write functions for group Timer.

        * doc/doxygen/html/Makefile.am: Added graph_legend.dot and
        formula.repository to MAINTAINERCLEANFILES.

        * doc/doxygen/Makefile.am: Use CLEANFILES instead of target clean.
        Otherwise 'doxyfied' is not removed with make maintainer-clean.
        Readded latex to subdirs.

        * doc/doxygen/latex/.cvsignore: Added refman.out.

        * doc/doxygen/latex/Makefile.am: Define empty 'all' target as we don't
        won't to build ps/dvi by default but the user should be able to do so
        if she likes.
        Undef EXTRA_DIST.

        * doc/doxygen/Doxyfile.in: Disabled creation of man pages and rtf. If
        we want to support this, we should also create man and rtf directories
        with appropriate Makefiles in the repository.

        * configure.in: Readded doc/doxygen/latex/Makefile to AC_OUTPUT. We
        don't build latex doxygen documentation by default, but it should be
        possible to do it manually. For this case we need the Makefile.

        * src/gas_abs_lookup.cc: Put empty doxygen header in front of output
        operator to prevent doxygen confusion.

        * doc/doc++/{.,html,tex}/.cvsignore: Removed to make directories empty
        and pruned on checkout/update.

        * ChangeLog: Wrapped paragraphs with lines > 80 chars. Cory, your
        emacs sucks ;-)

2003-07-30  Cory Davis <cory@met.ed.ac.uk>

        * arts-1-1-626

        * src/methods.cc, src/m_montecarlo.cc (ScatteringMonteCarlo): Added
        control parameter los_sampling_method.

        * src/montecarlo.cc, src/montecarlo.h (Sample_los): added a new
        probability density function from which to sample the line of sight,
        there are now 2: g = 0.5sin(1-cos), and g = 0.5sin.  The new argument
        los_sampling_method chooses between the two.

2003-07-30  Cory Davis <cory@met.ed.ac.uk>

        * arts-1-1-625

        * src/methods.cc, src/m_montecarlo.cc (ScatteringMonteCarlo): Added
        control parameters record_histdata and histdata_filename. These enable
        the output of each 'photon' contribution, which can then be analysed
        in MATLAB to investigate error reduction.
        Fixed bug in line of sight sampling.

        * src/montecarlo.cc, src/montecarlo.cc (Sample_los): Tidied Sample_los
        function.

2003-07-29  Sreerekha T.R.  <rekha@uni-bremen.de>
        
        * arts-1-1-624
        
        * src/m_cloudbox.cc (ybatchMetProfiles): Modified the method so
        that the lower cloudbox limit is the lowest pressure level. This
        makes it possible to set the ground emissivity other than
        1. Improved documentation also.

        * src/m_scatrte.cc, src/scatrte.cc: Removed unnecesary couts which
        I used to test the ground emissivity part.  

2003-07-29  Cory Davis  <cory@met.ed.ac.uk>
        
        * arts-1-1-623

        * src/rng.cc: Sorry, I had forgotten to #include "arts.h"

2003-07-28  Cory Davis  <cory@met.ed.ac.uk>

        * arts-1-1-622

        * src/rng.cc (rng::seed):  temporarily enabled output of random number
        generator seed for use in debugging

2003-07-28  Cory Davis <cory@met.ed.ac.uk>
        
        * arts-1-1-621

        * src/methods.cc: added control parameter "silent" to
        ScatteringMonteCarlo WSM.
        This disables/enables iterative output.

        * src/m_montecarlo.cc (ScatteringMonteCarlo): added "silent control
        parameter" and added code to output estimated execution time.

2003-07-28  Oliver Lemke  <olemke@uni-bremen.de>

        * arts-1-1-620

        * src/test_matpack.cc: Added testcase for cory.

2003-07-25  Cory Davis  <cory@met.ed.ac.uk>

        * arts-1-1-619

        * src/m_montecarlo.cc (ScatteringMonteCarlo):  I have been testing the 
        code for more optically thick cases.  This has led to two modifications.
        1. Introduced a cut off value for Q[0,0] below which higher scattering
        orders are neglected.
        2. There were problems with inconsistency of the returned exit radiance
        and the estimated error.  It seemed like a problem with rounding or
        type conversion.  The problem seems to have gone away by including the
        following explicit cast (L631)
        I/=(Numeric) maxiter;  //For some reason this cast seems to help?
        I is a Vector (the exit stokes vector) and maxiter is an Index.
        I don't really know why this helps - I would have thought the type
        conversion worked automatically. Any ideas?

2003-07-24  Patrick Eriksson  <Patrick.Eriksson@rss.chalmers.se>

        * arts-1-1-618

        * src/methods.cc: Revised the description of "my" methods.

        Renamed methods as follows:
           CloudboxOff                  ->   cloudboxOff
           CloudboxSetManually          ->   cloudboxSetManually
           GroundNoScatteringSingleEmissivity    -> 
                                             groundNoScatteringSingleEmissivity
           GroundTreatAsBlackbody       ->   groundTreatAsBlackbody     
           RefrIndexFieldAndGradients   ->   refr_indexFieldAndGradients

2003-07-24  Oliver Lemke  <olemke@uni-bremen.de>

        * arts-1-1-617

        * src/test_sparse.cc: Define joker to fix compilation with gcc 2.95.3.

2003-07-24  Oliver Lemke  <olemke@uni-bremen.de>

        * arts-1-1-616

        * src/Makefile.am: Added m_general.h.

        * src/m_general.h: Added template function implementation
        for general supergeneric workspace method Print and explicit
        prototypes for ArrayOfIndex, ArrayOfString and Ppath Print method.

        * src/m_general.cc: Removed *Print functions.
        Added explicit implementation of Print for ArrayOfIndex,
        ArrayOfString, Ppath.

        * src/make_auto_md_cc.cc: Include m_general.h in auto_md.cc.

        * src/m_ppath.cc: Removed PpathPrint. Now covered by general Print
        method.
        Include m_general.h

        * src/optproperties.{cc,h}: Added dummy output operator for
        ArrayOf/SingleScatteringData.

        * src/gas_abs_lookup.{cc,h}: Changed GasAbsLookup from struct to
        class.
        Added dummy output operator for GasAbsLookup.

        * src/m_scatrte.cc: Use new Print instead of PpathPrint.

        * src/methods.cc: Added supergeneric Print method.
        Removed all other *Print methods.

        * src/describe.cc: Do not include sstream.

        * src/montecarlo.{cc,h}: Include sstream in cc instead of h and put
        appropriate ifndef around.

        * src/m_montecarlo.cc: Do not include sstream.

2003-07-24  Oliver Lemke  <olemke@uni-bremen.de>

        * arts-1-1-615

        * src/agendas.cc: Added missing _ after scalar_gas_absorption_agenda
        in rte_agenda.

2003-07-23  Patrick Eriksson  <Patrick.Eriksson@rss.chalmers.se>

        * arts-1-1-614

        * src/xxx: Changed name of variables like a_pos, a_los and a_gp_p
        to start with rte_ throughout the code.
        
        * src/workspace.cc: Revised description of "my" variables.

        * src/agendas.cc: Revised description of "my" agendas.

2003-07-23  Patrick Eriksson  <Patrick.Eriksson@rss.chalmers.se>

        * arts-1-1-613

        * src/rte.cc (get_radiative_background): Fixed the bug reported by
        Sreerekha.  The problem was that ground reflections gave clearly
        wrong results.

        There was a clear bug, connected with a confusion of a local
        version of ppath and the WSV ppath. As rte_agenda always uses the
        WSVs, I did not help to send a local variable to rte_calc. Now the
        orignal data are copied, the downwelling radiation is calculated,
        and the ppath data is put back into ppath. The results now looks
        OK, but no heavy checks.

        This is a general comment about the ground reflections. The code
        runs but I have not made any detailed checks of the correctness of
        the results. So, please take care. And try to check the results if
        you run cases with ground reflections.

2003-07-22  Oliver Lemke  <olemke@uni-bremen.de>

        * arts-1-1-612
        
        * src/methods.cc: GINPUT/GOUTPUT is called generic, not global.
        Corrected descriptions.

2003-07-22  Sreerekha T.R.  <rekha@uni-bremen.de>
        
        * arts-1-1-611
        
        * ChangeLog : Edited the ChangeLog message of the previous
        version as Stefan pointed out a wrong statement there.  I had
        written that the clear-sky part and cloudbox part agree when the
        particle number density is zero. But there is a difference for low
        emissivity values.    
        
2003-07-21  Sreerekha T.R.  <rekha@uni-bremen.de>

        * arts-1-1-610
        
        * src/scatrte.cc (cloud_ppath_update1D): Implemented the ground
        reflection part when cloudbox is set on.  In the same way as
        clear-sky part we can use the method
        *GroundNoScatteringSingleEmissivity* to give different surface
        emissivity values keeping in mind that the cloudbox has to be
        extended to the ground. The results are compared with the 
        clear-sky values when the particle number density is zero.This
        shows good agreement for higher emissivity values.  For emissivity
        =0, there is a difference of about 1 K. Also Included some variables
        related to ground reflection in the parameter of this function.

        * src/scatrte.h: Added ground reflection parameters according to
        the function cloud_ppath_update1D. 

        * src/m_scatrte.cc:  Added ground reflection parameters for the
        method *i_fieldUpdateSeq1D*.
        
        * src/methods.cc: Adapted *i_fieldUpdateSeq1D* to the above
        changes.  
        
2003-07-21  Oliver Lemke  <olemke@uni-bremen.de>

        * arts-1-1-609

        * src/version.cc: Replaced reconf with autogen.sh.

2003-07-21  Oliver Lemke  <olemke@uni-bremen.de>

        * arts-1-1-608

        * doc/uguide/development.tex: Replaced reconf with autogen.sh.

2003-07-21  Oliver Lemke  <olemke@uni-bremen.de>

        * arts-1-1-607

        * configure.in: Added check for arts-xml-data.
        Updated list of examples.

        * autogen.sh: Look for arts data packages in /usr/share on smiles PCs.

        * doc/examples/Makefile.am: Updated list of examples.

        * doc/examples/{cloud_rad_field1D_example.arts.in,
        i_field_example.arts.in}: Replaced path to arts xml data with
        @ac_arts_xml_data@.

2003-07-17  Cory Davis   <cory@met.ed.ac.uk>

        * arts-1-1-606

        * src/workspace.cc: Removed ppathLOS

        * src/montecarlo.cc (Cloudbox_ppathCalc): made silent. 
        (Cloudbox_ppath_rteCalc): disabled error checking in calls to rte_calc
        .  This made an enormous improvement in performance.  Depending on 
        optical thickness I can now do 10^5 photons in 90 seconds with 
        debugging disabled.  Previously this took about 2 hours:)

2003-07-16  Stefan Buehler  <sbuehler@uni-bremen.de>

        * arts-1-1-605

        * src/matpackII.cc: Cleaned up the sparse matrix
        implementation. Everything related to views and ranges has been
        kicked out. WARNING: the function transpose and sparse-sparse
        multiplication are currently commented out. ARTS sensor model code
        will not work properly!

        * src/matpackII.h: Ditto for the header file.

        * doc/uguide/matrix_vector.tex: Added template section about
        sparse matrices.

        * src/test_sparse.cc: Added this file for sparse matrix tests.

        * src/test_matpack.cc: Moved sparse testing routines to test_sparse.cc.

        * src/Makefile.am: Added test_sparse.

        * src/.cvsignore: Added test_sparse.

        * src/xml_io_basic_types.cc: Small adaptations to cleaned up sparse matrices.

        * src/sensor.h: Small adaptations to cleaned up sparse matrices.

        * src/sensor.cc: Small adaptations to cleaned up sparse matrices.

        * src/matpackI.h: Small adaptations to cleaned up sparse matrices.

        * src/m_sensor.cc: Small adaptations to cleaned up sparse
        matrices.
        (sensorOff): Fixed typo in error message that lead to compiler
        warning.

2003-07-16  Cory Davis (rsh)   <cory@fog>

        * arts-1-1-604

        * src/m_montecarlo.cc, src/methods.cc: removed TArrayCalc.

        * src/montecarlo.cc, src/montecarlo.h: added TArrayCalc and fixed bug.

        * src/workspace.cc: removed TArray, ext_matArray, abs_vecArray, and 
        t_ppath.  Removed I - output of ScatteringMonteCarlo now goes in i_rte.
        Changed Ierror to i_montecarlo_error

2003-07-14  Patrick Eriksson  <Patrick.Eriksson@rss.chalmers.se>

        * arts-1-1-603

        * src/m_sensor.cc (sensorOff): Fixed a bug reported by Sreerekha (who
        also found how to solve it). The mblock_za_grid was wrongly set to 1,
        instead of 0 (I was probably thinking about the length).

2003-07-13  Patrick Eriksson  <Patrick.Eriksson@rss.chalmers.se>

        * arts-1-1-602

        * src/workspace.cc: Removed y_rte as it is needed with new scheme for
        polarisation. Removed mblock_index as it can not be used as I thought.

        Added WSVs sensor_pol, sensor_rot, sensor_response_f, 
        sensor_response_za and sensor_response_aa.

        * src/methods.cc: Removed yNoPolarisation and RteTest.

        * src/rte.cc (rte_calc): Added sensor_pol and sensor_rot as input 
        arguments. Changed y_rte to y.

        The vector *y* is now only filled if *apply_sensor* = true. This means
        if the function is called to obtain monochromatic pencil beam values
        this has to be done for one line-of-sight at the time, and the result
        is returned by *i_rte*. This is the way the function is already used
        from CloudboxGetIncoming and ScatteringMonteCarlo.

        Implemented polarisation, beside the rotation part.
        
        * src/rte.cc (get_radiative_background): Removed antenna_dim as input.
        Changed call of rte_calc following changes given above.

        * src/m_cloudbox.cc (CloudboxGetIncoming): Adapted to changes in 
        rte_calc. Made y a local variable. Removed y_rte as input.

        * src/montecarlo.cc (Cloudbox_ppath_rteCalc): Adapted to changes in 
        rte_calc. Made y a local variable. Removed y_rte as input.

        * src/m_montecarlo.cc (ScatteringMonteCarlo): Removed y_rte as input.

        * src/m_sensor.cc (sensor_responseInit): Added sensor_pol, stokes_dim
        and atmosphere_dim as input. The function now considers the number
        of polarisations provided by the sensor.
        Added sensor_response_f, sensor_response_za and sensor_response_aa
        as output.

        Moved AntennaSet1D/2D to this file from m_general.cc.

        Added WSM sensorOff.

        * src/m_basic_types.cc (VectorSetElement): Removed this WSM as it took
        a vector index as argument. We have decided that WSM shall not take
        index as input, to avoid problems with 0 and 1 based indexing. 
        (I was the one that had created the method)

        * src/m_physics.cc (VectorToTbByRJ): Modified the method to take
        sensor_response_f, sensor_response_za, sensor_response_aa and 
        sensor_pol as input.

        Did the same for VectorToTbByPlanck, MatrixToTbByRJ and 
        MatrixToTbByPlanck.
        
        * src/check_input.cc (chk_y_with_sensor): Added this function.

2003-07-08  Patrick Eriksson  <Patrick.Eriksson@rss.chalmers.se>

        * arts-1-1-601

        * Commit of changes made during the Bredbeck workshop.

        * src/ppath.cc (ppath_calc): Included flag to seperate standard path 
        calculations from path calculations inside the cloudbox (for e.g.
        Montye Carlo calculations).

        * src/rte.cc (rte_calc): Included input argument to control agenda
        end of ppath, TArrayCalc - calculates arrays of several useful 
        quantities along a propagation path within the cloud box.

        * src/workspace.cc: Added I - the stokes vector exiting the cloudbox
        in the direction of the sensor, Ierror - the estimated error in I. 
        abs_vecArray - an array of absorbtion coefficient vectors along a 
        cloudbox propagation path. ext_matArray - an array of extinction 
        matrices along a cloudbox propagation path,  TArray - an array of 
        transmittance matrices along a cloudbox propagation path, t_ppath - a 
        vector of temperatures along a cloudbox propagation path, ppathLOS - 
        the propagation path for the initial line of sight.

        I realise that 'I' might be redundant, since i_rte is already available.
        This is something I will sort out once I have addressed radiative 
        transfer from the cloudbox exit to the sensor.
        
        * src/m_montecarlo.cc:  Added.  This file includes WSM
        ScatteringMonteCarlo, which performs a 3D scattering calculation.
        A control file using this method is available on request.  There
        are several issues that need to be addressed in this code, including 
        efficiency issues, random number generation, and radiative transfer
        from the cloud box to the sensor.  However, in it's current state it
        should be ready for comparison with the existing scattering code.

        * src/montecarlo.cc: Added.  Helper functions for ScatteringMonteCarlo.

        * src/ppath.cc: fixed bug in ppath_start_3d() - removed double == double 
        lines 03267-03268

2003-06-24  Oliver Lemke  <olemke@uni-bremen.de>

        * arts-1-1-586

        * src/xml_io_instantiation.h, src/xml_io_array_types.{cc,h}: Added
        Array<IsotopeRecord> reading/writing routines.

        * src/xml_io_instantiation.h, src/xml_io_compound_types.{cc,h}: Added
        IsotopeRecord reading/writing routines.
        Completed SpeciesRecord routines.

        * src/make_array.h: Added constructor to convert normal array to
        MakeArray.

        * src/test_xml.cc: Updated to test writing of species_data.

2003-06-24  Nikolay Koulev  <nkoulev@uni-bremen.de>

        * arts-1-1-585

        * src/test_zeemanproperties.cc: Major changes - added
        documentatation, replaced my frequency grid function by the ARTS
        Vector f_grid, threw away the output files producing part and
        replaced it by a short string function block.

        * src/test_zeemanproperties.cc: Minor changes - changed units to SI.
        
2003-06-23  Oliver Lemke  <olemke@uni-bremen.de>

        * arts-1-1-584

        * Huge doxygen cleanup: The cleaning involves removal of no longer
        existent, but still documented parameters, making the order of
        parameters in the documentation the same as in the function call,
        documentation of non-documented parameters.

        NOTE: For all parameters I did not know how to comment on, I've put a
        'FIXME: Add documentation.' into the source code. Please look at your
        code and replace it with the appropriate documentation. You can also
        do a

        grep 'FIXME: Add documentation.' *.{cc,h}

        to get an overview of missing documentation. And for the future please
        remember to adapt the documentation immediately after changing a
        function's parameters. Otherwise, it is surely forgotten.

        Please have a look a the output of doxygen from time to time and try
        to fix the warnings if any. (cd doc/doxygen && make)

        * src/agenda_record.cc, src/describe.cc, src/file.cc,
        src/interpolation.cc, src/logic.h, src/m_abs.cc, src/m_absorption.cc,
        src/m_cloudbox.cc, src/m_optproperties.cc, src/m_scatrte,
        src/m_physics, src/check_input.cc, src/continua.cc, src/m_ignore.h,
        src/main.cc, src/messages.cc, src/refraction.cc,
        src/scatproperties.cc, src/ppath.cc, src/sensor.cc,
        src/special_interp.cc, src/species_data.cc, src/test_integration.cc,
        src/methods.h, src/xml_compound_types.cc src/agenda_class.cc,
        src/matpack{I,III,IV,V,VI,VII}.cc, src/absorption.h:
        Updated documentation.

        * doc/doxygen/Doxyfile.in: Exclude old_absorption.cc.

2003-06-23  Mattias Ekstr�m  <ekstrom@rss.chalmers.se>

        * arts-1-1-583

        * src/m_sensor.cc: Commented away lines with couts and xml_write_to_file.
        Those shouldn't have been commited last time, sorry for that.

        * src/matpackII.cc: Same as for m_sensor.cc.

2003-06-22  Oliver Lemke  <olemke@uni-bremen.de>

        * arts-1-1-582

        * doc/uguide/Makefile.am (uguide.pdf): Added one more pdflatex run to
        get cross-references right.

        * doc/doxygen/latex/Makefile.am (refman.ps): Pass -o to dvips.
        (refman.pdf): Added target for pdf creation. I did not make this the
        default target because the conversion from ps to pdf takes a very long
        time.

        * doc/doxygen/latex/.cvsignore: Added refman.pdf.

        * doc/doxygen/Doxyfile.in: Put pdf hyperlinks into dvi file.

        * src/xml_io_*_types.cc (xml_write_to_stream): Added documentation for
        name parameter.

        * src/xml_io*.cc: Cleanup of docs.

        * src/test_zeemanproperties.cc: Corrected filename in doxygen comment.

2003-06-20  Claudia Emde  <claudia@sat.physik.uni-bremen.de>

        * arts-1-1-581

        * src/m_scatrte.cc (i_fieldUpdate1D): Modified sequential 
        update. Should be a bit more efficient and the code is better readable.

        * src/scatrte.cc (cloud_ppath_update1D): Fixed a bug. The intensity
        field was not interpolated on the correct zenith angles.
        This caused bad results in limb direction.

        * src/m_rte.cc (RteEmissionStd): Averaged temperature and pressure 
        instead of absorption coefficients in the radiative transfer 
        calculation. This has been an inconsistency between 
        clearsky radiative transfer and RT in the cloudbox.
        
2003-06-19  Oliver Lemke  <olemke@uni-bremen.de>

        * arts-1-1-580

        * src/matpackII.h (SparseView), src/gas_abs_lookup.h (GasAbsLookup):
        Adapt prototyping for xml_write_to_stream.

        * src/xml_io_*_types.{cc,h}: Added an optional parameter to all
        xml_write_to_stream functions. A descriptive name could be supplied
        which is added as an attribute to the tag like
        <Vector name="LatitudeGrid" ...>
        Only used internally at the moment to document the structure members.

        * src/xml_io_compound_types.cc: Added descriptive names to members of
        GasAbsLookup, GriddedField3, GridPos and Ppath.

2003-06-19  Oliver Lemke  <olemke@uni-bremen.de>

        * arts-1-1-579

        * ChangeLog: Reformatted oversized lines.
        @mattias: Please limit your lines to 78 chars :-)

        * doc/doxygen/Doxyfile.in: Exclude getopt*.{c,h}.

        * src/gridded_fields.h: Added type GriddedField3.

        * src/xml_io_instantiation.h, src/xml_io_compound_types.{h,cc}: Added
        routines for GriddedField3.

        * src/matpackII.cc: Temporarely added include iostream. Should be
        removed along with the couts after testing.

2003-06-18  Claas Teichmann  <claas@sat.physik.uni-bremen.de>

        * arts-1-1-578

        * src/math_funcs.cc: Modified comments

2003-06-18  Mattias Ekstr�m  <ekstrom@rss.chalmers.se>

        * arts-1-1-577

        * src/methods.cc: Added sensor_response to input list of RteCalc.

        * src/m_rte.{cc,h}: Added variables sensor_response and apply_sensor. 
        NB: This means that the WSM sensor_responseInit has to be added to the
        controlfiles, before running RteCalc.

        * src/rte.{cc,h}: Implemented the sensor_response and apply_sensor
        variables in method rte_calc and changed call for RteCalc to rte_calc
        in method get_radiative_background.

        * src/m_cloudbox.cc: Added sensor_reponse as dummy variable and set
        apply_sensor to false for the rte_calc calls.

        * src/xml_io_basic_types.cc: Fixed bug in Sparse xml_write_to_stream
        function.

        * src/m_sensor.cc: Minor changes to runtime error output.

        * src/sensor.{cc,h}: Removed antenna_diagram_gaussian, which has been
        replaced by WSM GaussianResponse.

        * src/test_sensor.cc: Moved antenna_diagram_gaussian from sensor.cc
        here.

2003-06-18  Oliver Lemke  <olemke@uni-bremen.de>

        * arts-1-1-576

        * src/xml_io_basic_types.cc: Updated sparse reading/writing functions.
        nnz is now stored along with the SparseData, RowIndex and ColIndex
        vector. This is somehow redundant but matches the concept of xml that
        attributes should be stored with their object. Also, it is necessary
        for the atmlab xml routines.

2003-06-17  Oliver Lemke  <olemke@uni-bremen.de>

        * arts-1-1-575

        * src/xml_io_basictypes.cc: Extended sparse reading and writing
        routines.

        * src/test_xml.cc: Adapted for testing of sparse reading writing.

2003-06-16  Mattias Ekstr�m  <ekstrom@rss.chalmers.se>

        * arts-1-1-574

        * src/m_general.cc: Added SparsePrint.

        * src/methods.cc: Added SparsePrint.

        * src/matpackII.cc: Fixed bug in transpose and mult function.

        * src/xml_io_basictypes.cc: Wrote simple xml_write_to_stream and
        xml_read_from_stream functions for Sparse matrices.

        * src/workspace.cc: Added general WSV sparse_1.

2003-06-11  Mattias Ekstr�m  <ekstrom@rss.chalmers.se>

        * arts-1-1-573

        * src/m_refraction.cc: Removed compilation warning from Oliver's list.

        * src/m_sensor.cc: Added WSM sensor_responseMixer and made changes to
        sensor_responseBackend.

        * src/methods.cc: Changed input to GaussianResponse and added
        sensor_responseMixer.
    
        * src/sensor.{cc,h}: Added calculating methods for the mixer and backend
        response WSM.

        * src/workspace.cc: Added f_mixer and f_backend as WSV groups and
        removed previously added f_sensor.
    
        * src/matpackII.cc: Added resize function for sparse matrices.
    
        * src/test_sensor.cc: Added various test functions.
    
        * src/Makefile.am: Added constants, matpacks and interpolation to the
        test_sensor compilation group(?).
    
        * src/zeemanproperties.cc: Fixed compilation error (missing ;)

2003-06-11  Oliver Lemke  <olemke@uni-bremen.de>

        * arts-1-1-572

        * Cleaned-up/restructured XML sources.

        * src/Makefile.am: Added xml_io_basic_types.{cc,h},
        xml_io_compound_types.{cc,h}, xml_io_array_types.{cc,h}, and
        xml_io_instantiation.h.
        Link test_linalg against constants.o for joker.

        * src/xml_io_basic_types.{cc,h}: Added. Contains the reading/writing
        routines for basic types like Index, Numeric and all matpack types.

        * src/xml_io_compound_types.{cc,h}: Added. Contains the reading/writing
        routines for compound types like structures. Compound types consist of
        basic types.

        * src/xml_io_array_types.{cc,h}: Added. Contains the reading/writing
        routines for array types. Arrays can contain basic or compound types
        or other arrays.

        * src/xml_io_instantiation.h: Added. Contains explicit template
        instantiations for xml_{read_from,write_to}_file functions.

        * src/xml_io.cc, src/xml_io_private.h: Removed functions which have
        moved to xml_io_*_types.{h,cc}.

2003-06-11  Nikolay Koulev  <nkoulev@uni-bremen.de>

        * arts-1-1-571

        * src/zeemanproperties.cc: changed extinction matrix and
        absorption vector to be calculated fully in a 
        left-circular-right-circular polarization basis.
        
2003-06-11  Claudia Emde  <claudia@sat.physik.uni-bremen.de>

        * arts-1-1-570

        * src/m_scatrte.cc (i_fieldUpdataSeq3D): Small modifications.

        * src/scatrte{.cc,.h} (cloud_fieldsCalc): Fixed a bug here. 
        I used VectorView instead of Vector& for a workspace variable which is 
        initialized inside the function. This changes the address of the 
        workspace variable.
        (cloud_ppath_update3D): Only a small modification.
        
        * src/optproperties{.cc, .h}: Fixed a bug in (ext_matTransform)

        The 3D calculations are working now with the new database and the
        sequential update. But it is still very slow as the transformation 
        of the phase matrix from the scattering frame to the laboratory frame
        has to be done for each point and each angle combination. This part 
        takes most of the time. 
        (1 iteration for 2 stokes dimensions on my PC takes 2:50 h!, more than
        2 hours for the calculation of the scattering integral!)
        
2003-06-06  Oliver Lemke  <olemke@uni-bremen.de>

        * arts-1-1-569

        * src/.cvsignore: Added gmon.out.
        
        * src/agenda_record.h (AgRecord::operator=), src/m_absorption.cc
        (gas_abs_lookupInit): Commented out parameter name to avoid
        warning.

        * src/xml_io.cc: Cosmetics.

        * src/test_integration.cc (main): Avoid segfault. @claas: ;-)

2003-06-11  Sreerekha T.R.  <rekha@uni-bremen.de>
        
        * arts-1-1-568
        
        * src/m_cloudbox.cc (ybatchMetProfilesClear): A distinction was
        made when the clear-sky calculations are performed with the
        met-office profiles.  The difference with the *ybatchMetProfiles*
        method is that, here the pnd_field file is not read and the
        cloudbox is not set.  

        * src/methods.cc: Added the method *ybatchMetProfilesClear*.
        
2003-06-10  Claas Teichmann  <claas@sat.physik.uni-bremen.de>

        * arts-1-1-567
        
        * src/m_scatrte.cc (scat_fieldCalc): bug fixed.
        AngIntegrate_trapezoid_opti readded.


2003-06-10  Axel von_Engeln  <engeln@uni-bremen.de>

        * arts-1-1-566

        * aux/part_fct/: updated with new JPL partition functions and
        added some file output for Carmens work on a comparison between
        JPL and HITRAN part. fct. Fit for JPL is done now between 150K and
        300K, as Carmens matlab fit.

2003-06-05  Claudia Emde  <claudia@sat.physik.uni-bremen.de>

        * arts-1-1-565
        
        * src/m_scatrte.cc (i_fieldUpdataSeq3D): Added this method.
        It updates the radiation field sequentially for a 3D 
        cloudbox. Should be much faster than (i_fieldUpdata3D),but
        I have not yet tested the method.
        
        * src/scatrte{.cc,.h} (cloud_fieldsCalc): Fixed a bug.
        Included three new functions:
        (cloud_ppath_update3D): Used in the 3D sequential update. All
        interpolations on the intersection points and the RT step
        calculation are done in this function.
        (ppath_step_in_cloudbox): Sets up a ppath structure for a 
        given point and calculates the intersection point with 
        the next grid cell boundary.
        (is_inside_cloudbox): Checks, whether the intersection point 
        of the propagation path with the next gridcell is inside or 
        outside the cloudbox.

        * src/methods.cc: Included (i_fieldUpdateSeq3D).
        
2003-06-05  Oliver Lemke  <olemke@uni-bremen.de>

        * arts-1-1-564

        * src/agenda_record.h (operator=), src/methods.h (operator=):
        Return empty AgRecord/MdRecord. Code is never reached because
        arts_exit is called before but circumvents a gcc warning message.

        * src/absorption.h (SpeciesRecord): xml_read_from_stream is our
        friend.
        Include bifstream.

        * src/xml_io.cc, src/xml_io_private.h: Started read/write functions
        for species_data (Array<SpeciesRecord>) and SpeciesRecord.

        * .cvsignore: Added *.swp.

2003-06-05  Claas Teichmann  <claas@sat.physik.uni-bremen.de>

        * arts-1-1-563
        
        * src/check_input{.cc,.h} (chk_atm_field): changed parameter:
        "const Tensor3&" to "ConstTensor3View" and
        "const Tensor4&" to "ConstTensor4View" to save computation time.
        The function created a new Tensor object, when it was called with
        a TensorView.

        * test_integration.cc: Modified.

2003-06-04  Claudia Emde  <claudia@sat.physik.uni-bremen.de>

        * arts-1-1-562
        
        * src/scatrte{.cc,.h}: Added. This file contains functions related 
        to radiative transfer calculations in the cloudbox. 
        
        * src/scatrte.cc (cloud_ppath_update1D): Included this function. It
        is used in the sequential update of the radiation field. Before this
        function was part of (i_fieldUpdate1D).
        (cloud_fieldsCalc): Added this function to calculate optical properties
        fields (absorption vector, extinction matrix) for all points in the
        cloudbox. Has also been part of (i_fieldUpdate1D) and 
        (i_fieldUpdate3D).

        * src/m_scatrte (i_fieldUpdate1D) and (i_fieldUpdate3D): Separated the 
        function into subfunctions defined in scvatrte.cc to make the code
        clearer. 
                
        * src/Makefile.am: Included new files.  
        
2003-06-04  Claas Teichmann  <claas@sat.physik.uni-bremen.de>

        * arts-1-1-561

        * src/math_funcs.cc: Changed: Integration method in
        scat_fieldCalc is now AngIntegration_trapezoid_opti
        slightly faster if the grid_stepsize is constant

        * src/math_funcs.h: Added: AngIntegration_trapezoid_opti
        faster integration if the grid_stepsize is constant

        * src/methods.cc: Modified: definition of scat_fieldCalc

        * src/m_scatrte.cc: Modified: scat_fieldCalc and
        scat_fieldCalcFromAmpMat are using now
        AngIntegration_trapezoid_opti

        * src/test_integration.cc: Added: test of
        AngIntegration_trapezoid_opti

        * src/Makefile.am: Modified: removed non existing
        constants.h in definition

2003-06-02  Claudia Emde  <claudia@sat.physik.uni-bremen.de>

        * arts-1-1-560

        * src/optproperties.cc: Included special cases, which were missing
        before. Now the database is working for all Stokes dimensions. 
        
        * src/lin_alg.cc: Modified the code according to suggestions in the
        programming seminar.

2003-06-02  Claas Teichmann  <claas@sat.physik.uni-bremen.de>

        * arts-1-1-559

        * src/math_funcs.cc: Added: new integration method:
        AngIntegrate_trapezoid_opti: In addition to the "old fashined"
        integration method "AngIntegrate_trapezoid", it checks whether
        the stepsize is constant. If it is, it uses a faster
        method, if not, it uses the old one.

        * src/m_scatrte.cc: Changed: declaration of scat_fieldCalc:
        added *grid_stepsize* in function declaration

        * src/methods.cc: Changed: declaration of scat_fieldCalc:
        added *grid_stepsize* in function declaration

        * src/test_integration.cc: Modified.
        
2003-05-28  Claudia Emde  <claudia@sat.physik.uni-bremen.de>

        * arts-1-1-558

        * src/gas_abs_lookup.cc (GasAbsLookup::Extract): Fixed a bug here.
        For the monochromatic calculations (inside the cloudbox) only the 
        first frequency in the frequency grid was calculated.

        * src/m_cloudbox.cc: Removed debugging output.

        * src/m_optproperties.cc: Only minor modification.
        
2003-05-27  Claas Teichmann  <claas@sat.physik.uni-bremen.de>

        * arts-1-1-557

        * src/test_integration.cc: Added. File for testing purposes
        of the AngIntegrate_trapezoid function from math_funcs.cc

        * src/Makefile.am: Added dependencies of test_integration.cc

        * .cvsignore: Added the executable test_integration

2003-05-27  Claas Teichmann  <claas@sat.physik.uni-bremen.de>

        * arts-1-1-556

        * src/methods.cc: Added *grid_stepsizeSet*. It calculates the
        stepsize of *scat_za_grid* and *scat_aa_grid* and
        stores the result in *grid_stepsize*

        * src/workspace.cc: Added Vector *grid_stepsize*.
        Here the gridstepsize of *scat_za_grid* and *scat_aa_grid*
        are stored. If the stepsize varies, -1 is stored.

        * src/m_scatrte.cc: Added *grid_stepsizeSet*.
        The implementation.

2003-05-27  Sreerekha T.R.  <rekha@uni-bremen.de>
                        
        * arts-1-1-555
        
        * src/m_cloudbox.cc (ybatchMetProfiles): Modifed the function to
        take into account the orographic height corresponding to each
        profiles.  The path to pnd_field_raw data is also modified.
        
        * src/methods.cc: Added *z_ground* in the output of
        *ybatchMetProfiles*.
        
2003-05-26  Oliver Lemke  <olemke@uni-bremen.de>

        * arts-1-1-554

        * src/Makefile.am: Added matpackII.{cc,h} to sources of most targets.

        * src/matpackII.{cc,h}: Added dummy resize function to Sparse.
        Move implementation of rw and ro to operator(). Make rw, ro wrappers
        calling operator().

        * src/m_sensor.cc (sensor_responseBackend, sensor_responseAntenna1D):
        Changed type of sensor_response_tmp and ws output to Sparse.

        * src/workspace.cc: Changed group of sensor_response to Sparse.

        * src/test_matpack.cc: Include matpackII.h instead of matpackII.cc.
        Never include cc files!!! -> duplicate defined symbols.

2003-05-26  Claas Teichmann  <claas@sat.physik.uni-bremen.de>

        * arts-1-1-553

        * src/math_funcs.cc: fixed integration routine

2003-05-26  Mattias Ekstr�m  <ekstrom@rss.chalmers.se>

        * arts-1-1-552

        * src/groups.cc: Added new WSV group Sparse. The group has not yet
        been fully implemented, the code compiles as long as no WSV beolngs
        to the group. This has to be fixed.

        * src/make_auto_wsv_h.cc: Include matpackII.h in auto_wsv.h

        * src/methods.cc: Added three new WSM; sensor_responseAntenna1D,
        sensor_responseBackend and sensor_responseInit.

        * src/m_sensor.cc: Implementation of the sensor_responseAntenna1D,
        sensor_responseBackend and sensor_responseInit which sets up the
        sensor_response matrix or modifies it with the antenna/backend
        response.

        * src/workspace.cc: Added two new WSV; sensor_response and f_sensor
        that are used in sensor modelling. The sensor_response is a matrix
        that describes the whole sensor block response and f_sensor is a
        vector that describes the sensor channel frequencies.

        * src/xml_io.cc: Dummy functions for xml I/O for Sparse.

        * src/xml_io_private.h: Declarations for the above I/O functions.

2003-05-22  Claudia Emde  <claudia@sat.physik.uni-bremen.de>

        * arts-1-1-551

        * src/methods.cc: Included documentation for recently added
        methods related to the new database format.

        * src/m_optproperties.cc: Documented and claened up the code.

        * src/optproperties.{cc,h}: Fixed inconcistencies. Now the data
        in the database has to be stored in SI units (m^2 for the optical
        properties). Before it was (um^2).

        Note: The new database works for stokes_dim = 1. There is still a 
        problem for higher Stokes dimensions. I think that I do not handle 
        some special cases correctly in the transformation from the 
        scattering frame to the laboratory frame.  For stokes_dim = 1 the 
        transformation is very easy, but for higher Stokes dimensions the
        transformation formulas become rather complicated.

2003-05-15  Oliver Lemke  <olemke@uni-bremen.de>

        * arts-1-1-550
        
        * doc/doxygen/html/.cvsignore: Added graph_legend.dot.

        * src/m_sensor (GaussianResponse): Cast ceil return value to Index
        before assigning to nrows avoids warning message.
        Use log(2.) instead of log(2) because log is not overloaded for int
        and gcc cannot decide whether to cast to float or double.

2003-05-21  Mattias Ekstr�m  <ekstrom@rss.chalmers.se>

        * arts-1-1-549
        
        * src/m_sensor.cc: Added WSM GaussianResponse to set up a sensor
        response matrix with gaussian distribution.

2003-05-20  Mattias Ekstr�m  <ekstrom@rss.chalmers.se>

        * arts-1-1-548

        * src/m_ppath.cc: Added WSM VectorZtanToZaRefr that calculates
        zenith angles from a given set of true tangential altitude.
        It uses the refr_index_agenda to calculate the refractive index
        at tangential point.

2003-05-19  Oliver Lemke  <olemke@uni-bremen.de>

        * arts-1-1-547
        
        * src/m_cloudbox.cc: Final fix for ios::showpoint and ios::fixed.

2003-05-19  Mattias Ekstr�m  <ekstrom@rss.chalmers.se>

        * arts-1-1-546
        
        * src/sensor.{cc,h}: Added spectrometer_transfer_matrix that
        models the backend response for spectrometers. Also made fixed
        bugs in sensor_integration_vector.
        
        * src/refraction.{cc,h}: Added function refr_index_ir that
        calculates refraction index in the IR region, using formula from
        Michael H�pfner, Forchungszentrum Karlsruhe.
        
        * src/m_refraction.cc: Added refr_indexIR to interface with
        refr_index_ir.
        
        * src/methods.cc: Added refr_indexIR entry.

2003-05-19  Oliver Lemke  <olemke@uni-bremen.de>

        * arts-1-1-545
        
        * src/m_cloudbox.cc: Added include cmath for proper use of abs.
        Use showpoint and fixed from namespace ios.

2003-05-16  Sreerekha T.R.  <rekha@uni-bremen.de>
        
        * arts-1-1-544
        
        * src/m_cloudbox.cc (ybatchMetProfiles):  Modified the method.  The
        input to this method is now the AMSU datafile which has
        information about latitude, longitude, satellite zenith angle.
        The corresponding workspace variable is *met_amsu_data* which is a
        matrix.  The method reads the profiles corresponding to the
        lat-lon.  It now uses the correct *sensor_los* from the satellite
        zenith angle.  It also sets the cloudbox from the profiles.
        The workspace variable *met_profile_basenames* is
        removed.

        * src/m_scatrte.cc : Modifications in the method
        *i_fieldUpdate1D_PlaneParallel* .
                
        * src/methods.cc: Modified the interface to the method
        *ybatchMetProfiles*.  

        * src/workspace.cc : Added the new workspace variables
        *met_amsu_data* and *met_profile_path*.

2003-05-16  Oliver Lemke  <olemke@uni-bremen.de>

        * arts-1-1-543

        * src/Makefile.am: Fixed bug reported by Mattias. arts.cc was missing
        in some targets which caused undefined symbol arts_exit while linking.

        * src/absorption.cc: Include arts.h

        * src/agenda_class.cc: Include arts.h

        * src/xml_io.cc: Include arts.h

2003-05-14  Oliver Lemke  <olemke@uni-bremen.de>

        * arts-1-1-542

        * src/xml_io.cc: Added function xml_data_parse_error.
        Call xml_data_parse_error in all xml_read_from_stream functions when
        there is a problem while parsing the data of a tag. x_d_p_e outputs
        the tag name, the attribute list and additional information to help
        the user finding out where the error occured.

        * src/xml_io_private.h: Added function xml_data_parse_error.

        * src/main.cc (main): Use a separate report file for each process.
        First report file is CONTROLFILE.rep, report files of the child
        processes are called CONTROLFILE.1.rep, CONTROLFILE.2.rep...

        * src/arts_mpi.cc (MpiManager::startup): Set rank and nprocs.

        * src/Makefile.am: Removed dependency on arts_mpi.{cc,h} from
        make_auto_* files to avoid unnecessary recompilation. Maybe these have
        to be added again later when mpi is more and more integrated into
        arts.
        (xml_io.o): Must depend on xml_io.c.

2003-05-14  Oliver Lemke  <olemke@uni-bremen.de>

        * arts-1-1-541

        * src/main.cc (main): Use the mpi_manager.

        * src/arts.cc (arts_exit): Removed call to mpi_shutdown. Now handled
        by the destructor of the MpiManager.

        * src/arts_mpi.{cc,h}: Created MpiManager class. Takes care of
        initialization and finalization of MPI. Furthermore, provides access
        to MPI runtime information.

        * doc/doxygen/Makefile.am (doxyfied): Must depend on Doxyfile.

        * doc/doxygen/Doxyfile.in: Pass HAVE_MPI to preprocessor to enable
        MPI documentation.

2003-05-13  Claas Teichmann  <claas@sat.physik.uni-bremen.de>

        * arts-1-1-540

        * src/math_funcs.cc (AngIntegrate_trapezoid): added function with
        integration over azimuth angle already calculated: gives a 2*PI

2003-05-13  Claudia Emde  <claudia@sat.physik.uni-bremen.de>

        * arts-1-1-539

        * src/optproperties.{cc,h} (pha_matTransform): Modified. Created new 
        functions (interpolate_scat_angle) and (pha_mat_labCalc) 
        to improve readability of the code.
                
2003-05-13  Oliver Lemke  <olemke@uni-bremen.de>

        * arts-1-1-538

        * src/main.cc (main): Replaced all return statements with arts_exit to
        avoid missing call to mpi finalize.

2003-05-07  Claas Teichmann  <claas@sat.physik.uni-bremen.de>

        * arts-1-1-537

        * doc/uguide/scattering.tex: Fixed typos.

2003-05-07  Oliver Lemke  <olemke@uni-bremen.de>

        * arts-1-1-536

        * src/Makefile.am: Added arts_mpi.h.

        * src/arts_mpi.h: Added.

        * src/arts_mpi.cc: Added.
        Implemented basic mpi_startup and mpi_shutdown functions.

        * src/main.cc: Call mpi_startup at the beginning.
        Instead of return, call arts_exit at the end of main to cleany
        finalize mpi.

        * src/xml_io.cc: Replaced another exit.

        * src/arts.cc: Use MPI_ONLY macro.

2003-05-07  Oliver Lemke  <olemke@uni-bremen.de>

        * arts-1-1-535

        * src/methods.h, src/agenda_record.h, src/absorption.cc,
        src/agenda_class.cc, src/file.cc, src/main.cc, src/m_general.cc,
        src/m_scatrte.cc, src/old_absorption.cc, src/parameters.cc,
        src/parser.cc, src/token.cc:
        Replaced all calls to libc exit function with our own arts_exit
        function.
        Whenever you want to quit arts at some point, please use from now on
        arts_exit instead of exit. Currently there is nothing done in
        arts_exit, but in the near future we have to do some cleanup on
        exit (e.g. for MPI).

        * src/main.cc: Added MPI to output of arts -v.

        * src/arts.cc: Added.
        Added function arts_exit.

        * src/Makefile.am: Added arts.cc.

2003-05-02  Claudia Emde  <claudia@sat.physik.uni-bremen.de>

        * arts-1-1-534

        * src/agendas.cc: Added *scat_rte_agenda* and *scat_field_agenda*.
        These agendas are useful, because we have now many methods for
        calculating the 'cloudy' RT (sequential update, plane parallel or
        the 'normal' old method).
        For the scattering integral we have two methods which have to be 
        chosen according to the database format (amp_mat or 
        SingleScatteringData.

        It is now possible to do the scattering calculations with both data-
        base formats. The amplitude-matrix format will be removed later,
        but now we should keep it to eb able to compare the results.

        * src/m_scatrte.cc(i_fieldIterate): Modified. Execxute agendas above 
        instead of functions.
        (ScatteringInitAmpMat): New method. Used for initializing scattering
        variables if amp_mat is used as data-format.
        (scat_fieldCalc): The standart function for calculating the scattering
        integral. Uses Single ScatteringData structure.
        (scat_fieldCalcFromAmpMat): Scattering integral calculation from
        amplitude matrix.

        * src/m_optproperties(pha_mat_sptCalc), (opt_prop_sptCalc): Bugs fixed.

        * src/optproperties(pha_matTransform): Included different cases which 
        have to be considered for the coordinate transform. 
        There still seems to be a problem if the zenith angle of the
        direction of the scattered radiation is 0.
        
        * src/methods.cc: Included new methods changes described 
        above.

        * src/workspace.cc: Removed *part_types*. Redundant now.
        
        * src/m_cloudbox.cc(ybatchMetProfiles): Removed *part_types* and 
        included *scat_raw_data* instead to get the information about the 
        number of particle types.

        * src/rte.cc (rte_step): Modified unpoarized part. The scattering term
        has been missing there.
        
2003-04-30  Oliver Lemke  <olemke@uni-bremen.de>

        * arts-1-1-533

        * configure.in: Added option --with-mpi to support MPI.

2003-04-25  Stefan Buehler  <sbuehler@uni-bremen.de>

        * arts-1-1-532

        * General: Now I have removed CloneSize, as I promised a long time
        ago, but never did.
        
        * src/m_clonesize.cc: Removed.

        * src/methods.cc: Removed CloneSize.

        * src/Makefile.am: Removed CloneSize.

        * src/.cvsignore: Added test_sensor.

2003-04-25  Claudia Emde  <claudia@sat.physik.uni-bremen.de>

        * arts-1-1-531

        * src/m_cloudbox.cc: Changed names of reading routines for amplitude 
        matrix data.
        These are now called *ParticleTypeInitAmpl* and 
        *ParticleTypeAddAmpl*.
        The old names *ParticleTypeInit* and *ParticleTypeAdd* are now 
        used for new methods which read the single scattering data from the 
        new database format.

        * src/m_optproperties.cc: Completed *pha_mat_sptFromData* and 
        *opt_prop_sptFromData*. The functions are ready but not tested yet.

        * src/optproperties.h: Typedef for  ArrayOfSingleScatteringData.
        
        * src/groups.cc: Added ArrayOfSingleScatteringData.

        * src/workspace.cc: Added
        *scat_data_raw* : Variable of type ArrayOfSingleScatteringData which 
        contains the scattering properties of all considered hydro-meteor
        species.

        * src/methods.cc: Included *ParticleTypeInitAmpl* and 
        *ParticleTypeAddAmpl*. Modified *ParticleTypeInit* and 
        *ParticleTypeAdd*.

        * src/xml_io.cc: Included reading and writing routines for 
        *ArrayOfSingleScatteringData*.

        * src/xml_io_private.h: Included *ArrayOfSingleScatteringData*.

        * src/m_clonesize.cc: Included *ArrayOfSingleScatteringData*.
        
2003-04-25  Mattias Ekstr�m  <ekstrom@rss.chalmers.se>

        * arts-1-1-530

        * src/sensor.cc: Added normalisation to sensor_integration_vector.

2003-04-24  Claudia Emde  <claudia@sat.physik.uni-bremen.de>

        * arts-1-1-529
                
        * src/m_optproperties.cc: Added new methods to calculate the 
        single particle properties from the new database format:
        *pha_mat_sptFromData* and *opt_prop_sptFromData*

        * src/optproperties.{cc,h}: Included transformations from the 
        coordinate system used in the database to the laboratory coordinate 
        system. So far only for the case of randomly oriented particles.

        Modified the structure *SingleScatteringData*: Included additional
        field for temperature.

        * src/xml_io.cc: Modified reading and writing routines for 
        *SingleScatteringData*.
        
        * src/methods.cc: Included the methods above.

        * src/workspace.cc: Modified WSV *part_types*. It is now an 
        ArrayOfString containing the filenames of the different particles
        which shall be included in the calculation.
        
2003-04-23  Nikolay Koulev  <nkoulev@uni-bremen.de>
        
        * arts-1-1-528

        * src/zeemanproperties.{cc,h}: Added the N- case of a Zeeman
        transition. Added more comments for lucidity reasons.

        * src/test_zeemanproperties.{cc}: Changed accordingly.

2003-04-23  Sreerekha T.R.  <rekha@uni-bremen.de>
        
        * arts-1-1-527
        
        * src/m_cloudbox.cc (ybatchMetProfiles): The method
        ybatchMetProfiles is modified in such a way that now the *p_grid*
        is set inside the function.  This is done in such a way that the
        first element of the p_grid is taken from the profile data
        itself.  The number of elements in the p_grid is now given as a
        keyword.  Another modification is to define a variable which can
        store the path of the data.

        * src/workspace.cc : The workspace variable *met_profile_path* of
        type String is added. 

        * src/methods.cc : Modified the interface of the method
        *ybatchMetProfiles*. 

2003-04-22  Sreerekha T.R.  <rekha@uni-bremen.de>
        
        * arts-1-1-526
        
        * src/m_atmosphere.cc (pnd_fieldCalc): Implemented this method
        which intepolates the *pnd_field_raw* on to the grids, *p_grid*,
        *lat_grid*, and *lon_grid* for calculation.  This method is similar to
        the method *AtmFieldsCalc* which does the interpolation for
        temperature, altitude and vmr. 

        * src/methods.cc : Added the method pnd_fieldCalc.

2003-04-17  Sreerekha T.R.  <rekha@uni-bremen.de>

        * arts-1-1-525
        
        * src/workspace.cc : Added the variable *ybatch* and
        *met_profile_calc_agenda* 

        * src/agendas.cc : Set up the agenda *met_profile_calc_agenda* 

        * src/methods.cc : Added the method  *ybatchMetProfiles*

        * src/m_cloudbox.cc (ybatchMetProfiles): This method is
        used for calculating spectra for the profiles from metoffice.  The
        method does a loop around the profile basenames and executes the
        agenda *met_profile-calc_agenda* for absorption as well as
        radiative transfer calculations. It gives ybatch as the output. 

        * src/test_sensor.cc: included iostream.

2003-04-15  Stefan Buehler  <sbuehler@uni-bremen.de>

        * arts-1-1-524

        * src/workspace.cc (define_wsv_data): Moved els_f_grid to the
        reight place in the alphabetical list.
        (define_wsv_data): Moved output_file_format to the
        reight place in the alphabetical list.
        (define_wsv_data): Added WSV met_profile_basenames.

2003-04-11  Mattias Ekstr�m  <ekstrom@rss.chalmers.se>

        * arts-1-1-523

        * src/Makefile.am: Added a test_sensor sources group.

        * src/test_sensor.cc: Added this for testing sensor modelling functions.

        * src/sensor.{cc,h} (antenna_transfer_matrix): Changed to sparse matrix
        representation.

2003-04-10  Oliver Lemke  <olemke@uni-bremen.de>

        * arts-1-1-522

        * src/matpackII.cc (transpose): Replaced Index* by
        std::vector<Index>::iterator to fix compilation error.

2003-04-09  Mattias Ekstr�m  <ekstrom@rss. chalmers.se>

        * arts-1-1-521

        * src/matpackII.{h,cc}: Added functions for sparse matrix operations;
        transposing, muliplication with full matrix and multiplication
        with sparse matrix.

        * src/test_matpack.cc: Added function for testing sparse matrix
        multiplication.

2003-04-06  Patrick Eriksson  <Patrick.Eriksson@rss.chalmers.se>

        * arts-1-1-520

        * src/m_rte.cc (RteEmissionTest): Made a quick hack to test an 
        integration assuming B to be linear in optiocal thickness, following
        Equation 9.16 in Rodgers' book (though I think the expression is 
        wrong).

        A first test showed no improvement at all!? I have to check the 
        details.

        * src/rte.cc (rte_step): For scalar case, introduced a variable for
        transmission to save some time and make the code clearer.

2003-04-02  Nikolay Koulev  <nkoulev@uni-bremen.de>

        * arts-1-1-519

        * src/zeemanproperties.cc: Put a new line shape in the
        complex refractivity, giving at least provisionary meaningful
        results for the Zeeman absorption. Full implementation to the level of
        testing the routines through control files is pending.

        * src/zeemanproperties.h: Updated accordingly.

        * src/test_zeemanproperties.cc: Updated accordingly.    
        
2003-04-02  Claudia Emde  <claudia@sat.physik.uni-bremen.de>

        * arts-1-1-518
        
        * src/m_scatrte.cc (i_fieldUpdateSeq1D): Added this method. It 
        updates the radiation field sequentially. The function is at the 
        moment hardwired in *i_fieldIterate* but later on I will make an 
        agenda out of it so that you still have the possibilty to use 
        *i_fieldUpdate1D*.
        I have made a test calculation, which indicates that the convergence 
        behavior is much better. For most directions only three iterations 
        are needed. Only in close to limb directions we still need 11 
        iterations (probably the multiple scattering effect). The number of 
        iterations does not depend on the number of pressure levels !!!
        I took 12 pressure levels and 104 pressure levels and needed 
        exactly the same number of iterations for both cases.

        * src/methods.cc: Added *i_fieldUpdateSeq1D*.

2003-04-02  Patrick Eriksson  <Patrick.Eriksson@rss.chalmers.se>

        * arts-1-1-517

        * doc/uguide/main.tex: Put Stefan and me as editors and created a
        table of authors. Take a look at the table and change if I got
        something wrong. I would have preferred to have this table on the
        first page, but the list of authors can eventually be long and I
        don't think that the table fit on the first page. This solution
        was a suggestion from Stefan to avoid the problem in how to order
        the author list. The author table is in alphabetical order. Please,
        keep the table updated and give comments if you don't like it.
        Feel free to give the table a nicer appearance.

        * src/methods.cc: Changed doc for ppath_stepGeometric to make clear
        that lmax=0 is the same as lmax<0.

        * doc/uguide/fm_definitions.tex: Added a sub-section to discuss the
        role of atmospheric grids and the path step length. I was not very
        inspired and there is nothing that it is not discussed in my emails.

2003-04-02  Oliver Lemke  <olemke@uni-bremen.de>

        * arts-1-1-516

        * src/xml_io.cc: Fixed bug reported by Nikolay. Precision was not set
        on output which caused Vector to be written with unsufficient
        decimals.

2003-04-01  Sreerekha T.R.  <rekha@uni-bremen.de>
        
        * arts-1-1-515
        
        * src/m_scatrte.cc (convergence_flagAbs_BT): Implemented a 
        separate method for convergence test in brightness temperature
        units. The old method convergence_flagAbs is not modified.  
        The convergence criteria keyword epsilon can be set in BT units.  
        I used the function invrayjean to convert difference between
        radiance fields to brightness temperature. This is because 
        Planck is non-linear for small radiances
     
2003-03-31  Sreerekha T.R.  <rekha@uni-bremen.de>
        
        * arts-1-1-514
        
        * src/m_scatrte.cc (convergence_flagAbs): The convergence 
        criteria keyword epsilon can be now set in brightness 
        temperature units. I used the function invplanck to convert
        radiance to brightness temperature. I had to add *f_grid* and 
        *f_index* as input to this method. 

        * src/methods.cc: Added f_grid and f_index as inputs to 
        convergence_flagAbs.

2003-03-31  Patrick Eriksson  <Patrick.Eriksson@rss.chalmers.se>

        * src/ppath.cc (raytrace_3d_linear_euler): For zenith and nadir paths
        along the end faces, the refraction can turn the path out of the grid
        in a way not captured by do_gridcell_3d. Additional checks to handle
        this included.

        * src/ppath.cc (raytrace_2d_linear_euler): Same change as above (but 
        only for latitude).

2003-03-28  Mattias Ekstr�m  <ekstrom@rss.chalmers.se>

        * arts-1-1-512

        * src/matpackII.cc: Added file to repository

2003-03-28  Mattias Ekstr�m  <ekstrom@rss.chalmers.se>

        * arts-1-1-511

        * src/Makefile.am: Re-commit of changes in arts-1-1-509.

        * src/matpackI.h: Re-commit of changes in arts-1-1-509.

        * src/matpackII.{h,cc}: Re-commit of changes in arts-1-1-509.

        * src/test_matpack.cc: Re-commit of changes in arts-1-1-509.

        * src/binio.cc: Re-commit of changes in arts-1-1-509.

2003-03-28  Stefan Buehler  <sbuehler@uni-bremen.de>

        * arts-1-1-510

        * doc/uguide/uguide.tex: Added \FIXME command. Usage: \FIXME{Put
        your remark here.} This will typeset the remark in bold and add
        FIXME: in front of it.

        * doc/uguide/absorption.tex: Documentation for
        abs_scalar_gas_FieldCalc extended after comment from Sreerekha.

2003-03-27  Mattias Ekstr�m  <ekstrom@rss.chalmers.se>

        * arts-1-1-509

        * src/Makefile.am: Added matpackII.cc everywhere that matpackII.h was
        listed. I am not sure how to do this correctly (if both files should
        be listed at more places, for example in test_linalg etc).

        * src/matpackI.h: Changed SparseMatrixView to SparseView and added
        SparseView and Sparse as friends for VectorView and Range.

        * src/matpackII.{h,cc}: Divided matpackII.h into to files and add fixed
        some bugs and added a function for multiplication with vectors.

        * src/test_matpack.cc: Uncommented and altered test3 to fit the new sparse-
        matrix representation and functions.

        * src/binio.cc: Commented away the declarations of destructors. The
        compiler would otherwise complain about "redefinition of ..."

2003-03-26  Oliver Lemke  <olemke@uni-bremen.de>

        * arts-1-1-508

        * autogen.sh: Don't redirect output of rm command. Prevents
        autogen.sh from running properly with plain bourne shell.

2003-03-25  Oliver Lemke  <olemke@uni-bremen.de>

        * arts-1-1-507

        * src/binio.{cc,h}: Moved destructors for bin[io]stream from cc to
        header file to fix problem with gcc 3.0.

2003-03-25  Oliver Lemke  <olemke@uni-bremen.de>

        * arts-1-1-506

        * doc/uguide/Makefile.am: Bugfix :-)

2003-03-25  Oliver Lemke  <olemke@uni-bremen.de>

        * arts-1-1-505

        * doc/uguide/Makefile.am: arts_groups_to_latex.sh and
        arts_methods_to_latex.sh where missing in distribution (make dist).
        Added to EXTRA_DIST.

2003-03-21  Oliver Lemke  <olemke@uni-bremen.de>

        * arts-1-1-504
        
        * configure.in: Added check for dot tool from the graphviz package.

        * doc/doxygen/Doxyfile.in: Generate dependency graphs if dot tool is
        available.

2003-03-20  Claudia Emde  <claudia@sat.physik.uni-bremen.de>

        * arts-1-1-503  
        
        * src/m_scatrte.cc (i_fieldUpdate3D, i_fieldUpdate1D): Small bug fix.
        *l_step* was taken to be constant inside one ppath step.

2003-03-19  Claudia Emde  <claudia@sat.physik.uni-bremen.de>

        * arts-1-1-502
        
        * src/m_scatrte.cc (i_fieldUpdate3D): Same modification as for the 
        1D function. I have tested the new *i_fieldUpdate1D* and the result 
        is improved significantly in Limb direction. 

2003-03-18  Claudia Emde  <claudia@sat.physik.uni-bremen.de>

        * arts-1-1-501
        
        * src/m_scatrte.cc (i_fieldUpdate1D): Modified gaseous absorption
        coefficients calculation. In the first version I calculated the 
        coefficients for all grid points and interpolated the values inside
        the RT calculation. Now gaseous absorption is calculated inside the
        RT part using interpolated pressure, temperature and VMR. This 
        reduces interpolation errors significantly. 
        Attention: Extinction matrix and absorption vector have to be
        initialized also in *opt_prop_part_agenda* (You should put  
        ext_matInit and abs_vecInit in this agenda, otherwise you will get
        an error message). 
        This modification will be implemented in 3D later.

2003-03-18  Oliver Lemke  <olemke@uni-bremen.de>

        * arts-1-1-500

        * src/matpack{III,IV,V,VI,VII}.h: Removed inline keyword from copy
        function declarations. Because they are implemented in the cc file,
        they could not be inlined which leads to linker errors with -O3 and
        higher.

        * src/bofstream.cc: Removed output operator template.
        
        * src/refraction.cc: Added cmath include.

2003-03-17  Oliver Lemke  <olemke@uni-bremen.de>

        * arts-1-1-499

        * src/bifstream.h, src/bofstream.h: Implemented putRaw/getRaw. 

        * src/binio.{cc,h}: Added pure virtual functions putRaw to binostream
        and getRaw to binistream. Modified writeFloat/readFloat to
        use putRaw/getRaw. Raw reading/writing is used instead of the byte-wise
        conversion-enabled routines when the data type size and endianness of
        the host machine matches the data file. Increases speed on pcs by 3.5.

2003-03-17  Mattias Ekstr�m  <ekstrom@rss.chalmers.se>

        * arts-1-1-498

        * src/sensor.cc: Added antenna_diagram_gaussian that sets up an
        gaussian antenna diagram for a certain frequency. Also added
        scale_antenna_diagram that scales the diagram to match another
        frequency.

2003-03-13  Oliver Lemke  <olemke@uni-bremen.de>

        * arts-1-1-497

        * src/binio.{h,cc}: Added. Contains classes for writing binary files
        including float/double, little-endian/big-endian and
        ieee-float/non-ieee-float conversions.

        * src/bifstream.{h,cc}, src/bofstream.{h,cc}: Make use of binio.
        bof/bifstream now use multiple inheritance. They inherit the file
        handling abilities from fstream and the architecture independent
        reading/writing features from binistream/binostream.
        Binio is quite dumb when no conversion for saving in the desired
        format is needed. This leads to drawbacks concerning speed. They
        will be extirpated in the next version.
        Note on current binary format: All float values are stored as
        IEEE-754 double precision. Integers are saved as 8 byte values.
        Byte order is always little endian (PC).

        * src/Makefile.am: Added binio.{h,cc}.

        * doc/index.html.in: Removed out-dated example files list.  Instead
        added a link to the examples directory.

2003-03-10  Oliver Lemke  <olemke@uni-bremen.de>

        * arts-1-1-496

        * doc/doxygen/html/Makefile.am: Include png images.

2003-03-10  Patrick Eriksson  <Patrick.Eriksson@rss.chalmers.se>

        * arts-1-1-495

        * doc/uguide/main.tex: Changed the author list, to only include
        persons that have contributed to the present version of AUG. As Claudia
        took the step and broke the alphabetical order, I also moved the 
        names around with the idea that the author list shall reflect the
        contribution to the user guide. As a pure coincidence my name ended
        up first! 

        * doc/uguide/ppath.tex: Included control file examples.
        Fixed some smaller things that I discovered when working on the 
        progress report. Commented out figure on spherical/ellipsiodal
        geoid. The figure is not correct.

2003-03-10  Stefan Buehler  <sbuehler@uni-bremen.de>

        * arts-1-1-494
        
        * doc/uguide/absorption.tex: Added Section about the absorption
        lookup table.

        * doc/uguide/symbol_defs: Renamed to symbol_defs.tex.

        * doc/uguide/symbol_defs.tex: What used to be symbol_defs.

        * doc/uguide/uguide.tex: Fixed the "destination with the same
        identifier has been already used" warning. (At least mostly.) The
        warning comes from incompatibilities of hyperref with other
        packages.  Remaining problem: Algorithm and hyperref do not seem
        to agree very well. But I managed to remover all warnings except
        two.

        * doc/uguide/main.tex: Fixed the "destination with the same
        identifier has been already used" warning. All package includes
        are now in uguide.tex!

2003-03-10  Oliver Lemke  <olemke@uni-bremen.de>

        * arts-1-1-493

        * doc/index.html.in: Removed link to ps uguide.

2003-03-10  Claudia Emde  <claudia@sat.physik.uni-bremen.de>

        * arts-1-1-492

        * doc/uguide/main.tex: Updated author list.
        
2003-03-10  Oliver Lemke  <olemke@uni-bremen.de>

        * arts-1-1-491

        * src/xml_io.cc: Cleanup.
        Added check for matching frequency dimensions in f_grid and
        pha_mat_data.

        * src/xml_io_private.h: Cleanup.

2003-03-08  Patrick Eriksson  <Patrick.Eriksson@rss.chalmers.se>

        * arts-1-1-490

        * doc/uguide/ppath.tex: Completed description of Euler scheme for 
        refraction. Added 3 new figures, showing properties of the refractive
        index.

        * src/ppath.cc (raytrace_2d_linear_euler): The bugs mentioned in last 
        commit, were no bugs. It was late and I forgot that the scaling is
        performed as part of the functions returning the gradients of the 
        refractive index. The idea is that the gradient in all directions shall
        have the same unit (the change of refractive index over 1 m). 

2003-03-07  Patrick Eriksson  <Patrick.Eriksson@rss.chalmers.se>

        * arts-1-1-489

        * doc/uguide/ppath.tex: Continued writing on refrcation. 1D and 2D
        finished. Must check expressions for 3D. I have missed some scaling
        terms. Added a figure: euler.pdf

        * src/ppath.cc (raytrace_3d_linear_euler): There was an inconsistency
        regarding the values used to adjust LOS angles. Radius, lat and lon
        were taken from the start of the ray tracing step, while za and aa
        were taken from the end point.

        There are similar mistakes as for 2D mentioned below, and for the
        moment there will be an error if you attempt to use this function.

        (raytrace_2d_linear_euler): The division with the radius was missing
        for the term including the latitude gradient of the refractive index.

2003-03-07  Claudia Emde  <claudia@sat.physik.uni-bremen.de>

        * arts-1-1-488  
        
        * src/m_scatrte.cc (i_fieldUpdate3D): Same bug fix as for 
        (i_fieldUpdate1D).
        
2003-03-07  Claudia Emde  <claudia@sat.physik.uni-bremen.de>
        
        * arts-1-1-487

        * src/m_scatrte.cc (i_fieldUpdate1D): Fixed a bug. The function did 
        not work when *ppath_step_agenda* putted extra points inside one 
        layer (this can happen when you specify *lmax* or when you cross the
        tangent point). Now the radiative transfer calculation is done by
        going from one point to the next inside one layer. 

        * src/workspace.cc: Included variable *single_scattering_data*.
        
2003-03-06  Oliver Lemke  <olemke@uni-bremen.de>

        * arts-1-1-486
        
        * src/xml_io.cc: Implemented reading/writing routines for
        SingleScatteringData.

        * src/test_xml.cc, src/test_binaryio.cc: Fixed warnings.

2003-03-07  Sreerekha T.R.  <rekha@uni-bremen.de>
        
        * arts-1-1-485
        
        * src/m_cloudbox.cc (CloudboxGetOutgoing): Fixed bug in this
        function. 

2003-03-07  Claudia Emde  <claudia@sat.physik.uni-bremen.de>

        * arts-1-1-484
                
        * src/optproperties.h: Modified structure *SingleScatteringData* 
        (see email to arts-dev mailing list).

2003-03-07  Patrick Eriksson  <Patrick.Eriksson@rss.chalmers.se>

        * arts-1-1-483

        * doc/uguide/ppath.tex: Started writing on refraction.

        * doc/uguide/symbol_defs: Added symbol for partil deravitive (\PartD)

2003-03-06  Patrick Eriksson  <Patrick.Eriksson@rss.chalmers.se>

        * arts-1-1-482

        * src/rte.cc (ground_specular_los): Removed an if-statement by
        instead using sign to seperate the cases of positive and negative
        zenith angles for 2D.

        * doc/uguide/introduction.tex: Removed some points in the the to
        do list :-) , but there are still many things to fix :-( 

        * doc/uguide/Figs/ppath/mkfigs_ppath.m: Created this file to generate 
        figures to visualize the calculation of propagation paths.

        Copied figures (with sligh editing) from ARTS-1 for Snells' law
        for a spherical symmetry.

        * doc/uguide/ppath.tex: Included the figures mentioned above and 
        polished the old text. Started to write about refraction.

        * doc/uguide/Figs/fm_definitions/mkfigs_ppath_cases.m: Recreated old
        figure for ground reflections.

        * doc/uguide/fm_definitions.tex: Improved text for ground reflections.

2003-03-06  Mattias Ekstr�m  <ekstrom@rss.chalmers.se>

        * arts-1-1-481

        * src/m_sensor.cc Remove the old test WSM SensorIntegrationVector
                and add a new AntennaTransferMatrix.
    
        * src/sensor.{cc,h} Added function antenna_transfer_matrix that
                uses sensor_integration_vector to build up a matrix that covers
                both frequency and mblocks. Both antenna_transfer_matrix and
                sensor_integration_vector has been tested for a simple linear case.

2003-03-06  Oliver Lemke  <olemke@uni-bremen.de>

        * arts-1-1-480
        
        * src/matpackI.cc: Another unused joker eliminated.

2003-03-06  Oliver Lemke  <olemke@uni-bremen.de>

        * arts-1-1-479
        
        * src/m_clonesize.cc: Added function for SingleScatteringData.
        Fixed unused parameter warnings.

        * src/m_hdf.cc: Fixed unused parameter warnings.

        * src/matpackI.cc: Fixed joker warning.

        * src/Makefile.am: Added optproperties.{cc,h} in some places.

        * src/xml_io.cc: Added dummy read/write functions for
        SingleScatteringData.

        * src/xml_io_private.h: Added read/write functions for
        SingleScatteringData.

        * doc/examples/xml.arts: Updated.

2003-03-06  Claudia Emde  <claudia@sat.physik.uni-bremen.de>

        * arts-1-1-478
        
        * src/optproperties.{cc,h}: Created these files. Defined the new
        structure *SingleScatteringData* in optproperties.h. The functions
        concerning the transformation from the data to the relevant 
        workspace variables will be put in optproperties.cc.

        * src/groups.cc: Added *SingleScatteringData*.

        * src/make_auto_wsv_h.cc: Included *SingleScatteringData*.

        * src/make_auto_wsv_groups_h.cc: Included *SingleScatteringData*.

        * src/Makefile.am (arts_SOURCES): Included optproperties.h, 
        optproperties.cc.

2003-03-06  Oliver Lemke  <olemke@uni-bremen.de>

        * arts-1-1-477

        * src/make_auto_wsv_h.cc: Removed touch member function from WorkSpace.

        * src/agenda_class.h: Removed touch member function from MRecord.

        * src/m_ignore.h: Fixed unused parameter warning.

        * src/make_auto_md_cc.cc: If parameter ws or mr is unused then omit
        name in function definition to avoid compiler warning.

        * src/xml_io.cc: Fixed unused parameter warnings.

2003-03-06  Oliver Lemke  <olemke@uni-bremen.de>

        * arts-1-1-476

        * configure.in: Added doc/uguide/Figs/concept and
        doc/uguide/Figs/rte_theory to AC_OUTPUT.

        * doc/uguide/Figs/Makefile.am: Added rte_theory to SUBDIRS.

2003-03-06  Stefan Buehler  <sbuehler@uni-bremen.de>

        * arts-1-1-475

        * src/m_ignore.h (Ignore): Managed to suppress the unused
        parameter warning for parameter *in* with a somewhat nasty
        hack. But it works, and I made sure that there are some explantory
        comments why this is done. Oliver, I believe the same trick could
        be used to make a template function "touch" that works for any
        type. What do you think?

2003-03-05  Patrick Eriksson  <Patrick.Eriksson@rss.chalmers.se>

        * arts-1-1-474

        * doc/uguide/los1d.tex: Removed this file.
        
        * doc/uguide/fm_definitions.tex: Polished the text, and put in some
        details about ground reflections.

        * doc/uguide/rte_theory.tex: Created this chapter by copying text from
        a compendium I have written (originally from a old report).

        * doc/uguide/sensor.tex: Commented out all old text. 

        * doc/uguide/main.tex: Activated sensor chapter, and added chapter
        on radiative transfer theory.

2003-03-05  Patrick Eriksson  <Patrick.Eriksson@rss.chalmers.se>

        * arts-1-1-473

        * doc/uguide/fm_definitions.tex: Improved and updated text.
        Added two figures (ppath_badcases.pdf and atm_dim_3dcross.pdf).

        Check out the figures of the chapter (except from last page).
        I think they are nice (of course).

2003-03-05  Patrick Eriksson  <Patrick.Eriksson@rss.chalmers.se>

        * arts-1-1-472

        * doc/uguide/fm_definitions.tex: Included figure for 3D atmosphere 
        and modified figure text for 1D and 2D atmospheres.

        * src/XXXX: Fixed warnings about unused variables in "my" parts.
        
        * src/m_refraction.cc (refr_indexUnit): Removed input arguments not 
        used. The function must now be combined by Ignore calls.

2003-03-05  Stefan Buehler  <sbuehler@uni-bremen.de>

        * arts-1-1-471

        * src/m_ignore.h (Ignore): Issue a level 2 message which WSV is
        ignored. This avoids the unused parameter warning for *inname*.
        However, there still is one for *in*. Don't know how to fix this
        right now.

        * src/m_copy.h (Copy): Removed call of CloneSize.

2003-03-05  Stefan Buehler  <sbuehler@uni-bremen.de>

        * arts-1-1-470

        * src/m_clonesize.cc: Added some level 2 and 3 output messages to
        surpress most unused parameter warnings. 

        * src/methods.h (MdRecord operator=(const MdRecord& m)): Added
        output of m to suppress unused parameter warning. 

2003-03-05  Oliver Lemke  <olemke@uni-bremen.de>

        * arts-1-1-469

        * configure.in: Don't use -Wno-unused (gcc2) and
        -Wno-unused-parameter (gcc3) any longer.
        Removed check for gcc version.

        * src/agenda_class.h: Added dummy method touch to MRecord.

        * src/make_auto_wsv_h.cc: Added dummy method touch to WorkSpace.

        * src/make_auto_md_cc.cc: If WorkSpace is not used in method call
        ws.touch to avoid unused parameter warning.
        Same for MRecord.

2003-03-04  Patrick Eriksson  <Patrick.Eriksson@rss.chalmers.se>

        * arts-1-1-468

        * doc/uguide/Figs/fm_definitions/mkfigs_atm_dims.m: Added 3D figure. 

2003-03-04  Patrick Eriksson  <Patrick.Eriksson@rss.chalmers.se>

        * arts-1-1-467

        * doc/uguide/Figs/fm_definitions/mkfigs_atm_dims.m: Modified
        this function. It now uses atmlab/arts/arts_plot_atmgrids.m.

        * src/ppath.cc: Removed input argument t_field as it was no longer
        used.

        * src/m_ppath.cc (ZaSatOccultation): As above.

2003-03-03  Patrick Eriksson  <Patrick.Eriksson@rss.chalmers.se>

        * arts-1-1-466

        * src/m_ppath.cc (DoGridcell2D/3D): Removed these WSM. 
        (ppathCalcTest): Removed also this WSM.
        
        * doc/uguide/Figs: Created the folder concept and moved two
        figures to that folder. Removed all remaining figures in the folder
        /Figs (as decided some time ago). If you want to use some of the
        removed figures, copy it from arts-1.

        The decision is that all figures shall be placed in sub-folders,
        one fore each chapter, where the folder name shall match the name of
        the Latex file.

2003-02-28  Stefan Buehler  <sbuehler@uni-bremen.de>

        * arts-1-1-465

        * src/gas_abs_lookup.cc (Extract): Calculate number density with
        the physics_funcs function number_density.
        (Extract): Fixed bug reported by Patrick: VMR scaling for the case
        with temperature variations was missing.
        (Extract): Fixed bug related to pressure interpolation for the
        variable T case.

2003-02-28  Mattias Ekstr�m  <ekstrom@rss.chalmers.se>

        * arts-1-1-464

        * src/sensor.cc (sensor_integration_vector): Added file and created 
        function that calculates the (row) vector that multiplied with an 
        unknown (column) vector approximates the integral of products between 
        two functions, where the two vectors are the quantizied representation
        of the functions. See ARTS 1 User Guide, chapter 7 Sensor modelling 
        for an in-depths explanation.

        * src/sensor.h: Added the file.

        * src/describe.h: Added line; #include "mystring.h". We need it for
        the compilation.

2003-02-27  Patrick Eriksson  <Patrick.Eriksson@rss.chalmers.se>

        * arts-1-1-463

        * src/rte.cc (get_radiative_background): Fixed a bug for cases with
        ground reflection. Bug reported by Sreerekha. The bug had no effect
        for a blackbody ground.

        The solution with agendas makes some things difficult. My solution
        for ground reflections involve a recursive call of RteCalc. The
        output from get_radiative_background is the WSV i_rte. When
        calling RteCalc recursively, I did this with a local variable,
        but RteCalc calls rte_agenda which will change the value of i_rte.
        The problem was that i_rte already contained interesting values.
        So I got a side effect from the agenda that I missed. I hope that
        there are now no such side effects left in this part. But changes
        for the agendas can easily affect this part, so we ahve to be careful
        when changing things for the agendas.

2003-02-27  Stefan Buehler  <sbuehler@uni-bremen.de>

        * arts-1-1-462

        * src/gas_abs_lookup.cc: I'm still working on the gas absorption
        lookup table. Beware! This is not yet the final version. I want to
        do some tests tomorrow, in order to see if temperature
        interpolation works. The case without temperature variations is
        tested and is believed to work correctly.
        IMPORTANT: We are now storing absorption cross-sections, rather
        than absorption coefficients in the table. Old tables will not
        work anymore, unfortunately. However, this is worth the
        inconvenience since it decreases interpolation error by two orders
        of magnitude! (See my email to arts-dev.)

        * src/gas_abs_lookup.h: Updated.

        * src/m_absorption.cc (abs_scalar_gas_fieldCalc): This method now
        takes f_index as input. Depending on f_index, the field will be
        calculated for all frequencies, or just for one frequency.

        * src/methods.cc: Updated record for abs_scalar_gas_fieldCalc.

        * src/agendas.cc (define_agenda_data): Added f_index in the input
        list of scalar_gas_absorption_agenda.

        * src/xml_io.cc (xml_read_from_stream): Read .xml instead of .abs.
        (xml_write_to_stream): Write .xml instead of .abs.

        * src/describe.cc: Added. This file contains a set of helper
        functions called \c describe, which you can use to output the
        dimensions of a tensor. This is just for testing purposes.

        * src/describe.h: Added. Header file for describe.cc.

        * src/test_matpack.cc: Modified some tests.

        * src/matpackIII.cc: Only linebreak changes.

        * src/matpackI.h: Only whitespace removed.

        * src/matpackI.cc: Only indentation changes.

        * src/m_scatrte.cc: Updated copyright notice.

        * src/m_cloudbox.cc: Updated copyright notice.

        * src/Makefile.am (test_matpack_SOURCES): Added describe.

2003-02-26  Claudia Emde  <claudia@sat.physik.uni-bremen.de>
        
        * arts-1-1-461
        
        * src/m_scatrte.cc (convergence_flagAbs): Modified the function. It
        has been a very special function for the radiation field. Now it is a 
        general method which can be used for any Tensor6's.
        
        * src/m_scatrte.cc (i_fieldUpdate1D), (i_fieldUpdate3D): Structured
        the interface variables such that it is easier to see why they 
        are needed in the function. 
        Also removed some variables:
        There was a diskussion about *stokes_dim* and *atmosphere_dim* 
        some time ago. I removed this variables now and extracted the 
        dimensions from other variables.
        Furthermore I could remove some variables which had been used for
        executing *scat_rte_agenda* which is not there anymore. We decided
        to "hardwire" the RT method to be used.

        * src/m_scatrte (i_fieldIterate): Structured interface variables.

        * src/m_scatrte (ScatteringInit): Created this function to initialize 
        the variables used in agendas for scattering calculations. Previously
        the initialization was done in *i_fieldIterate*. The structure becomes
        clearer when we have this additional function.

        * src/m_scatrte.cc (iteration_counterIncrease): Icluded this small
        function to be able to separate the iteration counter from the other
        methods (for modularity reasons).
        
        * src/methods.cc: Adjusted entries according to changes above.

        * src/agendas.cc: Modified input/output for *opt_prop_part_agenda* and
        *convergence_test_agenda*.

        * doc/examples/cloud_rad_field1D_example.arts.in: Added more desciption
        into the controfile to make clear, where which agenda is used.
        
2003-02-25  Patrick Eriksson  <Patrick.Eriksson@rss.chalmers.se>

        * arts-1-1-460
        
        * doc/uguide/ppath.tex: Added some missing terms in some equations.
        Some small polishing of the text.

2003-02-25  Mattias Ekstr�m  <ekstrom@rss.chalmers.se>

        * arts-1-1-459

        * src/m_basic_types.cc: Added VSM Tensor3Scale, Tensor4Scale,
        Tensor5Scale, Tensor6Scale and Tensor7Scale.

        * src/m_sensor.cc: Added this file for sensor modelling.
  
2003-02-24  Patrick Eriksson  <Patrick.Eriksson@rss.chalmers.se>

        * arts-1-1-458

        * src/m_rte.cc (RteEmissionStd): Removed a variable not used (with
        apossible size of up to 10 Mb!) and moved some lines to outside a
        for loop (to maybe save some time).

2003-02-23  Patrick Eriksson  <Patrick.Eriksson@rss.chalmers.se>

        * arts-1-1-457

        * doc/uguide/ppath.tex: Further work on documentation of the path
        calculations. Geometrical paths are close to be finished. Some
        details are missing. I plan also to create some figures.

        * doc/uguide/fm_definitions.tex: Added definition of the azimuth angle
        at the poles.

2003-02-17  Claudia Emde  <claudia@sat.physik.uni-bremen.de>

        * arts-1-1-456

        * src/main.cc: Set default reporting level for report file to 0. My
        ARTS jobs crash because the report file becaomes too large when I 
        use report level 3.

2003-02-14  Patrick Eriksson  <Patrick.Eriksson@rss.chalmers.se>

        * arts-1-1-455

        * doc/uguide/ppath.tex: Text added to describe the calculation of
        propagation paths. Not ready, more to write.

2003-02-11  Patrick Eriksson  <Patrick.Eriksson@rss.chalmers.se>

        * arts-1-1-454

        * doc/uguide/ppath.tex: Modified existing text as a first step to
        finish this chapter in AUG.

2003-02-11  Mattias Ekstr�m  <ekstrom@rss.chalmers.se>

        * arts-1-1-453

        * src/m_ppath.cc (ZaSatOccultation): Created WSM for calculating
    zenith angles during satellite occultations.

        * src/ppath.h (geompath_lat_at_za): Added method to header file.

2003-02-07  Patrick Eriksson  <Patrick.Eriksson@rss.chalmers.se>

        * arts-1-1-452

        * src/m_cloudbox.cc (CloudboxSetManually): The function now behaves as
        expected for limits identical to grid values.

        * src/ppath.cc (do_gridcell_3d): Improvement in 1-1-451 for west-east
        cases was incorrect. In the hurry, the type for abs( aa_start ) was
        set to bool (instead of double). This turned the fix off, and there
        was a crash for Numeric=float. It appears that this fix is not needed
        for double, but I leave it, just in case.

2003-02-07  Patrick Eriksson  <Patrick.Eriksson@rss.chalmers.se>
        
        * arts-1-1-451

        * src/ppath.cc (ppath_start_stepping): Upward observations along
        the upper latitude limit is not allowed for 2D. That is, start position
        inside the atmosphere, za=0, and lat=last(lat_grid).

        (do_gridcell_3d): Test for finding strictly west-east
        observations was wrong. Strange that it has not crashed. All old
        3D results are definitely wrong.  

2003-02-06  Patrick Eriksson  <Patrick.Eriksson@rss.chalmers.se>

        * arts-1-1-450

        * src/ppath.cc (geompath_from_r1_to_r2): Using r2 instead of r[n]
        when calculating za[n], as r2 is always double. The conversion from
        double top float can result in a shift of 0.1 m, which can end up
        below ppc.

        Successful tests with refraction and Numeric=float for 1D and 2D.
        So, refraction for 1D and 2D is now hopefully working (3D with
        refrcation is NOT worling yet).

2003-02-06  Patrick Eriksson  <Patrick.Eriksson@rss.chalmers.se>

        * arts-1-1-449

        * src/ppath.cc (do_gridcell_3d): Introduced an allowed tolerance
        for latitudes and longitudes (LATLONTOL). This turned out to be
        necessary when using very fine pressure grids (the test was
        performed with a vertical step size of about 15 m). This problem
        was reported by Claudia.

2003-02-04  Nikolay Koulev  <nkoulev@uni-bremen.de>

        * arts-1-1-448

        * src/zeemanproperties.cc: Fixed another bug in the calculation of the
        relative intensities of individual Zeeman components.

2003-02-04  Patrick Eriksson  <Patrick.Eriksson@rss.chalmers.se>

        * arts-1-1-447

        * src/ppath.cc (do_gridcell_3d): I discovered that calculations from
        CloudboxGetIncoming with azimuth angles of exactly 90 degrees caused
        problems (at least for Numeric=float). Some special checks are now
        introduced for this case to avoid that the positions are shifted
        incorrectly to south or north for short step lengths (<1m).

        * src/m_cloudbox.cc (CloudboxGetIncoming): Removed some crap output
        to the screen.

2003-02-04  Nikolay Koulev  <nkoulev@uni-bremen.de>

        * arts-1-1-446

        * src/zeemanproperties.cc: Fixed a bug in the calculation of the
        relative intensities of individual Zeeman components. Added two
        more output variables in order to save the frequencies and the
        corresponding relative intensities of the components as matrixes
        in xml format.

        * src/zeemanproperties.h: Modified the file according the changes
        in the zeemanproperties.cc.

        * src/test_zeemanproperties.cc: Modified the file according the changes
        in the zeemanproperties.cc.

2003-02-04  Oliver Lemke  <olemke@uni-bremen.de>

        * arts-1-1-445

        * src/Makefile.am: Added m_xml.cc to arts_SOURCES.

        * src/test_binaryio.cc: Updated.

        * src/m_xml.h: Rename FType to FileType and FTYPE_{ASCII,BINARY} to
        FILE_TYPE_{ASCII,BINARY}.
        WriteXML gets file_format as input.
        Added output_file_formatSet{Ascii,Binary}.

        * src/m_xml.cc: Added.

        * src/xml_io.cc: Renamed FType to FileType and FTYPE_{ASCII,BINARY} to
        FILE_TYPE_{ASCII,BINARY}.
        (xml_read_header_from_stream): Read endian type and
        numeric type from input file.

        * src/xml_io.h, src/xml_io_private.h: Rename FType to FileType.

        * src/methods.cc: Added output_file_formatSet{Ascii,Binary}.
        WriteXML gets output_file_format as input.

        * src/workspace.cc: Added variable output_file_format.
        
        * src/.cvsignore: Added *.swp to ignore vim temporary files.

2003-02-04  Patrick Eriksson  <Patrick.Eriksson@rss.chalmers.se>

        * arts-1-1-444

        * src/ppath.cc (do_gridrange_1d and do_gridcell_2d): Same correction
        as for 3D in last commit.
        
        * src/ppath.cc (psurface_crossing_2d): Some upward cases were handled
        incorrectly. Fixed bug for c=0.

        * src/ppath.cc (ppath_start_stepping): The entrance point for negative
        zenith angles and the sensor outisde the atmosphere was calculated
        wrongly.

2003-02-03  Claudia Emde  <claudia@sat.physik.uni-bremen.de>

        * arts-1-1-443

        * m_scatrte.cc (i_fieldUpdate1D): Modified. The distinction between
        uplooking and downlooking cases is now done using the grid positions
        returned by the ppath_step_agenda instead of viewing directions (like
        in i_fieldUpdata3D). Now, also viewing directions close to 90� can be
        handled. Interpolation in altitude is done logarithmically (was linear
        before).

        * m_cloudbox.cc (CloudboxGetIncoming): Fixed 1D part. Didn't work 
        after some modifications for the 3D part.

2003-02-03  Patrick Eriksson  <Patrick.Eriksson@rss.chalmers.se>

        * arts-1-1-442

        * src/ppath.cc (do_gridcell_3d): Had to introduce a correction in
        radius to handle Numeric=float as points can end up slightly
        outside the grid cell (up to 1 m for float). 

        * src/ppath.cc (psurface_crossing_3d): This function handles now
        only surfaces with slope. Moved code from gridcell_crossing_3d to
        this function and removed gridcell_crossing_3d.

2003-02-03  Patrick Eriksson  <Patrick.Eriksson@rss.chalmers.se>

        * arts-1-1-441

        * src/ppath.cc: Started to remove code not used. Introduced the
        file-common variables DEV0AND180 and POLELAT to make the accuracy 
        tuning more transperant.

2003-02-03  Claudia Emde  <claudia@sat.physik.uni-bremen.de>

        * arts-1-1-440

        * src/m_scatrte.cc (i_fieldUpdate3D): Included *scat_lat_index* and
        *scat_lon_index* required for optical properties calculation. Before 
        the optical properties were only calculated for *scat_lat_index* and 
        *scat_lon_index* equal 0.

        * src/methods.cc(i_fieldUpdate3D): Modified according to correction. 
        
2003-02-03  Patrick Eriksson  <Patrick.Eriksson@rss.chalmers.se>

        * arts-1-1-439

        * src/ppath.cc: I found more new numerical problems with Numeric=float.
        This time for calculations with refrcation. It turned out that step
        lengths of e.g. 1 km could not be used. Decided then to test to
        hard-code double as far as possible in the function. Everything
        compiles without warnings. Not yet checked if things work better for
        Numeric=float.

        * src/math_funcs.h: Removed declaration of non-existing return version
        of function of type linspace.

        * src/m_basic_types.cc (VectorNLogSpace): Not using removed return
        version of nlogspace.

        * src/math_funcs.cc (nlinspace): The last value is now set to be stop
        exactly (not start + i*strep). 

        Removed old return version of nlogspace.

2003-02-02  Patrick Eriksson  <Patrick.Eriksson@rss.chalmers.se>

        * arts-1-1-438

        * src/ppath.cc (psurface_slope_3d): Applied bigger disturbance for
        float.
        
        (do_gridcell_2d): Upper pressure surface is now checked even if start
        point is on top of that surface. This is needed for tilted surfaces.

        (psurface_crossing_2d): Included a threshold for r0=rp.

        * src/ppath.cc: Smaller fixes here and there.
        
2003-01-28  Patrick Eriksson  <Patrick.Eriksson@rss.chalmers.se>

        * arts-1-1-437

        * src/ppath.cc (do_gridcell_3d_try): Added ground intersections and
        some checks to handle paths along lon grid value.

2003-01-28  Patrick Eriksson  <Patrick.Eriksson@rss.chalmers.se>

        * arts-1-1-436
        
        * src/ppath.cc (do_gridcell_3d_try): I have worked on another scheme
        for this function. The new scheme is based on testing different step
        lengths, in a hopefully intelegent way, and simply test if the end
        point is inside or outside the grid cell. This scheme is slower than
        using a pure analytical solution, but it allows to compensate for
        numerical problems with float, and works for tilted pressure surfaces,
        So, if this is a success, both my present problems are solved. 

        I am now trying to stress the new scheme to make it 100% safe. 
        You will not use this new scheme when you compile. 

2003-01-28  Nikolay Koulev  <nkoulev@uni-bremen.de>

        * arts-1-1-435

        * src/zeemanproperties.cc: Fixed several bugs.

2003-01-28  Claudia Emde  <claudia@sat.physik.uni-bremen.de>
        
        * arts-1-1-434  
        
        * src/m_scatrte.cc (ScatteringMain): Removed clearsky field 
        calculation on boundary (CloudboxGetIncoming) from this function.
        Now it is possible to read a pre-calculated clearsky field. This 
        makes sense as we are interested to test clouds with different
        particle types. For those cases the clearsky field on the cloudbox
        boundary is always the same and it saves a lot of time not 
        recalculating the clearsky field for each case.
        To do a convergence test it is now also possible to take an unrealistic
        field on the cloudbox boundary.
                
        * src/m_scatrte.cc (i_fieldUpdate3D): Fixed a small bug.

        * src/m_cloudbox.cc (i_fieldSetConst): Modified. This function is
        tested now and works correctly.

        * src/methods.cc (ScatteringMain): Modified interface variables.

        Note: I have made a 3D convergence test (in analogy to 
        the 1D convergence
        test). It works, so we can be quite sure, that the 3D scattering 
        implementation is correct!

2003-01-28  Mattias Ekstr�m  <ekstrom@rss.chalmers.se>

        * arts-1-1-433
    
        * src/m_basic_types.cc: added the WSM 
            Matrix1ColFromVector
            Matrix2ColFromVectors
            Matrix3ColFromVectors
            Matrix1RowFromVector
            Matrix2RowFromVectors
            Matrix3RowFromVectors
            VectorZtanToZa
        removed the WSM
            MatrixFillWithVector
            MatrixSetElement

2003-01-28  Nikolay Koulev  <nkoulev@uni-bremen.de>

        * arts-1-1-432

        * src/test_zeemanproperties.cc: Fixed bug in the Zeeman test file.
        
2003-01-27  Oliver Lemke  <olemke@uni-bremen.de>

        * arts-1-1-431

        * Nearly completed binary file support.
        Missing features: - Integration into arts workspace.
                          - Storing of Numeric/Index type in xml file.
                            -> Currently binary files must be read with the
                               same Numeric/Index type as they where written.

        * src/Makefile.am: Added test_binaryio target.
        Added b(i|o)fstream.{cc,h} where needed.

        * src/test_binaryio.cc: Added for testing binary io routines.

        * src/xml_io.{h,cc}, src/xml_io_private.h: xml_write_to_file
        functions take now three parameters. Third arg is the type of file to
        write (FTYPE_ASCII or FTYPE_BINARY). Default is ASCII.
        Changed parameters for xml_{write_to,read_from}_stream functions:
        Removed parameters is_data and os_data. Instead, a pointer to
        bifstream / bofstream is passed to the function. If the pointer is
        NULL the data is written to/read from the xml file, otherwise the
        binary stream is used.

        * src/bifstream.h: Removed ios::trunc from default openmode.

        * src/b(i|o)stream.{h,cc}: Added operator template instanciations for
        types int and long.

        * src/.cvsignore: Added test_binaryio.

2003-01-27  Nikolay Koulev  <nkoulev@uni-bremen.de>

        * arts-1-1-430

        * src/zeemanproperties.cc: Made notation of the extinction matrix
        and absorption vector with Zeeman effect compliant to the this of
        scattering. 

        * src/zeemanproperties.h: The same for this file.

        * src/test_zeemanproperties.cc: The same for this file.

2003-01-24  Claudia Emde  <claudia@sat.physik.uni-bremen.de>

        * arts-1-1-429

        * src/m_cloudbox.cc (i_fieldSetClearsky): Bug fixed in 3D part. The 
        limits of some loops were wrong.

        * src/m_scatrte.cc (scat_fieldCalc): Fixed 3D part:
        Included (pha_mat_sptCalc), this function was missing, so that the 
        value of the scattering integral was always 0.
        Included also some dubugging outputs which will be removed
        later.

        * src/special_interp.cc: Reincluded iostream.

2003-01-24  Patrick Eriksson  <Patrick.Eriksson@rss.chalmers.se>

        * arts-1-1-428

        * Removed inclusion of iostream from some files.

2003-01-24  Patrick Eriksson  <Patrick.Eriksson@rss.chalmers.se>

        * arts-1-1-427

        * src/ppath.cc: Further work on 3D and float. Unfortunately (or
        maybe it could have been foreseen) it turned out that the spatial
        precision for 3D and float is as bad as 10 m. The smallest
        rounding error when going going to cartesian coordinates and back to
        spherical, shifts the position with about 1 m and some accumaled errors
        rise the error up to 10m. This high uncertainty makes the present
        solution in do_gridcell_3d impossible, it is very likely to end up
        in a situation that cannot be resolved. For double the spatial precison
        is about 1e-6 m, and the risk to end up in problems is very very small.
        I have to think about what to do. For the moment, use double.

2003-01-24  Oliver Lemke  <olemke@uni-bremen.de>

        * arts-1-1-426

        * Sorry for the exceeding commit rate, but I have to test the changes
        on different computers...

        * src/continua.cc: More pow fixes. Overloading of pow for both
        pow(float,double) and pow(double,float) breaks float compilation with
        gcc2. Added f to the numeric literals.

        * src/math_funcs.{cc,h}: Removed pow (float,double). Confuses gcc2 in
        many cases and we don't need it currently.

2003-01-24  Oliver Lemke  <olemke@uni-bremen.de>

        * arts-1-1-425

        * src/continua.cc: Fixed pow(Numeric n, int i) calls. For simple cases
        with i = 2 replaced by n*n. For other cases using 2. instead of 2

2003-01-23  Oliver Lemke  <olemke@uni-bremen.de>

        * arts-1-1-424

        * src/math_funcs.{cc,h}: Added functions pow(float, double) and
        pow(double, float).

        * src/continua.cc: Include math_funcs.h for additional pow functions.

        * src/ppath.cc: Changed constant from int to double as second argument
        to pow in some places.

2003-01-23  Oliver Lemke  <olemke@uni-bremen.de>

        * arts-1-1-423

        * src/complex.{h,cc}: Added operator+ and operator* with params
        complex<float>, double and complex<double>, float.

        * src/Makefile.am (arts_SOURCES) (test_zeemanproperties):
        Added complex.{h,cc}.

        * src/xml_io.h: Removed prototypes for xml_open_output_file and
        xml_open_input_file.

        * src/xml_io_private.h: Added prototypes for xml_open_output_file
        and xml_open_input_file.

2003-01-23  Patrick Eriksson  <Patrick.Eriksson@rss.chalmers.se>

        * arts-1-1-422

        * src/ppath.cc: Compiles now without any warnings with Numeric=float.

2003-01-23  Oliver Lemke  <olemke@uni-bremen.de>

        * arts-1-1-421

        * src/complex.{cc,h}: Added operator+ and operator* for arithmetic
        expressions where one argument is float and the other complex<double>
        (or double and complex<float>).
        The STL only contains functions for operands of same type such as
        float * complex<float>.

2003-01-23  Patrick Eriksson  <Patrick.Eriksson@rss.chalmers.se>

        * arts-1-1-420
        
        * src/ppath.cc: Continued the work to hard-code double in the most 
        critical functions. Don't compile without warnings with Numeric=float,
        but other parts don't compile at all with that option.
        
2003-01-23  Claudia Emde  <claudia@sat.physik.uni-bremen.de>

        * arts-1-1-419
        
        * doc/uguide/main.tex: Included index command to make an index for 
        workspace agendas (\wsaindex). It works as \wsmindex.
        
        * doc/uguide/scattering.tex: Rewritten documentation for 
        (i_fieldUpdateXX).

        * src/math_funcs.cc (AngIntegrate_trapezoid): Modified doxygen
        header.

2003-01-23  Oliver Lemke  <olemke@uni-bremen.de>

        * arts-1-1-418

        * src/bifstream.h src/bifstream.cc: Added class for binary input.

        * src/bofstream.cc: Removed matpackI include.

        * src/bofstream.h: Removed destructor.

        * src/Makefile.am (arts_SOURCES): Added bifstream.{h,cc}.

2003-01-22  Oliver Lemke  <olemke@uni-bremen.de>

        * arts-1-1-417

        * src/.cvsignore: Added test_zeemanproperties.

2003-01-22  Oliver Lemke  <olemke@uni-bremen.de>

        * arts-1-1-416

        * src/methods.h: Include iosfwd instead of iostream.
        (MdRecord::operator=): Replaced cout by out0.

        * src/xml_io.h: Include iosfwd instead of iostream.

        * src/gridded_fields.cc: Removed duplicate iostream include.

        * src/lin_alg.cc src/math_funcs.cc src/m_cloudbox.cc
        src/m_refraction.cc src/scatproperties.cc: Removed unnecessary
        iostream include.

        Note about iostream: Wherever possible, including iostream should be
        avoided because it has quite alot of overhead. If you use cout
        temporarely for debugging, don't forget to remove the iostream include
        together with the debug code afterwards.

        For header files containing function/class declarations which need
        only references to iostream classes, it is highly recommended to
        include iosfwd instead of iostream. iosfwd contains only forwarded
        class declarations which significantly affects compilation speed.

2003-01-22  Nikolay Koulev  <nkoulev@uni-bremen.de>

        * arts-1-1-415

        * src/zeemanproperties.cc: Added this file, containing the basic
        routines for calculating the extinction matrix and the
        absorption vector by the Zeeman effect..

        * src/zeemanproperties.h: Header file for the zeemanproperties.cc.

        * src/test_zeemanproperties.cc: Test file for the Zeeman routines.

        * src/zeeman_intensity_coeff.xml: XML table of the intensity
        coefficients for the different transitions of the O2 Zeeman
        effect, used in zeemanproperties.cc.
        
2003-01-22  Patrick Eriksson  <Patrick.Eriksson@rss.chalmers.se>

        * arts-1-1-414

        * src/ppath.cc: Started the work to make things work for Numeric=float,
        but got time for just a few changes.

2003-01-22  Claudia Emde  <claudia@sat.physik.uni-bremen.de>

        * arts-1-1-413  

        * doc/uguide/integration.tex: Included mathematical description of the
        used integration method.
        
2003-01-21  Patrick Eriksson  <Patrick.Eriksson@rss.chalmers.se>

        * arts-1-1-412

        * src/ppath.cc: Wrote some comments and made all function argument
        lists (in the headers) complete.
        
        * src/ppath.cc (raytrace_2d_linear_euler): Added check that zenith 
        angle does not go outside +-180.

2003-01-21  Oliver Lemke  <olemke@uni-bremen.de>

        * arts-1-1-411

        * src/bofstream.{h,cc}: Added. Contains class for writing binary data
        by using output operators <<.

        * src/Makefile.am (arts_SOURCES): Added bofstream.{h,cc}.

2003-01-21  Claudia Emde  <claudia@sat.physik.uni-bremen.de>

        * arts-1-1-410

        * src/m_cloudbox.cc (i_fieldSetClearsky): Pressure interpolation 
        changed from linear to logarithmic.

        * src/m_atmosphere.cc (AtmFieldsCalc): Also changed the pressure
        interpolation to logarithmic.

        * src/workspace.cc: Changed documentation of *tensor6_1*, it is a dummy
        variable to be used when you need a tensor6 somewhere.

        * doc/uguide/scattering.tex: Started updating this chapter. 

2003-01-21  Patrick Eriksson  <Patrick.Eriksson@rss.chalmers.se>

        * arts-1-1-409

        * src/ppath.cc (raytrace_3d_linear_euler): Put in some fixes to 
        improve the accuracy for zenith and azimuth angles. Included also
        checks that those angles do not go outside allowed ranges.

        * src/refraction.cc (refr_index_thayer_1974): Finally changed old
        parameter values (from Boudouris) to the ones from Thayer.

2003-01-20  Patrick Eriksson  <Patrick.Eriksson@rss.chalmers.se>

        * arts-1-1-408

        * src/refraction.cc (refr_gradients_1d): Created this function.

        * src/m_refraction.cc (RefrIndexFieldAndGradients): Finished this
        function.
        
        * src/refraction.cc: 
        * src/ppath.cc: Changes to get a nice verbosity for refr_index_agenda. 

2003-01-20  Oliver Lemke  <olemke@uni-bremen.de>

        * arts-1-1-407

        * src/xml_io.cc: Updated doxygen comments.

2003-01-20  Oliver Lemke  <olemke@uni-bremen.de>

        * arts-1-1-406

        * src/xml_io.cc, src/xml_io_private.h: Changed signatures of
        xml_read_from_stream/xml_write_to_stream functions. First step for
        binary file support. The read/write functions are now getting two
        streams as parameters. One is the file stream for the xml file and
        one the file stream where the data is written to. For ascii files both
        are the same, for binary the xml_data stream is a reference to the
        binary stream. This will make it possible to use the same
        reading/writing routines for both ascii and binary files.

2003-01-20  Patrick Eriksson  <Patrick.Eriksson@rss.chalmers.se>

        * arts-1-1-405

        * src/refraction.cc (refr_gradients_2d/3d): Changed the definition
        of the lat and lon gradients. The returned values are now the change
        of the refractive index over 1m, not 1 radian.

        * src/ppath.cc (raytrace_2d/3d_linear_euler): Adapted to change above.

        * src/special_interp.cc (p2gridpos): Created this function. This
        function SHALL be used when interpolating in pressure. See email
        to arts-dev.

        * src/m_refraction.cc (RefrIndexFieldAndGradients): Function basically
        finished, but there is not yet any function for 1D giving the radial
        gradient (which is not needed to calculate the paths, but can be 
        interesting to plot).

2003-01-20  Patrick Eriksson  <Patrick.Eriksson@rss.chalmers.se>

        * arts-1-1-404

        * src/refraction.cc: Changes in most functions to change vertical
        input coordinate from geometric altitude to radius, which is needed
        to get lat and lon gradients correct. 

        * src/m_refraction.cc (RefrIndexFieldAndGradients): Started on this
        WSM.

        * src/workspace.cc (define_wsv_data): Introduced tensor3_1 and
        tensor4_1.

        * src/ppath.cc (do_gridcell_2d): Introduced a more correct setting
        of the latitude of the end point, for positions between lat1 and lat3.

        * src/refraction.cc: Included input arguments to control the
        verbosity when calling *refr_index_agenda*, but there is now no
        way to use this argument as *refr_index_agenda* is called as part
        of *ppath_step_agenda* and no such argument can be passed from one
        agenda to next.

        * src/ppath.cc (ppath_start_stepping): Improved the accuracy for
        sensor positions outside the atmosphere and zenith angles of 180
        and/or azimuth angles of 0 or 180 degrees.

        * src/refraction.cc (refr_gradients_3d): The variable dndlon was not 
        set (dndlat was set twice).

2003-01-19  Patrick Eriksson  <Patrick.Eriksson@rss.chalmers.se>

        * arts-1-1-403

        * src/ppath.cc (raytrace_3d_linear_euler): Put in code for 3D with
        refraction. The stuff runs, but I have to check the used expressions
        and results more carefully.

        * src/m_refraction.cc (refr_indexUnit): Created this WSM.

        * src/refraction.cc (get_refr_index_3d): Found a bug. Latitude grid
        position was set twice, and longitude grid position not at all.

        * src/ppath.cc (do_gridcell_2d): Fixed two bugs connected to the 
        tangent point for limb sounding with negative zenith angles.

2003-01-18  Patrick Eriksson  <Patrick.Eriksson@rss.chalmers.se>

        * arts-1-1-402

        * src/rte.cc (rte_calc): Forgot to mention that I introdoced this 
        function. It does what RteCalc did, but has the option that input 
        checks can be skipped. This saves some time in CloudboxGetIncoming.

2003-01-18  Patrick Eriksson  <Patrick.Eriksson@rss.chalmers.se>

        * arts-1-1-401

        * src/ppath.cc (gridcell_crossing_3d): Found a bug that affected the
        calculated length to a crossing of a given latitude. The original
        code was correct, but I later removed the calculation of 
        (dx^2+dy^2+dz^2) as this term is always 1. I was then too quick and 
        made a mistake. This bug fix solves the problem discussed for 
        version 1-1-393. Great!

2003-01-18  Patrick Eriksson  <Patrick.Eriksson@rss.chalmers.se>

        * arts-1-1-400
        
        * src/m_cloudbox.cc (CloudboxGetIncoming): Some temporary messages
        that will be removed later (to check speed issues).

        * src/ppath.cc (gridcell_crossing_3d): Fixed a bug when both solutions
        for the length >= 0, and of them is 0. The length criterion for
        solutions close to zero is now applied consistently.

        (do_gridcell_3d): Allowed some marginals for the lat and lon asserts
        in the middle of the function. The values are later corrected as far
        as possible.

        * src/refraction.cc (get_refr_index_3d): Created this function.

        (refr_gradients_3d): Created this function.

2003-01-17  Claudia Emde  <claudia@sat.physik.uni-bremen.de>
        
        * arts-1-1-399

        * src/rte.cc (rte_step): Change condition for unpolarized case 
        (extinction matrix diagonal). The
        problem is, that if you do a calculation for 2 Stokes dimensions,
        the extinction matrix can be diagonal although the radiation is 
        polarised. Now the unpolarised calculation is performed if the
        extinction matrix is diagonal AND all components except the first
        of the absorption vector are zero.

        * src/m_cloudbox.cc (CloudboxGetIncoming): Changed the size of the
        interface variables scat_i_XXX. So far they were defined on the
        full atmospheric grids which is not necessary. Now they are only
        defined inside the cloudbox boundaries. Loop indices had to be adapted 
        according to this change.

        * src/scat_rte.cc (ScatteringMain): Commented CloudboxGetIncoming. 
        For testing constant values for the boundary variables are used.
        (i_fieldUpdate3D): Fixed bugs in the radiative transfer part. 
        The function runs without crashes but I have to do some tests before
        I can assure that it works.
        
2003-01-17  Oliver Lemke  <olemke@uni-bremen.de>

        * arts-1-1-398

        * src/xml_io.cc: Detailed output goes now to out3. Only filenames of
        input/output files are reported to out2.

2003-01-16  Patrick Eriksson  <Patrick.Eriksson@rss.chalmers.se>

        * arts-1-1-397

        * Paths with refraction for 1D and 2D have been tested and everything
        appears to work. 
        
        * src/refraction.cc (get_refr_index_2d): Wrong dimension was read to
        determine the number of species.

        * src/ppath.cc: Included more asserts in the key functions for 3D to
        catch problems as early as possible.
        
        (psurface_crossing_3d): Started on a new version of this function.
        For the moment it is only allowed to use pressure surfaces with
        constant radius. That is, the geoid must be spherical and the 
        atmosphere spherically symmetric.

        * src/m_cloudbox.cc (CloudboxGetIncoming): Found some problematic 
        points, reported to Claudia.

2003-01-15  Patrick Eriksson  <Patrick.Eriksson@rss.chalmers.se>

        * arts-1-1-396

        * src/refraction.cc (refr_gradients_2d): Created this function.
        2D paths with refraction are now completed, but no tests have been
        performed.

        * src/ppath.cc (do_gridcell_3d): Added more asserts that should give
        an earlier and clear indication on that something has gone wrong.

        (psurface_crossing_2d): Removed some checks that had no impact (for
        the approximative solution, dlat = 0 was acceped if r0!=rp, but that 
        can never happen as za=0 and za=180 are handled seperately).

        (raytrace_1d_linear_euler): Cleaned up the code and removed some
        variables that were not really needed.

        (raytrace_2d_linear_euler): As above and added call of
        refr_gradients_2d. 

2003-01-15  Claudia Emde  <claudia@sat.physik.uni-bremen.de>

        * arts-1-1-395
        
        * src/m_cloudbox.cc (i_fieldSetClearsky). Fixed some bugs here. Limits 
        of the loops were wrong. Tested now for 3D.

        * src/m_scatrte.cc (scat_fieldCalc). Fixed similar bug here. Now the
        3D function works. 
        (i_fieldUpdate3D) Also wrong limits at some places. A problem in the
        interpolation on the intersection point still has to be fixed.

2003-01-15  Patrick Eriksson  <Patrick.Eriksson@rss.chalmers.se>

        * arts-1-1-394

        * src/ppath.cc: I don't think that I have made any real changes, but
        a commit just in case if there is something I have missed.

        Still problems with a non-spherical geoid. A test to calculate the
        ingoing field to the cloud box for 3D and a spherical geoid was
        succesful.

        Claudia, you better make an update to make sure we use exactly the
        same version.

2003-01-15  Patrick Eriksson  <Patrick.Eriksson@rss.chalmers.se>

        * arts-1-1-393

        * src/ppath.cc (gridcell_crossing_3d): I discovered that there is
        an inconsistency between the tangent point position obtained by
        doing repeated path steps, and a direct calculation with 
        geompath_tanpos_3d. The error, as a vertical displacement, is about
        1.5 km. I have spent some time on trying to understand this, and
        my guess is that the problems appear in this function, but I have no
        final confirmation, and I don't know right now what to do about it. 
        
        * src/ppath.cc (do_gridcell_1/2/3d): The tangent point is now not
        flagged as as an end face. A new flag especially for the tangent
        point has been introduced. No real imrpovement, but more logically
        as the tangent point is not an end face.
        
        * src/ppath.cc (do_gridcell_3d): Cases when a path step both starts 
        and ends at the top surface, without having a tangent point inside the
        cell is now handled.

2003-01-14  Patrick Eriksson  <Patrick.Eriksson@rss.chalmers.se>

        * arts-1-1-392

        * src/ppath.cc: Just a commit to transfer last changes to laptop.

2003-01-14  Patrick Eriksson  <Patrick.Eriksson@rss.chalmers.se>

        * arts-1-1-391

        * src/m_cloudbox.cc (CloudboxGetIncoming): Fixed a bug. The longitude
        index was not set following the cloud box limits.

        * src/ppath.cc (psurface_crossing_3d): A slight improvement that should
        lower the chance for failures. However, another algorithm will be 
        tested.

2003-01-14  Patrick Eriksson  <Patrick.Eriksson@rss.chalmers.se>

        * arts-1-1-390

        * src/ppath.cc: Work on 3D paths to handle all possible problems
        due to numerical inaccuracy. More work to be done (despite I have
        spent most of the day on this!), at least for cases with highly
        distorted grid cells. Can maybe work for nicer cases.

        * src/rte.cc (get_radiative_background): RteCalc is now not called
        if the ground is set to be a blackbody. Everything worked, but this
        saves some time.

2003-01-14  Claudia Emde  <claudia@sat.physik.uni-bremen.de>

        * arts-1-1-389  
        
        * src/m_cloudbox.cc: Included 3D parts for (scat_iPut) and 
        (CloudboxGetOutgoing). Now, all 3D functions for the scattering
        part are ready to be tested!

        * src/m_atmosphere.cc: Included checks and error messages. 
        
        * src/m_scatrte.cc: Only small modifications. Mainly documentation.

2003-01-14  Patrick Eriksson  <Patrick.Eriksson@rss.chalmers.se>

        * arts-1-1-388

        * src/m_refraction.cc (refr_indexThayer): Finished this function and
        moved some code to refr_index_thayer_1974.

        * src/refraction.h: Created this file. 

        * src/refraction.cc: Added this file and moved get_refr_index_1d to
        to this file. Made new version of get_refr_index_2d. Created the
        function refr_index_thayer_1974.

        * src/ppath.cc: Added input arguments to some function as a preperation
        for 2D with refrcation.

2003-01-13  Patrick Eriksson  <Patrick.Eriksson@rss.chalmers.se>

        * arts-1-1-387

        * src/ppath.cc: I had two parallel ways to number the corner points of
        3D grid cells. Fixed. Also more stringent naming between 2D and 3D.

        (psurface_crossing_3d): Fixed a bug that appeared when the radius
        of pressure surfaces is not constant. I had been sloppy in checking 
        such cases.
        
        (ppath_calc): Fixed a bug (hopefully) reported by Oliver (that went
        through my compiler).

2003-01-13  Patrick Eriksson  <Patrick.Eriksson@rss.chalmers.se>

        * arts-1-1-386

        * src/ppath.cc (do_gridcell_3d): Some smaller improvements for 
        special zenith and azimuth angles.

2003-01-13  Stefan Buehler  <sbuehler@uni-bremen.de>

        * arts-1-1-385

        * src/absorption.cc (find_first_species_tg): Added. Finds first
        occurrence of species in tag groups. The species to look for
        must be specified by its species index, not by the name!
        (species_index_from_species_name): Added. Returns species index
        for given species name.

        You can use both functions together to find the first water vapor
        tag:
        Index firstH2O
           = find_first_species_tg(species_index_from_species_name("H2O"))

        If there is no water vapor in the tag list the result will be -1.
        
        * src/absorption.h: Added declarations for the two new functions.

2003-01-13  Oliver Lemke  <olemke@uni-bremen.de>

        * arts-1-1-384

        * doc/uguide/Makefile.am: Removed uguide.ps.

        * doc/uguide/Figs/{*.eps,*/*.eps}: Removed all eps files.

        * doc/uguide/Figs/{Makefile.am,*/Makefile.am}: Removed *eps from file
        list.

2003-01-13  Claudia Emde  <claudia@sat.physik.uni-bremen.de>

        * arts-1-1-383

        * src/m_cloudbox.cc (i_fieldSetConst): Included the 3D part. The 
        function is used to set the radiation field to a constant value
        inside the cloudbox. The convergence test (same solution for 
        different initial fields) should also be done for the 3D 
        calculations.

        * doc/examples/cloud_rad_field1D_example.arts.in: Fixed some typos
        in documentation.

2003-01-12  Patrick Eriksson  <Patrick.Eriksson@rss.chalmers.se>

        * arts-1-1-382

        * src/ppath.cc (do_gridcell_3d): Added some code to try to catch a
        problem due to numerical problems with path start points on top of
        a pressure surface. Problem reported by Claudia.

2003-01-12  Oliver Lemke  <olemke@uni-bremen.de>

        * arts-1-1-381

        * configure.in: Applied patch provided by Randall Skelton
        <rhskelto@atm.ox.ac.uk>:
        configure can now be told where it should look for the HDF library.
        Added LDFLAGS to the configuration summary.

2003-01-10  Claudia Emde  <claudia@sat.physik.uni-bremen.de>

        * arts-1-1-380

        * src/agendas.cc: Fixed bug in *refr_index_agenda* entry.

        * src/m_atmosphere.cc: Checks for raw data commented because they 
        gave wrong error messages. They will be modified later.

2003-01-10  Oliver Lemke  <olemke@uni-bremen.de>

        * arts-1-1-379

        * src/m_cloudbox.cc, src/m_scatrte.cc: Replaced stdlib.h by cstdlib. We
        should always include the c++ versions of the header files.

        * src/m_refraction.cc: Replaced iostream.h by iostream.

        * src/old_absorption.cc: Replaced math.h by cmath.

2003-01-10  Claudia Emde  <claudia@sat.physik.uni-bremen.de>

        * arts-1-1-378

        Check-in failed for version arts-1-1-376.
        This is the next try.

        * src/m_cloudbox.cc (CloudboxGetIncoming): Some bug fixes.

        * src/m_refraction.cc: Included iostream.h. 
        
2003-01-10  Patrick Eriksson  <Patrick.Eriksson@rss.chalmers.se>

        * arts-1-1-377

        * src/ppath.cc (varoius functions): Continued to change input and 
        output arguments to send the variables needed for refr_index_agenda
        all the way down through all levels of functions.

2003-01-10  Claudia Emde  <claudia@sat.physik.uni-bremen.de>

        * arts-1-1-376

        * src/m_cloudbox.cc (CloudboxGetIncoming): Some bug fixes.

        * src/m_refraction.cc: Included iostream.h. 

2003-01-10  Patrick Eriksson  <Patrick.Eriksson@rss.chalmers.se>

        * arts-1-1-375

        * src/m_refraction.cc (refr_indexThayer): Renamed refr_indexBoudouris.

        Add now added this file to the CVS repository. Sorry for the miss.

2003-01-09  Patrick Eriksson  <Patrick.Eriksson@rss.chalmers.se>

        * arts-1-1-374

        * src/agendas.cc: Added the agenda refr_index_agenda.

        * src/workspace.cc: Added the WSV refr_index. 

        * src/m_refraction.cc (refr_indexBoudouris): Added this file and
        this function.

        * src/m_ppath.cc (ppath_stepRefractionEuler): Added new input 
        arguments.

2003-01-09  Claudia Emde  <claudia@sat.physik.uni-bremen.de>

        * arts-1-1-373

        * src/m_atmosphere.cc (AtmFieldsCalc): Added checks for the 
        consistency of input variables.

        * src/m_cloudbox.cc (CloudboxGetIncoming): Fixed a bug in the
        3D part of the function.
        The sensor azimuth angle grid goes from -180� to + 180� whereas 
        the scattering azimuth angle grid is defined from 0� to 360�. 
        This caused a problem when calling RteCalc for all directions.

        * src/m_scatrte.cc (i_fieldUpdate3D): Minor modification.

        * doc/examples/cloud_rad_field1D_example.arts.in: Added this example 
        control file for a 1D scattering calculation. The radiation field
        inside the cloudbox is calculated and all iterations are written
        into files.

        * doc/examples/Makefile.am: Included example above.
        
2003-01-09  Patrick Eriksson  <Patrick.Eriksson@rss.chalmers.se>

        * arts-1-1-372

        * src/m_rte.cc, rte.cc, ppath.cc, m_ppath.cc: Replaced Range(joker) 
        with joker.

2003-01-09  Stefan Buehler  <sbuehler@uni-bremen.de>

        * arts-1-1-371

        * doc/uguide/matrix_vector.tex: Added documentation for using
        naked jokers in matrices and tensors.

        * src/test_matpack.cc: Added test for using naked joker in Vector.

2003-01-09  Patrick Eriksson  <Patrick.Eriksson@rss.chalmers.se>

        * arts-1-1-370

        * Clear sky spectra has now been produced with real absorption for 
        1D, 2D and 3D. AND IT WORKS!!!! Time to celebrate.

        Spectra were calculated for cases that should be identical for 1D,
        2D and 3D. If lmax in ppath_stepGeometric is set to -1, some 
        difference is noted between 1D and 2D/3D, as the crossings of the
        latitude grid in 2D/3D results in some extra points of the path which
        requieres an interpolation in pressure, not performed for 1D.
        If lmax is set to e.g. 1e3, the difference is very small (probably
        only rounding errors), which should be expected. 

        So the consistency between 1D, 2D and 3D seems to be OK. At least
        for geometric paths.
        
        * src/m_atmosphere.cc (AtmFieldsCalcExpand1D): Created this function
        to make "2D or 3D view" of a 1D atmsophere.

        * src/m_rte.cc (RteEmissionStd): The order of some lines were wrong. 
        Fixed that bug for 2D and 3D, and cleaned the code slightly.

2003-01-09  Oliver Lemke  <olemke@uni-bremen.de>

        * arts-1-1-369
        
        * src/xml_io.cc: Moved xml class declarations to xml_io_private.h.

        Reimplemented String and SpeciesTag reading routines to improve error
        and whitespace handling.

        * src/xml_io_private.h: Moved xml class declarations here.

2003-01-09  Claudia Emde  <claudia@sat.physik.uni-bremen.de>

        * arts-1-1-368  
        
        * src/m_scatrte.cc (i_fieldUpdate3D): Added this function to calculte
        3D radiative transfer inside the cloudbox. To test this function
        and also the 3D ppath functions I have to create 3D test scenarions.

        (i_fieldIterate): Included 3D case.

        * src/methods.cc: Added (i_fieldUpdate3D).
        
2003-01-09  Oliver Lemke  <olemke@uni-bremen.de>

        * arts-1-1-367

        * src/xml_io.cc: Improved parsing of String and SpeciesTag.

        IMPORTANT: Strings in ARTS XML file !!!MUST!!! be put inside quotes
        "". I think nobody wrote strings to xml files before but if so, you
        have to edit your xml files and add the quotes manually.

2003-01-08  Patrick Eriksson  <Patrick.Eriksson@rss.chalmers.se>

        * arts-1-1-366

        * src/m_ppath.cc (ppathCalc): This is now only a getaway function to
        ppath_calc, with agenda_verb = 0. For internal functions ppath_calc
        shall be called instead of this function.

        * src/m_rte.cc (RteCalc): Introduced a variable to get a more nice
        verbosity of the different agendas called.

        * src/ppath.cc (ppath_calc): Copied everything from old ppathCalc to 
        this function and added a new input argument to control verbosity of
        ppath_step_agenda.

2003-01-08  Oliver Lemke  <olemke@uni-bremen.de>

        * arts-1-1-365

        * src/xml_io.cc, src/xml_io_private.h: Added reading/writing routines
        for Ppath, GridPos and ArrayOfGridPos.

2003-01-07  Patrick Eriksson  <Patrick.Eriksson@rss.chalmers.se>

        * arts-1-1-364

        * src/special_interp.h: Fixed typo.

        * src/m_rte.cc (RteEmissionStd): Modified the code added by Claudia
        to be a bit more efficient and to make use of some special 
        interpolation functions. 

        PLEASE NOTE: As it is the log of the pressure that is assumed vary
        linearly with altitude, the ordinary interpolation functions can't
        be used directly. The function *itw2p* is a special function 
        for interpolating pressure, but this should be done in very few
        places.

        Untabified the file.

2003-01-07  Claudia Emde  <claudia@sat.physik.uni-bremen.de>

        * arts-1-1-363

        * src/m_optproperties.cc (ext_matInit), (abs_vecInit): Modified
        these functions. The scattering calculations are monochromatic. So
        the frequency dimension of these two variables has to be 1. 
        *f_index* can be used for determine, whether the initialisaition is
        done in a clearsky calculation or in a cloudbox calculation. 
        If f_index > 0 it is done in a cloudbox calculation.

        * src/m_rte.cc (RteEmissionStd): Rewritten this function. Now 
        absorption is calculated for all ppath points using 
        *scalar_gas_abs_agenda*. 

        * src/m_scatrte.cc (i_fieldUpdate1D): Executing the finished
        *scalar_gas_absorption_agenda* required some modifications and 
        additional variables.

        * src/methods.cc: Modified interfaces of (RteEmissionStd), 
        (i_fieldUpdate1D),  (ext_matInit) and (abs_vecInit).

        * src/rte.cc (rte_clearsky_with_emission): Removed. The general
        RT function (rte_step) can handle this special case and is 
        used everywhere, now.

        * src/test_linalg.cc: Removed unused variables.

2003-01-07  Patrick Eriksson  <Patrick.Eriksson@rss.chalmers.se>

        * arts-1-1-362

        * src/ppath.cc (do_gridcell_3d): A start point, with a radius equal
        to the ground radius, could result in an intersection with the ground
        even if the zenith angle is upwards. Fixed (hopefully).

        * src/m_ppath.cc (sensor_posAddGeoidWGS84): Changed the code for 2D
        and 3D as the old version did not work when the latitudes are not
        sorted. 

        * src/m_basic_types.cc 
        (VectorSetElement): Created this WSM.
        (MatrixSetElement): Created this WSM.
        (MatrixSetTakingSizeFromMatrix): Created this WSM.
        
2003-01-07  Oliver Lemke  <olemke@uni-bremen.de>

        * arts-1-1-361

        * src/matpackI.{h,cc}: Commented out assignment operators for Vector
        with parameter type Array<Numeric>. If we want to split matpack from
        arts it should not depend on Array which belongs to arts, not to
        matpack.

        * src/parser.cc (parse_numvector): Use loop to copy Array<Numeric> to
        Vector because assignment operator is not longer present.

        * src/test_matpack.cc: Commented out test16 (Test for Array<Numeric>
        -> Vector assignment).

2003-01-07  Stefan Buehler  <sbuehler@uni-bremen.de>

        * arts-1-1-360

        * doc/index.html.in: Fixed link to pdf version of Uguide.

        * doc/uguide/development.tex: Updated documentation about using
        assertions with gdb.

        * src/arts.h: Updated GNU license information.

2003-01-06  Patrick Eriksson  <Patrick.Eriksson@rss.chalmers.se>

        * arts-1-1-359
        
        * It should now be possible to produce clear sky 3D spectra. However,
        no practical tests performed.
        
        * src/rte.cc (ground_specular_los): 3D activated, but ground tilt
        is not yet included. I wrote some codeto consider the ground tilt
        but I will look for a better and general solution, and the code is not
        active.

        * src/m_rte.cc (RteCalc): Included check that the atmosphere is 3D
        when a 2D antenna is selected.

2003-01-06  Oliver Lemke  <olemke@uni-bremen.de>

        * arts-1-1-358

        * src/array.h: Define all Arrays and ArraysOfArray here.
        NOTE: Only the typedefs are located here. If you want to use e.g.
        ArrayOfTensor3, it is not enough to include array.h, you also have to
        include matpackIII.h.

        * src/matpack*.h: Removed typedefs for Arrays.

        * src/arts.h: Removed typedefs for ArrayOfIndex and ArrayOfNumeric.

2003-01-05  Patrick Eriksson  <Patrick.Eriksson@rss.chalmers.se>

        * arts-1-1-357

        * src/ppath.cc: Several things fixed to make path along the end 
        longitudes to work. Longitudes can now be in the range [-360,360], as
        described in AUG.

        I have tested a number of waht should be nasty cases and everything 
        worked. It seems that 3D geometrical paths are now working.

2003-01-03  Patrick Eriksson  <Patrick.Eriksson@rss.chalmers.se>

        * arts-1-1-356

        * Paths above the pole are now basically working, except along lon
        +-180 degrees. Numerical inaccuracy is especially tricky around the
        poles (with the equations I have derived at least) and I don't
        think I will manage to solve all problems. Right now I consider
        to take back my decision to restrict lon_grid to [-180,180], which
        would be better for the usage and paths exectly at the border of
        the atmosphere could be avoided. But I want to document the present
        solution.

        * src/ppath.cc: Fixes in several functions to make things work for
        paths passing the poles. The fixes are needed as the longitude is
        undefined at the poles and as the azimuth angle is defined in
        other way at the poles.

        * src/m_ppath.cc (ppathCalc): Some fixes for the same reasons as above.

2003-01-01  Patrick Eriksson  <Patrick.Eriksson@rss.chalmers.se>

        * arts-1-1-355

        * 3D geometrical paths are not finished, but it is not too far away.
        Path passing exactly above the poles are not OK, but no other known
        bugs. Path passing longitude +-180 are working.

        Definition of accepted longitudes is changed. Longitudes must now
        be inside [-180,180]. To cover the whole globe, lowest and highest
        longitude must be -180 and 180, respectively. (AUG not updated on
        this point).

        I have done quite some cleaning, both for 2D and 3D. So 2D must be
        checked carefully later. My plan now is to finish all dimensions,
        with and without refraction, and make a careful, parallell check
        of all cases later.
        
        * src/ppath.cc: Fixed uncountable bugs, such as dividing with a
        trigonometric function becoming 0, lat index for longituide grids and
        pure logical mistakes. And ...

        * src/interpolation.h: Added declaration of functions for "red
        interpolation". The functions existed in interpolation.cc, but where
        not visible to the outside world. 

        (Stefan, any reason for this that I have missed? I hope not, because
        I use now the red interpolation in many places.)

        * src/interpolation.cc (gridpos): Created a second version where a
        GridPos is created, instead of ArrayOfGridPos.

2002-12-30  Patrick Eriksson  <Patrick.Eriksson@rss.chalmers.se>

        * arts-1-1-354

        * src/ppath.cc: Code for 3D geometrical path steps compiles but 
        so far no tests, beside for do_gridcell_3d and sub-functions.
        A number of new functions:
           poslos2cart
           cart2poslos
           gridcell_crossing_3d
           rsurf_at_latlon
           psurface_slope_3d
           psurface_crossing_3d
           ppath_start_3d
           ppath_end_3d
        
2002-12-25  Patrick Eriksson  <Patrick.Eriksson@rss.chalmers.se>

        * arts-1-1-353

        * src/ppath.cc (do_gridcell_3d): Started on this function. So far 
        empty.
        
        (sph2cart): Created.

        * src/methods.cc: Created WSM DoGridCell3D. 

        * src/ppath.cc (psurface_slope_2d): Created a second version of this 
        function, not taking vectors as input.

        * src/rte.cc (ground_specular_los): Changed call of do_gridcell_2d.

        * src/m_ppath.cc (DoGridcell2D): Changed call of do_gridcell_2d.

        * src/ppath.cc (ppath_start_2d) - (do_gridcell_2d): Removed c2 and
        c4 as output of ppath_start_2d, and the transfer of these variables
        down to do_gridcell_2d, where the variables now are calculated 
        internally.

2002-12-21  Patrick Eriksson  <Patrick.Eriksson@rss.chalmers.se>

        * arts-1-1-352

        * src/m_ppath.cc (DoGridcell2D): Added this WSM. This WSM should 
        normally not be used. It is intended for test of the function 
        do_gridcell_2d, and to make figures for AUG. This function can be
        called from Atmlab. 

2002-12-21  Oliver Lemke  <olemke@uni-bremen.de>

        * arts-1-1-351

        * ami: Removed.

        * configure.in: Removed ami Makefiles.

        * Makefile.am: Removed ami directory.

        * src/m_optproperties.cc: Include cmath instead of math.h.

2002-12-20  Patrick Eriksson  <Patrick.Eriksson@rss.chalmers.se>

        * arts-1-1-350

        * src/m_optproperties.cc: Added #include <math.h> because acos was 
        not found.

        * src/ppath.cc (geompath_from_r1_to_r2): Improved a comment

2002-12-20  Stefan Buehler  <sbuehler@uni-bremen.de>

        * arts-1-1-349

        Two big changes in this version:

        1. A first version of the gas absorption lookup table is ready and
        tested. I implemented a field variable for gas absorption, and a
        method to calculate absorption for all points in the field, in
        order to be able to do some testing. It is as yet unclear whether
        this could be useful also in other places.

        2. Changed copy semantics for Array, Vector, and Tensors. Now the
        output argument is resized automatically. This was necessary to
        ensure that structures containing these objects are copied
        correctly. User code in ARTS is not affected, you should continue
        to use these data types exactly as you have done so far. In
        particular, views still have to match exactly, of course.

        Detailed changes:
        
        * src/gas_abs_lookup.cc: Some bug fixes and some cosmetic changes.

        * src/workspace.cc (define_wsv_data): Added abs_scalar_gas_field.
        It contains the scalar gas absorption for all species as a function of
        f_grid, p_grid, lat_grid, and lon_grid. 
        This is mainly for testing and plotting gas absorption. For RT
        calculations, gas absorption is calculated or extracted locally,
        therefore there is no need to store a global field. But this variable
        is handy for easy plotting of absorption vs. pressure, for example.

        * src/m_absorption.cc (abs_scalar_gas_fieldCalc): Added. 
        Calculates scalar gas absorption for all points in the atmosphere.
        An agenda is used to obtain absorption for one point at a time.
        
        * src/methods.cc (define_md_data_raw): Added abs_scalar_gas_fieldCalc.

        * src/agendas.cc (define_agenda_data): Added input parameters and
        documentation to scalar_gas_absorption_agenda.

        * src/check_input.cc (chk_atm_field): Added a version of this
        function for vmr_field (which is a Tensor4, not a Tensor3 like the
        other fields).

        * src/check_input.h: Updated.

        * src/array.h: Changed copy semantics. Operator= now adjusts dimension
        of target automatically.

        * src/matpackI.cc: Changed copy semantics for Vector and Matrix
        (not for VectorView and MatrixView!). Operator= now adjusts dimension
        of target automatically.

        * src/matpackIII.cc: Dito for Tensor3.

        * src/matpackIV.cc: Dito for Tensor4.

        * src/matpackV.cc: Dito for Tensor5.

        * src/matpackVI.cc: Dito for Tensor6.

        * src/matpackVII.cc: Dito for Tensor7.

        * src/matpackI.h: Only changes in comments.

        * src/test_matpack.cc (test35): A test for the new copy
        semantics. Only tested for Vector! Hope it works also for the
        higher order tensors...

        * doc/uguide/matrix_vector.tex: Updated text about copy
        semantics. 

2002-12-19  Nikolay Koulev  <nkoulev@uni-bremen.de>

        * arts-1-1-348

        * src/test_complex.cc: Minor changes.
        
2002-12-20  Oliver Lemke  <olemke@uni-bremen.de>

        * arts-1-1-347

        * src/Makefile.am: Removed explicit definition of arts_DEPENDENCIES
        and redefinition of target arts. Seems to work exactly the same way if
        the definitions are omitted.

2002-12-19  Claudia Emde  <claudia@sat.physik.uni-bremen.de>

        * arts-1-1-346

        * src/agendas.cc (opt_prop_gas_agenda): Removed *f_index* from input
        variables list.
        
        * src/m_cloudbox.cc (CloudboxGetIncoming): Added the 3D version. 
                        
        * src/m_ppath.cc (ppathCalc): Inserted an assertion for number of 
        points in ppath.

        * src/ppath.cc: Bug fixed according to Patrick's suggestion. 
        Assure that 'n = Index( ceil( fabs( l2 - l1 ) / lmax ) )' does not
        become 0.

        * src/m_scatrte.cc: Minor modifications and included output messages.
        
        * src/methods.cc: Removed *abs_vec* from input list to function 
        *abs_vecInit*.

2002-12-19  Oliver Lemke  <olemke@uni-bremen.de>

        * arts-1-1-345

        * src/complex.{h,cc}: Removed Complex class implementation and
        replaced it with a typedef complex<Numeric> Complex. If there is any
        need to implement functionality for complex numbers not covered by the
        STL class, add them here.

        * src/test_complex.cc: Adapted for new complex class.

2002-12-19  Sreerekha T.R.  <rekha@uni-bremen.de>
        
        * arts-1-1-344
        
        * src/m_optproperties.cc: The method *amp_matCalc* is modified to
        include the case of macroscopically symmetric and isotropic
        particles.  Removed the argument *stokes_dim* from
        the methods calculating scattering properties. Modified
        accordingly when they are called in m_scatrte.cc.  Also did some
        cosmetic changes so that they look better in doxygen.  

        * src/methods.cc: Removed the input stokes_dim from the methods
        calculating scattering properties. 
        
        * src/scattproperties.cc: Cosmetic changes so that they look
        better in doxygen. 
        
2002-12-19  Oliver Lemke  <olemke@uni-bremen.de>

        * arts-1-1-343

        * src/xml_io.cc: Bug fix in reading of SpeciesTag. Did not work when
        opening tag was not followed by whitespace.

2002-12-19  Stefan Buehler  <sbuehler@uni-bremen.de>

        * src/absorption.cc (SpeciesTag): Added white space removal to
        constructor from string for SpeciesTag.

        * src/m_absorption.cc (gas_speciesSet): Moved white space removal
        to SpeciesTag constuctor.

        * src/xml_io.cc: Work in progress (together with Oliver).

2002-12-18  Oliver Lemke  <olemke@uni-bremen.de>

        * arts-1-1-342

        * src/xml_io.cc: Added GasAbsLookup.gal.nonlinear_species to reading
        and writing routine for GasAbsLookup table.

        * src/Makefile.am: Added partition_function_data.cc to
        test_xml_SOURCES.

2002-12-18  Oliver Lemke  <olemke@uni-bremen.de>

        * arts-1-1-341

        * src/xml_io.cc: Implemented reading/writing of SpeciesTag.

        * src/Makefile.am: Added absorption.* and species_data.cc to
        test_xml_SOURCES.

2002-12-17  Nikolay Koulev  <nkoulev@uni-bremen.de>

        * arts-1-1-340

        * src/complex.h: Added functions for absolute value and phase of
        complex numbers.
        
        * src/test_complex.cc: Minor changes.
        
2002-12-17  Oliver Lemke  <olemke@uni-bremen.de>

        * arts-1-1-339

        * src/Makefile.am: Merged changes from arts-1-0 branch.
        Reintroduced BUILT_SOURCES to fix bug discovered by Christian,
        removed special targets and explicit dependencies for make_auto*.

        * src/logic.cc: Include algorithm for max function.
        Include cmath instead of math.h

2002-12-17  Stefan Buehler  <sbuehler@uni-bremen.de>

        * arts-1-1-338

        * src/complex.h: Untabified. (I was the bad guy.)

        * src/complex.cc: Untabified. (I was the bad guy.)

2002-12-16  Nikolay Koulev  <nkoulev@uni-bremen.de>

        * arts-1-1-337

        * src/complex.h: Implemented basic arithmetic operations with
        complex numbers. But absolute value and phase still to be added.
        
        * src/test_complex.cc: Added some new test examples on complex numbers.
        
2002-12-16  Mattias Ekstr�m  <ekstrom@rss.chalmers.se>

        * arts-1-1-336

        * configure.in: Just a demonstration commit to show Mattias how CVS
        works.

2002-12-16 Stefan Buehler <sbuehler@uni-bremen.de>

        * arts-1-1-335

        * src/complex.h: Complex numbers for ARTS. This is a quick
        implementation of complex numbers. I think most of the basic
        features are there. The operators += and + are already implemented
        as examples for the other operators.

        Have I forgotten anything important? Documentation for AUG must
        still be written!
        
        * src/complex.cc: Source file for complex numbers. At the moment
        only the output operator is here, all member function
        implementations are in the class declaration in complex.h.

        * src/test_complex.cc: Test complex numbers.

        * src/Makefile.am: Added new target test_complex.

2002-12-12  Stefan Buehler  <sbuehler@uni-bremen.de>

        * arts-1-1-334

        * src/gas_abs_lookup.cc (Extract): Cosmetic changes to Doxygen header.

2002-12-12  Stefan Buehler  <sbuehler@uni-bremen.de>

        * arts-1-1-333

        * I think all methods for using gas lookup tables are there now,
        although not all cases are implemented inside the methods. NOTHING
        IS TESTED YET, THOUGH.

        * src/workspace.cc (define_wsv_data): Updated documentation of:
        abs_scalar_gas,
        Added WSV gas_abs_lookup_is_adapted, a flag indicating that the
        lookup table has been adapted to the current calculation.
        
        * src/methods.cc (define_md_data_raw): Added the new methods:
        abs_scalar_gasExtractFromLookup,
        gas_abs_lookupAdapt.

        Updated the methods:
        ext_matInit,
        ext_matAddGas,
        abs_vecInit,
        abs_vecAddGas. 
        Removed unnecessary arguments and cleaned up the documentation. 

        * src/m_scatrte.cc: The variable abs_scalar_gas is a Matrix, not a
        Vector. The dimensions are [f_grid,gas_species]. We are not taking
        the sum of the gas absorption for the different species here, the
        sum is taken inside ext_matAddGas and abs_vecAddGas.

        The helper variable scalar_gas_array, which is used in some
        places, is now also a matrix, because it has to store the
        absorption for the different gas species separately.

        * src/m_optproperties.cc: Removed unnecessary #includes.
        (ext_matInit): Added.
        (ext_matAddGas): Rewritten.
        (abs_vecInit): Added.
        (abs_vecAddGas): Rewritten.

        Note that in all these methods there is no need for a distinction
        between the cases inside and outside the scattering box. Only the
        leading dimensions of the arguments are different. The methods are
        now quite simple.

        * src/m_absorption.cc (gas_abs_lookupAdapt): Added.
        (abs_scalar_gasExtractFromLookup): Added.

        * src/gas_abs_lookup.h: Updated.

        * src/gas_abs_lookup.cc: Mostly cosmetic changes here.

2002-12-11  Stefan Buehler  <sbuehler@uni-bremen.de>

        * arts-1-1-332

        * src/interpolation.cc: Allow a little bit of extrapolation. To be
        precise, we require that the new grid is no more than half a grid
        spacing away on either side of the old grid. Extrapolation to such
        a short distance should be safe. The main reason for this
        modification is that it solves the numerical problems that used to
        occur if the new grid was practically the same as the old
        grid. (In these cases the edge values of the new grid numerically
        sometimes happened to fall just outside the old grid.)

        This has the important consequence, that fractional distances can
        be <0 and >1 for points outside the original grid range. The new
        condition is that -.5 <= fd <= 1.5. The sum of all weights still
        is one, of course.

        (All functions:) Modified the assertion that compared the sum of
        all weights to 1 to use the new "fuzzy" comparison function (see
        below). This was necessary because numerical noise led to spurious
        failures of the original sharp assertion statement.
        
        * src/logic.cc (is_same_within_epsilon): Added. This function
        implements comparison of two numbers as recommended by
        Oliver. Both the two numbers and the comparison epsilon have to be
        specified.

        I recommend to always use this function for this task in future,
        so that we have some consistency. It is applicable in cases where
        there is no physical justification to require a certain absolute
        agreement. Instead, it checks that the two numbers agree to a
        certain number of digits.

        * src/logic.h: Updated.

        * src/test_interpolation.cc (test06): Added this test for the new
        extrapolation feature.

        * src/Makefile.am: Added make_vector to sources for
        test_interpolation. 

2002-12-10  Claudia Emde  <claudia@sat.physik.uni-bremen.de>

        * arts-1-1-331

        * src/m_atmosphere.cc (AtmFieldsCalc): Small modifications. This 
        method is now tested and is working.

        * src/m_io.cc (AtmFieldsFromAscii2Xml): Included this method. It 
        converts atmospheric data from ascii to xml and writes the 
        atmospheric fields (temperature, altitude, vmr) as gridded fields,
        which can be read using (AtmRawRead).

        * src/methods.cc: Included (AtmFieldsFromAscii2Xml).

2002-12-06  Stefan Buehler  <sbuehler@uni-bremen.de>

        * arts-1-1-330

        * src/methods.cc (define_md_data_raw): Fixed typo bug in
        documentation of ppath_stepGeometric (removed backslash).
        (define_md_data_raw): Added method gas_speciesSet. This is
        basically the same method that used to be called tgsDefine in
        ARTS-1-0, except for the new feature of specifying "nl" instead of
        the isotope.

        * src/workspace.cc (define_wsv_data): Fixed documentation of
        gas_species. 

        * src/old_absorption.cc: Moved define_species_map to absorption.cc.

        * src/absorption.cc (define_species_map): Moved over this function
        from old_absorption.cc

        * src/absorption.h: Updated.

        * src/m_abs.cc: Removed tgsDefine.

        * src/m_absorption.cc (gas_speciesSet): Added (from old tgsDefine).

        * src/main.cc: Initialize species_data and species_map.

        * doc/examples/absorption_lookup_example.arts.in: Added
        gas_speciesSet. 

        * src/mystring.h: Added a find function. But then I thought better
        of it and decided that for string we should continue to use
        string.find(). So, the new function is commented out.

2002-12-06  Stefan Buehler  <sbuehler@uni-bremen.de>

        * arts-1-1-329

        *.cc, *.c, *.h: Untabified everything.

2002-12-03  Patrick Eriksson  <Patrick.Eriksson@rss.chalmers.se>

        * arts-1-1-328

        * src/ppath.cc: There are now fewer WSM, only ppath_stepGeometric
        and ppath_stepRefractionEuler. The different options are now selected
        by keywords. I found this easier than having a lot of WSMs. Especially
        as I decided to add another option for the refraction method. There is
        now an option for how the refractive index shall be determined, always
        calculated from scratch or interpolated from grid cell boundaries.
        See the on-line help for info.

        The special 1D option is not active for the moment. I have done this
        now in several ways and the results is always the same. If the tangent
        point is forced to be (very) exact, then the results do not converge
        when decreasing the ray tracing length. On the other hand, if the
        ray tracing is free to find its own tangent altitude, the results 
        converge (and a very close to perfect tangent altitude is found). It 
        must be the case that rounding errors balance each other in the second
        case. 

2002-12-02  Stefan Buehler  <sbuehler@uni-bremen.de>

        * arts-1-1-327

        * Fixed bug reported by Patrick. It took a while to find this. The
        problem was that agendas were not copied correctly. Tracked the
        problem down to the copying of MRecords, which are a part of
        Agenda. The problem is that STRUCTURES CONTAINING ARRAYS ALWAYS
        MUST DEFINE THE ASSIGNMENT OPERATOR. Otherwise copying the
        structure will trigger an assertion unless all arrays have the
        same size in original and target structure. That is of course not
        what we want, normally.

        * src/agenda_class.cc: (MRecord::operator=): Added. This is the
        bug fix.
        Also added output operator for MRecord and Agenda for
        debugging purposes. The implementation resides in .print() member
        functions for both classes.
        (Agenda::print): Added.
        (MRecord::print): Added.  Output operators and print functions are
        not tested!

        * src/agenda_class.h: Updated.

        * src/token.cc (operator<<): Fixed output format to look like the
        tokens are given in the controlfile. (Not tested, needed only for
        debugging.)

        * src/continua.cc (MPM93_N2_continuum): Commented out one line to
        remove unused variable warning.
        (PWR98H2OAbsModel): Commented out one line to remove unused
        variable warning.

2002-12-02  Patrick Eriksson  <Patrick.Eriksson@rss.chalmers.se>

        * arts-1-1-326

        * src/ppath.cc: Things have been moved around a bit. A pure Euler
        approach has been implemented for 1D (used in Euler/EulerWithLmax).
        The 1D and 2D versions give basically identical results. The results
        converge when making the step lengtn smaller.

        The special 1D version that gives a symmetric path around tangent 
        points is moved to be part of a new WSM ppath_stepRefraction1D. 
        The results for this version do not converge when making the ray 
        tracing step length shorter (and I can't find out why this is the 
        case).

        * src/m_atmosphere.cc (r_geoidSpherical): New WSM.

2002-12-02  Oliver Lemke  <olemke@uni-bremen.de>

        * arts-1-1-325

        * src/array.h (find_all): pos has to be a reference.

        * src/absorption.cc (SpeciesTag::SpeciesTag): Use Stefan's
        find_first instead of the STL version.

        * src/xml_io.cc (xml_read_header_from_stream): Slighty improved
        error message for invalid xml header.

2002-12-01  Patrick Eriksson  <Patrick.Eriksson@rss.chalmers.se>

        * arts-1-1-324

        * src/ppath.cc (ppath_step_refr_2d): Appears to be ready. In contrast
        to the 1D function, the results converge when making the ray tracing
        step length smaller. However, the algorithms differ slightly and I
        will copy the 2D algorithm to 1D to get 1D versions.

        Fixed several bugs in the functions of the file.

2002-11-29  Stefan Buehler  <sbuehler@uni-bremen.de>

        * arts-1-1-323

        * src/agenda_class.cc Untabified.
        (execute): Implemented reporting level 4
        to override silent agenda execution.

        * src/main.cc Untabified.
        (set_reporting_level): Implemented reporting level 4
        to override silent agenda execution.

        * src/check_input.h: Untabified.
        (chk_size): Added.
        (chk_contains): Added. Checks if an array contains a certain
        value. Has to be here in the .h file, because it is a template
        function that works for any kind of array.

        * src/check_input.cc: Untabified.
        (chk_size): Added these functions for Vector up to Tensor7. They
        are similar to the is_size functions, but throw runtime errors
        with appropriate messages if the size does not match. Could be
        convenient for others as well, please use.

        * src/workspace.cc: Untabified.
        (define_wsv_data): Moved variable
        abs_scalar_gas to the right place and added documentation. 

        * src/methods.cc: Untabified.
        (define_md_data_raw): Put in stub for gas_abs_lookupAdapt method
        (still commented out).

        * src/parser.cc: Untabified. Removed unused variables. (Detected
        thanks to the great new warnings of Oliver.)

        * src/old_absorption.cc: Moved some stuff to absorption.cc.

        * src/absorption.cc: Untabified. Added some Functions for
        SpeciesTag. (Moved over from old_absorption.cc and updated.)

        * src/absorption.h: Ditto.

        * src/gas_abs_lookup.h: Updated.

        * src/gas_abs_lookup.cc (find_new_grid_in_old_grid): Added.
        (Adapt): Worked mainly on this function. It is now more or less
        complete, but not tested.

        * src/array.h: Untabified.
        (find_first): Added.
        (find_all): Added.

2002-11-29  Claudia Emde  <claudia@sat.physik.uni-bremen.de>

        * arts-1-1-322
        
        * src/m_atmosphere.cc: 
        (AtmRawRead): Added this method to read atmospheric scenarios.
        (AtmFieldsCalc): Added. Interpolates atmospheric fields on the
        atmospheric grids for the RT calculation.

        * src/methods.cc: Added methods above.

        * src/workspace.cc: Included WSVs for methods above:
                t_field_raw,
                z_field_raw,
                vmr_field_raw,
                vmr_field
        
        * src/m_cloudbox.cc: Removed some unused variables.
        
2002-11-29  Patrick Eriksson  <Patrick.Eriksson@rss.chalmers.se>

        * arts-1-1-321

        * src/ppath.cc (ppath_step_refr_2d): Finished this function.

        * src/ppath.cc (raytrace_2d_linear_euler): Created this function.
        Basically works but there are bugs to be removed.

        * src/ppath.cc (psurface_crossing_2d): Fixed a bug for cases with
        presssure surfaces without any slope.

2002-11-28  Patrick Eriksson  <Patrick.Eriksson@rss.chalmers.se>

        * arts-1-1-320

        * src/ppath.cc (ppath_step_geom_2d): Moved parts of this function to
        seperate functions, to be used by the corresponding functions for
        refraction.

2002-11-28  Oliver Lemke  <olemke@uni-bremen.de>

        * arts-1-1-319

        * ami/xml/xmlReadTensor*.m: Bug fix in indexing. The indexing is now
        the same as in arts.
        Example:  t = xmlLoad('tensor5.xml');   % Read tensor5
                  t(1,1,1,1,:)         % Print first row of tensor
                  t(:,1,1,1,1)         % Print first element of each shelf

        Array are treat as cells:
                  a = xmlLoad('arrmatrix.xml');   % Read array of matrix
                  a{1}(1,1)         % Print first element of first matrix
                  a{2}{1,:)         % Print first row of second matrix
                  a{2}              % Print second matrix
        
        * ami/xml/xmlReadTag.m: Added. Splitted tag parsing routine
        from xmlLoad.

        * ami/xml/xmlLoad.m: Moved parsing of tags to xmlReadTag.m.

        * ami/xml/xmlReadArray.m: Simplified by using xmlReadTag.

        * ami/xml/xmlReadGasAbsLookup.m: Added.

2002-11-28  Oliver Lemke  <olemke@uni-bremen.de>

        * arts-1-1-318

        * configure.in: Added -Wconversion flag to warnings.

        Don't use -Wno-unused but -Wno-unused-parameter instead. Because
        we don't want to be harassed with unused function parameters but
        with unused variable we do. (gcc3 only)

        Changed the behaviour for the warning flags: By default -W -Wall
        -Wconversion are active. All warnings produced with this settings
        SHOULD BE FIXED!!!
        
        In certain cases it could be useful to turn on even more warnings by
        using --enable-more-warnings. But be warned, with this setting gcc
        becomes really rebellious. :-)

        Pass --enable-more-warnings to autogen.sh or configure. 
        You may get a lot of false alarms depending on your compiler version.

        -enable-more-warnings activates -Wshadow -Wunreachable-code (and more
        to come)

        * src/ppath.cc (ppath_start_stepping): np was defined twice as local
        variable. Second declaration shadows first one. Number of pressure
        levels does not change -> removed second variable.

        * src/parser.cc (read_integer) and (read_numeric): Ony dummy
        variable shadows another.  Renamed second dummy variable to
        chtmp to make the code easier to understand.
        (parse_method): Same with iterator i.

        * src/mystring.h (my_basic_string): Renamed parameter npos to numpos
        to avoid shadowing of member attribute of same name.

        * src/make_wsv_pointers_cc.cc (main): Renamed parameter wsv_pointers
        in function define_wsv_pointers to ref_wsv_pointers to avoid
        shadowing of global wsv_pointers variable.

        * src/m_physics.cc (MatrixToTbByRJ): Removed unnecessary re-definition
        of irep, ii and icol from else block.

        * src/matpackI.h,cc (Range::Range): Renamed joker param in
        constructors to j to avoid shadowing of global joker object.

        * src/agenda_class.{h,cc} (Agenda::set_name): Renamed parameter name
        to nname to avoid shadowing of member function Agenda::name().

2002-11-28  Claudia Emde  <claudia@sat.physik.uni-bremen.de>

        * arts-1-1-317
        
        * src/logic.{cc,h} (is_singular), (is_diagonal): Implemented these 
        functions to check whether a matrix is singular or diagonal. 

        * src/agendas.cc (scat_mono_agenda): Modified input and 
        documentation. The method *amp_matCalc* has to be part of the 
        agenda as *amp_mat* stores the amplitude matrix for one
        frequency. Before we calculated amp_mat outside the agenda but this 
        can not work for more frequencies.

        * src/rte.cc (rte_step): Used is_diagonal.

        * src/scatrte.cc (ScatteringMain): Included a switch: If the frequency
        grid holds only 2 frequencys the radiation field inside the 
        cloudbox is only calculated for the first frequency.
        (i_fieldUpdate1D):
        Used is_singular.
        Executing all agendas silently now.

        * src/m_ppath.cc (ppathCalc): Ppath_step angenda is here executed
        silently now (exept when it is called for the first time).

        * src/m_cloudbox.cc: Removed some "couts" which were only used
        for debugging.

        * src/m_optproperties.cc (ext_matAddGas), (abs_vecAddGas): Minor
        modifications.
        
2002-11-28  Sreerekha T.R.  <rekha@uni-bremen.de>

        * arts-1-1-316
        
        * src/m_scatrte.cc (i_fieldUpdate1D_PlaneParallel): This method is
        added.  The method is similar to i_fieldUpdate1D except that it
        takes that inside the cloudbox the atmosphere is
        planeparallel. 

        * src/methods.cc : Added the above method.  

2002-11-27  Patrick Eriksson  <Patrick.Eriksson@rss.chalmers.se>

        * arts-1-1-315

        * src/ppath.cc: No functionality changed, despite some small steps
        forward for 2D refraction, but the code has been restructured to
        make the code more compact and simplify the implementation of other
        ray tracing schemes.

2002-11-27  Claudia Emde  <claudia@sat.physik.uni-bremen.de>

        * arts-1-1-314
        
        * src/lin_alg.cc (norm_inf): Fixed a bug due to missing
        initialization.

        * src/m_cloudbox.cc (scat_iPut): Bug fixed.
                
        * src/m_scatrte.cc (i_fieldUpdate1D): Minor changes.

2002-11-27  Oliver Lemke  <olemke@uni-bremen.de>

        * arts-1-1-313

        * src/make_auto_wsv_groups_h.cc (main): Don't put comma at end of
        enumerator list in auto_wsv_groups.h.

        * src/methods.cc: Commented out UpdatePlaneParallel.
        @rekha: Please have a look.

2002-11-26  Sreerekha T.R.  <rekha@uni-bremen.de>
        
        * arts-1-1-312
        
        * src/scatproperties.cc: Fixed the warnings due to uninitialised
        varibles.  

2002-11-26  Patrick Eriksson  <Patrick.Eriksson@rss.chalmers.se>

        * arts-1-1-311

        * src/ppath.cc: A short report on quite a lot of work.
        I have been working on a basic function for 1D ppath steps with 
        refraction. I was not happy with the result for the first algorith so
        I tried several improvements. Now I understand that there are inherent
        problems and I finally selected an algorithm that can be extended to
        2D and 3D. This would help to check the implementation for the
        different dimensions. The WSM is now called ppath_stepRefractionEuler
        as the method used is basically an Euler solution of the differential
        problem.

        I will write this down sometime in AUG, but I take it shortly here.
        Unfortunately, the path calculations do not converge to some result
        when making the ray tracing steps smaller. It seems to converge when
        going down to step length of maybe 100 m, but then the results start
        to move away again. I can't find any bugs in my calculations (the
        result when setting the refractive index to 1 is perfect). It must be
        the case that when making the ray tracing step very small, rounding
        errors start to be noticed, making the final result to slide away.

        Several improvements are possible, but I will take that later. I will
        now implement the same approach for 2D, as a reference case for later,
        more elaborated, schemes.

2002-11-26  Claudia Emde  <claudia@sat.physik.uni-bremen.de>

        * arts-1-1-310
        
        * src/methods.cc (i_fieldUpdate1D) and (i_fieldIterate): Included 
        *abs_scalar_gas* in interface.
        
        * src/rte.cc (rte_step): Bug fixed. Assertion in check, if matrix is 
        diagonal had to be outside the loop.
        
        * src/m_scatrte.cc (i_fieldUpdate1D): Modified.
        
        * src/agendas.cc (scalar_gas_absorption_agenda): Removed f_index 
        from input list for testing purposes.
                
        * src/m_optproperties.cc (abs_vecAddGas): Bug fixed.

        Now scattering calculations can be performed again for an example 
        absorption, which can be defined in the control file by setting
        the variable *abs_scalar_gas* in scalar_gas_absorption_agenda.
        
2002-11-26  Oliver Lemke  <olemke@uni-bremen.de>

        * arts-1-1-309
        
        * src/getopt.c: Moved comment after include to separate line.

        * src/Makefile.am: Added constants.cc to test_interpolation_SOURCES.

        * configure.in: Use a more sophisticated way to determine whether we
        are using a GNU compiler.

2002-11-25  Oliver Lemke  <olemke@uni-bremen.de>

        * arts-1-1-308

        * src/gas_abs_lookup.h (class GasAbsLookup): Don't use
        qualified names in member function definition.

        * src/matpack*.{cc,h}: Reverted to version 1-1-303. "using" statement
        in class definition is not supported in gcc < 3.x. :-(
        Moved back iterator stuff into header after reverting.
        Moved all operators returning Numeric elements also to header files
        for performance reasons.

        * configure.in: Add "-ansi -pedantic" to compiler flags when gcc is
        in charge.

2002-11-25  Claudia Emde  <claudia@sat.physik.uni-bremen.de>

        * arts-1-1-307
        
        * src/m_scatrte.cc (i_fieldUpdate1D): Included arguments to agendas
        to suppress output.

        * src/agendas.cc (opt_prop_gas_agenda) and  (opt_prop_part_agenda):
        Corrected input and output of these agendas again.

        * src/linalg.cc (ludcmp):  Bug fix to avoid possible use of
        uninitialized index.
        
2002-11-25  Oliver Lemke  <olemke@uni-bremen.de>

        * arts-1-1-306

        * src/matpackI.h (class VectorView): Don't use qualified names in
        member function definition.

        * configure.in: Moved -DNDEBUG from compiler flags to preprocessor
        flags.

2002-11-25  Stefan Buehler  <sbuehler@uni-bremen.de>

        * arts-1-1-305

        * src/agenda_class.h: Changed declaration of Agenda.

        * src/agenda_class.cc: Implemented an optional argument for
        Agenda::execute. If the argument is true, the agenda is executed
        silently, i.e., all output, except level 0 (error messages) is
        suppressed. 

        If you call Agenda::execute() in a loop, you should call it
        without argument for the first time, then call it with argument
        true for the remaining iterations.

        * src/arts.h: Removed the line about NDEBUG. This is set by
        configure --enable-debug or --disable-debug. Hence, it must not be
        set explicitly in the code.
        Moved include for cassert to another position.

        * src/m_hdf.cc: Removed inclusion of config.h. (This is included by
        arts.h.)

        * src/methods.cc: Removed inclusion of config.h. (This is included by
        arts.h.)

        * src/main.cc: Removed inclusion of config.h. (This is included by
        arts.h.)

2002-11-25  Oliver Lemke  <olemke@uni-bremen.de>

        * arts-1-1-304

        * src/matpack*.{h,cc}: Moved implementation of iterator stuff into
        class definitions to get them inlined because we need maximum
        performance here.

        Removed reimplementation of 'operater() const' from the view classes
        and replaced them with a single 'using ConstXXXView::operator()'.
        This forces the compiler to call the correct const function for
        the non-const View classes. All in all, 254 function implementations
        removed from matpack.

        * src/matpackI.h: Fixed copy/paste error in last version.

        * src/xml_io.cc: Bug fixes to avoid possible use of uninitialized
        variables in try-catch-blocks.

2002-11-25  Claudia Emde  <claudia@sat.physik.uni-bremen.de>

        * arts-1-1-303

        * src/m_optproperties.cc: Renamed (m_scatproperties.cc) as this file
        now contains all workspace methods for calculating optical 
        properties, not only the scattering properties.

        * src/agendas.cc (opt_prop_gas_agenda): Corrected input and output 
        of this agenda.

2002-11-22  Claudia Emde  <claudia@sat.physik.uni-bremen.de>

        * arts-1-1-302

        * src/rte.cc/.h (rte_step): Created the general radiative transfer step
        function. The diagonal case I have taken from Patricks function 
        (rte_step_clearsky_with_emission). 
        Shifted (stokes_vecGeneral) from scat_rte.cc to this file. 

        * src/scat_rte.cc/.h: Removed these files. All radiative transfer 
        functions are now in rte.cc.

        * src/Makefile.am: Removed files above.

        * src/m_scatrte.cc: Modified (i_fieldUpdate1D), it uses the general
        RT function, now.

2002-11-22  Oliver Lemke  <olemke@uni-bremen.de>

        * arts-1-1-301

        * configure.in: Fixed messed up CFLAGS/CXXFLAGS. Introduced new
        variable DEBUG_FLAGS.

2002-11-22  Oliver Lemke  <olemke@uni-bremen.de>

        * arts-1-1-300

        * src/matpack*.{h,cc}, src/Makefile.am: Added cc files for matpack
        and moved implementation part. Otherwise, a compiler ignoring the
        inline keyword gets multiple defined symbols.

        NOTE: At the moment compilation is twice as fast as before. BUT there
        are some drawbacks in calculation speed because some frequently called
        functions (iterator stuff) have to be moved back to the header file to
        be inlined again.

        * configure.in: Increased template depth to 40 to get non-debug
        compiles working.
        Use CFLAGS/CXXFLAGS from environment variable also in debug mode. For
        basic optimizations set CFLAGS and CXXFLAGS to something like:

        export CFLAGS="-O2 -march=i686"
        export CXXFLAGS="$CFLAGS"

        Rerun autogen.sh afterwards.
        For maximum performance try something like:

        export CFLAGS=" -O2 -march=i686 -fforce-addr -funroll-loops
        -frerun-cse-after-loop -frerun-loop-opt -falign-functions=4
        -fomit-frame-pointer -fexpensive-optimizations"
        export CXXFLAGS="$CFLAGS"

        * ChangeLog: Removed arts-0-x-x history.

        * ChangeLog-0.x: Added. Moved pre-1.0 changelog entries here.

2002-11-22  Stefan Buehler  <sbuehler@uni-bremen.de>

        * arts-1-1-299

        * src/workspace.cc (define_wsv_data): Added the variables
        a_pressure, a_temperature, and a_vmr_list, which can hold the
        local pressure, temperature, and list of VMRs, respectively. They
        are intended for communication with agendas and methods
        calculating absorption coefficients.
        Also replaced gas_tgs by gas_species.

2002-11-21  Claudia Emde  <claudia@sat.physik.uni-bremen.de>

        * arts-1-1-298

        * src/workspace.cc: Removed *scat_rte_agenda*.

        * src/agendas.cc: Removed *scat_rte_agenda*.

        * src/m_scatrte.cc: Modified functions which uses scat_rte_agenda -
        (i_fieldIterate) and (i_fieldUpdate1D).
        Included more checks and initialized all variables for the scattering
        calculations in the beginning of (i_fieldIterate), where they appear
        first.
        
        * src/methods.cc: Changed interface of methods above.

        * src/m_cloudbox.cc: Included more checks.

2002-11-21  Claudia Emde  <claudia@sat.physik.uni-bremen.de>

        * arts-1-1-297

        * src/workspace.cc: Included variable for scalar gas absorption
        *abs_scalar_gas* and frequency index *f_index*.
        Modified WSVs *ext_mat* and *abs_vec*.
        Removed *ext_mat_gas*, *ext_mat_part*, *abs_vec_gas*, abs_vec_part*.
        Removed also *scat_f_index*. This variable is replaced by *f_index*.
        Included and removed entries for agendas (see agenda.cc).

        * src/methods.cc: Added:
                - ext_matAddGas
                - ext_matAddPart
                - abs_vecAddGas
                - abs_vecAddPart
        Removed: 
                - ext_mat_partCalc
                - abs_vec_partCalc
                - ext_mat_gasCalc
                - abs_vec_gasCalc
                - ext_mat_partScat
                - ext_mat_gasExample // Commented out the examples, may be we 
                - abs_vec_gasExample // can use them again.
        
        * src/agendas.cc: Added: 
                - scalar_gas_absorption_agenda
                - opt_prop_gas_agenda
                - opt_prop_part_agenda
        Removed:
                - ext_mat_agenda
                - abs_vec_agenda
        
        * src/m_scatrte.cc: Modified the (i_fieldIterate) and (i_fieldUpdate1D)
        according to the new variable definitions and new agenda definitions.
        Moved (stokes_vecGeneral) and (stokes_vecScalar) to the new file
        scat.rte.cc. These methods are ordinary functions now.
        *scat_rte_agenda* which can use only these functions, will be removed.
        Replaced *scat_f_index* by *f_index*.
        
        * src/m_cloudbox.cc: Replaced *scat_f_index* by f_index*.

        * src/m_scatproperties.cc:
        Added:
                - ext_matAddGas
                - abs_vecAddGas
                These methods are only dummy functions, as the method
                scalar_gas_absExtractFromLookup is not yet implemented.
        
                - ext_matAddPart        
                - abs_vecAddPart
                These are only slightly modified versions of the former 
                methods *ext_mat_partCalc* and *abs_vec_partCalc*.
                
        Removed:
                - ext_mat_partCalc
                - abs_vec_partCalc
                - ext_mat_gasCalc
                - abs_vec_gasCalc
                These methods are replaced by the new method.
        
                - ext_mat_partScat
                This method was only used for the convergence test. I think
                we do not need it anymore. It does not work with the 
                modified variables, so I commented it out.
        
                - ext_mat_gasExample 
                - abs_vec_gasExample 
                Commented out the Examples. They also have to be modified if 
                they should work with the new variables.

        * src/scat_rte.cc/h: This file contains now the functions
        for a radiative step calculation with scattering integral term. 

        * src/Makefile.am: Included scat_rte.cc/h.

        * src/rte.cc: Included "scat_rte.h".
        
2002-11-20  Oliver Lemke  <olemke@uni-bremen.de>

        * arts-1-1-296

        * src/Makefile.am: Fixed typos gridded_field.h -> gridded_fields.h
        Removed no longer existent los.h.

        * doc/uguide/Figs/Makefile.am: Added fm_definitions, interpolation,
        polarization, ppath and scattering to SUBDIRS.

        * doc/uguide/Figs/{polarization,interpolation,scattering}/Makefile.am:
        Added missing Makefiles needed to build dist.

        * doc/uguide/Figs/{polarization,interpolation,scattering}/.cvsignore:
        Added.

        * configure.in: WARNING_FLAGS and -ftemplate-depth- are gcc specific.
        Therefore, they are now only set if gcc/g++ is in use, otherwise we
        break compilation with non-gnu compilers (e.g. HP/NEC).

        Added missing Makefiles needed to build dist.

2002-11-20  Stefan Buehler  <sbuehler@uni-bremen.de>

        * arts-1-1-295

        * src/gas_abs_lookup.cc: Continued work on the lookup table. I
        have now a first implementation for the simple case without
        temperature interpolation. The next step is to test this.

        * src/gas_abs_lookup.h: Updated.

        * src/m_absorption.cc: Added. This should hold workspace methods
        related to the general calculation of absorption coefficients.

        * src/workspace.cc (define_wsv_data): Added gas_abs_lookup.

        * src/methods.cc (define_md_data_raw): Added gas_abs_lookupInit.

        * src/make_auto_wsv_h.cc: Updated.

        * src/make_auto_wsv_groups_h.cc: Updated.

        * src/m_clonesize.cc: Updated.

        * src/groups.cc (define_wsv_group_names): Added group GasAbsLookup.

        * doc/examples/absorption_lookup_example.arts.in: Added.

        * configure.in: Added new example file.

        * src/Makefile.am: Updated.

2002-11-19  Patrick Eriksson  <Patrick.Eriksson@rss.chalmers.se>

        * arts-1-1-294

        * src/special_interp.cc (z_at_lat_2d): Created this function.

        * src/ppath.cc (ppath_step_refr_std_2d): Started on this function.

        (get_refr_index_2d): Created this function.

2002-11-18  Patrick Eriksson  <Patrick.Eriksson@rss.chalmers.se>

        * arts-1-1-293

        * src/ppath.cc (refraction_gradient_2d): Created this function.

        (ppath_step_refr_std_1d): Some improved comments.

        (ppath_start_2d): Moved some code from ppath_geom_2d and created this 
        function as this code will be common with functions for refraction.

2002-11-17  Oliver Lemke  <olemke@uni-bremen.de>

        * arts-1-1-292

        * src/test_scatproperties.cc: Include cmath. Required on some
        systems (like marvin).

        * src/special_interp.cc: Include iostream for cout (GCC3).

        * doc/uguide/arts_methods_to_latex.sh: Workaround to get it working
        on marvin.

        * doc/doxygen/Makefile.am: File 'doxyfied' is now removed with make
        clean in maintainer-mode.

        ----------

        Fixes for upcoming release 1.3 of doxygen. We have to care more about
        the format and tags we use in our comments because it contains now a
        validating parser instead of a lexical scanner.

        * src/parser.cc (eat_whitespace): @exceptions no longer exists, it is
        now called @exception.

        * src/old_absorption.cc (get_tagindex_for_Strings): Use <pre></pre>
        instead of verbatim environment.

        * src/partition_function_data.cc (spec): Use <pre>.
        Inserted missing end tags.

        * src/species_data.cc: Inserted missing end tags.

2002-11-15  Patrick Eriksson  <Patrick.Eriksson@rss.chalmers.se>

        * arts-1-1-291

        * src/special_interp.cc/h: Created these files and moved atmospheric
        interpolation functions to these files from interpolation.cc/h.

        * src/ppath.cc (ppath_step_refr_std_1d): It seems that this function
        now works. So 1D with refaction should be finished. 
        This function is better than the corresponding function in arts-1.
        The tangent altitude is found with a better accuracy. The accuracy
        can be controled by a variable inside the function, which is now set
        to 0.1 m. The determination of the tangent altitude is not determined
        by the ray tracing step. 
        The maximum length of the ray tracing steps is now set by giving a 
        length. Small lengths can be used. I have tested steps down to 100m
        and it is very fast (as long as the calculation of refractive index is
        fast). However, some simple tests showed that step lengths below 1 km
        should not be needed (changing the ray tracing steps from 1 km to
        100m moved the tangent point about 250 m horisontally (for a tangent
        altitude close to ground), which should be compared to a total path
        length of many hundreds of km).

        (get_refr_index_1d): A temporary solution to get refractive index.
        The core function is taken from arts-1.

2002-11-15  Stefan Buehler  <sbuehler@uni-bremen.de>

        * arts-1-1-290

        * src/gas_abs_lookup.h: Continued to work on the structure of the table.

        * src/gas_abs_lookup.cc: Continued to work on the extraction function.

        * src/xml_io.cc: Adaptations to changed lookup table structure.

2002-11-15  Claudia Emde  <claudia@sat.physik.uni-bremen.de>

        * arts-1-1-289

        * src/m_scatrte.cc (convergence_flagAbs): Modified iteration counter.
        After the scattering calculation for the first frequency has converged 
        it is set to 100. This number indicates then that the iterations 
        should no longer be printed in (Tensor6WriteIteration).

        * src/m_cloudbox.cc (i_fieldSetClearsky): Initialization of i_field was
        missing.

        * src/m_scatproperties.cc

        I removed or commented the "cout"s, which we had included for 
        debugging.

2002-11-14  Patrick Eriksson  <Patrick.Eriksson@rss.chalmers.se>

        * arts-1-1-288

        * src/interpolation.cc (itw2p): Created this function to convert
        altitudes to pressures.
        
        (interp_atmsurface_XXXX and interp_atmfield_XXXX): Changed the name
        of the special functions to interpolate atmospheric fields and 
        surfaces, and changed the strategy somewhat. The following functions
        exist now (use them!):

           void interp_atm_field_gp2itw
           void interp_atmfield_by_itw
           void interp_atmfield_by_gp
           Numeric interp_atmfield_by_gp
           void interp_atmsurface_gp2itw
           void interp_atmsurface_by_itw
           void interp_atmsurface_by_gp
           Numeric interp_atmsurface_by_gp

        * src/m_ppath.cc (ppath_stepRefractionStd): The WSM to be used in the
        future for path calculations with refraction, using a basic/standard
        calculation approach.

        * src/ppath.cc (ppath_step_refr_std_1d): Started on this core function 
        for 1D path calculations with refraction.

2002-11-14  Oliver Lemke  <olemke@uni-bremen.de>

        * arts-1-1-287

        * ami/xml/xmlReadVector.m: Attribute is called nelem not nrows.

2002-11-14  Oliver Lemke  <olemke@uni-bremen.de>

        * arts-1-1-286

        * ami/xml/xmlReadVector.m: Added.

2002-11-14  Oliver Lemke  <olemke@uni-bremen.de>

        * arts-1-1-285

        * ami/xml/xmlReadTensor6.xml: Quick hack for Sreerekha. Exchanged
        order of col/rows.

2002-11-13  Claudia Emde  <claudia@sat.physik.uni-bremen.de>

        * arts-1-1-284

        * src/m_scatproperties.cc (pha_matCalc): Bug fixed in this function. 
        The off-diagonal elements were calculated wrongly, now the whole phase 
        matrix is calculated correctly.

        * src/m_scatrte.cc: Only documentation.

2002-11-11  Oliver Lemke  <olemke@uni-bremen.de>

        * arts-1-1-283

        * doc/doc++/Makefile.am, doc/doc++/html/Makefile.am,
        doc/doc++/tex/Makefile.am, doc/doc++/tex/docxx.sty: Removed.

        * doc/uguide/Makefile.am: Remove uguide.ind after generating dvi/pdf
        to avoid conflict between latex and pdflatex.

2002-11-11  Oliver Lemke  <olemke@uni-bremen.de>

        * arts-1-1-282

        * doc/uguide/uguide.tex: Use ifthen package to determine whether
        we are using pdflatex or vanilla latex. So, we don't need any
        longer the separate uguide_pdf.tex file.

        * doc/uguide/uguide_pdf.tex: Removed after merging into uguide.tex.

        * doc/uguide/Makefile.am: Adapted to create both ps and pdf file 
        from uguide.tex.

        Moved several files from MAINTAINERCLEANFILES to CLEANFILES.
        Everything except uguide.{ps,pdf,dvi} and automatically
        generated tex files can be removed.

        Remove uguide.toc after creation of ps/pdf file because latex and
        pdflatex use different formats for this file.

        Use -o option for dvips instead of output redirection.

        * doc/uguide/.cvsignore: Cleanup.

        * src/Makefile.am: $(EXEEXT) was still missing in some places.

2002-11-10  Oliver Lemke  <olemke@uni-bremen.de>

        * arts-1-1-281

        * configure.in: Version number correction.

2002-11-08  Claudia Emde  <claudia@sat.physik.uni-bremen.de>

        * arts-1-1-280

        * doc/uguide/scattering.tex: Restructured this chapter. Also 
        included some functions which have not been documented so far.

        * src/m_cloudbox.cc: Documentation.

        * src/m_scatrte.cc: Documentation.

2002-11-08  Oliver Lemke  <olemke@uni-bremen.de>

        * arts-1-1-279

        * src/Makefile.am: Append $(EXEEXT) to overridden targets. This
        prevents automake 1.5/1.6 from outputting errors but leads to
        warnings emitted by automake 1.4. But hey, a warning is better than
        an error, right? ;-) And it has the advantage that 'make' stops on
        errors but continues on warnings. automake 1.7 also just works fine.

2002-11-08  Oliver Lemke  <olemke@uni-bremen.de>

        * arts-1-1-278

        * configure.in: Use AM_MAINTAINER_MODE macro from automake instead
        of our homemade stuff. If --enable-maintainer-mode is used,
        additional dependencies are included in the generated Makefiles.
        E.g. when configure.in or any Makefile.am are changed the
        Makefiles are rebuild automatically with the next make. This
        is not necessary for end-users. --enable-maintainer-mode is
        passed by default to configure when you call autogen.sh.

        IMPORTANT NOTE: Dependency check on configure.in is only performed
        in top level directory. This means: After an update or modifying
        configure.in you *MUST* run make in the top level directory.

        Debugging is activated in maintainer-mode by default and disabled
        in end-user mode. This could be overridden by passing --enable-debug
        or --disable-debug to configure.

        Removed setting of arts-data path on smiles pcs to lookup2. Moved to
        autogen.sh because configure should not contain such special
        treatments.

        Cleanup. Removed some unused macros.

        * autogen.sh: Inserted hostname check and pass
        --with-arts-data=/pool/lookup2/arts-data to configure if we
        are on a smiles pc.

        * doc/uguide/Makefile.am, doc/doxygen/Makefile.am: Use
        MAINTAINER_MODE in conditional.

        * .cvsignore: Added autom4te.cache. Sorted.

2002-11-07  Oliver Lemke  <olemke@uni-bremen.de>

        * arts-1-1-277

        * src/xml_io.cc (ArtsXMLTag::read_from_stream): Skip
        <comment></comment> blocks. Comments are only allowed to be put
        directly after the <arts> tag or in front of the </arts> tag.

2002-11-06  Oliver Lemke  <olemke@uni-bremen.de>

        * arts-1-1-276

        * src/xml_io.cc: Added io routines for SpeciesTag, ArrayOfSpeciesTag,
        ArrayOfArrayOfSpeciesTag.
        Reading/writing of SpeciesTag writes only the empty tags because the
        implementation part of SpeciesTag is not yet done.
        Moved function declarations and template instantations to
        xml_io_private.h.

        * src/absorption.h: Added type ArrayOfSpeciesTag. At the moment, this
        type is only used to define ArrayOfArrayOfSpeciesType to keep
        consistency with the way ArraysOfArrays are defined in arts.

        * src/xml_io_private.h: Added. Separated function declarations and
        template instantiations from implementation part.

        * src/Makefile.am: Added xml_io_private.h in several places.

2002-11-05  Oliver Lemke  <olemke@uni-bremen.de>

        * arts-1-1-275

        * autogen.sh: Cleanup. Added --gnu option to automake.

        * configure.in: Added AM_MAINTAINER_MODE.

        * absorption.h, m_abs.cc, old_absorption.cc, workspace.cc, xml_io.cc:
        Renamed OneTag to SpeciesTag.

        * absorption.h, gas_abs_lookup.h, groups.cc, m_abs.cc,
        m_clonesize.cc, old_absorption.cc, workspace.cc, xml_io.cc:
        Renamed TagGroups to ArrayOfArrayOfSpeciesTag.

        * src/m_xml.h, src/xml_io.h: Cleanup.

        * src/xml_io.cc: Started to add io routines for GasAbsLookup.

2002-11-05  Claudia Emde  <claudia@sat.physik.uni-bremen.de>

        * arts-1-1-274

        * doc/uguide/scattering.tex: Updated the description of the iterative
        method.

        * doc/uguide/sybol_defs: New sybols for the fields (radiation field and
        scattered field).

        * doc/uguide/references.bib: Added a new reference (Sreerekhas paper).

        * doc/uguide/Figs/scattering: Added this directory. Included also 
        figures for scattering part here.

2002-10-31  Patrick Eriksson  <Patrick.Eriksson@rss.chalmers.se>

        * arts-1-1-273

        * doc/uguide/fm_definitions.tex: Wrote some new text for RT and ground
        reflections. 

        * doc/uguide/ppath.tex: Revised old text and wrote new text, especially
        a section on finding path crossings of pressure surfaces.

        * src/ppath.cc (psurface_crossing_2d): Modified this function to also
        handle a quadratic slope term.

2002-10-31  Sreerekha T.R.  <rekha@uni-bremen.de>
        
        * arts-1-1-272
        
        * src/scatproperties.cc (amp2abs): Fixed a bug here for
        calculating the absorption vector for 2nd,3rd and 4th components.
        
2002-10-22  Nikolay Koulev  <nkoulev@uni-bremen.de>

        * arts-1-1-271

        * src/m_lineshapes.cc (elsVoigt_Kuntz6, elsVoigt_Drayson): Added
        these new lineshapes, the Voigt-Kuntz approximation with relative
        accuracy better than 2*10^-6 and the Voigt-Drayson one.

        * src/methods.cc: Added the respective descriptions for these 
        lineshapes.
        
2002-10-22  Patrick Eriksson  <Patrick.Eriksson@rss.chalmers.se>

        * arts-1-1-270

        * src/ppath.cc (ppath_step_geom_1d): Added a call of
        gridpos_force_end_fd for path steps ending on a pressure surface.
        The function was not working without this call.

        * src/interpolation.cc: Reverted to version before version 1-1-264.

2002-10-19  Oliver Lemke  <olemke@uni-bremen.de>

        * arts-1-1-269

        * ami/xml/xmlReadTensor[56].m: Bug fixed. Where to put books without
        shelves? :-)

        * src/main.c: Beautified output of arts -v.

2002-10-21  Claudia Emde  <claudia@sat.physik.uni-bremen.de>

        * arts-1-1-268

        * src/lin_alg.cc: Fixed a bug in (norm_inf). This function is used in 
        the matrix exponential function. 

        * src/m_cloudbox.cc: Small bug fix.

2002-10-18  Christian Melsheimer  <melsheimer@uni-bremen.de>

        * arts-1-1-267

        * doc/uguide/scattering.tex: some small corrections.

        * doc/uguide/polarization.tex: some small corrections.

2002-10-18  Oliver Lemke  <olemke@uni-bremen.de>

        * arts-1-1-266

        * ami/xml/xmlLoad.m: Removed debug output.

        * ami/xml/xmlReadArray: Bug fixes.

        * ami/xml/xmlReadTensor[3-5]: Added.

        * ami/xml/xmlCheckSize: Added. Checks whether the number of read data
        item corresponds to the intended number.

        * ami/xml/xmlReadTensor6, ami/xml/xmlReadMatrix: Corrected permutation
        of input vector.

        NOTE: The function name which is called for reading a data type from
        an XML file is put together in xmlLoad.m. So, for every new data type
        only a file called xmlRead<DATATYPE>.m has to be put into the
        directory.  Array and ArrayOfArray are working automatically
        (hopefully).
        
        WARNING: All implemented reading routines work as long as the input
        file is correct. There is currently nearly no error checking. All
        kinds of strange things may happen.

2002-10-17  Sreerekha T.R.  <rekha@uni-bremen.de>

        * arts-1-1-265
        
        * src/m_cloudbox.cc (scat_iPut): The size of scat_i_p was resized
        to the 1D case.  

2002-10-17  Claudia Emde  <claudia@sat.physik.uni-bremen.de>

        * arts-1-1-264
        
        * src/interpolation.cc (is_gridpos_at_index_i) and (gridpos2gridrange):
        Fixed bugs here. Interpolation weights which are Numeric were 
        compared to Index which caused serious errors in the ppath_step 
        calculations. Patrick, I have included comments were I made 
        modifications.

        * src/m_cloudbox.cc (CloudboxGetIncoming): Some modifictions. This
        method seems to work now!!!!

        * src/m_scatrte.cc (ScatteringMain): Modified according to the change
        in (CloudboxGetIncoming).

2002-10-16  Claudia Emde  <claudia@sat.physik.uni-bremen.de>

        * arts-1-1-263
        
        * src/m_cloudbox.cc (CloudboxGetIncoming): Modified. The function 
        calculates the initial field at the whole cloudbox boundary. Before 
        it only doing one boundary at a time.

        * src/m_scatrte.cc (ScatteringMain): Modfied according to the change
        in (CloudboxGetIncoming).
        
        * src/methods.cc: Modified the inputs and outputs to the above
        mentioned methods.
        
2002-10-15  Patrick Eriksson  <Patrick.Eriksson@rss.chalmers.se>

        * arts-1-1-262

        * doc/uguide/fm_definitions.tex: Just removed a small out-dated 
        comment.

2002-10-14  Oliver Lemke  <olemke@uni-bremen.de>

        * arts-1-1-261
        
        * configure.in: Call init with autogen.sh instead of reconf.

        * Makefile.am (EXTRA_DIST): Include autogen.sh instead of reconf.

        * reconf: Purged.

2002-10-14  Sreerekha T.R.  <rekha@uni-bremen.de>
        
        * arts-1-1-260
        
        * src/m_cloudbox.cc: The method CloudboxGetIncoming is modified
        for using the method RteCalc.  The inputs and outputs of this
        method has to be changed quite lot.
        
        * src/m_scatrte.cc: The method ScatteringMain also had to be
        modified as it calls CloudboxGetIncoming.

        * src/methods.cc: Modified the inputs and outputs to the above
        mentioned methods.
        
2002-10-14  Oliver Lemke  <olemke@uni-bremen.de>

        * arts-1-1-259
        
        * doc/uguide/arts_methods_to_latex.sh: Use typewriter font instead
        of verbatim environment to allow automatic linebreaks.

        * doc/uguide/Makefile.am (uguide_pdf.pdf): Added dependency from
        autotexfiles.
        Don't redirect output to /dev/null.

2002-10-14  Oliver Lemke  <olemke@uni-bremen.de>

        * arts-1-1-258
        
        * doc/uguide/arts_methods_to_latex.sh: Added missing backslash in
        front of levelb.

2002-10-14  Oliver Lemke  <olemke@uni-bremen.de>

        * arts-1-1-257
        
        * autogen.sh: Renamed reconf for GNU compliance.

2002-10-10  Christian Melsheimer  <melsheimer@uni-bremen.de>

        * arts-1-1-256

        * doc/uguide/references.bib: added a reference (chandrasekhar:60)
        
        * doc/uguide/polarization.tex: Some minor corrections, and added
        the correct proof for the inequality I^2 >= Q^2 + U^2 + V^2. It is
        quite lengthy and maybe not really interesting for the uguide, but
        I wanted to write it down somewhere. 

        * doc/uguide/Figs/polarization: created this directory, moved
        figures for polarization.tex here

2002-10-10  Claudia Emde  <claudia@sat.physik.uni-bremen.de>

        * arts-1-1-255

        * src/agendas.cc: Included scat_mono_agenda.

        * src/m_scatrte.cc: Renamed (scat_mainCalc) Now it is called 
        (ScatteringMain). Included scat_mono_agenda in this method.

        * src/methods.cc: Modified entry for the method above.
                
        * src/workspace.cc: Included scat_mono_agenda.
        
2002-10-09  Sreerekha T.R.  <rekha@uni-bremen.de>
        
        * arts-1-1-254
        
        * src/m_cloudbox.cc: The method CloudboxGetIncoming is
        implemented. Only the 1D case is implemented
        
        * src/m_scatrte.cc: Added the method scat_mainCalc which
        gives the interface variables and the frequency inded.
        Both these methods are to be tested to fix bugs.

        * src/methods.cc : Added these two methods.
        
2002-10-08  Patrick Eriksson  <Patrick.Eriksson@rss.chalmers.se>

        * arts-1-1-253

        * doc/uguide/ppath.tex: Included a new figure.

        * doc/uguide/fm_definitions.tex: Revised some text and wrote some
        new text on RT. Included a new figure. More work to be done.

        * doc/uguide/introduction.tex: Removed some old text. Added a to do
        list.

2002-10-08  Christian Melsheimer  <melsheimer@uni-bremen.de>

        * arts-1-1-252

        * doc/uguide/polarization.tex: extended the subsection on partial
        polarization, some minor additions to the rest
        

2002-10-01  Christian Melsheimer  <melsheimer@uni-bremen.de>

        * arts-1-1-251

        * doc/uguide/polarization.tex: some small corrections

2002-09-26  Patrick Eriksson  <Patrick.Eriksson@rss.chalmers.se>

        * arts-1-1-250

        * doc/uguide/fm_definitions.tex: Revised this chapter to the start of
        Section 3.5. Main changes connected to that blackbody_ground is
        removed.

2002-09-25  Oliver Lemke  <olemke@uni-bremen.de>

        * arts-1-1-249
        
        * ami/xml/xmlGetAttrValue.m, ami/xml/xmlReadArray.m,
        ami/xml/xmlReadMatrix.m, ami/xml/xmlLoad.m,
        ami/xml/xmlReadAttributes.m, ami/xml/xmlReadTensor6.m:
        Added. Intermediate commit. Parsing of tags and attributes
        basically working. Parsing of data TBD.

        * configure.in: Added ami/xml/Makefile.

        * ami/xml/.cvsignore: Added.
        
        * ami/xml/Makefile.am: Added.

        * ami/xml: Created.

2002-09-25  Sreerekha T.R.  <rekha@uni-bremen.de>
        
        * arts-1-1-248
        
        * src/workspace.cc : Removed the variable name i_field_Tb and
        introduced tensor6_1. 
        
2002-09-25  Oliver Lemke  <olemke@uni-bremen.de>

        * arts-1-1-247
        
        * configure.in: Removed ami subdirs.

        * ami/: Purged.
        
        * ami/Makefile.am: Removed subdirs.

        * ami/init.m: Removed subdirs.

2002-09-22  Patrick Eriksson  <patrick@rss.chalmers.se>

        * arts-1-1-246

        * src/interpolation.cc (interp_atmsurface): Created this function in
        two versions.

        (interp_atmsurface): Created a version of this function for a single
        position.

        * src/ppath.cc: Removed two functions to calculate the specular angle
        for ground reflections.

        * src/rte.cc (ground_specular_los): Created this function, partly
        based on code from ppath.cc.

        * src/m_atmosphere.cc (GroundNoScatteringSingleEmissivity): Created
        this function. 

        (GroundTreatAsBlackbody): Smaller changes in this function due to
        new interpolation functions.

        * src/workspace.cc: Wrote text, or extended text, for several 
        variables.

        * src/agendas.cc: Wrote text for ground_refl_agenda. Added r_geoid
        and z_ground as input to the agenda.

2002-09-20  Stefan Buehler  <sbuehler@uni-bremen.de>

        * arts-1-1-245

        * src/matpackI.h: Added Constructors to make a ConstVectorView and
        VectorView of a scalar. The conversion of a Vector to a 1-column
        matrix was already implemented.

        * src/matpackIII.h: Added Constructors to make a Tensor3View from
        a MatrixView. (Also constant versions.)

        * src/matpackIV.h: Added Constructors to make a Tensor4View from
        a Tensor3View. (Also constant versions.)

        * src/matpackV.h: Added Constructors to make a Tensor5View from
        a Tensor4View. (Also constant versions.)

        * src/matpackVI.h: Added Constructors to make a Tensor6View from
        a Tensor5View. (Also constant versions.)

        * src/matpackVII.h: Added Constructors to make a Tensor7View from
        a Tensor6View. (Also constant versions.)

        * doc/uguide/matrix_vector.tex: Put in documentation for the new
        matpack feature to make things appear of larger dimension than they
        are.

        * src/test_matpack.cc (test33): Added this test for the new
        capability to make things look bigger than they are.

        * src/gas_abs_lookup.cc (Extract): Continued to work on this
        function.  

        * src/gas_abs_lookup.h: Changed argument type of extract to allow
        vectors of pressure and temperature.

2002-09-19  Stefan Buehler  <sbuehler@uni-bremen.de>

        * arts-1-1-244

        * src/Makefile.am (arts_SOURCES): Added gas_abs_lookup.h
        and gas_abs_lookup.cc.

        * src/gas_abs_lookup.h: Started this file. It contains the
        declaration of the gas absorption lookup table.

        * src/gas_abs_lookup.cc: Started this file. It contains the
        implementation of gas absorption lookup member functions.

        * src/old_absorption.cc: Old stuff, should be removed eventually.

        * doc/uguide/old_absorption.tex: Old stuff, should be removed
        eventually. 

        * doc/examples/old_absorption_example.arts.in: Old stuff, should
        be removed eventually. 

        * src/agenda_record.cc: Corrected file name in doxygen header.

        * ami/path/.cvsignore: Created this file. Added Makefile and
        Makefile.in. 

2002-09-17  Patrick Eriksson  <patrick@rss.chalmers.se>

        * arts-1-1-243

        * There have been rather big changes for the clear sky RTE part.
        Some comments are given below. However, as I am the only one working
        with this part I am saving the energy to later to describe the RTE
        part in a good way in AUG and the online documentation.

        The problems I encountered for the ground reflections made me think
        in somewhat new ways, and voila, I found a new and better structure
        for the calculations. So right now I am happy.

        The RTE part is now rather complete, but I have only done practical
        tests for a few simple cases. So much bug checking is to be done.
        
        * src/m_rte.cc (RteEmissionStd) and (RteCalc): The functions are to a
        large extent restructured. Several tasks have been lifted from 
        rte_agenda functions (where RteEmissionStd is the only existing one so
        far) which is an advantage. The task of rte_agenda methods is now much
        clearer. 
        The restructuring made it possible to call RteCalc in a recursive way.
        This was needed to handle ground reflections following the new
        approach. In fact, the appraoch for ground reflections could be 
        followed to make scattering calculations in another way (which however
        would require changes to the ppath calculations). It is my hope
        that this approach will allow calculation of weighting functions 
        without to much problems (the first task will be to fix WFs with
        a scattering ground).

        * src/rte.cc (get_radiative_background): The old function 
        set_to_radiative_background has been renamed and to large parts been
        rewritten. All cases execpt when the path starts inside the cloud box
        are now handled (but not tested).
        
        (rte_step_clearsky_with_emission): This function was created before
        last commit but I forgot to mention it. This function makes an 
        automatic switch to the best way to calculate the matrix exponential.
        Shall a simialr function be made for the cloud box?
        That is, there is no agenda for this for the clear sky part.

        * src/m_atmosphere.cc (GroundTreatAsBlackbody): Created this function.
        This is the first function implemented for ground_refl_agenda.

        * src/interpolation.cc (gridpos_copy): Created this function to copy
        a GridPos.

        * src/m_cloudbox.cc (CloudboxOff): The function now also sets 
        scat_i_p, scat_i_lat, scat_i_lon, scat_za_grid and scat_aa_grid to be
        empty. This is needed as the variables must be input to RteCalc.

        (CloudboxGetOutgoing): Added to cloudbox_on is input to check that the
        cloud box is actually turned on. Added also a check that scat_za_grid
        not is empty, which would be the case if CloudboxOff is called and
        later cloudbox_on is set to 1 but no cloud box calculations have been
        performed. 
        
        Claudia, should some more safety checks be added? The header of the
        file is not updated since the re-naming of the function.

2002-09-16  Patrick Eriksson  <Patrick.Eriksson@rss.chalmers.se>

        * arts-1-1-242

        * src/***: The WSV blackbody_ground is removed. It caused many and
        problematic dependencies between WSVs. Ground reflections will also
        be handled in a different way and there is no longer a big need for
        blackbody_ground.
        This means that there is no constrain now for placing the cloud box.
        It is up to the user to decide if it is OK to have a gap between the
        ground and the cloud box.

        * src/m_ppath and ppath: The fields ground, i_ground, symmetry and 
        i_symmetry are removed from the Ppath structure. 
        The calculation of a propagation path now stops at all intersections
        with the ground. 
        
        * src/workspace.cc: Removed the WSV t_ground and e_ground, and the
        corresponding agendas.
        Introduced new variables for handling ground reflections: 
        ground_refl_agenda, ground_emission, ground_los and ground_refl_coeffs.

        * src/m_rte and rte: Removed old ground variables and started to
        incorporate the new ones. 

2002-09-16  Claudia Emde  <claudia@sat.physik.uni-bremen.de>

        * arts-1-1-241

        * src/methods.cc: Included stokes_vec also as input to the methods
        (stokes_vecScalar) and (stokes_vecGeneral).

        * src/m_scatrte.cc: (stokes_vecScalar) and (stokes_vecGeneral): 
        Assertion for stokes_vec added.

2002-09-16  Claudia Emde  <claudia@sat.physik.uni-bremen.de>

        * arts-1-1-240

        * src/m_cloudbox.cc (CloudboxGetOutgoing): Changed the name of the 
        method. Earlier it was (y_scatCalc). Changed the interface of the
        function. *cloudbox_los* and *cloudbox_los* are removed, instead of
        these variables there are the gridpositions *a_gp_p*, *a_gp_lat*,
        *a_gp_lon* and *a_los* for the direction. The 3D part is still 
        missing.

        * src/workspace.cc: Removed WSVs *y_scat*, *cloudbox_pos* and 
        *cloudbox_los*. Added WSVs *a_gp_p*, *a_gp_lat* and *a_gp_lon*.

        * src/methods.cc: Changed (y_scatCalc) to (CloudboxGetOutgoing).

        * src/groups.cc: Included GridPos as a new group.

        * src/xml.io.cc: Added IO function dummies for GridPos.

        * src/m_clonesize.cc: Added clonesize dummy for GridPos.

2002-09-13  Stefan Buehler  <sbuehler@uni-bremen.de>

        * arts-1-1-239

        * src/xml_io.cc: Added IO function dummies for TagGroups.

        * src/workspace.cc (define_wsv_data): Added WSV gas_tgs.

        * src/groups.cc (define_wsv_group_names): Added group TagGroups.

2002-09-10  Claudia Emde  <claudia@sat.physik.uni-bremen.de>

        * arts-1-1-238

        * src/m_cloudbox.cc (y_scatCalc): Created this function (for 1D). It 
        returns the spectrum after a scattering calculation on the cloudbox
        boundary for given position and direction.
        (i_fieldSetConst): Generalized this method. Now you can specify 
        differnt values for each Stokes component of i_field inside 
        the cloudbox.

        * src/workspace.cc: Included the variables *y_scat*, *cloudbox_pos*
        and *cloudbox_los* for the method *y_scatCalc*.

        * src/methods.cc: Added *y_scatCalc*.

2002-09-10  Oliver Lemke  <olemke@uni-bremen.de>

        * arts-1-1-237
        
        * src/xml_io.cc: Output the element that failed while reading for
        all ArrayOf and ArrayOfArray data types.
        
2002-09-10  Sreerekha T.R.  <rekha@uni-bremen.de>
        
        * arts-1-1-236
        
        * src/m_scatrte.cc (scat_fieldCalc): Sorry that the last version
        didn't compile. I have fixed it now.   
        
2002-09-10  Oliver Lemke  <olemke@uni-bremen.de>

        * arts-1-1-235
        
        * src/xml_io.cc: Improved error output if reading fails. Added
        output of column, row, page... of the erroneous element.
        
2002-09-10  Sreerekha T.R.  <rekha@uni-bremen.de>
        
        * arts-1-1-234
        
        * src/m_scatproperties.cc : Included stokes_dim as input to
        methods calculating scattering properties.  Earlier stokes_dim was
        taken from inputs themselves. Now more checks are also included.  

        * src/methods.cc : Adapted all the methods calculating scattering
        properties to include stokes_dima as input.   

        * src/agendas.cc : Changed the online documentation for
        ext_mat_agenda and abs_vec_agenda.  Earlier there was a
        misunderstanding because they were not looking like examples.
        Patrick had pointed out this some time back.

2002-09-09  Claudia Emde  <claudia@sat.physik.uni-bremen.de>

        * arts-1-1-233

        * src/m_scatrte.cc (i_fieldUpdate1D): Changed the calculation of the 
        planck function for one layer. Now the mean of the temperature is
        calculated first and afterwards the planck function.

        * src/m_cloudbox.cc (scat_iPut): Included this method. It puts the 
        scattered radiation field into the interface variables between 
        cloudbox and clearsky calculations.
        (i_fieldSetClearsky), (i_fieldSetConst): Shifted these methods here, 
        because they have nothing to do with scattering properties.

        * src/m_scatproperties.cc: Shifted the two methods above.

        * src/methods.cc: Included entry for scat_iPut.

2002-09-06  Claudia Emde  <claudia@sat.physik.uni-bremen.de>

        * arts-1-1-232

        * src/m_scatrte.cc (scat_fieldCalc): Bug fixed. The scattering
        intergral was only calculated for 180� zenith angle, because 
        because *pha_mat_spt* was not calculated in this function.
        (i_fieldUpdate1D): Fixed another bug here. Insted of I_0 on the 
        gridpoints layer mean values were taken.

        * src/methods.cc: Modified interface for (scat_fieldCalc).

2002-09-06  Christian Melsheimer  <melsheimer@uni-bremen.de>

        * arts-1-1-231

        * doc/uguide/Figs/pol_ellipse_arbitrary.fig
        * doc/uguide/Figs/pol_ellipse_arbitrary.eps
        * doc/uguide/Figs/pol_ellipse_arbitrary.pdf: corrected, now zeta
        has the correct sign...

2002-09-05  Christian Melsheimer  <melsheimer@uni-bremen.de>

        * arts-1-1-230

        * doc/uguide/polarization.tex: inserted one more figure

        * doc/uguide/Figs/pol_e45.fig  
        * doc/uguide/Figs/pol_e45.eps
        * doc/uguide/Figs/pol_e45.pdf: added these files.

2002-09-03  Christian Melsheimer  <melsheimer@uni-bremen.de>

        * arts-1-1-229

        * doc/uguide/Figs/pol_ellipse_aligned.fig
        * doc/uguide/Figs/pol_ellipse_aligned.eps
        * doc/uguide/Figs/pol_ellipse_aligned.pdf
        * doc/uguide/Figs/pol_ellipse_aligned.fig
        * doc/uguide/Figs/pol_ellipse_arbitrary.eps
        * doc/uguide/Figs/pol_ellipse_arbitrary.pdf: added these files.
        * doc/uguide/polarization.tex: Small corrections, and inserted 2
        figures
        

2002-09-03  Claudia Emde  <claudia@sat.physik.uni-bremen.de>

        * arts-1-1-228  
                
        * agendas.cc (spt_calc_agenda): MAde this agenda for calculating 
        the properties for single particle types. Using this agenda it is 
/       easy to do the convergence test, which seems to be very important to 
        make sure, that the model delivers correct results.

        * workspace.cc: Icluded spt_calc_agenda.
        
        * m_scatproperties.cc (ext_mat_sptScat) (ext_mat_partScat): Created
        these methods to calculate the particle extinction due to scattering 
        (without absorption). These methods can be used for doing a
        convergence test.

        * methods.cc: Included the methods above.

        * m_scat_rte: Use *spt_calc_agenda* in (i_fieldUpdate1D).

2002-08-30  Nikolay Koulev  <nkoulev@uni-bremen.de>

        * arts-1-1-227

        * /: Increased ChangeLog number.
        
2002-08-30  Nikolay Koulev  <nkoulev@uni-bremen.de>

        * arts-1-1-226

        * src/methods.cc: Added the Doppler line-shape entry.
        
2002-08-29  Claudia Emde  <claudia@sat.physik.uni-bremen.de>

        * arts-1-1-225

        * src/m_scatproperties.cc: Removed *psh_mat_conv_sptCalc*. This was 
        only needed for testing.

2002-08-29  Sreerekha T.R.  <rekha@uni-bremen.de>

        * arts-1-1-224
        
        * doc/examples/clearsky_field.xml : This is modified and
        corresponds to midlatitude summer case.  

        * src/m_scatproperties.cc : Modified the method
        abs_vec_gasExample.  The example absorption now corresponds to
        midlatitude summer case.

2002-08-29  Oliver Lemke  <olemke@uni-bremen.de>

        * arts-1-1-223
        
        * configure.in: Removed ami/path from AC_OUTPUT.

        * ami/Makefile.am (SUBDIRS): Removed path.
        
2002-08-29  Oliver Lemke  <olemke@uni-bremen.de>

        * arts-1-1-222
        
        * ami/path: Started to remove old ami files. Tried this one to see
        if cvs handles removing of empty directory.

2002-08-28  Claudia Emde  <claudia@sat.physik.uni-bremen.de>

        * arts-1-1-221

        * src/m_scatrte.cc (i_fieldUpdate1D): Bug Fixed. The absorption 
        vector was only calculated for one direction. Before 
        abs_vec_sptCalc we have to call pha_mat_sptCalc in the same loop. 
        So I also had to modify the interface of the function, pha_mat_spt
        must not be declared as constant.

        * src/m_scatrte.cc (Tensor6WriteIteration), (convergence_flagAbs): 
        Moved the iteration counter to convergence_flagAbs. Now it should 
        be posible to print out scat_field and i_field at the same time.

        * src/methods.cc: Modified entry for i_fieldUpdate1D.
        

2002-08-28  Sreerekha T.R.  <rekha@uni-bremen.de>
        
        * arts-1-1-220
        
        * src/m_scatrte.cc (scat_fieldCalc): The method is modified so
        that it can handle 3D cases also more efficiently than before.  
        
2002-08-26  Claudia Emde  <claudia@sat.physik.uni-bremen.de>

        * arts-1-1-219

        * doc/example/i_field_arts.in: Included the new methods into the 
        example.

2002-08-26  Claudia Emde  <claudia@sat.physik.uni-bremen.de>

        * arts-1-1-218

        * src/m_scatproperties.cc (i_fieldSetConst): Created this function
        to define a constant initial field inside the cloudbox.
        Renamed *i_fieldSet*. Now this method is called *i_fieldSetClearsky*.

        * src/m_scatrte.cc (Tensor6WriteIteration): This function counts the
        number of iterations and prints the iterated fields to files. 

        * src/methods.cc: Included the methods above.

        * src/workspace.cc: Added the variable *iteration_counter* which holds 
        the actual number of iterations. 

        
2002-08-26  Oliver Lemke  <olemke@uni-bremen.de>

        * arts-1-1-217
        
        * src/physics_funcs.cc (invrayjean): Merged bug fix from arts-1-0.

2002-08-26  Sreerekha T.R.  <rekha@uni-bremen.de>
        
        * arts-1-1-216
        
        * src/m_scatrte.cc (scat_fieldCalc): Fixed a bug in this
        method. Earlier it was giving same field for all viewing angles of
        a particular pressure level.  
        
2002-08-23  Sreerekha T.R.  <rekha@uni-bremen.de>

        * arts-1-1-215
        
        * doc/uguide/integration.tex: Added this documentation for
        integration. 

        * doc/uguide/main.tex, doc/uguide/Makefile.am : Added
        integration.tex.

        * doc/uguide/scattering.tex : Improved the documentation for the
        method i_fieldSet.

2002-08-22  Oliver Lemke  <olemke@uni-bremen.de>

        * arts-1-1-214
        
        * src/m_scatrte.cc: Use ostringstream instead of sprintf.

2002-08-22  Claudia Emde  <claudia@sat.physik.uni-bremen.de>

        * arts-1-1-213

        * src/m_scatrte.cc (i_fieldUpdate1D): Modified this function to get
        boundary conditions right. Some loops are rearranged so that the 
        function is more efficient. The values of the zenith angles are taken 
        as criterion for upward or downward propagation.
        The special case (zenith angle a bit higher than 90�) is still not 
        included. Here the first intersection point is at the same altitude
        as the initial point.
        
2002-08-22  Oliver Lemke  <olemke@uni-bremen.de>

        * arts-1-1-212

        * src/Makefile.am (test_interpolation_SOURCES): Copy list of
        sources from arts_SOURCES (Without main.cc on second try :-))
        because we nearly need everything here.

        * src/test_interpolation.cc (test01): Don't define joker class.

2002-08-21  Patrick Eriksson  <patrick@rss.chalmers.se>

        * arts-1-1-211

        * src/m_scatrte.cc: Added #include <stdio.h> to nmake sprintf known.

        * src/m_physics.cc: Added this file and moved methods for conversion
        to Tb to this file.

        * src/check_input.cc (chk_not_empty): Added this function to give
        an error if an agenda is empty (that should never be alowed, or?).
        This function is now called in "my parts" before an agenda is used.

        The inclusion of agendas in check_input has made that 
        test_interpolation cannot now be linked. I started to add files to
        the sources for test_interpolation, but I just needed to add more.

        What to do? Can test interpolation be removed?

        * src/rte.cc: Added header to the functions in the file. Note 
        especially the function ground_reflection_with_emission that is
        intended as a general function to call to consider ground reflections
        with emission.

        * src/m_rte.cc (RteEmissionStd): The function now uses *t_field*
        to determine the temperature along the propagation path.

        * src/m_rte.cc (RteCalc): The function has been slightly modified as
        a preperation to include Hb. 

        * doc/uguide/fm_definitions.tex: The existing text, beside part on
        ground reflections, has been revised and adapted to changes in the
        source code.

2002-08-20  Sreerekha T.R.  <rekha@uni-bremen.de>
        
        * arts-1-1-210
        
        * src/m_scatrte.cc: Added the method *Tensor6ToTbByPlanck* and
        removed the method i_fieldtoTb.  This
        is a Generic method following yesterday's discussion.  But the
        frequency grid is taken as specific input.  This is because,
        inside cloudbox we have only one frequency which is specified by
        the variable scat_f_index.  And mostly intensity fields inside the
        cloudbox only are Tensor6. 

        * src/methods.cc : Added the method Tensor6ToTbByPlanck and
        removed the method i_fieldtoTb.

        * doc/examples/i_field_example.i_field_Tb.xml : Removed this
        output file following ARTS convention of not including the output
        files. 

        * doc//examples/i_field_example.arts.in : Usage of Generic method
        Tensor6ToTbByPlanck instead of i_fieldtoTb.

2002-08-20  Claudia Emde  <claudia@sat.physik.uni-bremen.de>

        * arts-1-1-209

        * src/scat_rte.cc (convergence_flagAbs): Included a counter for the 
        number of iterations. Each iteration field is written to a file. This
        modification is only made for testing the convergence behaviour and 
        will be removed later.

2002-08-19  Claudia Emde  <claudia@sat.physik.uni-bremen.de>

        * arts-1-1-208

        * src/scat_rte.cc (i_fieldUpdate1D): Fixed some bugs related to the
        boundary conditions. 

2002-08-19  Sreerekha T.R.  <rekha@uni-bremen.de>

        * arts-1-1-207
        
        * src/m_scatrte.cc (i_fieldtoTb): This method converts the i_field
        in radiance units to Planck brightness temperature.  This uses the
        function *invplanck* in physics_funcs.cc 

        * src/methods.cc : Added the method i_fieldtoTb.

        * src/workspace.cc : Added the workspace variable i_field_Tb.

        * doc/examples/clearskyfield.xml : This is an example file added
        to give realistic input to the interface at cloudbox boundaries.
        This is created from ARTS.1.0.  The boundaries in pressure
        altitudes are 360 hPa and 280 hPa.

        * doc/examples/i_field_example.arts.in : The cloudbox boundary is
        changed to 360 hPa and 280 hPa. The example can now read the
        interface field from the above file.  The pnd_field is changed
        from 1 to a more realistic value 1297m^(-3).  The example file was
        giving a decent output until the last update.  After the last
        update the i_field is giving 0 and nan at some places because of
        which I cannot run this example.  But for having a look at the
        initial result I have a copy of the result in my smiles_local
        which I can add to the repositary which can be removed later.  

        * doc/examples/i_field_example.i_field_Tb.xml : This is the
        i_field in brightness temperature unit for 4 pressure grids(2 at
        cloudbox boundary and 2 inside the cloud box) inside
        the cloudbox. 

2002-08-19  Claudia Emde  <claudia@sat.physik.uni-bremen.de>

        * arts-1-1-206  
                
        * src/m_scatrte.cc (i_fieldUpdate1D): Included cloudbox boundary 
                conditions. Radiation travelling out of the cloudbox is 
                defined to be 0 as it is not needed for the iterations.
                
        * src/m_scatrte.cc (stokes_vecGeneral): Bug fixed.

        * src/test_linalg.cc (test_lusolve1D): Added this function to see
                if the LU decomposition also works for scalar equations.
        
2002-08-16  Sreerekha T.R.  <rekha@uni-bremen.de>

        * arts-1-1-205          
                
        * configure.in: While checking in last time, I edited  cd .. in
        this file by mistake.  

        * doc/examples/i_field_example.arts.in : Forgot to add this file to
        the repository.

        * doc/examples/Makefile.am : Forgot to add this in the list
        arts_examples 

2002-08-15  Sreerekha T.R.  <rekha@uni-bremen.de>

        * arts-1-1-204

        * src/m_scatproperties.cc (abs_vec_gasExample): Added this
        method.  This method is implemented for test purposes.  It is
        necessary to have some realistic values of absorption coefficents
        for radiative transfer calculations. The absorption coefficients
        calculated using ARTS.1.0 are used in this method and they are
        interpolated onto the pressure grid used for RT calculations.

        * src/m_scatproperties.cc (ext_mat_gasExample): This method is
        also for facilitating test calculations.  This gives extinction
        matrix for gaseous species.  The diagonal elements are the
        absorption coefficients calculated from abs_vec_gasExample and the
        off-diagonal elements are zero.  

        * src/methods.cc : Added the above two methods with minimum
        documentations. 
        
        * doc/examples/i_field_example.arts : This is an example control
        file which can be used to test the scattering RT calculation.
        
2002-08-14  Patrick Eriksson  <patrick@rss.chalmers.se>

        * arts-1-1-203

        * src/m_rte.cc (RteEmissionStd): Pieces of this function have been 
        lifted out to be functions in rte.cc. This to make it easier to make
        other verions of methods for rte_agenda.

        * src/workspace.cc: The variable *e_ground* is now a matrix to allow
        more elaborated treatments of ground reflections later.

        * To summerize. The ground is now included in the RTE part. Spectra
        can be produced, but only for dummy atmospheric temperature and 
        absorption. No connection with the cloud box yet.

2002-08-11  Patrick Eriksson  <patrick@rss.chalmers.se>

        * arts-1-1-202

        * src/workspace.cc: New WSV is mblock_index. The usage of a_pos and 
        a_los has been extended.

        * src/agendas.cc: New agenda is i_space_agenda.

        * src/methods.cc: New WSM are VectorToTbByRJ, VectorToTbByPlanck,
        MatrixToTbByRJ and MatrixToTbByPlanck.

        * src/m_rte.cc (RteEmissionStd): Adopted to i_space_agenda.

        * src/math_funcs.cc (integer_div): New function.

        * src/logic.cc (is_multiple): New function.

2002-08-09  Sreerekha T.R.  <rekha@uni-bremen.de>

        * arts-1-1-201
        
        * src/m_scatrte.cc (i_fieldUpdate1D): The changes made here are
        mainly with reference to the size of i_field and scat_field.  This
        comes in all methods which use these variables.  For example, In
        the previous version the size of i_field was 
        i_field( N_p, N_lat, N_lon, N_za, N_aa, N_i ) whereas now it is
        changed to i_field( cloudbox_limits[1] - cloudbox_limits[0]) +1,
                        ( cloudbox_limits[3] - cloudbox_limits[2]) +1,
                        ( cloudbox_limits[5] - cloudbox_limits[4]) +1,
                         N_za, N_aa, N_i ).
        The code doesn't look very clean now because i have commented some
        parts of the code for Claudia to have a look at the changes i have
        made because she has written them.

        I had quite lot of problem at cloudbox boundaries while taking the
        average of *i_field* and *scat_field*.  That part has to be for
        sure rewritten.  But at present I retain them and comments on it
        will be really helpful.  

        * src/m_scatrte.cc (i_fieldIterate):There is some change in the
        input to *i_fieldIterate* which I forgot to enter in the Changelog
        file earlier.  The new input added to this method is scat_aa_grid.

        * src/m_scatrte.cc (scat_fieldCalc): Some bugs are fixed, as usual.

        * src/methods.cc : Changed inputs to i_fieldIterate.

        * src/workspace.cc : Changed the dimensions of i_field,
        i_field_old and scat_field.  Change the usage of amp_mat as output
        from amp_matCalc

2002-08-09  Patrick Eriksson  <patrick@rss.chalmers.se>

        * arts-1-1-200

        * src/m_rte.cc (RteCalc): This function should now be ready. 

        * src/m_rte.cc (RteEmissionStd): The first attempt to create a
        method for rte_agenda.
        
        * src/m_rte.cc (VectorToTbByRJ): Started on this function. Not yet 
        ready.

        * src/m_rte.cc (yNoPolarisation): Created this function.

        * Polished on descriptions for included agendas, variables and methods.

        * The rather frequent commits depend on that I work both on the desktop
        and the laptop.

2002-08-08  Patrick Eriksson  <patrick@rss.chalmers.se>

        * arts-1-1-199

        * src/m_rte.cc (RteCalc): Introduced some new variables and agendas
        around this function. Everything very preliminary so far.

2002-08-08  Oliver Lemke  <olemke@uni-bremen.de>

        * arts-1-1-198
        
        * src/check_input.cc: Bug fix.

2002-08-05  Nikolay Koulev   <nkoulev@uni-bremen.de>

        * arts-1-1-197
        
        * src/m_lineshapes.cc (elsDoppler): Added the Doppler line shape .
        
2002-08-08  Patrick Eriksson  <patrick@rss.chalmers.se>

        * arts-1-1-196

        * src/m_rte.cc (RteCalc): Modified the input arguments and moved check
        of input to this function from ppathCalc. A first step to finish this
        function.

2002-08-05  Oliver Lemke  <olemke@uni-bremen.de>

        * arts-1-1-195
        
        * src/parser.cc (is_whitespace, eat_whitespace): Added backslash r
        as whitespace. Fixes bug which crashed arts when reading dos style
        control files under unix.
        
2002-08-01  Sreerekha T.R.  <rekha@uni-bremen.de>

        * arts-1-1-194

        * src/math_funcs.cc (AngIntegrate_trapezoid): Fixed bugs in this
        routine. 

        * scatproperties.cc : Again, fixed some bugs, mainly related to
        units of amplitude matrix, phase matrix and cross-sections. Tested
        the routines by reading in real values from the data base and it
        seems now that the calculation of scattering properties is
        correct.  I verified it with our old calculations when stokes_dim
        is equal to 1.  

2002-07-26  Sreerekha T.R.  <rekha@uni-bremen.de>
        
        * arts-1-1-193
        
        * src/m_scatproperties.cc (i_fieldSet): This methods interpolates
        the radiation field on all grid points inside the cloud box from
        the clear sky field.    This is the first guess for the iterative
        solution method.  The method is successfully tested for a 1-D case
        and hope that it works for 3-D too. 
        
        * src/methods.cc : Included the method i_fieldSet.
        
        * src/workspace.cc : Some minor corrections in the description of 
        scat_i_p and scat_i_lon.  
        
        * doc/examples : In the control file i_field.arts, added the path
        name for amplitude matrix data file.  But this data file cannot be
        used, as it has only one frequency and interpolation cannot be
        done if the old grid has only one point.  I made a new data file
        with more than one frequency and I am presently working with it
        for testing the scattering routines.  That data file is not at
        present in the package arts-data.  
        
2002-07-18  Patrick Eriksson  <patrick@rss.chalmers.se>

        * arts-1-1-192

        * src/ppath.cc (ppath_step_geom_1d): Made a new version of this 
        function, using the same approach as in the same function for 2D. The
        code of the function is now much shorter and easier to understand.
        
        * src/ppath.cc (ppath_step_geom_2d): Fixed one bug. 

        * The 1D and 2D functions give the same result, for cases when this 
        shall be the case. The both functions are now hopefully finished.

2002-07-18  Claudia Emde  <claudia@sat.physik.uni-bremen.de>

        * arts-1-1-191

        * src/interpolation.cc: Included iostream.

2002-07-17  Claudia Emde  <claudia@sat.physik.uni-bremen.de>

        * arts-1-1-190

        * doc/uguide/scattering.tex: Some corrections according to
        suggestions by Sreerekha. 

2002-07-17  Patrick Eriksson  <patrick@rss.chalmers.se>

        * arts-1-1-189

        * src/ppath.cc (ppath_step_geom_2d): 2D geometrical propagation path
        steps seem now to work, but no heavy bug checks (mainly a backup
        commit).

2002-07-15  Claudia Emde  <claudia@sat.physik.uni-bremen.de>

        * arts-1-1-188

        * doc/uguide/scattering.tex: Rewritten the explanation of the
        iteration scheme. More detailed now.

        * doc/uguide/main.tex: Renamed part III. Now it is "Mathematical
        functions" instead of "Linear algebra functions". 
        Added a new part "Theoretical background". Included chapter about
        polarization there. 

2002-07-05  Patrick Eriksson  <patrick@rss.chalmers.se>

        * arts-1-1-187

        * src/ppath.cc: The story continues. Things work much better now. A 
        number of problems fixed. There is code for all parts, but there are 
        still some wormholes for more rare cases that must be fixed.

2002-07-04  Patrick Eriksson  <patrick@rss.chalmers.se>

        * arts-1-1-186

        * src/ppath.cc: More work on 2D geom paths. A number of bugs fixed.
        Not all cases yet tested. Getting there slowly.
        (Mainly a commit to transfer changes to the laptop).

2002-07-04  Oliver Lemke  <olemke@uni-bremen.de>

        * arts-1-1-185
        
        * src/matpackVI.h (Tensor6), src/matpackVII (Tensor7): Replaced
        ',' in member element initialization list in constructors by
        '*'. This was the reason for random segfaults while copying
        Tensor6 and Tensor7.

2002-07-04  Patrick Eriksson  <patrick@rss.chalmers.se>

        * arts-1-1-184

        * src/ppath.cc: More work on 2D geoemtrical propagation paths. 
        A first version ready, but all bugs must be fixed and probelms with
        numerical inaccuracies must be handled (tricky, tricky).
        New functions:
           geompath_from_r1_to_r2
           za_geom2other_point
           psurface_r_at_lat_2d
           ppath_copy
           ppath_append
           ppath_fill_2d
        
2002-07-03  Patrick Eriksson  <patrick@rss.chalmers.se>

        * arts-1-1-183

        * src/ppath.cc: Work to get 2D geometrical propagation paths to work.
        Not yet ready. This is mainly a backup commit.

        * src/m_ppath.cc: As above, but the work in this is hopefully ready.

        * src/interpolation.cc (ArrayOfGridPosPrint): Created this function.

        * src/math_funcs.cc (sign): Created this function.

2002-07-03  Christian Melsheimer  <melsheimer@uni-bremen.de>

        * arts-1-1-182

        * doc/uguide/Makefile.am (texfiles): Added entries
        polarization.tex and scattering.tex 

2002-07-03  Sreerekha T.R.  <rekha@uni-bremen.de>
        
        * arts-1-1-181
                
        * doc/uguide/scattering.tex: Added documentation for the method
        *amp_matCalc*

2002-07-02  Claudia Emde  <claudia@sat.physik.uni-bremen.de>

        * arts-1-1-180

        * doc/uguide/scattering.tex: Added description for the scattering 
        database and the reading routines. Furthermore the documentation
        for the convergence test.

        * doc/uguide/references.bib: Added references for Mishchenko code.

        * src/workspace.cc: Fixed documentation for *amp_mat_raw*.

2002-07-02  Sreerekha T.R.  <rekha@uni-bremen.de>
        
        * arts-1-1-179
        
        * src/m_scatproperties.cc (amp_matCalc): Added the method
        amp_matCalc which calculates the workspace variable
        amp_mat from amp_mat_raw.  amp_mat_raw is in this
        method an ArrayOfArrayOfTensor6.

        * src/methods.cc : Added this method.

        * src/m_scatrte.cc : Fixed some bugs in the method 
        scat_fieldCalc.

2002-07-02  Christian Melsheimer  <melsheimer@uni-bremen.de>

        * arts-1-1-178

        * doc/uguide/polarization.tex: Added more details, especially on
        how to measure the Stokes parameters.

2002-07-01  Claudia Emde  <claudia@sat.physik.uni-bremen.de>

        * arts-1-1-177

        * src/m_cloudbox.cc (ParticleTypeAdd), (ParticleTypeInit): Modified
        the methods. Now, it is avoided to copy tensors so that the
        methods are more efficient.

        * src/workspace.cc: Modified entries for the methods above.
                
        * src/groups.cc, m_clonesize.cc, matpackIII.h, matpackVI.h,
        xml_io.cc,groups.cc: Included ArrayOfArrayOfTensor3 and
        ArrayOfArrayOfTensor6 everywhere. These datatypes are needed to be
        able to use the gridded fields efficiently.

2002-06-29  Stefan Buehler  <sbuehler@uni-bremen.de>

        * arts-1-1-176

        * src/m_abs.cc (xsec_per_tgAddLines): Suppressed output of all
        transitions to do to out3. This takes longer than the calculation
        itself, if you calculate with the entire HITRAN database!

2002-06-28  Stefan Buehler  <sbuehler@uni-bremen.de>

        * arts-1-1-175

        * src/interpolation.cc (interpweights): Added "red" interpweights
        functions for dimensions 1 to 6.
        (interp): Added "red" interp functions for dimensions 1 to 6.
        Red interpolation means interpolation to a scalar. This is not yet
        tested at all.

2002-06-28  Oliver Lemke  <olemke@uni-bremen.de>

        * arts-1-1-174
        
        * src/m_cloudbox.cc (ParticleTypeAdd): Bugfix - endl not working
        in out2, replaced by newline.
        
2002-06-28  Oliver Lemke  <olemke@uni-bremen.de>

        * arts-1-1-173
        
        * src/gridded_fields.cc: Include iostream.
        
        * src/scatproperties.h: Removed non-used headers from includes.
        
        * src/scatproperties.cc: Moved include logic.h from header file.

        * src/test_tensor.cc, src/ppath.cc, src/poly_roots.cc,
        src/physics_funcs.cc, src/m_scatrte.cc, src/m_scatproperties.cc,
        src/m_ppath.cc, src/m_io.cc, src/m_hdf.cc, src/m_atmosphere.cc,
        src/math_funcs.cc, src/m_abs.cc, src/lineshapes.cc,
        src/lin_alg.cc, src/interpolation.cc, src/file.cc,
        src/continua.cc, src/cloudbox.cc: Include c++ header cmath instead
        of math.h.

        * src/arts.h: Removed commented list of non-included standard
        headers.

        * src/main.cc (main): Output precision with -v.

        * src/test_matpack.cc: Include cmath to compile properly on HP-UX.

2002-06-27  Claudia Emde  <claudia@sat.physik.uni-bremen.de>

        * arts-1-1-172
                
        * src/workspace.cc: Modified the documentation for *amp_mat_raw*
        and *pnd_field_raw*. We decided that these variables are gridded 
        fields.

        * src/gridded_fields.cc: Included error messages, runtime errors 
        instead of 'cout'.
        
2002-06-19  Stefan Buehler  <sbuehler@uni-bremen.de>

        * arts-1-1-171

        * doc/uguide/app_groups.tex: Replaced "WSV" by "workspace variable".

2002-06-27  Claudia Emde  <claudia@sat.physik.uni-bremen.de>

        * arts-1-1-170

        * src/gridded_fields.cc/h: Added. Reading routines for gridded
        fields which use Olivers gridded tensor validation routines.

        * src/Makefile.am: Added gridded_fields.cc/h.

        * src/m_cloudbox.cc: Added new methods (ParticleTypeInit) and
        (ParticleTypeAdd) to read from the scattering database and construct
        *amp_mat_raw*. 

        * src/methods.cc: Included the methods above.
                
        * src/m_scatrte.cc: Modified (i_fieldIterate), the scattering
        integral function is now included. 
                
2002-06-26  Oliver Lemke  <olemke@uni-bremen.de>

        * arts-1-1-169

        * src/test_griddedtensorcheck.cc: Added. Optimized gridded tensor
        validation routines. Temporarily added for testing, could be
        removed in the near future when everything works as expected.

        * src/Makefile.am: Added target test_griddedtensorcheck.

        * src/xml_io.cc (xml_read_from_stream): Added better error output
        when data reading fails (Only for tensor6 at the moment).

2002-06-26  Christian Melsheimer  <melsheimer@uni-bremen.de>

        * arts-1-1-168

        * doc/uguide/main.tex (paragraph{#1}}): Added \include{polarization}.

        * doc/uguide/scattering.tex: Moved section "Polarization and
        Stokes Parameters" to new file and chapter.

        * doc/uguide/polarization.tex: Created new file and moved the
        section "Polarization and Stokes Parameters" (was in
        scattering.tex, see arts-1-1-166) here, it is now a chapter.

2002-06-26  Oliver Lemke  <olemke@uni-bremen.de>

        * arts-1-1-167
        
        * doc/uguide/arts_groups_to_latex.sh: Replaced remaining echos
        with cat.

2002-06-26  Christian Melsheimer  <melsheimer@uni-bremen.de>

        * arts-1-1-166

        * doc/uguide/scattering.tex: Recommitted changes (see
        arts-1-1-164), probably I forgot to save before committing
        1-1-164�...

2002-06-25  Sreerekha T.R.  <rekha@uni-bremen.de>

        * arts-1-1-165

        * doc/uguide/scattering.tex : Some modifications in the part
        regarding the calculation of scattering properties.  Added the
        section about calculating the scattering integral.
        
        * src/m_scatproperties.cc, m_scatrte.cc, workspace.cc, methods.cc:
        Renamed workspace variable pha_mat_part to pha_mat.

        * src/m_scatproperties.cc, m_scatrte.cc, workspace.cc, methods.cc:
        Renamed workspace method pha_mat_partCalc to pha_matCalc.

        * src/m_scatrte.cc, methods.cc: Renamed workspace method 
        scat_integralCalc to scat_fieldCalc to be consistent with the
        naming scheme in ARTS.
        
2002-06-25  Christian Melsheimer  <melsheimer@uni-bremen.de>

        * arts-1-1-164

        * doc/uguide/fm_definitions.tex: Americanized spelling

        * doc/uguide/symbol_defs: Redefined \Re and \Im (real and imaginary
        part (now: non-italic "Re" and "Im", like function names)

        * doc/uguide/ppath.tex: Americanized spelling.

        * doc/uguide/scattering.tex: Added section "Polarization and
        Stokes Parameters", did spell check and americanized spelling.

2002-06-25  Oliver Lemke  <olemke@uni-bremen.de>

        * arts-1-1-163
        
        * src/xml_io.cc (read_from_stream): Fixed bug when more data is
        available inside tag than expected.

        * doc/uguide/arts_groups_to_latex.sh: Use cat instead of echo to
        avoid misinterpretation of escape chars.

        * doc/uguide/arts_methods_to_latex.sh: Rewritten. Use case instead
        of if/grep combinations -> speedup by factor 10.
        
        Use cat instead of echo to avoid misenterpretation of escape chars.

        * doc/uguide/app_methods.tex: Modified text.

2002-06-25  Sreerekha T.R.  <rekha@uni-bremen.de>
        
        * arts-1-1-162
        
        * doc/examples/scatproperties_example.arts.in: I
        forgot to add this file while checking in last time.
                
2002-06-25  Sreerekha T.R.  <rekha@uni-bremen.de>
        
        * arts-1-1-161
        
        * src/m_scatrte.cc: The method scat_integralCalc is 
        extended for 3-d case.  

        * src/m_scatproperties.cc : Added more comments and 
        checks.

        * doc/examples/scatproperties_example.arts.in : I used 
        this control file to check the methods used for 
        calculating single scattering properties.

2002-06-24  Sreerekha T.R.  <rekha@uni-bremen.de>

        * arts-1-1-160

        * src/m_scatrte.cc (scat_integralCalc): Added the workspace
        variables pha_mat_spt and pnd_field as input to this method.
        Earlier pha_mat_part was directly given as input, but now we
        calculate pha_mat_part inside the method from pha_mat_spt 
        and pnd_field.  

        * src/methods.cc: The inputs are changed here also. The 
        documentation is also modified.
                
2002-06-21  Claudia Emde  <claudia@sat.physik.uni-bremen.de>
        
        * arts-1-1-159

        * m/scatrte.cc (i_fieldUpdate1D) and (i_fieldIterate): Some
        modifications to include the scattering integral. 
        Calculation of optical properties modified.

        * src/methods.cc: Changed interfaces for the methods above.
        
2002-06-21  Sreerekha T.R.  <rekha@uni-bremen.de>

        * arts-1-1-158
        
        * src/m_scatrte.cc : Added the method scat_integralCalc which
        computes the scattering integral.

        * src/methods.cc : Added the method scat_integralCalc.
        
2002-06-21  Sreerekha T.R.  <rekha@uni-bremen.de>

        * arts-1-1-157
        
        * src/m_scatproperties.cc (abs_vec_partCalc): Changed the inputs
        to methods abs_vec_partCalc, ext_mat_partCalc, pha_mat_partCalc.

        * src/methods.cc : Changed the inputs for the above methods.

2002-06-20  Claudia Emde  <claudia@sat.physik.uni-bremen.de>

        * arts-1-1-156

        * src/m_rtescat.cc (i_fieldUpdate1D) and (i_fieldIterate):
        Included the functions and agendas for calculating the optical
        properties. Modified the interfaces of the functions.
        (convergence_flagAbs): Limiting values for the convergence test
        are now keywords, which can be specified in the control file.
        
        * src/methods.cc: Adapted interfaces according to the changes
        above.

        * doc/i_field.arts: Added agenda definitions for the calculations
        of optical properties.

2002-06-20  Claudia Emde  <claudia@sat.physik.uni-bremen.de>

        * arts-1-1-155
                
        * src/m_scatproperties.cc: Fixed and marked some bugs.

        * src/workspace.cc: Added variables *scat_p_index*, 
        *scat_lat_index*, *scat_lon_index*.

2002-06-19  Claudia Emde  <claudia@sat.physik.uni-bremen.de>

        * arts-1-1-154
                
        * src/workspace.cc: Added variables *amp_mat_raw* and
        *pnd_field_raw*.
                
        * src/groups.cc: Included ArrayOfTensor3 and ArrayOfTensor6 to be
        able to include the variables above.

        * src/xml_io.cc: Added reading and writing routines for
        ArrayOfTensor3 and ArrayOfTensor6.

        * src/m_clonesize.cc: Included ArrayOfTensor3 and ArrayOfTensor6.

        * src/m_scatrte.cc: Included this file. It should contain all
        functions concerning the radiative transfer inside the scattering
        box. 
        Worked on (i_fieldUpdate1D). Tried to put in Sreerekhas functions.
        This is not finished yet.

        * src/methods.cc: Modifications of the interfaces of
        (i_fieldUpdate1D) and (i_fieldIterate).
        
        * src/Makefile.am: Included m_scatrte.cc.

        * src/m_cloudbox.cc: Shifted a lot of functions to m_scatrte.cc.

        * src/agendas.cc: Only small modifications in the documentation.

2002-06-19  Sreerekha T.R.  <rekha@uni-bremen.de>

        * arts-1-1-153

        * src/agendas.cc: Added the agendas ext_mat_agenda
        and abs_vec_agenda.

        * src/m_scatproperties.cc : The dimension of pnd field
        is changed from pnd_field ( p_grid, lat_grid, long_grid, 
        part_types) to  pnd_field ( part_types, p_grid, lat_grid,
        long_grid)
        
2002-06-18  Stefan Buehler  <sbuehler@uni-bremen.de>

        * arts-1-1-152

        * src/methods.cc: Added supergeneric ReadXML and WriteXML
        methods. Removed other XML IO methods.

        * src/m_xml.h: Added. Contains the template functions for
        supergeneric XML IO. This is the original template function from
        Oliver Lemke, I've just moved it here.

        * src/m_xml.cc: Removed.

        * src/xml_io.cc: Added dummy functions for groups for XML IO is
        not yet implemented.

        * src/make_auto_md_cc.cc: Added #include for m_xml.h.

        * doc/examples/absorption_example.arts.in: Example now uses
        supergeneric WriteXML.

        * src/groups.cc: Commented out groups TagGroups,
        ArrayOfLineRecord, and ArrayOfArrayOfLineRecord.

2002-06-18  Sreerekha T.R.  <rekha@uni-bremen.de>

        * arts-1-1-151
        
        * src/m_scatproperties.cc (abs_vecCalc): The methods
        abs_vecCalc and ext_matCalc are implemented. The method
        abs_vecCalc sums up the particle absorption vector and 
        gaseous absorption vector (abs_vec_part + abs_vec_gas) 
        and the method ext_matCalc sums up the particle extinction
        matrix and gaseous extinction matrix (ext_mat_part + ext_mat_gas).

        * src/math_funcs.cc : moved the integration routine 
        AngIntegrate_trapezoid from scatproperties.cc to here. 

        * src/methods.cc : added the methods abs_vecCalc and 
        ext_matCalc

        * src/workspace.cc : added the variables ext_mat_gas 
        and abs_vec_gas.  The documentation for this is at present
        bit clumsy.

2002-06-18  Stefan Buehler  <sbuehler@uni-bremen.de>

        * arts-1-1-150

        * src/parser.cc: Fixed handling of supergeneric methods. 

        * src/methods_aux.cc: Fixed handling of supergeneric methods. 

        * src/methods.h: Fixed handling of supergeneric methods. 

        * src/make_auto_md_h.cc: Fixed handling of supergeneric methods. 

        * src/make_auto_md_cc.cc: Fixed handling of supergeneric methods. 

        * src/methods.h: Added field mactual_group and function
        ActualGroup to MdRecord.

        * src/m_clonesize.cc: Name no longer contains group.

        * src/methods.cc: Added Ignore.

        * src/m_ignore.h: Added. Implementation of supergeneric Ignore
        method. 

        * src/m_copy.cc: Removed.

        * src/m_copy.h: Added. Implementation of supergeneric Copy method
        is now a template function here.

        * src/Makefile.am: Added m_copy.h, m_ignore.h, remove m_copy.cc.

        * doc/examples/absorption_example.arts.in: Example uses now
        CloneSize and Ignore.

2002-06-18  Oliver Lemke  <olemke@uni-bremen.de>

        * arts-1-1-149
        
        * doc/uguide/app_methods.tex: Added.

        * doc/uguide/main.tex: Include app_methods.tex.

        * doc/uguide/.cvsignore: Added auto_methods.tex.

        * doc/uguide/Makefile.am: Added auto_methods.

        * doc/uguide/arts_methods_to_latex.sh: Added. Converts online
        documentation to latex.

        * src/methods.cc: Removed "backslash a"-typo from descriptions.

2002-06-18  Sreerekha T.R.  <rekha@uni-bremen.de>

        * arts-1-1-148

        * src/m_scatproperties.cc (pha_mat_partCalc): Added this method
        which calculates the phase matrix.  

        * src/workspace.cc : added variables pha_mat_part

        * src/methods.cc : added the method pha_mat_partCalc.

2002-06-18  Oliver Lemke  <olemke@uni-bremen.de>

        * arts-1-1-147

        * src/methods_aux.cc: Removed default argument which is already
        given in declaration.
        
2002-06-18  Oliver Lemke  <olemke@uni-bremen.de>

        * arts-1-1-146

        * src/methods.cc: Changed all md_data. to md_data_raw.

2002-06-17  Sreerekha T.R.  <rekha@uni-bremen.de>

        * arts-1-1-145

        * src/m_scatproperties.cc (abs_vec_partCalc): Added the methods
        abs_vec_partCalc and ext_mat_partCalc.  These methods sums up 
        the absorption as well as extinction matrices for single particle
        types weighted with the particle number density.

        * src/workspace.cc : added variables ext_mat_part, abs_vec_part
        and pnd_field.

        * src/methods.cc : added the method abs_vec_partCalc and 
        ext_mat_partCalc.

2002-06-17  Stefan Buehler  <sbuehler@uni-bremen.de>

        * arts-1-1-144

        * General: First implementation of supergeneric methods. Not quite
        finished yet, there are some things I want to modify in the next
        version. But basically it works.

        * src/supergeneric.h: Added.

        * src/m_copy.cc: Added.

        * src/m_clonesize.cc: Added.

        * src/groups.cc: Added group Any_.

        * src/methods.cc: Added supergeneric methods CloneSize and Copy.

        * src/parser.h: Put in supergeneric methods.

        * src/parser.cc: Put in supergeneric methods.

        * src/methods_aux.cc: Put in supergeneric methods.

        * src/methods.h: Put in supergeneric methods.

        * src/make_auto_wsv_groups_h.cc: Put in supergeneric methods.

        * src/make_auto_md_h.cc: Put in supergeneric methods.

        * src/make_auto_md_cc.cc: Put in supergeneric methods.

        * src/main.cc: Put in supergeneric methods.

        * src/globals_2.cc: Put in supergeneric methods.

        * src/Makefile.am: Added new source files.

        * src/matpackI.h (Matrix& Matrix::operator=(const Matrix& m)): 
        Added comment to doxygen header about deprecated resizing for
        empty target.
        (Vector& Vector::operator=(const Vector& v)): Implemented resizing for
        empty target, to allow ArrayOfVector (should we ever need
        this). Added comment to doxygen header about deprecated use of
        this feature in user code.

2002-06-17  Claudia Emde  <claudia@sat.physik.uni-bremen.de>

        * arts-1-1-143

        * src/m_cloudbox.cc (convergence_flagAbs): Added this function. It
        performs a convergence test checking the maximal absolute
        difference for all components of the radiation field.

        * src/workspace.cc: Added variables *convergence_flag* and
        *i_field_dim* (for a 1D atmosphere the radiation field can be 2D
        or 3D!)
                
        * src/methods.cc: Added method *convergence_flagAbs*.

        * src/agendas.cc (convergence_test_agenda): Added the agenda for
        the convergence test.

2002-06-17  Oliver Lemke  <olemke@uni-bremen.de>

        * arts-1-1-142
        
        * doc/uguide/arts_groups_to_latex.sh: Fixed doc header to use
        $ARTS and only use the first line from arts -v output.

2002-06-15  Sreerekha T.R.  <rekha@uni-bremen.de>
        
        * arts-1-1-141
        
        * src/m_scatproperties.cc (abs_vec_sptCalc): modified this method.
        Added *scat_za_grid* and *scat_aa_grid* as inputs to this method
        since this is required for integration of the phase matrix.  

        * src/methods.cc : added  *scat_za_grid* and *scat_aa_grid* as 
                input to the method abs_vec_sptCalc.
        
2002-06-14  Sreerekha T.R.  <rekha@uni-bremen.de>

        * arts-1-1-140
        
        * src/scatproperties.cc,
          m_scatproperties.cc : a quick modification on the 
                coding style following Oliver's suggestions.
        
2002-06-14  Oliver Lemke  <olemke@uni-bremen.de>

        * arts-1-1-139
        
        Merged changes from ARTS-1-0 branch.
        
        * src/main.cc (main): Output os info with -v.
        
        * src/getopt.h: Use getopt_long prototyping for GNU C, HP-UX and
        SunOS.

        * configure.in: Determine operating system name and version. Name
        is defined in OS_NAME, version in OS_VERSION.

2002-06-14  Claudia Emde  <claudia@sat.physik.uni-bremen.de>

        * arts-1-1-138
                
        * doc/uguide/scattering.tex: Modified documentation according to
        the methods in (scatproperties.cc) and (m_cloudbox.cc). 

2002-06-14  Sreerekha T.R.  <rekha@uni-bremen.de>

        * arts-1-1-137
        
        * src/scatproperties.cc : completed the functions amp2ext,
        amp2pha,amp2abs called by ext_mat_sptCalc, pha_mat_sptCalc
        and abs_vec_sptCalc respectively.  Added more documentation
        in the comment.  Also the new routine for solid angle integration
        of Matrix is included here. I think it is better to shift this
        function to math_funcs.cc or so.   

2002-06-14  Claudia Emde  <claudia@sat.physik.uni-bremen.de>

        * arts-1-1-136

        * src/methods.cc: Included methods for RT with scattering:
        (stokes_vecGeneral) General computaion of the RTE, works for all 
        Stokes dimensions.
        (stokes_vecScalar) Special function which is more efficient for 
        computing the scalar RTE.

        * src/agendas.cc (scat_rte_agenda): Agenda to compute the RT inside
        the cloudbox.

        * src/workspace.cc: Included workspace variables for the methods
        above:
        - stokes_vec
        - l_step
        - planck_function
        - ext_mat
        - abs_vec
        - sca_vec

        * src/m_cloudbox.cc: (stokes_vecGeneral) and (stokes_vecScalar)
        added. (i_fieldIterate) and (i_fieldUpdate1D) modified so that
        (scat_rte_agenda) can be executed.

        * doc/examples/i_field.arts: This example executes now
        *ppath_step_agenda* and *scat_rte_agenda*).

        * src/cloudbox.cc/h: No functions are left here at the moment.

        * src/Makefile.am: Removed cloudbox.cc/h from arts_SOURCES.
        
2002-06-13  Stefan Buehler  <sbuehler@uni-bremen.de>

        * arts-1-1-135

        * doc/uguide/agendas.tex: Continued.

        * doc/uguide/concept.tex: Started to work on this again.

        * doc/uguide/main.tex: Changed "on" to "of" in \startsymbols.

        * doc/uguide/scattering.tex: Removed some TeX warnings, together
        with Claudia.

2002-06-12  Stefan Buehler  <sbuehler@uni-bremen.de>

        * arts-1-1-134
        
        * configure.in: Updated copyright notice.

        * doc/uguide/agendas.tex: Put in Section about WSVs. Started
        Section about WSMs. Agenda WSMs and Section on Agendas still
        missing. 

        * src/workspace.cc: Only cosmetic changes.

        * src/methods.cc: Only cosmetic changes in elsLorentz.

2002-06-12  Claudia Emde  <claudia@sat.physik.uni-bremen.de>

        * arts-1-1-133

        * src/cloudbox.cc,
         src/cloudbox.h,
         src/lin_alg.cc,
         src/lin_alg.h,
         src/m_cloudbox.cc,
         src/test_linalg.cc: Formatted the files according to Olivers
         remarks on coding style.

2002-06-12  Oliver Lemke  <olemke@uni-bremen.de>

        * arts-1-1-132
        
        * configure.in: Corrected definition of ac_arts_data.

        * src/scatproperties.cc,
        src/agenda_record.h,
        src/agenda_record.cc,
        src/m_cloudbox.cc: Include iostream for cout.

2002-06-11  Stefan Buehler  <sbuehler@uni-bremen.de>

        * arts-1-1-131

        * General: Implemented automatic Input/Output checking for
        agendas. That means, you no longer have to check in the calling
        function that the agenda does what it is supposed to do. There is
        now a special lookup table for agendas in file agendas.cc. Data
        records for new agendas have to be added in both workspace.cc and
        agendas.cc, however, the DESCRIPTION in workspace.cc should just
        be a reference to agendas.cc. Only the DESCRIPTION in agendas.cc
        is used by arts -d etc..
        
        * src/agendas.cc: Added. This contains the lookup data for
        agendas. You have to edit this everytime you add an agenda. But
        nevertheless, you also have to add an entry in
        workspace.cc. Documentation for the agenda must be in agendas.cc,
        not in workspace.cc.

        * src/agenda_record.h: Added.

        * src/agenda_record.cc: Added.

        * src/agenda_class.h: Added.

        * src/agenda_class.cc: Added.

        * src/agenda.h: Moved to agenda_class.h.

        * src/agenda.cc: Moved to agenda_class.cc.

        * src/Makefile.am: Added the new source files.

        * src/workspace_aux.cc: Moved output operator of WsvRecord to
        agenda_record.cc for technical reasons.

        * src/workspace.cc: Moved agenda DESCRIPTIONS to agendas.cc for
        all agendas that have been defined so far.

        * src/parser.h: Changed name of agenda header file to agenda_class.h.

        * src/methods.cc: Updated copyright notice, updated documentation
        for AgendaSet.

        * src/make_auto_wsv_h.cc: Changed name of agenda header file to agenda_class.h.

        * src/main.cc: Made command line switches work for agendas.

        * src/m_agenda.cc: Made AgendaSet check the input and output parameters.

        * src/globals_2.cc: Added AgendaMap.

2002-06-11  Claudia Emde  <claudia@sat.physik.uni-bremen.de>

        * arts-1-1-130

        * src/m_cloudboc.cc (i_fieldUpdate1D): Extended the function such
        that it adapts automatically to the scalar case if *stokes_dim* is
        set to 1.

        * src/cloudbox.cc (sto_vec1DCalc): Added this function to do the
        scalar radiative transfer calculation.

        * doc/uguide/scattering.tex: Included the scalar RTE as a special
        case. 
        
2002-06-10  Claudia Emde  <claudia@sat.physik.uni-bremen.de>

        * arts-1-1-129

        * doc/uguide/scattering.tex: Rewritten the part for radiative
        transfer inside the cloudbox to document the already existing
        functions. 

        * doc/uguide/lin_alg.tex: Replaced \verb by \artsstyle.

2002-06-10  Sreerekha T.R.  <rekha@uni-bremen.de>

        * arts-1-1-128

        * src/m_scatproperties.cc: Added this file.  This has so far the
        workspace methods ext_mat_sptCalc,pha_mat_sptCalc and 
        abs_vec_sptCalc.  Some changes are for sure expected in these
        methods.  

        * src/methods.cc: Added the methods ext_mat_sptCalc,
        pha_mat_sptCalc and abs_vec_sptCalc. 

        * src/Makefile.am : included in the source file list
        m_scatproperties.cc,scatproperties.cc and scatproperties.h
        
2002-06-10  Sreerekha T.R.  <rekha@uni-bremen.de>

        * arts-1-1-127

        * src/workspace.cc : Added the workspace variables scat_za_index
        and scat_aa_index necessary for the methods used for calculating
        scattering properties of particles.

2002-06-08  Stefan Buehler  <sbuehler@uni-bremen.de>

        * arts-1-1-126

        * src/workspace.cc: Added some #defines (NAME, DESCRIPTION,
        GROUP), so that this file is now formated similar to methods.cc. The
        main reason why I did this is because I wanted to add fields
        OUTPUT and INPUT to list output and input WSVs for
        agendas. However, it turns out that this problem cannot be solved
        so easily. The problem is this: The enum type for the different
        WSVs (ls_, f_grid_, etc.) is defined in auto_wsv.h, which is
        generated from workspace.cc. So, using the enum inside
        workspace.cc would generate a circular dependency. I played around
        with some tricks to solve this, but they all made things very
        complicated. So, my preferred solution at the moment is to add an
        extra file agendas.cc, which will contain agenda lookup
        data. Agendas will then have to be registered in two files, both
        workspace.cc and agendas.cc.

        * src/methods.h: Moved the #defines for OUTPUT, etc., to methods.cc.

        * src/methods.cc: Moved the #defines for OUTPUT, etc., here from
        methods.h. 

2002-06-08  Patrick Eriksson  <patrick@rss.chalmers.se>

        * arts-1-1-125

        * src/ppath.cc (psurface_crossing_2d): Adapted the Matlab function
        psurface_crossing in AMI to create this function. I had to handle
        the case c=0 especially due to a limitation of poly_root_solve
        compared to the Matlab function roots. 
        Tests performed of the function and it looked OK.

2002-06-07  Stefan Buehler  <sbuehler@uni-bremen.de>

        * arts-1-1-124

        * doc/uguide/main.tex: Changed header for \typeindex from "data
        structures" to "data types". Added \include for app_groups.tex.

        * doc/uguide/matrix_vector.tex: Replaced \verb by \artsstyle. Added
        some index commands.

        * doc/uguide/development.tex: Replaced \verb by \artsstyle. Added
        some index commands.

        * doc/uguide/app_groups.tex: Added this file. It lists all WSV
        groups. 

        * doc/uguide/arts_groups_to_latex.sh: Added this script (written
        by Oliver), which puts the output of arts -g into LaTeX commands.

        * doc/uguide/Makefile.am: Added target auto_groups.tex, which is
        generated by the arts_groups_to_latex.sh script. Added variable
        $(autotexfiles), which now holds only auto_groups.tex.
        NOTE: If you try to build in doc/uguide with a pristine ARTS
        package (after make maintainer-clean at toplevel), you will now
        get an error message, because the arts executable is needed to
        generate auto_groups.tex. If you say make at toplevel, src is
        built first, so there is no problem.

        * doc/uguide/.cvsignore: Added auto_groups.tex.

        * src/main.cc (main): Changed output stream for --help and
        --version options from cerr to cout. Also, removed "This is" from
        --version output.

        * src/.cvsignore: Added test_scatproperties.

2002-06-07  Claudia Emde  <claudia@sat.physik.uni-bremen.de>

        * arts-1-1-123

        * src/methods.cc (i_fieldUpdate1D): Included this method to update
        the intensity field during the iteration. Performs RT calculation 
        with fixed scattered field.

        * src/m_cloudbox.cc (i_fieldUpdate1D): This function was in
        cloudbox.cc before. Now it uses the *ppath_step_agenda*, for this
        reason it is a workspace method now. 

        * src/cloudbox.cc (i_field_update1D): Removed this function.

        * src/workspace.cc: Included WSV *scat_field* and *i_field_old*.

        * doc/examples/i_field_arts: Example to test the cloudbox functions.
        
2002-06-07  Patrick Eriksson  <patrick@rss.chalmers.se>

        * arts-1-1-122

        * src/ppath.cc (ppath_start_stepping): Some more work in getting 2D to
        work. Some results are now printed on the screen.

        * src/m_ppath.cc (ppathCalc): Sensor position and LOS printed as out2.

2002-06-06  Sreerekha T.R.  <rekha@uni-bremen.de>

        * arts-1-1-121  

        * src/test_scatproperties.cc: Renamed
        src/test_opt_properties.cc to test_scatproperties.cc to be 
        consistent.

        * src/workspace.cc: corrected the dimension of pha_mat_spt.

2002-06-06  Claudia Emde  <claudia@sat.physik.uni-bremen.de>

        * arts-1-1-120

        * src/workspace.cc: Included workspace variable amp_mat_raw.
                
        * src/physics_funcs.cc: Modified functions again, so that they 
        return numeric values. 

        * src/m_rte.cc and cloudbox.cc: Adjusted to the new Planck
        function.

2002-06-06  Sreerekha T.R.  <rekha@uni-bremen.de>

        * arts-1-1-119

        * src/scatproperties.cc : Added this file.  This contains some
        auxiliary functions like amp2ext,amp2pha,amp2abs which is called 
        by the workspace methods like ext_mat_sptCalc,pha_mat_sptCalc and
        abs_vec_sptCalc( Adding these methods is my immediate task.)

        * src/scatproperties.h : Added this file
        
        * src/test_opt_properties.cc (main): I added this file mainly 
        to test the scattering routines in scatproperties.cc

2002-06-05  Stefan Buehler  <sbuehler@uni-bremen.de>

        * arts-1-1-118

        * doc/uguide/agendas.tex: Continued to work on this.

        * doc/uguide/development.tex: Added references to the WSV, WSM,
        and agendas chapter in howtos.

        * src/agenda.h: Added set_name() and name() member functions to
        class Agenda, also added private member mname.

        * src/agenda.cc: Added implementation of set_name() and name().

        * src/main.cc: Set name for Main agenda.

        * src/parser.cc (parse_method): Removed duplicate level 3
        output. Cleaned up agenda output.

        * src/workspace.cc (define_wsv_data): Replace "function" by "method".

        * src/m_method_list.cc: Removed.

        * src/method_list.h: Removed.

2002-06-05  Sreerekha T.R.  <rekha@uni-bremen.de>
        
        * arts-1-1-117
        
        * src/workspace.cc: Added workspace variables, ext_mat_spt,
        pha_mat_spt, and abs_vec_spt.  

2002-06-05  Stefan Buehler  <sbuehler@uni-bremen.de>

        * arts-1-1-116

        * doc/uguide/agendas.tex: Started this file. It contains
        documentations about WSVs, WSMs, and particularly agendas. By
        doing this I noticed that WSM are sometimes called "workspace
        methods" and sometimes "workspace functions". But names should be
        consistent within AUG. Method is the older and more established
        term (that's for example why WSM files are called
        m_something.cc). So, I tried to enforce "method"
        everywhere. Please use the name "method" in future.

        * doc/uguide/main.tex: Renamed \structindex to \typeindex, as
        suggested by Sreerekha/Patrick. Replaced "workspace functions" by
        "workspace methods". Replaced \wsfindex by \wsmindex.

        * doc/uguide/scattering.tex: Replaced \wsfindex by \wsmindex.
        Replaced \wsmindex by \wsvindex for agendas, since agendas are
        WSVs, not WSMs. Replaced \wsmindex by \funcindex for matrix_exp,
        since this is a normal function, not a WSM. I suspect there are
        more functions marked by \wsmindex that really should be marked by
        \funcindex.

        * doc/uguide/lin_alg.tex: Replaced \wsfindex by \wsmindex.

        * doc/uguide/fm_definitions.tex: Replaced "workspace functions" by
        "workspace methods". Replaced \wsfindex by \wsmindex.

        * doc/uguide/concept.tex: Replaced "functions" by "methods".

        * doc/uguide/ppath.tex: Renamed \structindex to \typeindex, as
        suggested by Sreerekha/Patrick. Replaced "workspace functions" by
        "workspace methods". Replaced \wsfindex by \wsmindex.

        * doc/uguide/interpolation.tex: Renamed \structindex to \typeindex, as
        suggested by Sreerekha/Patrick.

2002-06-04  Patrick Eriksson  <patrick@rss.chalmers.se>

        * arts-1-1-115

        * src/ppath.cc: Just some small steps forward for 2D. Status basically
        as for last commit from me.

        * doc/uguide/fm_definitions.tex: Polished the text. I happen to do this
        on the same time as Christian did his changes below and this caused
        a number of conflicts when updating. I hope that I managed to keep your
        changes Christian. 

        * doc/uguide/ppath.tex: Polished the text. Conflicts as above.

2002-06-04  Christian Melsheimer  <melsheimer@uni-bremen.de>

        * arts-1-1-114

        * doc/uguide/ppath.tex:  Fixed minor spelling/grammar errors.

        * doc/uguide/formalism.tex: Fixed minor spelling/grammar errors.

        * doc/uguide/fm_definitions.tex: Fixed minor spelling/grammar errors.

        * doc/uguide/introduction.tex: Fixed minor spelling/grammar error.

2002-06-04  Stefan Buehler  <sbuehler@uni-bremen.de>

        * arts-1-1-113

        * doc/examples/absorption_example.arts.in: The first agenda
        example works! Method lsWithCutoffAdd uses agenda els_agenda to
        compute the elementary lineshape.

        * src/methods.cc: Modified IO parameters of elsLorentz and
        lsWithCutoffAdd. 

        * src/workspace.cc (define_wsv_data): Introduced els, the WSV to
        hold the output of the els_agenda.

        * src/m_lineshapes.cc: Finished lsWithCutoffAdd.

        * src/interpolation.cc (interp): Added to all interp functions an
        assert that makes sure that the sum of all weights for the first
        interpolated value is 1. This condition should be fulfilled for
        all the weights, of course, but we check only the first set of
        weights.

2002-06-04 Claudia Emde  <claudia@sat.physik.uni-bremen.de>

        * arts-1-1-112

        * src/m_cloudbox.cc (i_field_itCalc): The method can be compiled and 
        tested using dummy variables for the scattering coefficients. But so
        far it only performs the update of the i_field for the 
        1D case.

        * src/workspace.cc: Changed amp_mat from Tensor7 to Tensor6. The 
        frequency dimension is taken out.
        
        * src/methods.cc: Changed amp_mat as input variable for  
        (i_field_itCalc).
        
        * src/physics_funcs.cc (planck): Fixed a bug here.

        * doc/uguide/scattering.tex: Started to write about 1D scattering 
        calculations.

2002-06-03  Patrick Eriksson  <patrick@rss.chalmers.se>

        * arts-1-1-111

        * src/ppath.cc (ppath_start_stepping): Worked on this function for 2D.
        Finished for sensor positions inside the model atmosphere. More
        to do for other starting points.
        New internal functions:
           psurface_slope_2D
           psurface_tilt_2D
           is_los_downwards_2D
           angle_after_ground_2D

        * src/m_ppath.cc: Two now WSF:
           a_posAddRgeoid
           sensor_posAddRgeoid

2002-05-31  Stefan Buehler  <sbuehler@uni-bremen.de>

        * arts-1-1-110

        * Uff. I had some trouble resolving conflicts in workspace.cc. I
        seems that resorting this file (and methods.cc) was not such a
        great idea, since it leads to a lot of conflicts.
        
        * Started to work out agenda examples for lineshapes. Ran into a
        lot of problems (not so much related to the agendas, more to the
        lineshapes themselves). Nothing's working yet.

        * src/m_lineshapes.cc: Added.

        * src/workspace.cc: Added some lineshape variables.

        * src/methods.cc: Added some lineshape related methods. 
        (define_md_data): Removed abs_ from RteCalc input, following
        advice by Patrick. 
        (define_md_data): Replace "Global" by "Generic" everywhere.

        * src/groups.cc (define_wsv_group_names): Removed ArrayOfLineshapeSpec.

        * src/absorption.h: Removed all lineshape stuff.

        * src/absorption.cc: Removed all contents to old_absorption.cc.

        * src/Makefile.am: Added new source files.

        * doc/examples/absorption_example.arts.in: My playing field for
        agenda based absorption routines.

        * src/m_rte.cc (RteCalc): Removed abs input, following advice by
        Patrick. 

2002-05-31  Patrick Eriksson  <patrick@rss.chalmers.se>

        * arts-1-1-109

        * src/methods.cc: Two new functions, a_posSet and a_losSet.

        * src/ppath.cc (ppath_start_stepping): Started to include 2D cases.

        * doc/uguide/ppath.tex: Polished old text and wrote some pages of new 
        text. The chapter is now up to date with what has been implemented. 

        * doc/uguide: Made new versions of figures created by Latex commands.
        The new figures are made in xfig. So there should now not be any errors
        due to this when making uguide_pdf.

2002-05-31  Sreerekha T.R.  <rekha@uni-bremen.de>

        * arts-1-1-108
        
        * doc/uguide/interpolation.tex: introduced the index commands which
        make reference at the indexpage of the AUG. Changed  all \verb
        commands to \artsstyle.

2002-05-31 Claudia Emde  <claudia@sat.physik.uni-bremen.de>

        * arts-1-1-107

        * src/methods.cc: Added TensorXSet methods for all dimensions (Tensor3
        to Tensor7). Added workspace function (i_field_itCalc).
                
        * src/m_basic_types.cc: Added TensorXSet functions for all dimensions.

        * src/m_cloudbox.cc (i_field_itCalc): Added this function which 
        will calculate the radiative transfer in the cloudbox with scattering
        using the iterative method.
        
        * src/workspace.cc: Modified description for *amp_mat*.

2002-05-30 Claudia Emde  <claudia@sat.physik.uni-bremen.de>

        * arts-1-1-106

        * src/workspace.cc: Added more workspace variables for scattering.

        * src/linalg.cc (ludcp): Modified documentation of the function. 

2002-05-30  Oliver Lemke  <olemke@uni-bremen.de>

        * arts-1-1-105

        * src/workspace.cc (define_wsv_data): Added workspace variable
        xml_output_type. Type is Index: 0 means Ascii, 1 binary output.

        * src/m_ppath.cc: Include iostream.

        * src/test_xml.cc (main): Added exception handler.

2002-05-30  Patrick Eriksson  <patrick@rss.chalmers.se>

        * arts-1-1-104

        * Things fixed for this commit, or in 1-1-99:
        
        * Some workspace functions have been renamed. 
          - The PrintXxx functions now ends with Pring, e.g. NumericPrint.
          - The functions to set the atmospheric dimensionality are now called
            AtmosphereSet1D etc.
        This to follow our naming scheme better.
        
        * New workspace functions:
           FlagOn
           FlagOff
           i_spaceCBR
           e_groundSet
           AntennaSet1D
           AntennaSet2D

        * Improved the out-messages from some functions, especially in 
        m_basic_types, but there is more to do here.

        * Started on the RTE part, but found it hard before the agendas are
        ready. So I leave this for the moment.

2002-05-30 Claudia Emde  <claudia@sat.physik.uni-bremen.de>

        * arts-1-1-103

        * src/cloudbox.cc/.h: Added these files for internal calculations 
        concerning scattering.
        (i_field_update1D): Added. Updates i_field on all points inside 
        the cloudbox.
        (rte_scat_vecCalc): Added. Performs 1D radiative 
        transfer calculation with fixed scattering vector.      

        * src/linalg.cc/.h: (id_mat) Changed name of the function which 
        returns the identity matrix, as there was a conflict with another
        internal function named identity.

2002-05-29  Stefan Buehler  <sbuehler@uni-bremen.de>

        * arts-1-1-102

        * src/agenda.cc
        (nelem): Added.
        (is_input): Added.
        (is_output): Added.
        
        * src/agenda.h: Added declarations for new Agenda member functions.

        * src/m_agenda.cc (AgendaSet): Renamed from
        AgendaDefine. Implemented function body.

        * src/methods.cc (define_md_data): Renamed AgendaDefine to
        AgendaSet. Fixed documentation string. Moved to the right place in
        the alphabetical order. Also moved Main to the right place.

2002-05-29  Stefan Buehler  <sbuehler@uni-bremen.de>

        * arts-1-1-101

        * doc/uguide/interpolation.tex: Tried to make interpolation tensor
        clearer, following comment by Claudia.

2002-05-28 Claudia Emde  <claudia@sat.physik.uni-bremen.de>

        * arts-1-1-100 

        * src/workspace.cc: Introduced workspace variables for the scattering
        calculations.

        * doc/uguide/scattering.tex: Adjusted the text according to the 
        decision that there will be no special grids inside the cloudbox.

        * doc/uguide/symboldefs: Removed symbols for scattering grids.
        
2002-05-29  Patrick Eriksson  <patrick@rss.chalmers.se>

        * arts-1-1-99

        * Sorry, but there will be no description right now. I must rush and
        want to make a commit to get a back-up of my work (if anything will
        happen). I will write a description ASAP.

2002-05-28  Stefan Buehler  <sbuehler@uni-bremen.de>

        * arts-1-1-98

        * doc/uguide/myepstopdf: Added. Use this script to convert eps
        files to pdf.

        * doc/uguide/interpolation.tex: Finished first version of
        documentation for interpolation functions.

        * doc/uguide/Figs/interpolation/: Added interpolation chapter
        figures here.

        * doc/uguide/main.tex: Added include for interpolation.

        * src/interpolation.cc: Added \author and \date tags to my functions.

        * src/.cvsignore: Added test_xml and string.xml.

2002-05-28 Claudia Emde  <claudia@sat.physik.uni-bremen.de>

        * arts-1-1-97 

        * src/physics_funcs.cc/h: Changed the interfaces of the functions. 
        Input and Output variables are now for all physical functions 
        (Planck function, number density, ...) of type Numeric.

        * doc/uguide/lin_alg.tex: Fixed some undefined references.
        
2002-05-28  Patrick Eriksson  <patrick@rss.chalmers.se>

        * arts-1-1-96

        * doc/uguide/fm_definitions.tex: Updated the text to follow some 
        changes regarding definitions and the name of variables. The parts
        on sensor variables and RTE calculations not yet ready.

        * src/m_ppath.cc and src/methods.cc: Added the functions:
           ppath_stepGeometric
           ppath_stepGeometricWithLmax

        * src/workspace.cc: The variable ppath_partial is re-named to 
        ppath_step.

2002-05-27  Patrick Eriksson  <patrick@rss.chalmers.se>

        * arts-1-1-95

        * src/m_ppath.cc and src/ppath.cc: One 1D geometrical propagation paths
        now work. 

        * src/workspace.cc: Polished the text for some variables. 

        * src/m_atmosphere.cc (SetBlackbodyGround): Added this function.

        * doc/uguide/fm_definitions.tex: Started top revise this chapter
        after some changes of definitions.

2002-05-23  Patrick Eriksson  <patrick@rss.chalmers.se>

        * arts-1-1-94

        * 1D geometrical propagation path calculations seem to work (but
        cloud box is not yet tested).
        
        * src/ppath.h: Added the fileds refraction, method and constant to
        the Ppath structure.

        * src/ppath.cc (ppath_step_1d_geom): Fixed several bugs. Adapted to
        new Ppath fields.

        * src/m_ppath.cc (ppathCalc): Fixed several bugs. Adapted to
        new Ppath fields. 

2002-05-22  Oliver Lemke  <olemke@uni-bremen.de>

        * arts-1-1-93
        
        * src/mystring.h (class my_basic_string): Make size_t of type
        Index.

        * src/xml_io.cc: Added documentation.
        (read_from_stream): Casting of String::npos no longer needed.

2002-05-22  Patrick Eriksson  <patrick@rss.chalmers.se>

        * arts-1-1-92

        * Further work on propagation path calculations. Fixed numerous bugs.
        A simple upward 1D case works now at least. But more bugs to find.

        The biggest problem was to catch when the limited numerical precsion
        causes the fractional distance to be just below 0 or just above 1.

2002-05-21  Patrick Eriksson  <patrick@rss.chalmers.se>

        * arts-1-1-91
        
        * Worked on doxygen headers and comments in the following files:
           check_input.cc
           check_input.h
           m_atmosphere.cc
           m_basic_types.cc
           m_cloudbox.cc
           m_general.cc
           m_ppath.cc
           m_rte.cc
           math_funcs.cc
           math_funcs.h
           physics_funcs.cc
           physics_funcs.h
           ppath.cc
           ppath.h 

2002-05-21  Oliver Lemke  <olemke@uni-bremen.de>

        * arts-1-1-90
        
        * src/xml_io.cc (xml_read_header_from_stream): Improved
        verification of xml header.

        Replaced most of endls with '\n' to avoid unnecessary flushings of
        output stream.
        
        * .cvsignore: Added depcomp, autom4te-2.5x.cache and stamp-h1
        generated by automake >= 1.6.

2002-05-21  Patrick Eriksson  <patrick@rss.chalmers.se>

        * arts-1-1-89

        * Calculation of 1D geometrical path coded, but all bugs must be found.
        
        * src/ppath.cc: Added the functions:
           geompath_l_at_r
           geompath_r_at_l
        Changed also some of the geompath functions to take the tangent radius
        as input.
        
        * src/ppath.cc (ppath_step_1d_geom): This function is coded, but no
        test runs yet. There are bugs, for sure.

        * src/m_ppath.cc (ppathCalc): Put in a call to the function discussed
        above.

2002-05-20  Patrick Eriksson  <patrick@rss.chalmers.se>

        * arts-1-1-88

        * src/m_ppath.cc (ppathCalc): The function should now be ready, but
        no bigger test runs yet. Tests for 2D cannot be made before a
        *ppath_step* function covering 2D exists.

        * src/ppath.cc (ppath_step_1d_geom): Started on this function.

2002-05-19  Patrick Eriksson  <patrick@rss.chalmers.se>

        * arts-1-1-87

        * src/m_ppath.cc: Further work on the function. The structure of the
        function is now there, but many details are missing.

        * src/ppath.cc: Created the functions:
           geometrical_tangent_radius
           geompath_za_at_r
           geompath_lat_at_za
           angle_after_ground_1D
           ppath_init_structure
           ppath_set_background
           ppath_what_background
           ppath_start_stepping
        
        * src/Makefile.am (arts_SOURCES): Added interpolation.{h,cc}.

        * src/m_general.cc: Added the WSFs:
           PrintArrayOfIndex
           PrintArrayOfString
           PrintIndex
           PrintNumeric
           PrintString

        * src/workspace.cc: Improved the text for some variables.

2002-05-16  Stefan Buehler  <sbuehler@uni-bremen.de>

        * arts-1-1-86

        * src/interpolation.cc: Finished interpweights and interp
        functions for Tensor 3 to 6. That means, all interpolation
        functions are ready!

        * src/interpolation.h: Added headers for new functions.

        * doc/uguide/interpolation.tex: Added this file. Nothing there yet.

        * doc/uguide/matrix_vector.tex: Added tensors.

        * src/main.cc (main): Added error handler for the case that the
        given controlfile name does not have extension ".arts", or no
        extension at all. (So far the program just crashed in this
        case.)

2002-05-16  Claudia Emde  <claudia@sat.physik.uni-bremen.de>

        * arts-1-1-85

        * doc/uguide/scattering.tex: Updated the text. 

2002-05-16  Patrick Eriksson  <patrick@rss.chalmers.se>

        * arts-1-1-84

        * src/workspace.cc: Added the WSV:
           azimuth_angle_1d
           latitude_1d
           sensor_pos  (not finsihed)

        * src/m_atmosphere.cc: Created this file to hold functions to
        set up the model atmosphere. Added the WSF:
           r_geoidWGS84 

        * src/m_ppath.cc: Added the WSFs:
           a_posAddGeoidWGS84 
           sensor_posAddGeoidWGS84 

        * src/m_general.cc: Added the WSFs:
           SetAtmosphere1D
           SetAtmosphere2D
           SetAtmosphere3D
           PrintMatrix
           PrintVector
        The function series PrintXxx is not ready. I will make more functions 
        later, but only for basic types (up to Tensor3?).
        
2002-05-15  Oliver Lemke  <olemke@uni-bremen.de>

        * arts-1-1-83
        
        *** ASCII XML reading/writing ready for bug hunting :-) ***
        
        * src/groups.cc (define_wsv_group_names): Added Tensor4-7.

        * src/methods.cc (define_md_data): Added reading/writing methods
        for Tensor3-7.

        * src/xml_io.{h,cc}: Moved all xml_read_from_stream function
        prototypes to cc file because there are not needed externally.

        Send debug output to out2 instead of cout.

        ArrayOfIndex, ArrayOfMatrix, ArrayOfString, ArrayOfVector, Index,
        Numeric, Matrix, String, Tensor3-7, Vector reading and writing
        works now.

        * src/m_xml.cc: Removed dummy output from remaining functions.

        Added read/write functions for Tensor3 - Tensor7.

        * src/Makefile.am: Added target test_xml.

        * src/test_xml.cc: Added.

2002-05-15  Oliver Lemke  <olemke@uni-bremen.de>

        * arts-1-1-82
        
        * doc/examples/xml.arts: Small conversion example.

        * src/xml_io.{h,cc}: Header/footer functions renamed.
        
        (class ArtsXMLTag): Renamed member functions to match ARTS style.

        Implemented Vector, Matrix, ArrayOfMatrix writing functions.

        * src/m_xml.cc: Use generic read/write functions for all data
        types.
        
        Removed dummy from Vector, Matrix, ArrayOfMatrix functions.

        *** Still under development *** Reading only works for Numeric and
        Index at the moment. *** Documentation still missing in most
        parts.

2002-05-15  Oliver Lemke  <olemke@uni-bremen.de>

        * arts-1-1-81
        
        * src/xml_io.{h,cc}: Implemented XML parser.

        To read the XML header I implemented a template function. Which
        reduces the number of needed read_from_file functions from n
        (n = Number of data types) to 1. From there the overloaded
        function read_from_stream is called to do the data type specific
        part.

        Currently there's only Index and Numeric ASCII read support. ASCII
        write support will follow, binary later.

        * src/methods.cc (define_md_data): Corrected indentation of XML
        functions.

        * src/m_xml.cc: Throw runtime error when unimplemented function is
        called.

        Implemented IndexReadXML and NumericReadXML.

        * src/file.cc (open_input_file): Documentation changed.

2002-05-15  Claudia Emde  <claudia@sat.physik.uni-bremen.de>

        * arts-1-1-80

        * src/test_linalg.cc (test_matrix_exp3D): Added this
        function. Restructured the other tests.

        * src/test_linalg.cc (norm_inf): Added some comments.
        
        * doc/uguide/scattering.tex: Added the symboltable.

2002-05-15  Patrick Eriksson  <patrick@rss.chalmers.se>

        * arts-1-1-79

        * I had by mistake put a & after ConstVectorView in some places.
        Now fixed.

        * src/workspace.cc: Added two general vector variables vector1 and
        vector2.

        * src/m_basic_types.cc: Added the WSF MatrixFillWithVector and 
        Tensor3FillWithVector. Note that the vector can be put in along any
        dimension (in contrast to the old MatrixFillWithVector).

        * src/m_ppath.cc (ppathCalc): Added input checks for sensor position
        and los.

2002-05-14  Claudia Emde  <claudia@sat.physik.uni-bremen.de>

        * arts-1-1-78
                
        * src/lin_alg.cc/.h Modified function norm_inf and changed
        interface of exp_matrix.

        * doc/uguide/scattering.tex: Added this file to document the
        scattering part.

        * doc/uguide/references.bib: Added some references for the linear
        algebra part. 

2002-05-14  Patrick Eriksson  <patrick@rss.chalmers.se>

        * arts-1-1-77
        
        * src/check_input.cc (chk_cloudbox): Added this function.

        * src/m_ppath.cc (ppathCalc): Worked a bit on this function.

        * src/m_general.cc (SetAtmosphericDimensionality): Added this WSF.

        * src/m_cloudbox.cc (NoCloudbox): Added this WSF.

        * src/m_rte.cc: Added this file.

2002-05-13  Oliver Lemke  <olemke@uni-bremen.de>

        * arts-1-1-76
        
        * src/methods.cc (define_md_data): Moved XML functions into
        alphabetical order.

2002-05-13  Oliver Lemke  <olemke@uni-bremen.de>

        * arts-1-1-75
        
        * src/mystring.h: Include system sstream if available otherwise use our
        own.
        
        * src/arts.h: Include sstream moved to mystring.h.

        * configure.in: Added check for sstream header file. If it is not
        found, we use our own sstream.h.

        * src/make_auto_wsv_groups_h.cc (main): Include iostream in
        auto_wsv_groups.h.

        * src/make_auto_wsv_h.cc: Include iostream.

2002-05-13  Oliver Lemke  <olemke@uni-bremen.de>

        * arts-1-1-74
        
        * src/test_linalg.cc: Include iostream.

        * src/file.cc (open_input_file): Only set badbit for input stream
        otherwise eof throws exception as well and that is not what we
        want.

        * src/methods.cc (define_md_data): Added xml workspace methods.

        * src/m_xml.cc: New file. XML io workspace methods. Only dummys at
        the moment.
        
        * src/xml_io.{h,cc}: New files. XML io functions. Only dummys at
        the moment.

        * src/Makefile.am (arts_SOURCES): Added xml_io.h, xml_io.cc and
        m_xml.cc.

2002-05-13  Patrick Eriksson  <patrick@rss.chalmers.se>

        * arts-1-1-73

        * Cleaned up a bit regarding included .h files in ppath, check_input,
        math_funcs and ???.
        
        * src/interpolation.cc: Had to include some more .h files (which, don't
        remember now).

        * src/m_ppath.cc (ppathCalc): Started on this function.

        * src/check_input.cc: Changed alpha_grid and beta_grid to lat_grid and
        lon_grid. Removed all assert functions.

2002-05-12  Patrick Eriksson  <patrick@rss.chalmers.se>

        * arts-1-1-72

        * I could not compile this version, but this could be due to local 
        settings.

        * src/atm_funcs.cc/h: These files do not exist any more. Moved some 
        functions to physics_func and deleted others.

        * src/physics_funcs.cc/h: Added these files.
        
2002-05-10  Claudia Emde  <claudia@sat.physik.uni-bremen.de>

        * arts-1-1-71

        * src/lin_alg.cc/h: Removed function lu_solve and added some
        assertions. Added some new functions:
                - exp_mat: Computing the exponential of a matrix.
                - norm_inf: Norm infinity of a matrix.
                - identity: Returns the identity matrix.

        * src/test_linalg.cc: Adapted the tests to the changes.


        * doc/uguide/lin_alg.tex: Added documentation for linear algebra
                functions.

        * doc/uguide/main.tex: Included lin_alg.tex. 

2002-05-09  Oliver Lemke  <olemke@uni-bremen.de>

        * arts-1-1-70
        
        * doc/doxygen/html/.cvsignore: Added *.png.

2002-05-09  Oliver Lemke  <olemke@uni-bremen.de>
        
        * arts-1-1-69

        * Lots of fixes to compile arts with gcc-3.1.
        
        * src/interpolation.cc (LOOPIT): Removed overflues ## in macro
        definition before '.'  Otherwise it does not expand into a valid
        preprocessor token.

        * src/arts.h: Added 'using namespace std' to fix compile errors
        with newer, more ansi-compliant gccs (3.1).

        Include sstream instead of sstream.h for the same reason.

        * src/matpackI.h (Range): Default arguments for parameters are
        only allowed to be declared once. Removed from implementation
        part.

        * src/methods_aux.cc (PrintTemplate): Removed default for second
        parameter from implementation part.
        
        * src/mystring.h: Include climits.

        * src/main.cc,
        src/m_abs.cc,
        src/absorption.cc: Include algorithm.

        * src/test_interpolation.cc,
        src/test_linalg.cc,
        src/test_tensor.cc,
        src/test_poly.cc,
        src/test_matpack.cc,
        src/methods.h,
        src/poly_roots.cc,
        src/parameters.cc,
        src/make_auto_wsv_groups_h.cc,
        src/messages.h: Include iostream, otherwise cerr and cout are
        undeclared.

        * src/exceptions.h (ParseError): Added dummy virtual destructor
        including missing throw().

        * src/messages.cc: Rename global variable basename to out_basename
        to avoid a conflict with the basename function from the new string
        standard include file.

        * src/m_hdf.cc (filename_bin),
        src/main.cc (main),
        src/m_abs.cc (linesWriteAscii),
        src/m_abs.cc (lines_per_tgWriteAsci),
        src/file.cc (filename_ascii): Renamed basename to out_basename.

        * src/mystring.h (my_basic_string),
        src/array.h: Added keyword typename to several definitions
        (e.g. typename Array<base>::const_iterator xi;)

2002-05-08  Stefan Buehler  <sbuehler@uni-bremen.de>

        * arts-1-1-68

        * src/interpolation.cc: 2D Green interpolation works.

        * src/interpolation.h: Added headers for new functions.

        * src/test_interpolation.cc: Test case for this.

        * src/logic.cc: Added is_size functions for tensors up to rank 7.

        * src/logic.h: Added headers for new functions.

2002-05-08  Patrick Eriksson  <patrick@rss.chalmers.se>

        * arts-1-1-67

        * src/m_basic_types.cc: Created this file and moved the relevant 
        functions from m_io.cc. The revision of the functions is not 
        finished. Several functions are already removed. 

        * src/m_general.cc: Created this file and moved Exit and Test to the 
        file.

        * src/m_cloudbox.cc: Created this file. No functions in the file yet.
        
        * src/m_ppath.cc: Created this file. No functions in the file yet.


2002-05-08  Stefan Buehler  <sbuehler@uni-bremen.de>

        * arts-1-1-66

        * doc/uguide/development.tex: Fixed typo that lead to LaTeX fail.

        * src/methods.cc (define_md_data): Small change in comment block.

2002-05-08  Patrick Eriksson  <patrick@rss.chalmers.se>

        * arts-1-1-65

        * src/workspace.cc: Started to sort the variables in alphebetical 
        order. See note in the file. Placed all old functions below a line 
        with the idea to revise the functions before they are moved back.

        Introduced and wrote about: 
          - atmosphere_dim
          - a_los
          - a_pos
          - blackbody_ground
          - cloudbox_on
          - cloudbox_limits
          - e_ground
          - lat_grid
          - lon_grid
          - p_grid
          - ppath
          - ppath_partial
          - ppath_step
          - r_geoid
          - t_field
          - t_ground
          - z_field
          - z_ground

        Removed a lot of old WSV.
        
        * src/methods.cc: Started to sort the methods in alphebetical order.
        See note in the file. Placed all old functions below a line with the
        idea to revise the functions before they are moved back.

        Removed WSF hseXxxx, refrXxx

2002-05-07  Stefan Buehler  <sbuehler@uni-bremen.de>

        * arts-1-1-64

        * src/interpolation.cc: Finished all blue interpolation functions
        (interpweights and interp functions).

        * src/interpolation.h: Added headers for the new functions.

        * src/test_interpolation.cc: Some testing for the blue
        interpolation functions. They are fast! Turning assertions off
        gives a significant further speed increase, so the default for
        "real" calculations should be -O2 optimization and disabled
        assertions. (The speed impact of assertions is mainly due to the
        assertions inside the index operators, which are called a lot if
        tensor dimensions are looped.)

        * absorption.cc,
        atm_funcs.cc,
        continua.cc,
        file.cc,
        lineshapes.cc,
        m_abs.cc,
        m_hdf.cc,
        math_funcs.cc,
        matpackI.h,
        matpackIII.h,
        matpackIV.h,
        matpackV.h,
        matpackVI.h,
        matpackVII.h,
        ppath.cc: Changed "\retval x" to "\param x Output:". The use of
        retval for output parameters was a misunderstanding on my side and
        lead to spurious doxygen warning messages. Output parameters
        should be documented like this:
        \param A Output: Describe A here.

        * doc/uguide/development.tex: Updated instructions for Doxygen
        headers. 

2002-05-06  Stefan Buehler  <sbuehler@uni-bremen.de>

        * arts-1-1-63

        * src/interpolation.cc: Finished gridpos. Implemented 1D
        interpweights and 2D blue interpweights. If fd and 1-fd are stored
        in an array, one can use nested for loops to compute the
        weights. Great! 

        * src/test_matpack.cc (test32): Test case for mult.

        * src/matpackI.h: Made documentation of mult functions more clear:
        The input and output matrix must not be the same!

        * src/logic.cc: Made Index input arguments const Index&.

2002-05-06  Patrick Eriksson  <patrick@rss.chalmers.se>

        * arts-1-1-62

        * src/species_data.cc: Included  JPL tags for HOBr.

2002-05-06  Claudia Emde  <claudia@sat.physik.uni-bremen.de>

        * arts-1-1-61
                
        * src/lin_alg.cc/h: Modified interfaces for LU- functions and
        added routine for the matrix exponential function.

        * src/test_linalg.cc: Test adapted to the new functions.

2002-05-06  Oliver Lemke  <olemke@uni-bremen.de>

        * arts-1-1-60
        
        * src/lin_alg.cc: Include math.h for gcc>=2.96.

        * src/test_tensor.cc: Include math.h for gcc>=2.96.

2002-05-05  Patrick Eriksson  <patrick@rss.chalmers.se>

        * arts-1-1-59

        * src/workspace.cc: Started to introduce new workspace variables.

        * src/los.cc/h: Removed these files. Made corresponding changes
        throughout the files, e.g:

        * src/Makefile.am: Removed los.cc and los.h. 

        * src/groups.cc: Removed Los, added Ppath and Tensor3.

2002-05-03  Stefan Buehler  <sbuehler@uni-bremen.de>

        * arts-1-1-58

        * src/logic.cc: Added Matrix version of is_size.

        * src/logic.h: Added header for Matrix version of is_size.

        * doc/Makefile.am (SUBDIRS): Removed emacs directory.

2002-05-03  Stefan Buehler  <sbuehler@uni-bremen.de>

        * arts-1-1-57

        * src/logic.cc: New file. Contains all logical functions, i.e.,
        function called is_something that return bool. 
        These functions are intended to be used either inside "if"
        statements or inside "assert" statements.
        The condition should have a simple and intuitive meaning!

        * src/logic.h: New file, headers for logic.cc.

        * src/check_input.cc: Now includes logic.h.

        * src/ppath.cc: Now includes logic.h.

        * src/math_funcs.h: Removed is_something function headers.

        * src/math_funcs.cc: Moved is_something functions to logic.cc.

        * src/interpolation.cc: New file: Interpolation routines. 
        (grid_pos): I just started with this, it is not yet complete. Will
        probably continue tomorrow.

        * src/interpolation.h: New file: Header file for interpolation.cc.

        * src/test_interpolation.cc: Test program for interpolation
        functions. 

        * src/Makefile.am: Added test_interpolation.

        * doc/index.html.in: Removed the paragraph about the old Emacs
        doxygen macros, since they are no longer there.

        * configure.in: Removed output target doc/emacs/Makefile.

2002-05-02  Claudia Emde  <claudia@sat.physik.uni-bremen.de>

        * arts-1-1-56

        * src/lin_alg.cc/h: Created this file for the linear algebra
        functions we need for the radiative transfer
        calculations. Implemented functions to solve linear equation
        systems using the LU decomposition method.

        * src/test_linalg.cc: test the functions in lin_alg.cc

2002-04-25  Stefan Buehler  <sbuehler@uni-bremen.de>

        * arts-1-1-55

        * doc/uguide/development.tex: Updated this file. Some small
        changes. Most significant are the new recommendations for
        documentation headers.

        * doc/uguide/main.tex: Put development.tex back in.

        * src/workspace.cc (define_wsv_data): Added template for
        documentation strings.

        * doc/emacs/: Removed everything in this directory. There is now a
        better Doxygen package for Emacs:
        Doxymacs (http://doxymacs.sourceforge.net/). 

        * doc/examples/fantasy2.arts: Added this file, which contains more
        thinking about agendas.

2002-04-17  Patrick Eriksson  <patrick@rss.chalmers.se>

        * arts-1-1-54

        * src/m_los.cc,m_wfs.cc,m_batch.cc: Removed these files as everything
        will be rewritten anyhow. I think it is a good idea to remove as much 
        as possible. It is no big danger to remove things as they still exist
        in arts-1 and can be copied back. So, PLEASE DO SOME CLEANING.
        
        * src/atm_funcs.cc: Removed obselete functions.

        * src/ppath.cc: Works now for 1D and no refraction. As soon as it is
        clear how refraction will be calculated (there should be an agenda
        as for absorption), it should be a rather quick thing to put in 1D
        with refraction.

2002-04-16  Patrick Eriksson  <patrick@rss.chalmers.se>

        * arts-1-1-53

        * src/check_input.cc/h: Started this file. The intention of this file
        is to hold functions that help us to check the input to functions.
        By doing general functions, more careful checks can be done and better
        error messages can be given. If you have to type everything for each
        function, you tend to become sloppy. There are two series of functions:
        assert_xxx and chk_xx. Have a look in the file and you will understand.

        SO USE THESE FUNCTIONS, and ADD NEW ONES WHEN NEEDED.

        * src/math_funcs.cc: Started to revise this file. The existing 
        functions are moved down and my idea is that when we found that a 
        function really is needed, it can be moved up, and then be polished.
        I think there is some old junk in the file.

        * src/ppath.cc: Added this file. The file will include functions to
        determine propagation paths. Started to move things from los.cc
        (ppath.cc replaces los.cc). Changes are needed as the definition of
        the Ppath structure is changed. Quite some work, but nothing works
        yet.

        * src/ppath.h: Added this file to hold the declaration of the Ppath 
        structure and functions in ppath.cc.
        
2002-04-14  Stefan Buehler  <sbuehler@uni-bremen.de>

        * arts-1-1-52

        * doc/examples/fantasy.arts: Added this file to play around
        in. I'm not happy with the absorption part. Everything is so
        complicated and not user-friendly. But how to make it both modular
        and user friendly?

2002-04-12  Patrick Eriksson  <patrick@rss.chalmers.se>

        * arts-1-1-51

        * doc/uguide/ppath.tex: Finished text for general 1D and 2D geometrical
        expressions. 

2002-04-12  Patrick Eriksson  <patrick@rss.chalmers.se>

        * arts-1-1-50

        * doc/uguide/ppath.tex: Started some writing but not got time to finish
        it. I will continue at home.

2002-04-11  Patrick Eriksson  <patrick@rss.chalmers.se>

        * arts-1-1-49

        * doc/uguide/main.tex: Added the commands \artsstyle, \textindex,
        \wsfindex, \wsvindex, \fileindex, \funcindex and \structindex.
        The command replaces the old \qindex. 

        ARTS workspace methods, variables etc. are no longer written using the
        \verb environment. Use now the \artsstyle command. This command will
        write the text with style \texttt. I made the change as verbatim
        cannot be used inside commands, figure text etc., which has been a 
        problem for me several times. The drawback of using \texttt is that
        underscores must be proceeded with a backslash (e.g. \_).

        The other commands, ending with "index", writes the text and makes
        on the same time a index mark. The commands beside \textindex are 
        releated to ARTS and writes the text by using \artsstyle and puts
        the reference as a subentry to an appropiate text string. For example,
        \wsvindex is the command to use when defining a ARTS workspace 
        variable. See the index page for the result.

        I hope that these indexes will help us to link AUG and ARTS better.
        The old AUG did very few direct references to ARTS. I am trying now
        to improve this by stating which function that does a special
        calculation etc. This can work the other way around, when writing the
        header of a function it should now be easier to make a reference to
        AUG if the function is indexed in AUG. Before you did not know in
        what section a description ended up (the section could be moved 
        around). We can now refer to the index page to find where a function
        is discussed.

        * doc/uguide: Included the new commands in the files that are presently
        included. You have to adapt the other files when they are included.

2002-04-11  Patrick Eriksson  <patrick@rss.chalmers.se>

        * arts-1-1-48

        * doc/uguide/ppath.tex: Description of the propagation path structure,
        Ppath. Started on general geometric expressions for calculating the
        path.

2002-04-08  Oliver Lemke  <olemke@uni-bremen.de>

        * arts-1-1-47

        * configure.in: Added doc/uguide/Figs/ppath/Makefile.am

2002-04-05  Patrick Eriksson  <patrick@rss.chalmers.se>

        * arts-1-1-46

        * doc/uguide/ppath.tex: Completed the part about geodetic issues.

2002-04-04  Patrick Eriksson  <patrick@rss.chalmers.se>

        * arts-1-1-45

        * doc/uguide/ppath.tex: Some text about geoid ellipsoids etc. Made some
        figures.

        * doc/uguide/Figs/ppath: Added this folder and some figure files.

2002-04-04  Oliver Lemke  <olemke@uni-bremen.de>

        * arts-1-1-44

        * doc/uguide/Makefile.am: Added makeindex commands.

2002-04-02  Oliver Lemke  <olemke@uni-bremen.de>

        * arts-1-1-43

        * aii/Makefile.am, ami/arts/Makefile.am, ami/file/Makefile.am,
        ami/general/Makefile.am, ami/hmatrix/Makefile.am,
        ami/math/Makefile.am, ami/path/Makefile.am, ami/physics/Makefile.am,
        ami/plot/Makefile.am, ami/retrieval/Makefile.am,
        doc/uguide/Figs/Makefile.am: Use wildcards for EXTRA_DIST so we
        don't have to add each new file to Makefile.am.

2002-04-01  Patrick Eriksson  <patrick@rss.chalmers.se>

        * arts-1-1-42

        *�Please read, comment and/or correct what I have written in
        Chapter 2 of AUG.

        * doc/uguide/main.tex: Included the epic and eepic packages for drawing
        figures inside LaTex. Are these the best packages for this? These seem
        at least to be standard packages. But do you have any better sugestion?

        * doc/uguide/fm_definitions.tex: New figure for LOS angles and
        some new text. Corrected and polished existing text slightly. I am
        now ready with what I will write in this chapter this time. So,
        please read it.  I am sure that there are many language
        errors. Please fix what you find.

        * doc/uguide/ppath.tex: Added section headings and made a figure for
        geocentric and geodetic latitudes.

2002-03-28  Patrick Eriksson  <patrick@rss.chalmers.se>

        * arts-1-1-41

        * AUG: Note that figures now shall be placed in sub-folders to
        Figs/ (as suggested by Stefan).  When the revision of AUG is
        ready, all figures in Figs/ will be removed. This has been done
        for fm_definitions (see below).
        
        * doc/uguide: Added style files for the algorithm and algorithmic
        packages. See fm_definitions for example on how to use these
        packages. I have a manaul (ps-file) that I can send you if you are
        interested.
        
        * doc/uguide/fm_definitions.tex: More writing. Mainly on the clear sky
        RTE part. Added two figures. Added an algorith over the RTE part.

        * doc/uguide/Figs/fm_definitions: Created this folder and moved
        the figures (and associated Matlab scripts) to this folder.
        
        * doc/uguide/Figs/fm_definitions/mkfigs_ppath_cases.m: Created this
        function to illustrate propagation paths.

2002-03-27  Patrick Eriksson  <patrick@rss.chalmers.se>

        * arts-1-1-40

        * doc/uguide/fm_definitions.tex: Writing on the sensor section and
        started on the clear sky RTE section. 

2002-03-26  Stefan Buehler  <sbuehler@uni-bremen.de>

        * arts-1-1-39

        * src/test_tensor.cc (test8): Added a cute little test that checks
        all 128 const index functions.
        (test9): And another cute tests that checks the non-const index
        functions. 
        Result: Everything seems to work fine!

2002-03-25  Patrick Eriksson  <patrick@rss.chalmers.se>

        * arts-1-1-38

        * When including the bug fixes from arts1 for temperature WFs, I missed
        a change in methods.cc so the program did not compile. Sorry, for that.
        
        * doc/uguide/fm_definitions.tex: Fixed some problems in the existing
        text. Did dome more writing on the compulsory sensor variables and
        changed text to follow the definition of the cloud box.
        Stefan, there are some comments for you inside the file at the end.

        * doc/uguide/Figs/mkfigs_atm_dims.m: The figures are now converted to
        PDF with epstopdf. Adapted to new cloud box definition.

2002-03-22  Stefan Buehler  <sbuehler@uni-bremen.de>

        * arts-1-1-37

        * src/matpackVII.h: First implementation of Tensor7 finished. This
        seems to push my present concept to the limit, since I had to
        manually edit the 128 different index functions. Higher order
        tensors are only feasible with some kind of automatic code
        generation system. 

        * src/matpackI.h, src/matpackIII.h, src/matpackIV.h,
        src/matpackV.h, src/matpackVI.h: Adjusted for Tensor7. (Mainly
        added friend declarations.)

        * src/test_tensor.cc: Added simple test for Tensor7. There should
        be some more thorough and systematic testing...

2002-03-22  Patrick Eriksson  <patrick@rss.chalmers.se>

        * arts-1-1-36

        * Included changes made for arts1:

        * src/m_wfs.cc (k_temp_nohydro): Code changed according to the bug
        in the equation discussed below. Temperature WFs without HSE seems now
        to be OK. Checks have ben performed with text_Kt.m.

        To summerize, all temperature WFs have been looked at and everything
        seem to be OK. There were bugs for all three versions before. Sorry
        for that.

        * doc/uguide/wfuns_atm.tex: A mistake in the equation giving the
        temperature derivative of the Planck function found.

2002-03-20  Stefan Buehler  <sbuehler@uni-bremen.de>

        * arts-1-1-35

        * src/matpackVI.h: Added. Implementation of Tensor6. A first
        version of this is complete. 

        * src/matpackVII.h: Added. Implementation of Tensor7. This is
        still under construction.

        * src/Makefile.am: Added matpackVI and VII to test_tensor sources.

        * src/test_tensor.cc: Added some tests for Tensor6.

        * doc/uguide/references.bib: Added Mishchenko book.

        * doc/uguide/fm_definitions.tex: Started to write on the clear sky
        RT section.

2002-03-20  Oliver Lemke  <olemke@uni-bremen.de>

        * arts-1-1-34

        * src/matpackI.h: Changed order of parameters for poly_root_solve.

2002-03-20  Oliver Lemke  <olemke@uni-bremen.de>

        * arts-1-1-33

        * src/poly_roots.{h,cc}: Changed order of parameter.

2002-03-20  Oliver Lemke  <olemke@uni-bremen.de>

        * arts-1-1-32

        * src/poly_roots.{h,cc}: Changed interface of poly_root_solve to make
        it arts-compliant. The solution matrix is passed by reference to the
        function and must have the correct size.

        * src/poly_roots.cc: Use the pointer to coeffs.mdata and roots.mdate
        instead of copying all elements (if Numeric is not double we still
        have to copy them).

        * src/matpack1.h: Made poly_root_solve a friend function of
        ConstVectorView and ConstMatrixView to access mdata.

2002-03-18  Oliver Lemke  <olemke@uni-bremen.de>

        * arts-1-1-31

        * reconf: Removed --enable-more-warnings. This is now part of
        configure.in.

        * configure.in: Enable warnings in maintainer mode by default. Could
        still be turned off with ./reconf --disable-more-warnings.

2002-03-19  Patrick Eriksson  <patrick@rss.chalmers.se>

        * arts-1-1-30

        * doc/uguide/fm_definitions.tex: Fixed and changed according to
        comments and discission input from Stefan.

        The main thing is that we decided that the most basic variable is
        put in as the outermost index in matrices and tensors. That is,
        reversed order compared to before.

2002-03-18  Stefan Buehler  <sbuehler@uni-bremen.de>

        * arts-1-1-29

        * doc/examples/*.arts.in: The outermost method must now simply be
        called Main. To use DefineAgenda was unlogical, since defining an
        agenda and executing an agenda are quite different things.

        * src/parser.cc: Adapted to new controlfile structure. Cleaned up
        output to out3.

        * src/array.h: Changed output operator for ConstVectorView to
        put all elements in one row.

        * src/matpackI.h: Changed output operator for ConstVectorView to
        put all elements in one row.

        * reconf: Added --enable-more-warnings switch to configure call. 

2002-03-18  Stefan Buehler  <sbuehler@uni-bremen.de>

        * arts-1-1-28

        * doc/uguide/fm_definitions.tex: Fixed some typos. Added some
        comments, marked by SAB.

        * doc/uguide/.cvsignore: Added uguide_pdf.idx.

2002-03-18  Patrick Eriksson  <patrick@rss.chalmers.se>

        * arts-1-1-27

        * doc/uguide/fm_definitions.tex: More text written. Started on sensor 
        description.

        * doc/uguide/ppath.tex: Added this file to hold description of
        propagation paths.

2002-03-15  Stefan Buehler  <sbuehler@uni-bremen.de>

        * arts-1-1-26

        * configure.in: Added a switch to enable-more-warnings that turns
        off the checking of unused parameters. This, because dummy
        parameters are used as a trick to select functions, for example
        the joker in the matpack functions. Also the getaway functions for
        the engine have sometimes unused parameters. We don't want to
        issue a warning for that.

        * src/matpackV.h: Bug fix: Added missing return statements for
        const index functions. I discoverd this bug because of the enabled
        warnings, so warnings are clearly useful!

        * src/m_agenda.cc: Added this file, containing workspace methods
        for Agenda.

        * src/: Modified the parser and the overall control structure to
        accept agendas.

        * doc/examples: Removed old example files starting with auto_.
        Adapted all examples to work with the new controlfile
        syntax. (Added a surrounding AgendaDefine(main_agenda).)

2002-03-15  Patrick Eriksson  <patrick@rss.chalmers.se>

        * arts-1-1-25

        * doc/uguide/main.tex: I have introduced index into AUG. The idea
        is not to make a complete index register, that is to ambitious.  I
        think it is sufficient, and a good help for the readers, just to
        make a reference to the page where a term is defined or
        introduced.  Is this a good idea? I have put in some test indexes
        in fm_definitions.  Note the macro \qindex, defined in main.tex,
        that makes it easier to put in an index. I don't think we shall
        have index of several levels, if the term consists of several words
        (normally not more than 2), refer to the words as one unit to make
        things simple.

        If anybody knows how to change the title for the index page from
        "Index" to "Definition of terms", please go ahead.

        To update the index list, you have to run "makeindex uguide"
        
        * doc/uguide/fm_definitions.tex: Started to write in this chapter.
        Please read the introduction part (present Chapter 1-2) and give
        comments, both on layout and content.

        * doc/uguide/symbol_defs: Moved symbol macros to this file. An idea
        with this is that it should be possible to use this macro file for
        other documents. The old macro names are changed and changes will
        be needed when re-introducing the chapters. Sorry for this, but as
        the old macro names were just a mess, I made this change. If it is a
        comfort, I will be the one that will have to most of the changes.
        I have tried to come up with a consistent naming scheme so it should
        be possible to remember, or figure out, the name of the macros.
        Note especially the aXxx macros which are handy and would help us
        to have a uniform style without making a macro for each subscript
        to a variable.

2002-03-14  Stefan Buehler  <sbuehler@uni-bremen.de>

        * arts-1-1-24

        * General: Started to work on agendas (what we used to call method
        lists).

        * src/agenda.h: Added.
        An agenda is a list of workspace methods (including keyword data) to
        be executed. There are workspace variables of class agenda that can
        contain a list of methods to execute for a particular purpose, for
        example to compute the lineshape in an absorption calculation. The
        controlfile contains a list of agenda definitions, including the
        agenda `main', which is then executed. Overall, this concept is in
        analogy to a C program that consists of various functions and one
        function main.

        * src/agenda.cc: Added. Contains functions for Agenda.

        * src/main.cc: Removed executor and give_up. Instead, there is now
        a member function execute of Agenda.

        * src/make_auto_wsv_h.cc: Made the occupation list (which WSVs are
        occupied) a part of the WorkSpace. Added member functions to check
        and modify occupation.

        * src/wsv_aux.cc: Added. Contains implementation of member
        functions of WorkSpace.

        * src/parser.h: Adapted to use of Agenda. 

        * src/parser.cc: Adapted to use of Agenda. 
        
        * src/Makefile.am: Added the new files.

        * doc/doxygen/Makefile.am: Added generation of tags for
        doxymacs. The tags are stored in file arts.tag.

2002-03-12  Wolfram Haas  <wolhaas@hermes.fho-emden.de>

        * arts-1-1-23

        * src/matpackV.h: Added three index functions with 2 Range and 3 Index.

2002-03-11  Patrick Eriksson  <patrick@rss.chalmers.se>

        * arts-1-1-22

        * doc/uguide: Restart of the user guide for the new version.
        First of all, I have commented out most of the chapters (done in 
        main.tex). The idea is to enforce that the user guide only contains 
        stuff that is consistent with the new version. So before a chapter is 
        re-introduced, all its content shall be checked and the text shall be 
        changed where needed. Please, remember to also check the figure folder
        and to remove figures not used any longer. 

        Two new introduction chapters added. See notes in introduction.tex.
        Some text written and two figures included.

2002-03-11  Stefan Buehler  <sbuehler@uni-bremen.de>

        * arts-1-1-21

        * src/test_tensor.cc: Added Wolfram to copyright notice.

        * src/matpackIV.h: Changed author to Wolfram.

        * src/matpackV.h: Changed author to Wolfram.

2002-03-08  Wolfram Haas  <wolhaas@hermes.fho-emden.de>

        * arts-1-1-20

        * src/matpackV.h: Added new file for tensor 5.

        * src/matpackIV.h: Added four friend class declarations.

        * src/matpackIII.h: Added two friend class declarations.

        * src/matpackI.h: Added nine friend class declarations.

        * src/test_tensor.cc: Added some tests for tensor 4 and tensor 5.

        * doc/uguide/utilities.tex: Corrected explanation for error message
        "There is some garbage at the end of the file." of the IDL reading
        routine 'read_datafile.pro'.
        
2002-03-08  Oliver Lemke  <olemke@uni-bremen.de>

        * arts-1-1-19

        * src/poly_roots.cc: Changed order of coefficients. Removed debug
        output.

        * src/test_poly.cc: Tweaked the example a little bit.

2002-03-07  Oliver Lemke  <olemke@uni-bremen.de>

        * arts-1-1-18

        * src/poly_roots.{h,cc}: Added functions to determine roots of
        polynomials. Taken from gsl and still some porting to be done.

        * src/test_poly.cc: Small prog to test poly_roots.

        * src/Makefile.am: Added poly_roots.{c,hh} to arts_SOURCES. Added
        target to create test_poly.

2002-03-05  Patrick Eriksson  <patrick@rss.chalmers.se>

        * arts-1-1-17

        * src/los.cc: Cloud box - 1D paths ready. The sensor must now be above
        the ground and cannot be on the ground.

2002-03-03  Patrick Eriksson  <patrick@rss.chalmers.se>

        * arts-1-1-16

        * src/los.cc: Started to include a cloud box in the propagation path
        calculations. In fact it is there, but no test runs have been 
        performed.

2002-02-28  Patrick Eriksson  <patrick@rss.chalmers.se>

        * arts-1-1-15

        * Just some minor changes in los.cc to be backed up.

2002-02-24  Patrick Eriksson  <patrick@rss.chalmers.se>

        * arts-1-1-14

        * src/los.cc: Further work on the propagation path calculations. No
        comments here, it will be described in AUG. 

        * Started on 2D but that code exists only so far as matlab functions 
        not included here.

2002-02-22  Stefan Buehler  <sbuehler@uni-bremen.de>

        * arts-1-1-13

        * src/matpackIV.h Iterator4D Tensor4View::begin(): Bug fix,
        removed const at end of line.
        Iterator4D Tensor4View::end(): Same.
        Recursive ConstTensor4View constructor: Bug fix, fixed typing
        error. 

        * src/matpackIII.h: Added some friend declarations.

        * src/matpackI.h: Added some friend declarations.

        * src/test_tensor.cc: Added definition of joker object. Added a
        test for selecting a book and a test for selecting the first
        letter of every page of every book.

2002-02-21  Wolfram Haas  <wolhaas@hermes.fho-emden.de>

        * arts-1-1-12

        * src/matpackIV.h: Draft of an implementation of tensors of rank 4.

        * src/matpackIII.h: Made "friend class" entries in classes
        ConstTensor3View and Tensor3View.
        
        * src/matpackI.h: Made "friend class" entries in classes
        Range, ConstVectorView, VectorView, ConstMatrixView and MatrixView.

        * src/test_tensor.cc: Started first test for tensors of rank 4.
        
2002-02-18  Nikolay Koulev  <nkoulev@uni-bremen.de>

        * arts-1-1-11

        * src/absorption.h: Changes on the comments concerning the 
        different line intensity units in the catalogs.
        
2002-02-18  Nikolay Koulev  <nkoulev@uni-bremen.de>

        * arts-1-1-10

        * src/absorption.h: Fixed the wrong line intensity units
        from m^2/Hz to m^2*Hz.
        
2002-02-18  Nikolay Koulev  <nkoulev@uni-bremen.de>

        * arts-1-1-9

        * doc/uguide/absorption.tex: One more fix.
        
2002-02-18  Nikolay Koulev  <nkoulev@uni-bremen.de>

        * arts-1-1-8

        * doc/uguide/absorption.tex: Fixed the wrong line intensity units
        from m^2/Hz to m^2*Hz.  
        
2002-02-08  Patrick Eriksson  <patrick@rss.chalmers.se>

        * arts-1-1-7

        * src/los.cc: 1D interpolation of an absorption Tensor3
        fixed. Note that is a temporary solution until we have more general
        ways to obtain the absorption at an arbitrary point.
        
        * src/los.cc: Wrote an outline describing my present ideas about how
        to fix the interpolations.
        
2002-02-08  Patrick Eriksson  <patrick@rss.chalmers.se>

        * arts-1-1-6

        * src/los.cc: Started to work on interpolation and assert functions. 
        We should make set of functions for making asserts and size checks 
        simpler (as started by the check_xx functions ion arts1).

2002-02-07  Oliver Lemke  <olemke@uni-bremen.de>

        * arts-1-1-5
        
        * src/Makefile.am (test_tensor_SOURCES): Added target for
        test_tensor.

        * src/test_tensor.cc: Test program for matpackIV. Copied from
        test_matpack.cc.

        * src/matpackIV.h: Added empty file for tensor 4.

2002-02-05  Patrick Eriksson  <patrick@rss.chalmers.se>

        * arts-1-1-4

        * SOME INFORMATION: I will not give any deatils here about my work
        to save time. The plan is to finish LOS/RTE calculations for 1D
        and 2D without refraction (i.e. including interpolation of
        absorption etc. and evaluation of the radiative transfer equation
        along the LOS) and then describe the approach taken in AUG.

        However, I should mention that I want to replace existing math
        functions and to remove the ones not used. For this reason, I put
        new math functions (or copies of existing ones, renamed by adding
        the number 2) in los.cc. This includes a new set of interpolation
        routines taking index positions as input. For example, the index
        position 6.5 means that a position is exactly between the points
        with index 6 and 7, index position 5 is exactly at the point with
        index 5 etc. As these index positions easily can be calculated
        when determining the LOS, this should save a lot of time for the
        interpolation. In addition, as the LOS points now mainly are placed
        at grid boundaries, for most points an interpolation is not needed and
        the index positions can be used to avoid unnecessary interpolation.
        
        * src/los.cc: Finished the LOS calculations for 1D and no refraction.
        As usual it is downwards observations from inside the atmosphere that
        makes everything complicated. 

2002-02-05  Patrick Eriksson  <patrick@rss.chalmers.se>

        * arts-1-1-3

        * src/los.cc: Added this file for starting on the new implementation
        of the LOS calculations. Started on a function for 1D and no 
        refraction.

2002-01-25  Stefan Buehler  <sbuehler@uni-bremen.de>

        * arts-1-1-2
        
        * src/m_batch.cc (ybatchFromRadiosondeGlobal): Added message which
        profile is being processed.

        * src/m_batch.cc (ybatchFromRadiosonde): Added message which
        profile is being processed.

2002-01-22  Oliver Lemke  <olemke@uni-bremen.de>

        * arts-1-1-1
        
        * src/m_batch.cc: Moved #ifdef HDF_SUPPORT / #endif block to
        support radiosonde functions even without HDF compiled in.

2002-01-18  Oliver Lemke  <olemke@uni-bremen.de>

        * arts-1-1-0

        * This is the new development version of ARTS after the release
        All new features should go in here.

2002-01-18  Oliver Lemke  <olemke@uni-bremen.de>

        * arts-1-0-0
        
        * No problems occured in rc1 so we go for the release.
        
2002-01-18  Oliver Lemke  <olemke@uni-bremen.de>

        * arts-1-0-0-rc1

        * OK, this is release candidate 1. Just tagged this as a final
        version for testing. Hope next version will be the final release.

2002-01-18  Patrick Eriksson  <patrick@rss.chalmers.se>

        * arts-1-0-0-pre10

        * src/m_wfs.cc: Improved check of input frequency limits for kContabs.
        There was in fact several bugs.
        Added length unit (m and km) for kContabs.

2002-01-17  Nikolay Koulev <nkoulev@uni-bremen.de>

        * arts-1-0-0-pre9

        * doc/uguide/absorption.tex: Erased the strange artefacts after
        committing the pre8 version.
        
2002-01-17  Nikolay Koulev <nkoulev@uni-bremen.de>

        * arts-1-0-0-pre8

        * doc/uguide/absorption.tex: Erased the strange artefacts after
        committing the pre7 version.
        
2002-01-17  Nikolay Koulev  <nkoulev@uni-bremen.de>

        * arts-1-0-0-pre7

        * doc/uguide/main.tex: Increased caption size for long tables.

        * doc/uguide/references.bib: Added two entries.

        * doc/uguide/wfuns_sensor.tex: Replaced main by uguide for xemacs.

2002-01-17  Nikolay Koulev <nkoulev@uni-bremen.de>

        * arts-1-0-0-pre6

        * doc/examples/fullmodels.arts.in: Merged in changes from Thomas.

2002-01-17  Nikolay Koulev <nkoulev@uni-bremen.de>

        * arts-1-0-0-pre5

        * doc/uguide/absorption.tex: Final edition and the species
        related tables now in. Resolving the referencies and warnings.
        
2002-01-16  Patrick Eriksson  <patrick@rss.chalmers.se>

        * arts-1-0-0-pre4

        * uguide: Removed a reference to the sensor WFs section that is 
        commented out. There is almost nothing in this section and the little
        content is not in sync with ARTS, so no idea to include it.

2002-01-16  Patrick Eriksson  <patrick@rss.chalmers.se>

        * arts-1-0-0-pre3

        * ami: Improved the README file slightly (I had forgotten that there 
        was one). Updated the Makefile.am files. Removed rand_test, that 
        existed in two folders.

2002-01-15  Patrick Eriksson  <patrick@rss.chalmers.se>

        * arts-1-0-0-pre2

        * Sorry Oliver, but I have stuff that must be commited now.

        * ami/arts/tag2mo.m: The function now works for tag string with more

2002-01-12  Patrick Eriksson  <patrick@rss.chalmers.se>

	* arts-0-1-77

	* ami/hmatrix/h_antenna.m: Allowed the antenna movement to be a 
	vector. 

2002-01-10  Patrick Eriksson  <patrick@rss.chalmers.se>

	* arts-0-1-76

	* ami/retrieval/loggrid.m: The obtained spacing could be poorer than 
	the specified spacing. Fixed.

2002-01-09  Patrick Eriksson  <patrick@rss.chalmers.se>

	* arts-0-1-75

	* ami/arts/tag2mo.m: A function to convert a tag string to the molecule
	name.

	* ami/path/subfolders.m: New function.

2002-01-08  Stefan Buehler  <sbuehler@uni-bremen.de>

	* arts-0-1-74

	* src/partition_function_data.cc: Updated doxygen documentation
	for H2O. Added another source code 3, to indicate "wild guess or
	copied from main isotope". Updated source and error code
	description accordingly.

2002-01-07  Nikolay Koulev  <nkoulev@bremen.de>

	* arts-0-1-73

	* doc/uguide/absorption.tex: Editted the Line Catalogs subchapter(3.1.3).      

2002-01-07  Patrick Eriksson  <patrick@rss.chalmers.se>

	* arts-0-1-72

	* ami/file/read_linefile.m: String inside " " were not read properly.
	This is now fixed. 

	* ami/hmatrix/h_mixer.m: Major revision of the function and approach
	for the mixer. The output frequencies now include image frequencies
	projected to the primary band. See the function for further 
	specifications.

	* ami/hmatrix/gaussian_response.m: Created and added this function that
	can be used to simply create a gaussian response for any sensor part.

	* ami/hmatrix/hBackendGauss.m: The function now uses 
	gaussian_response to set up the antenna pattern.

	* ami/hmatrix/hAntennaGaussAdv.m: The function now uses 
	gaussian_response to set up the antenna pattern.

2002-01-04  Patrick Eriksson  <patrick@rss.chalmers.se>

	* arts-0-1-71

	* ami/file/filter_lines.m: Created and added this function that is an
	enviroment for filter line arrays (a set of lines read from a file).
	Two filters implemented so far, one that removes transitions for an
	isoptope below an intensity threshold, and another one that removes all
	transitions found in the water vapour absorption model by Rosenkrantz
	1998. 

	* ami/file/read_linefile.m: Created and added this file. It reads a 
	line-file in ARTS format (ASCII). With this function and write_linefile
	ARTS line files can now be read into Matlab, be modified and be written
	back to a file.

	* ami/math/isscalar.m: Created and added this functions that checks if
	a Matlab variable is a scalar.

	* ami/math/isinteger.m: Included more stringent check of the input.
	Only numeric input is now allowed.

2001-12-18  Stefan Buehler  <sbuehler@uni-bremen.de>

	* arts-0-1-70

	* src/math_funcs.cc (interp_lin_vector): Put in an assertion to
	check that no two x values are the same.

2001-12-17  Viju O.-J.  <vojohn@uni-bremen.de>

	* arts-0-1-69

	* Makefile.in: included the dependency for methods.cc and species_data.cc.

	* src/m_batch.cc (ybatchFromRadiosondeGlobal): Created a new
	workspace method to calculate brightness temperature for global
	radiosonde profiles. This methid is almost similar to
	ybatchFromRadiosonde. This is created because the pressure grid in
	the profiles is course so that it is to be interpolated into a
	fine grid. 

		The p_abs grid is created using the first and last values
	of pressure grids spaced logrithmically over 100 steps.

2001-12-15  Patrick Eriksson  <patrick@rss.chalmers.se>

	* doc/examples/fullmodels_example.arts: The O2 and N2 examples
	were wrong. The model names all ended with Continuum.

	* src/m_los.cc (zaFromZtan): The statement: if (z_tan[i]>z_plat)
	was before wrongly: if (za[i]>z_plat)

2001-12-14  Carlos Jimenez  <jimenez@rss.chalmers.se>

	* arts-0-1-68

	* H2O Rosenkranz center frequencies updated with more decimals
	by checking with JPL.

2001-12-13  Patrick Eriksson  <patrick@rss.chalmers.se>

	* arts-0-1-67

	* ami/arts/write_datafile.m: Changed the default precision for
	ASCII from 6 to 9. The old number was not sufficient for writing
	frequencies. With a precision of 9 decimals, a precision of 1 kHz is
	obtained up to 10 THz.

	* ami/physics/vmr2nd.m: Added this function. Calculates the number
	density for a given VMR.

	* ami/physics/nd2vmr.m: Added this function. Calculates the VMR
	for a given number density.

2001-12-10  Patrick Eriksson  <patrick@rss.chalmers.se>

	* arts-0-1-66

	* ami/hmatrix/hFreqSwitch.m: Made this function for creating the
	transfer matrix to inclide the effect of frequency switching. 
	Please note that frequency switching is not included in Qpack.

	* ami/arts/write_datafile.m: The conflict between the local
	variable heading and a file with the same name was not fixed
	properly. That should hopefully be the case now.

2001-12-10  Carlos Jimenez  <jimenez@rss.chalmers.se>

	* arts-0-1-65

	* ami/hmatrix/hBinView: small bug in line 55 1:f --> 1:nf

2001-12-05  Nikolay Koulev  <nkoulev@uni-bremen.de>
   
	* arts-0-1-64

	* doc/uguide/absorption.tex: Editted some parts. 
	
2001-12-05  Thomas Kuhn  <tkuhn@uni-bremen.de>

	* arts-0-1-63

	* src/continua.cc: Update MPM93 N2 continuum, now no 
                           underflow is possible due to zero vmr.

2001-12-05  Thomas Kuhn  <tkuhn@uni-bremen.de>

	* arts-0-1-62

	* src/continua.cc: Update the H2O continuum parameter n_s of MPM 
                           from 7.5 to 7.8.

	* doc/uguide/absorption.tex: Update the uiguide for the 
	                             isotopic ratio introduced 
                                     in the MPm93 lines at 547 and 556 GHz
                                     in the line strength.

	* aii/aii_color_table.pro: update the IDL procedures.
        
	* aii/aii_plot_file.pro:    update the IDL procedures.

2001-11-28  Patrick Eriksson  <patrick@rss.chalmers.se>

	* arts-0-1-61

	* ami/arts/write_artsvar.m: There could ba a clash between the local
	variable "heading" and a function somewhere in the search path.

2001-11-28  Stefan Buehler  <sbuehler@uni-bremen.de>

	* arts-0-1-60

	* doc/uguide/main.tex: Added to list of authors: Wolfram Haas, Nikolay
	Koulev, Thomas Kuhn, Oliver Lemke.

2001-11-28  Patrick Eriksson  <patrick@rss.chalmers.se>

	* arts-0-1-59

	* ami/hmatrix/h_backend.m: The frequency unit in an error message was 
	wrong. GHz is now changed to MHz.

2001-11-27  Patrick Eriksson  <patrick@rss.chalmers.se>

	* arts-0-1-58

	* ami/hmatrix/hAntennaGaussAdv.m: The width of the produced
	antenna pattern did not match the specified width. Fixed.
	
	* ami/hmatrix/hAntennaGaussAdv.m: The width of the produced
	channel response did not match the specified width. Fixed.

2001-11-26  Nikolay Koulev  <nkoulev@uni-bremen.de>

	* arts-0-1-57

	* doc/uguide/absorption.tex: Some changes done.

2001-11-23  Stefan Buehler  <sbuehler@uni-bremen.de>

        * arts-0-1-56

	* src/matpackIII.h: First implementation of Tensor3 is
	ready. Development time: 1 day! But it works. (At least I believe
	in it.) Check out the impressive demonstration by running
	test_matpack. 

	* src/test_matpack.cc (test31): Added examples for Tensor3 usage.

	* src/Makefile.am (test_matpack_SOURCES): Added matpackIII.h.

	* src/matpackI.h: Fixed	bug in the range checking for generating
	matrix views. (Replaced mrr.mstart+(mrr.mextent-1)*mrr.mstride and
	similar expressions by simple mrr.mextent.)

	* src/notes.txt: Some more notes here.

2001-11-22  Stefan Buehler  <sbuehler@uni-bremen.de>

        * arts-0-1-55

	* src/notes.txt: Added some rough notes here.

	* src/matpackIII.h: Started this file, which will contain the
	implementation of Tensor3.

2001-11-22  Nikolay Koulev  <nkoulev@uni-bremen.de>
	
        * arts-0-1-54

	* doc/uguide/absorption.tex: Removed undefined labels.

2001-11-22  Thomas Kuhn  <tkuhn@uni-bremen.de>
	
        * arts-0-1-53

	* changes:
	   - update /src/continua.cc online description
	   - set back the example /doc/examples/batch_example.arts.in 
	     back to original version so it works again.
	* added:
	   - figures
	        doc/uguide/Figs/cloud_description_page1.eps
	        doc/uguide/Figs/cloud_description_page2.eps
		doc/uguide/Figs/cloud_description_page3.eps
		doc/uguide/Figs/cont_description_page1.eps
		doc/uguide/Figs/cont_description_page2.eps
		doc/uguide/Figs/cont_description_page3.eps
		doc/uguide/Figs/fullmodel_description_page1.eps
		doc/uguide/Figs/fullmodel_description_page2.eps
		doc/uguide/Figs/fullmodel_description_page3.eps

2001-11-22  Oliver Lemke  <olemke@uni-bremen.de>

        * arts-0-1-52
	
	* doc/uguide/absorption.tex: Removed .ps endings from figures.

	* doc/uguide/Figs:
	- Removed files:
		doc/uguide/Figs/cloud_description_page1.ps
		doc/uguide/Figs/cloud_description_page2.ps
		doc/uguide/Figs/cloud_description_page3.ps
		doc/uguide/Figs/cont_description_page1.ps
		doc/uguide/Figs/cont_description_page2.ps
		doc/uguide/Figs/cont_description_page3.ps
		doc/uguide/Figs/fullmodel_description_page1.ps
		doc/uguide/Figs/fullmodel_description_page2.ps
		doc/uguide/Figs/fullmodel_description_page3.ps
	- Added files:
		doc/uguide/Figs/cloud_description_page1.pdf
		doc/uguide/Figs/cloud_description_page2.pdf
		doc/uguide/Figs/cloud_description_page3.pdf
		doc/uguide/Figs/cont_description_page1.pdf
		doc/uguide/Figs/cont_description_page2.pdf
		doc/uguide/Figs/cont_description_page3.pdf
		doc/uguide/Figs/cont_example.arts_page1.pdf
		doc/uguide/Figs/cont_example.arts_page2.pdf
		doc/uguide/Figs/cont_example.arts_page3.pdf
		doc/uguide/Figs/fullmodel_description_page1.pdf
		doc/uguide/Figs/fullmodel_description_page2.pdf
		doc/uguide/Figs/fullmodel_description_page3.pdf
	
2001-11-21  Thomas Kuhn  <tkuhn@uni-bremen.de>
	
        * arts-0-1-51

	* changes: 
	  - file src/continua.cc:
	    Online documentation changed.

2001-11-21  Thomas Kuhn  <tkuhn@uni-bremen.de>
	
        * arts-0-1-50

	* changes: 
	  - Added files: 
		doc/uguide/Figs/cloud_description_page1.fig
		doc/uguide/Figs/cloud_description_page2.fig
		doc/uguide/Figs/cloud_description_page3.fig
		doc/uguide/Figs/cloud_description_page1.ps
		doc/uguide/Figs/cloud_description_page2.ps
		doc/uguide/Figs/cloud_description_page3.ps
		doc/uguide/Figs/clouds_example.arts_page1.ps
		doc/uguide/Figs/clouds_example.arts_page2.ps
		doc/uguide/Figs/clouds_example.arts_page3.ps
		doc/uguide/Figs/cont_description_page1.fig
		doc/uguide/Figs/cont_description_page2.fig
		doc/uguide/Figs/cont_description_page3.fig
		doc/uguide/Figs/cont_description_page1.ps
		doc/uguide/Figs/cont_description_page2.ps
		doc/uguide/Figs/cont_description_page3.ps
		doc/uguide/Figs/cont_example.arts_page1.ps
		doc/uguide/Figs/cont_example.arts_page2.ps
		doc/uguide/Figs/cont_example.arts_page3.ps
		doc/uguide/Figs/fullmodel_description_page1.fig
		doc/uguide/Figs/fullmodel_description_page2.fig
		doc/uguide/Figs/fullmodel_description_page3.fig
		doc/uguide/Figs/fullmodel_description_page1.ps
		doc/uguide/Figs/fullmodel_description_page2.ps
		doc/uguide/Figs/fullmodel_description_page3.ps
		doc/uguide/Figs/fullmodels_example.arts_page1.ps
		doc/uguide/Figs/fullmodels_example.arts_page2.ps
		doc/uguide/Figs/fullmodels_example.arts_page3.ps
		doc/uguide/app_units.tex
		doc/examples/clouds_example.arts.in
		doc/examples/cont_example.arts.in
		doc/examples/fullmodels_example.arts.in
	  - changes in files:
	        src/constants.cc:
	          added the constants Euler's number, 
	          log of Euler's number
	        src/workspace.cc:
	          added ws cont_description_models for methods
	          "cont_descriptionInit" and "cont_descriptionAppend".
	          Also description is added for the ws
	          cont_description_names, cont_description_models, 
	          and cont_description_parameters.
	        src/methods.cc:
	          added ws cont_description_models to methods
	          "cont_descriptionInit" and "cont_descriptionAppend".
	          Also the keywords for "cont_descriptionAppend" are 
	          changed/added to be now tagname, model, and userparameters.
	          All the other methods, like "absCalc", which 
	          use the ws cont_description_names and 
	          cont_description_parameters already were updated
	          to have also cont_description_models as input.
	          The new method "WaterVaporSaturationInClouds" is 
	          implemented to set the water vapor partial pressure 
	          to the saturation pressure in clouds.
	          In "AtmFromRaw" the flag for setting saturation in
		  clouds is taken away. 
	          Also in "AtmFromRaw", linear interpolation in 
	          ln of pressure is valid for clouds now.
	        src/continua.cc:
	          Detailed online documentation implemented.
	          Synthesis of the tags "O2-SelfContPWR93" and 
	          "O2-SelfContMPM93" to tag "O2-SelfContStandardType" 
	          since both models are essentially the same.
	          Also the tag "N2-SelfContPWR93" is now named 
	          "N2-SelfContStandardType".
	          Change in the calling function "xsec_per_tgAddConts" 
	          to check input variables "tagname", "model", and 
	          "userparameters" for consistency.
	          Some internal conversion coefficients are stated 
	          now as global constants of the file continua.cc 
	          to be more homogeneous in all the functions.
                src/partition_function_data.cc:
	          Adjustments of the tag names for O2 and N2.
	        src/species_data.cc:
	          Adjustments of the tag names for O2 and N2.
	        src/m_abs.cc:
	          Adjustent for the additional ws cont_description_models
	          to the functions "absCalc" and "xsec_per_tgAddConts".
	          Revision of the functions "cont_descriptionInit" and 
	          "cont_descriptionAppend" according to the new input 
	          parameters defined in methods.cc. 
	          Adjustment of "AtmFromRaw" to cancel the saturation
	          flag.
	          Creation of the function "WaterVaporSaturationInClouds" 
	          which corresponds to the method 
	          "WaterVaporSaturationInClouds".
	        doc/uguide/absorption.tex:
	          major revision of the chapters describing the 
	          continua, the full models and the cloud absorption.
	          Also a detailed description of the implementation 
	          and usage in arts is added.
	        doc/uguide/app_units.tex:
	          Table with the arts units and unit conversion
	          coefficients.
	
2001-11-21  Stefan Buehler  <sbuehler@uni-bremen.de>

	* arts-0-1-49

	* doc/uguide/concept.tex: Added practical
	information about useful command line parameters and such things.

	* doc/examples/.cvsignore: Cleaned up, using the new naming
	convention. Ignored are now:
	"*.arts", "*.rep", "*_example.*.aa", "*_example.*.ab".

	* doc/examples/amsu_example.arts.in: Fixed name of output file
	from _y_mono to .y_mono

2001-11-20  Oliver Lemke  <olemke@uni-bremen.de>

	* arts-0-1-48
	
	* src/m_io.cc (Exit): Return 0 on exit.

	* doc/examples/radiosonde_example.arts.in: Changed f_mono.out to
	f_mono.aa.

	* doc/examples/amsu_example.arts.in: Renamed output file.
	Changed f_mono.out to f_mono.aa.

	* doc/examples/f_mono.aa: Renamed from f_mono.out.

2001-11-20  Oliver Lemke  <olemke@uni-bremen.de>

	* arts-0-1-47
	
	* doc/examples/batch_example.arts.in: Renamed batch_test to
	batch_input.

	* doc/examples/batch_test.*.ab: Renamed to batch_input.*.ab.

	* doc/uguide/development.tex: Added section about creating example
	files.

	* doc/examples/amsu.arts: Renamed to amsu_example.arts.in.

	* doc/examples/auto_example1.arts: Renamed to
	absorption_example.arts.in.

	* doc/examples/auto_full.arts.in: Renamed to rt_example.arts.in.

	* configure.in: Added new examples.

2001-11-19  Stefan Buehler  <sbuehler@uni-bremen.de>

	* arts-0-1-46

	* src/methods.cc (define_md_data): Added method MethodListDefine,
	which sets up a method list from method names given by the
	ArrayOfString keyword parameter.

	* src/m_method_list.cc: Added this file, which will contain
	methods related to method lists.
	(MethodListDefine): Added implementation of this method here.

	* src/method_list.h: Added this file, which might contain
	declarations related to method lists in the future. At the moment
	it is empty.

	* src/Makefile.am (arts_SOURCES): Added m_method_list.cc, but not
	method_list.h, since the latter is not yet used.

	* src/workspace.cc (define_wsv_data): Added WSV method_list, which
	can hold a generic method list, as the name says.

2001-11-16  Oliver Lemke  <olemke@uni-bremen.de>

	* arts-0-1-45
	
	* doc/examples/Makefile.am: Added check target. Call make check to
	see if the example files are working.
	
	* doc/examples/cont.arts: Quick fix to get it running. Name will
	change to cont_example.arts when Thomas updates it.
	
2001-11-16  Patrick Eriksson  <patrick@rss.chalmers.se>

	* arts-0-1-44

	* src/m_los.cc (yCalc): Removed check between f_mono and trans and
	between f_mon and source as those gave an incorrect error message
	when zenith angles are outside the atmosphere.

	* am/hmatrix: Fixed a bug regarding re-allocation of matrix sizes
	when this was done for the last zenith angle in h_mixer and for
	the last frequency in h_backend. 

2001-11-14  Patrick Eriksson  <patrick@rss.chalmers.se>

	* arts-0-1-43

	* There was a bug in the AMI function h_mixer.m. The function only
	worked when the upper sideband was considered to be the primary
	band. This should have been fixed now.

2001-11-13  Nikolay Koulev  <nkoulev@uni-bremen.de>

	* arts-0-1-42

	* src/methods.cc (lineshapeDefine): Edited the entry.

	* src/methods.cc (lineshape_per_tgDefine): Edited the entry.
	
2001-11-13  Nikolay Koulev  <nkoulev@uni-bremen.de>

	* arts-0-1-41

	* src/methods.cc (lineshapeDefine): Edited the entry.

	* src/methods.cc (lineshape_per_tgDefine): Edited the entry.
	
2001-11-09  Nikolay Koulev  <nkoulev@uni-bremen.de>

	* arts-0-1-40

	* src/methods.cc (lineshapeDefine): Edited the entry.

	* src/methods.cc (lineshape_per_tgDefine): Edited the entry.
	
2001-11-09  Nikolay Koulev  <nkoulev@uni-bremen.de>

	* arts-0-1-39

	* src/methods.cc (lineshapeDefine): Edited the entry.

	* src/methods.cc (lineshape_per_tgDefine): Edited the entry.
	
2001-11-09  Nikolay Koulev  <nkoulev@uni-bremen.de>

	* arts-0-1-38

	* src/methods.cc (lineshapeDefine): Edited the entry.

	* src/methods.cc (lineshape_per_tgDefine): Edited the entry. 
	
2001-11-09  Nikolay Koulev  <nkoulev@uni-bremen.de>

	* arts-0-1-37

	* src/methods.cc (lineshapeDefine): Erased the non-functioning
	lineshapes from the documentation with the Drayson approximation
	and added the only one functioning - Voigt_Drayson.

	* src/methods.cc (lineshape_per_tgDefine): The same as above.
		
2001-11-09  Stefan Buehler  <sbuehler@uni-bremen.de>

	* arts-0-1-36

	* src/file.cc (read_array_of_matrix_from_stream): Allow comments
	also in the middle of the file.
	(skip_comments): Made a separate function out of this,

2001-11-06  Stefan Buehler  <sbuehler@uni-bremen.de>

	* arts-0-1-35

	* General: Added a new method, `ybatchFromRadiosonde', which can
	be used to calculate radiances for a whole bunch of radiosonde
	launches. ybatchCalc could not be used for this, because it needs
	all input on the same pressure grid.

	* src/workspace.cc (define_wsv_data): Added variable radiosonde_data.

	* src/methods.cc (define_md_data): Added method ybatchFromRadiosonde.

	* src/m_batch.cc (ybatchFromRadiosonde): Added this method.

	* configure.in: Added radiosonde_example.arts.in.

	* doc/examples/radiosonde_example.arts.in: Added this example,
	explaining the use of the new method ybatchFromRadiosonde.

	* doc/examples/radiosondes.aa: Added this file. It contains 3
	radiosonde launches. See online documentation of the workspace
	variable `radiosonde_data' for an explanation of the
	format/contents. 

	* doc/examples/.cvsignore: Added batch_example output. Added
	radiosonde_example output.

2001-11-02  Stefan Buehler  <sbuehler@uni-bremen.de>

	* arts-0-1-34

	* src/methods_as_wsv.h: Started this file.

	* src/Makefile.am (arts_SOURCES): Included methods_as_wsv_h.

	* src/parser.h: Updated doxygen docu for class MRecord.

2001-11-01  Stefan Buehler  <sbuehler@uni-bremen.de>

	* arts-0-1-33

	* doc/uguide/matrix_vector.tex: Fixed some typos.

	* Changelog: Removed all the extra blank lines between log
	entries. From now on, let's have only one blank line.

2001-10-31  Stefan Buehler  <sbuehler@uni-bremen.de>

	* arts-0-1-32

	* src/matpackI.h: Cosmetic changes to doxygen comments.

	* doc/uguide/matrix_vector.tex: Finished the first draft of this
	chapter. Now it contains a description of Vector, Matrix, and
	Array. 

	* README: Removed one outdated sentence about arts-data.
	
2001-10-31  Oliver Lemke  <olemke@uni-bremen.de>

	* arts-0-1-31

	* All of the following changes belong to the effort to compile
	ARTS on marvin.

	* configure.in: First check for libjpeg. Otherwise static linking
	does not work when the libraries are added in the wrong order
	(libdf depends on libjpeg).

	* src/parser.cc: Moved #include "arts.h" to top.

	* src/main.cc: Moved #include "arts.h" to top.

	* src/absorption.cc: Moved #include "arts.h" to top.

	* src/workspace_aux.cc: Moved #include "arts.h" to top.

	* src/globals_2.cc: Moved #include "arts.h" to top.

	* src/arts.h: Added #include <cstddef> on top which contains
	definition of size_t required to compile on marvin with HP's
	broken gcc.
	
2001-10-31  Oliver Lemke  <olemke@uni-bremen.de>

	* arts-0-1-30
	
	* reconf: Added option --copy to automake
	
2001-10-31  Oliver Lemke  <olemke@uni-bremen.de>

	* arts-0-1-29
	
	* README: Added documentation for configure options.

	* configure.in: Changed configure option name for warnings to
	--enable-more-warnings.

	Removed option --enable-docs. Now the docs are only generated in
	maintainer-mode.
	
2001-10-30  Stefan Buehler  <sbuehler@uni-bremen.de>

	* arts-0-1-28

	* General: Fixed the bug in copying VectorViews, that was
	discovered by Carlos.
	
	* src/matpackI.h (VectorView VectorView::operator=(const
	VectorView& v)): Added. This is a tricky one. The problem is that
	since VectorView is derived from ConstVectorView, a default =
	operator is generated by the compiler, which does not do what we
	want. So we need this one to override the default.
	(MatrixView& MatrixView::operator=(const MatrixView& m)): Added this
	also for the same reason.
	
	* src/m_batch.cc (ybatchCalc): Removed the bug workaround, since
	it is no longer necessary.

2001-10-30  Carlos Jimenez  <jimenez@rss.chalmers.se>

	* arts-0-1-27

	* something wrong when tagging previous version, let's see now.

2001-10-30  Carlos Jimenez  <jimenez@rss.chalmers.se>

	* arts-0-1-26

	* cleaning and moving of some mscripts in /ami

	* adding /doc/examples/batch_example.arts.in as an example
	of ybatchCalc, input files needed are listed there and 
	have also been added in the same directory.

2001-10-24  Stefan Buehler  <sbuehler@uni-bremen.de>

	* arts-0-1-25

	* doc/uguide/matrix_vector.tex: Started Matrix part.
	
2001-10-23  Carmen Verdes  <cverdes@uni-bremen.de>

	* arts-0-1-24

	* ami/physics/za2geomtan.m: added. This function converts the
	zenith angles to tangent altitudes

2001-10-18  Nikolay Koulev  <nkoulev@uni-bremen.de>

	* arts-0-1-23

	* doc/uguide/absrption.tex: editing and resolving warnings in the Tex
	code.

2001-10-18  Stefan Buehler  <sbuehler@uni-bremen.de>

	* arts-0-1-22

	* doc/uguide/matrix_vector.tex: Added this file. Wrote the section
	about Vector. Still missing: Matrix, Array.

	* doc/uguide/main.tex: Included the new file.

	* doc/uguide/Makefile.am (texfiles): Added the new file.

2001-10-16  Patrick Eriksson  <patrick@rss.chalmers.se>

	* arts-0-1-21

	* Small change for ground emission WFs. The ground emission (as a 
	function of freqeuncy) should be treated as a "profile" and not as 
	a number of seperate variables. The k_names are changed for ground 
	emission to reflect this.
	
2001-10-16  Carlos Jimenez  <jimenez@rss.chalmers.se>

	* arts-0-1-20

	* Committing to test.

2001-10-16  Carlos Jimenez  <jimenez@rss.chalmers.se>

	* arts-0-1-19

	* /ami/physiscs/za2geomtan.m added again, this time
	for real.

2001-10-15  Carlos Jimenez  <jimenez@rss.chalmers.se>

	* arts-0-1-18

	* /ami/physiscs/za2geomtan.m added

2001-10-15  Carlos Jimenez  <jimenez@rss.chalmers.se>

	* arts-0-1-17

	* /ami/hmatrix/hRedKx.m and hRedLimb.m removed, they
	are now part of Qpack.

2001-10-16  Carlos Jimenez  <jimenez@rss.chalmers.se>

	* arts-0-1-6

	* forgot to add hseCalc.m, added now!

2001-10-16  Carlos Jimenez  <jimenez@rss.chalmers.se>

	* arts-0-1-5

	* BUG in m_batch line 301 temporarily fixed, Stefan please
	have a look

	* /ami/hmatrix/hRedLimb updated
	
	* new mscript /ami/physics/hseCalc.m resembling the hseCalc
	function of arts, to be used for instance in Qpack/Main/qp_
	rnd_atm.

2001-10-15  Patrick Eriksson  <patrick@rss.chalmers.se>

	* arts-0-1-4

	* Absorption was not interpolated using log(p) as altitude coordinate.
	Fixed.
	
2001-10-12  Stefan Buehler  <sbuehler@uni-bremen.de>

	* arts-0-1-3

	* src/absorption.cc (ReadFromJplStream): Here also set sgam to
	agam (was zero).

2001-10-12  Stefan Buehler  <sbuehler@uni-bremen.de>

	* arts-0-1-2

	* src/absorption.cc (xsec_species): Added pressure shift. It
	remains to be verified that this works correctly. Hopefully the
	intercomparison with Moliere for HCl can show that.
	(ReadFromHitranStream): If sgam==0, set it equal to agam.

	* src/absorption.h: Moved doxygen header for xsec_species to
	absorption.cc. 

2001-10-08  Nikolay Koulev  <nkoulev@uni-bremen.de>
        
	* arts-0-1-1
	
	* doc/uguide/absorption.tex: completed my section of line by line
	absorption coefficients calculation

	* src/absorption.h: changed in ARTS documentation cm-1 to J

2001-10-07  Oliver Lemke  <olemke@uni-bremen.de>

	* arts-0-1-0

	* This is pre-release 1.
	
	* doc/uguide/Figs/Makefile.am (EXTRA_DIST): Removed *calerror*.
	
2001-10-07  Oliver Lemke  <olemke@uni-bremen.de>

	* arts-0-0-267
	
	* src/Makefile.am (methods.o): Added -I.. to be compatible with
	the latest automake version.
	(species_data.o): Added -I.. to be compatible with the latest
	automake version.

	* src/methods.cc: Changed #include "config.h" to #include <config.h>.

	* src/arts.h: Changed #include "config.h" to #include <config.h>.

2001-10-05  Stefan Buehler  <sbuehler@uni-bremen.de>

	* arts-0-0-266

	* doc/uguide/Makefile.am: Remove app_math.txt.

	* doc/examples/Makefile.am: Changed example1.arts to auto_example1.arts.

2001-10-05  Stefan Buehler  <sbuehler@uni-bremen.de>

	* doc/uguide/Makefile.am: Remove app_math.txt.

	* doc/examples/Makefile.am: Changed example1.arts to auto_example1.arts.

	* arts-0-0-265

	* doc/index.html: Changed names of example1.arts and full.arts to
	auto_ 
	Replaced h2o.arts by cont.arts.

	* doc/examples/auto_example1.arts.in: Created from example1.arts.

	* doc/examples/example1.arts: Removed.

	* doc/uguide/development.tex: Fixed TeX warnings and updated.

	* doc/uguide/app_math.tex: Removed.

	* doc/uguide/main.tex: Removed appendix with math
	operations. Commented out app_units. What was this appendix? Who
	removed it? There is no ChangeLog entry.
	
2001-10-05  Patrick Eriksson  <patrick@rss.chalmers.se>

	* arts-0-0-264

	* Further work on AUG. I have now quickly gone through "my" parts and
	removed the worst problems. The text should now be more or less correct
	but not everything is described (far from).

	* Made sure that the analytical version of kTemp is not used with
	emission=0.
	
2001-10-05  Patrick Eriksson  <patrick@rss.chalmers.se>

	* arts-0-0-263

	* The example auto_full is now up to date and runs. Good work Oliver
	to set the path to data dirs automatically.

	* There were a lot of old files in .cvsignore for the examples folder.
	You should remove the old files. The following can be removed full.*
	h2o.* sparse.* uwe.* *.am 
	
	* Fixed a bug for n2_absSet and h2o_absSet. For example, n2_abs_Set
	searched for the first tag group where the tag string starts with N2
	and instead of finding the N2 tag group, N2O could be found. The
	functions now search for N2- and H2O-.

2001-10-04  Patrick Eriksson  <patrick@rss.chalmers.se>

	* arts-0-0-262

	* Removed some old control files in doc/example. The remaining examples
	are: auto_full, example1 and amsu. (I will update auto_full ASAP).

	* Worked on the sensor, data reduction and utility chapters in AUG.
	The calibration section is removed as the calibration can be done
	in a better way than I realised. It is possible to do the inversions 
	with Rayleigh-Jean temperatures if the calibration is performed
	correctly. 
	
2001-10-04  Stefan Buehler  <sbuehler@uni-bremen.de>

	* arts-0-0-261

	* src/methods.cc (define_md_data): Added tgsDefineAllInScenario.

	* src/m_abs.cc (tgsDefineAllInScenario): Added this method.

	* doc/examples/example1.arts: Quick fix so that this file runs
	now, using the new method to select all species. Now there is a
	runtime error in absCalc, because the partiton function for one
	OCS isotope is not set.

	* src/species_data.cc (define_basic_species_data): Set degfr=0 for
	cloud species. This has no effect since it is not used.

2001-09-25  Nikolay Koulev  <nkoulev@uni-bremen.de>

	* arts-0-0-260

	* doc/uguide/absoption.tex: Continued to work on this.
	Edited the whole Line Section.
 
2001-10-04  Oliver Lemke  <olemke@uni-bremen.de>

	* arts-0-0-259
	
	* doc/doxygen/doxygen.css: Added stylesheet definitions for
	doxygen documentation to match the style of our satpage.
	
	* doc/doxygen/Doxyfile.in: Added default stylesheet.

2001-10-04  Viju O.-J.  <vojohn@uni-bremen.de>

	* arts-0-0-258
	
	* doc/examples/amsu.arts: Minor changes in amsu.arts

2001-10-04  Viju O.-J.  <vojohn@uni-bremen.de>	

	* arts-0-0-257
	
	* doc/examples/f_mono.out: Included monochromatic frequency file
	for AMSU

	* doc/examples/amsu.arts: Included a control file for AMSU

2001-10-02  Oliver Lemke  <olemke@uni-bremen.de>

        * arts-0-0-256
	
	* doc/doxygen/Makefile.am: Made the generation depending on
	ARTS_GENDOCS. If ARTS_GENDOCS is not defined then skip the doxygen
	run.

	* doc/uguide/Makefile.am: Made the generation of uguide.ps and
	uguide_pdf.pdf depending on ARTS_GENDOCS. If ARTS_GENDOCS is not
	defined the dummy targets are used.

	Added auto_version.tex to target dependencies.

	* Makefile.am: Added doc permanently to subdirs. Otherwise the
	documentation is only installed in maintainer-mode. But what we
	want is to only re-generate the docs in maintainer mode but
	install it always.

	* configure.in: Added -g to CXXFLAGS_FIXED when debug is enabled.
	Corrected CXXFLAGS_FIXED in maintainer mode (warning flags where
	added twice).

2001-10-02  Stefan Buehler  <sbuehler@uni-bremen.de>

        * arts-0-0-255

	* src/math_funcs.cc (check_ncol_nrow): Added this check function.
	All check functions: Removed newline at end of message.

	* src/workspace.cc (define_wsv_data): Added h.

	* src/methods.cc (define_md_data): Added methods
	VectorMatrixMultiply and MatrixMatrixMultiply.

	* src/m_io.cc (VectorMatrixMultiply): Added this method.
	(MatrixMatrixMultiply): Added this method.

2001-10-02  Oliver Lemke  <olemke@uni-bremen.de>

        * arts-0-0-254
	
	* configure.in: Added default sizes for cross-compiling to all
	AC_CHECK_SIZEOF calls to avoid the autoconf warnings (AC_TRY_RUN
	called without ....).

2001-10-02  Oliver Lemke  <olemke@uni-bremen.de>

        * arts-0-0-253
	
	* doc/uguide/absorption.tex: Removed ending .eps for
	refractive_water_comp_T.eps, LWCcloud.eps and IWCcloud.eps.

	* doc/examples/.cvsignore: Added all auto_full.* files except
	auto_full.arts.in.

2001-10-02  Stefan Buehler  <sbuehler@uni-bremen.de>

        * arts-0-0-252

	* src/methods.cc (define_md_data): Added method lines_per_tgSetEmpty.

	* src/m_abs.cc (lines_per_tgSetEmpty): Added this method.

2001-10-01  Oliver Lemke  <olemke@uni-bremen.de>

        * arts-0-0-251
	
	* doc/uguide/Makefile.am (uguide_pdf.pdf): Pipe the output of the
	first two latex runs into /dev/null.
	(uguide.dvi): Pipe the output of the first two latex runs into
	/dev/null.

	* configure.in: auto_full.arts is now always generated, even if
	arts-data is not installed. Because the optional generation
	does not work on older autoconf versions :-(
	
2001-09-25  Thomas Kuhn  <tkuhn@uni-bremen.de>
 
        * arts-0-0-250
 
        * corrections since the version arts-0-0-249 didn't worked!

2001-09-25  Thomas Kuhn  <tkuhn@uni-bremen.de>
 
        * arts-0-0-249
 
        * doc/uguide/absoption.tex: Continued to work on this.
        Edited the continuum and full model description.

2001-09-25  Nikolay Koulev  <nkoulev@uni-bremen.de>

	* arts-0-0-248

	* doc/uguide/absoption.tex: Continued to work on this.
	Edited the Line Shape Section.

2001-10-01  Patrick Eriksson  <patrick@rss.chalmers.se>

	* arts-0-0-247

	* Worked on the on-line information for vector and matrix math 
	functions (such as VectorSet). Removed VectorSetFromArrayofVector
	as the selection was done by index and we have decided that such
	functions shall be removed (not safe with selection by index).

	* Wrote a section on the scope of ARTS fof chapter 1 of AUG

	* Work on chapters 2, 4 and 5 of AUG. Some text removed, some text 
	added. Control file examples added for los/rte calculations. 
	  
	* Removed tex-ing warnings in "my" part of the ps-version of AUG 
	(just 2, out of a large number warnings).
	
2001-09-28  Patrick Eriksson  <patrick@rss.chalmers.se>

	* arts-0-0-246

	* An incorrect assert fixed in kContAbs

	* auto_wsv.txt now used in AMI instead of wsv.txt.

	* wsv.txt removed from /src (again?)

	* Fixed an incorrect error message when a variable of incorrect type
	is selected as global input or output. 

	* Updated read_datafile to handle ArrayOfIndex (instead of 
	ArrayOfSizet).
	
2001-09-28  Patrick Eriksson  <patrick@rss.chalmers.se>

	* arts-0-0-245

	* Due to a problem in the HDF part, I couldn't easily check what I did
	yeasterday. There were plenty of bugs in the input checks. These
	are removed. My test case is at least running.

	* On-line info for kTemp written.

	* Conversion to brightness temperatures moved to functions invplanck
	and invrayjean (placed in atm_funcs). This mainly to avoid repeated
	output when converting a WF-matrix.

2001-09-28  Claudia Emde  <emde@uni-bremen.de>

	* arts-0-0-244	
	
	* src/methods.cc : changed absorption methods again

2001-09-27  Oliver Lemke  <olemke@uni-bremen.de>

	* arts-0-0-243
	
	* src/main.cc (main): Added info about HDF support to --version
	option.

	* configure.in: Removed LF_SET_WARNINGS.
	Bug fix in HDF stuff.

	Added option --enable-warnings which appends -W -Wall to CFLAGS and
	CXXFLAGS. Disabled by default.

2001-09-27  Sreerekha T.R.  <rekha@uni-bremen.de>
	
	* arts-0-0-242
	
	* TODO: Added a new TODO.

	* src/methods.cc (define_md_data):  Changed the online
	documentation of the following methods:
	- linesWriteAscii
	- lines_per_tgWriteAscii
	- lines_per_tgReadFromCatalogues
	- linesReadFromHitran
	- linesReadFromMytran2
	- linesReadFromJpl
	- linesReadFromArts
	- linesElowToJoule
	- lines_per_tgCreateFromLines
	- lines_per_tgAddMirrorLines
	- lines_per_tgCompact
	
2001-09-27  Viju O.-J.  <vojohn@uni-bremen.de>

	* arts-0-0-241
	
	* src/methods.cc (define_md_data): Changed the online
	documentation of the following methods:
	- raw_vmrsReadFromFiles
	- raw_vmrsReadFromScenario
	- AtmFromRaw
	- h2o_absSet
	- n2_absSet
	- vmrsScale
	
2001-09-27  Patrick Eriksson  <patrick@rss.chalmers.se>

	* arts-0-0-240

	* Revised the weighting function functions. Some function names
	and some keyword input have been changed. The aim has been to have
	a single function for each retrieval type. However, there are two
	versions for species. On-line information updated and check of
	function input is added.

	* kSpeciesAll is now called kSpecies as this should be the standard
	function for species. The old kSpecies is now called kSpeciesSingle.

	* There is a problem with kSpecies and vmrs. It is now assumed
	that vmrs has the same length as abs_per_tgs, but this is now not
	the case. I will fix this later.
	
	* There is now only a single kContAbs function. See the on-line info.

	* There is now only a single kTemp function. See the on-line info.
	
	* No bigger bug checks. Will be done.
	
2001-09-27  Oliver Lemke  <olemke@uni-bremen.de>

	* arts-0-0-239
	
	* src/Makefile.am (species_data.o): Added dependencies.
	(methods.o): Added dependencies.

2001-09-27  Oliver Lemke  <olemke@uni-bremen.de>

	* arts-0-0-238
	
	* src/methods.cc (define_md_data): Updated the docs of the Ascii
	methods to match the style guide.

	* src/Makefile.am: Removed LDADD. No longer needed because the
	libraries are automatically detected and set by configure.

	Added special targets for methods.cc and species_data.cc.

	* configure.in: Added library checks for libjpeg, libdf and libz
	(needed by HDF).

	Introduced an extra compiler flag variable CXXFLAGS_FIXED which is
	used to compile methods.cc and species_data.cc to avoid the
	exorbitant compilation time.

	Added a new configure flag called --enable-debug /
	--disable-debug. By default debugging is enabled.
	
2001-09-27  Patrick Eriksson  <patrick@rss.chalmers.se>

	* arts-0-0-237

	* Revised the following parts: refraction, ground, emission, and hse.
	Improved on-line information and more checks of input.

	* Moved everything connected generation of random data to a file
	called rand.old. The random functions are not used now. As I don't
	like to have larger pieces of old code hanging around (even if 
	commented out), I moved it to a special file. Maybe not the best
	solution, but what to do?

	* Removed special functions for transmission calcultions (xxxTau).
	I did this as there is no cost to call sourceCalc when emission=0
	(source is set to be empty).
	
2001-09-26  Nikolay Koulev  <nkoulev@uni-bremen.de>
	
	* arts-0-0-236

	* doc/uguide/absoption.tex: Continued to work on this.
	Edited the Partition Function subsection
	
2001-09-26  Claudia Emde  <emde@uni-bremen.de>
	
	* arts-0-0-235

	* src/methods.cc: format of absorption methods changed

2001-09-26  Oliver Lemke  <olemke@uni-bremen.de>

	* arts-0-0-234
	
	* configure.in: Added debugging switch.
	
	* src/Makefile.am: Corrected LD_ADD. Quick fix, needs further work.

	* src/methods.cc:  Added include config.h.
	
	* src/m_batch.cc: Added include config.h.
	
	* src/m_hdf.cc: Added include config.h.

2001-09-26  Patrick Eriksson  <patrick@rss.chalmers.se>

	* arts-0-0-233

	* I didn't manage to link the program after Oliver's last commit, but 
	I must commit to move changes to the laptop.

	* Improved text for WSV in workspace.cc for "my" variables. Can someone
	elso look at the remaining variables.

	* Some WSV are removed: f_sensor, za_sensor, i_cal...

	* I did this as the sensor is totally removed from ARTS. 

	* The TB and TRJ functions changed to take f_mono and za_pencil as 
	input. 

	* The function yLoadCalibration removed (I know think this function
	is not needed. It is possible to make the load switching smarter than
	I realised. The corresponding part in AUG will be removed.)

2001-09-26  Oliver Lemke  <olemke@uni-bremen.de>

	* arts-0-0-232

	* src/Makefile.am: Set the appropriate LD_FLAGS depending on
	HDF_SUPPORT.

	* src/wsv.txt: Renamed to auto_wsv.txt and removed from
	repository.

	* src/make_auto_wsv_h.cc (main): Renamed output file wsv.txt to
	auto_wsv.txt.

	* src/m_batch.cc: Put an #ifdef / #endif block around the whole file.

	* src/m_hdf.cc: Put an #ifdef / #endif block around the whole file.

	* configure.in: Added AM_CONDITIONAL for HDF_SUPPORT.

	* src/methods.cc (define_md_data): Added #ifdef / #endif block
	around all HDF requiring functions incl. ybatchCalc.

2001-09-26  Patrick Eriksson  <patrick@rss.chalmers.se>

	* arts-0-0-231

	* Changed the LOS type name from LOS to Los (but the acronym for the
	line-of-sight is still LOS).

	* Moved everything connected to the binary HDF files to m_hdf.cc.
	
2001-09-25  Oliver Lemke  <olemke@uni-bremen.de>

	* arts-0-0-230
	
	* src/Makefile.am: Completely rewritten to get rid of the
	BUILT_SOURCES stuff. Now also the clean targets work properly.

	* Makefile.am (DEFAULT_SUBDIRS): Added aii directory.

	* ami/Makefile.am (SUBDIRS): Added general directory.

2001-09-25  Nikolay Koulev  <nkoulev@uni-bremen.de>

	* arts-0-0-229

	* doc/uguide/absoption.tex: Continued to work on this.
	Edited the Partition Function subsection
	
2001-09-25  Nikolay Koulev  <nkoulev@uni-bremen.de>

	* arts-0-0-228

	* doc/uguide/absoption.tex: Continued to work on this.
	Included the Partition Function subsection

2001-09-25  Stefan Buehler  <sbuehler@uni-bremen.de>

	* arts-0-0-227

	* src/m_abs.cc (linesReadFromArts): Reset lines at the start of
	the function. 
	(linesReadFromHitran): Reset lines at the start of
	the function. 
	(linesReadFromJpl): Reset lines at the start of
	the function. 
	(linesReadFromMytran2): Reset lines at the start of
	the function. 

	* doc/uguide/formats.tex: Continued to work on this.

2001-09-24  Stefan Buehler  <sbuehler@uni-bremen.de>

	* arts-0-0-226

	* src/Makefile.am: Removed outdated comment about doxygen docu.

	* doc/uguide/formats.tex: Worked a bit on this section of AUG. 

	* TODO: Cleaned up a bit.

2001-09-24  Oliver Lemke  <olemke@uni-bremen.de>

	* arts-0-0-225

	* First cleanup of all Makefile.am files (all except src dir).
	
	NOTE: Please remember to add your new files also to the
	Makefile.am files. It is a real mess when you have to go through
	all directories and search for Makefile.am files which are not in
	sync with the files in the corresponding directory.
	
	* doc/uguide/Figs/Makefile.am (EXTRA_DIST): Added a whole bunch of
	missing graphic files: fig_bendingangle.eps, fig_bendingangle.pdf,
	fig_bendingangle.m, fig_calerror.m, fig_calerror_tb_1.eps,
	fig_calerror_tb_1.pdf, fig_calerror_tb_2.eps,
	fig_calerror_tb_2.pdf, fig_calerror_trj_1.eps,
	fig_calerror_trj_1.pdf, fig_calerror_trj_2.eps,
	fig_calerror_trj_2.pdf.

	* doc/uguide/Makefile.am (uguidedocdir): Renamed from thisdocdir.
	
	* doc/uguide/Makefile.am: Cosmetics. 
	
	* configure.in: Added AM_CONDITIONAL for ARTS_MAINTAINER_MODE and
	ARTS_DATA_PATH.

	* doc/examples/Makefile.am: Install examples depending on arts-data
	packages only when arts-data was found during configure.
	(examplesdoc_DATA): Renamed from thisdoc_DATA.
	(examplesdocdir): Renamed from thisdocdir.

	* aii/Makefile.am (aii_DATA): Renamed from this_DATA.
	
	* aii/Makefile.am (aiidir): Renamed from thisdir.

	* aii/Makefile.am (aii_DATA): Added aii_color_table.pro,
	aii_epilogue.pro, aii_klegend_d.pro, aii_plot_file.pro,
	aii_plot_legend.pro, aii_plotsymbols.pro, aii_prologue_l.pro,
	plot_abs_per_tg.pro, plot_vmr_per_tg.pro, read_tag_groups.pro,
	showme.pro, sort_abs.pro.

	* ami/Makefile.am (ami_DATA): Added README.

	* ami/plot/Makefile.am (EXTRA_DIST): Added axes_1xn.m, axes_nx1.m,
	text3.m, title2.m, xlabel2.m, ylabel2.m, zlabel2.m.

	* ami/math/Makefile.am (EXTRA_DIST): Added sFromFile.m.

	* ami/hmatrix/Makefile.am (EXTRA_DIST): Added hRedKx.m, hRedLimb.m.

	* ami/general/Makefile.am (EXTRA_DIST): Added amenu.m, whoami.m.

	* ami/file/Makefile.am (EXTRA_DIST): Added write_linefile.m.

	* ami/arts/Makefile.am (EXTRA_DIST): Removed out.m.

	* src/Makefile.am (make_auto_wsv_h_SOURCES): Removed hmatrix.
	(make_auto_md_h_SOURCES): Removed hmatrix.
	(make_auto_md_cc_SOURCES): Removed hmatrix.

	* src/methods.cc (define_md_data): Fixed typo.
	
2001-09-24  Mashrab  <kmashrab@uni-bremen.de>

	* arts-0-0-224
	
	* src/methods.cc: Updated online docs for binary
	read-write methods.

2001-09-24  Stefan Buehler  <sbuehler@uni-bremen.de>

	* arts-0-0-223

	* src/methods.cc (define_md_data): Updated online doc for Exit,
	Test, cont_descriptionInit, and cont_descriptionAppend.
	
2001-09-24  Oliver Lemke  <olemke@uni-bremen.de>

	* arts-0-0-222
	
	* src/methods.cc (define_md_data): Updated online docs for ASCII
	read-write methods.

2001-09-21  Oliver Lemke  <olemke@uni-bremen.de>

	* arts-0-0-221
	
	* configure.in: Added new options:

	  --with-arts-data=ARG: This should be set to the location where
	  the arts-data package is installed. Per default it is set to
	  $PREFIX/share/arts-data. If you run configure on a smiles pc it
	  is set to /pool/lookup2/arts-data.

	  The data path can now be automatically inserted into the example
	  files.

	  There's also a define called ARTS_DATA_PATH in config.h.

	  --without-arts-data: Force arts to not use the arts-data package
	  even if it is installed.

	  --with-hdf, --without-hdf: As default, if hdf is installed on
	  the system, support for reading/writing binary files is
	  automatically compiled in. --without-hdf forces the deactivation
	  of HDF support.

	  NOTE: This is a dummy at the moment. The option is there but has
	  no effect on compilation.

	* doc/examples/auto_full.arts.in: Example control file with
	automatic data path expansion.

2001-09-21  Mashrab  <kmashrab@uni-bremen.de>

	* arts-0-0-220

	* src/methods.cc (define_md_data): Updated online docs for binary
	read-write methods.
	
2001-09-21  Stefan Buehler  <sbuehler@uni-bremen.de>

	* arts-0-0-219
	
	* src/m_abs.cc (tgsDefine): Fixed bug: Use resize function!

2001-09-21  Stefan Buehler  <sbuehler@uni-bremen.de>

	* arts-0-0-218

	* General: Bux fixes.
	
	* src/matpackI.h (Range::Range): Allow zero stride in Range
	constructor. This means that (0,0) matrices can be created. 
	(Matrix::resize): Put in some assertions that arguments are >=0.
	(Matrix::Matrix): Removed the special case that the original
	matrix is zero. This is no longer necessary, because of the change
	of Range::Range.
	(Matrix::operator=): Added MatrixView = Matrix operator. This is
	important, otherwise default assignment operator is used. That's
	exactly similar to the VectorView = Vector case.

	* src/m_wfs.cc (k_append): Initialize temp. copies of Kx data
	directly, instead of copying. Makes the code a bit shorter.

2001-09-21  Oliver Lemke  <olemke@uni-bremen.de>

	* arts-0-0-217
	
	* src/methods.cc, src/m_abs.cc, src/workspace.cc:
	Renamed the following methods and variables:
	
	  - raw_ptz_1d to raw_ptz
	  - raw_vmrs_1d to raw_vmrs
	  - raw_vmrs_1dReadFromFiles to raw_vmrsReadFromFiles
	  - raw_vmrs_1dReadFromScenario to raw_vmrsReadFromScenario
	  - AtmFromRaw1D to AtmFromRaw

	* src/methods.cc (define_md_data): Removed Atm2dFromRaw1D

	* src/m_abs.cc: Removed Atm2dFromRaw1D

	* src/workspace.cc (define_wsv_data): Removed t_abs_2d, z_abs_2d,
	vmrs_2d and abs_2d

	* doc/uguide/.cvsignore: Changed version.tex to auto_version.tex

	* TODO: Added thoughts about making HDF support optional.
	
2001-09-21  Stefan Buehler  <sbuehler@uni-bremen.de>

	* arts-0-0-216

	* configure.in: Removed the O0 flags for the end user
	mode. Beware, with optimization not all files compile. But I want
	to test how much faster the program has got...
	
2001-09-21  Stefan Buehler  <sbuehler@uni-bremen.de>

	* arts-0-0-215

	* General: Changed default ascii file extensions from .am to .aa.
	Fixed bug that lead to spectra being zero. (Hopefully)

	* src/methods.cc (define_md_data): Changed default ascii file
	extensions from .am to .aa. 

	* src/m_abs.cc (raw_vmrs_1dReadFromFiles): Changed default ascii
	file extensions from .am to .aa. 

	* src/matpackI.h (operator=): Added an assignment operator for
	VectorView = Vector. In that case only the reference was copied
	before. Assignment operators have proven so far the biggest bug
	source in Matpack! There could be more...

2001-09-21  Oliver Lemke  <olemke@uni-bremen.de>

	* arts-0-0-214
	
	* doc/uguide/Makefile.am (MAINTAINERCLEANFILES): Changed
	version.tex to auto_version.tex

	* configure.in: Changed version.tex to auto_version.tex

	* doc/uguide/main.tex: Changed version.tex to auto_version.tex

	* doc/uguide/auto_version.tex.in: Renamed version.tex.in
	
2001-09-20  Stefan Buehler  <sbuehler@uni-bremen.de>

	* arts-0-0-213

	* src/species_data.cc (define_basic_species_data): Rearranged the
	order of the isotopes for CH3CN. Now the program runs
	again. (There is an assertion to ensure that the isotopes of each
	species are sorted according to decreasing isotopic ratio.)

	* src/partition_function_data.cc (define_partition_species_data):
	Rearranged the order also here. Order in both files must be the
	same! 

2001-09-20  Patrick Eriksson  <patrick@rss.chalmers.se>

	* arts-0-0-212

	* WARNING: This version does not run.
	
	* Large parts of ARTS are removed. Everything connected with the
	covariance and H matrices is removed. Of the batch part, only the
	core calculation function remains, that is now called ybatchCalc.

	* The math_funcs files cleaned up a bit. 

	* The assert_xxx functions renemed to check_xxx. They are found at
	the end of math_funcs. (I have not got time to more of these 
	functions).
	
2001-09-20  Stefan Buehler  <sbuehler@uni-bremen.de>

	* arts-0-0-211

	* General: Fixed Bug related to linspace/nlinspace. A return
	version makes no sense anymore, since the target in Matpack has to
	have the right dimension. So you would have to resize the target
	before calling. But then the non-return version is more
	convenient, because it can adjust the size of the output vector
	itself.
	
	* src/math_funcs.cc (linspace): Removed return version.
	(nlinspace): Removed return version.

	* src/m_wfs.cc (LinAltsFromPres): Use non-return version of linspace.

	* src/m_los.cc (los_1za): Use non-return version of linspace.

	* src/m_io.cc (VectorLinSpace): Use non-return version of linspace.
	(VectorNLinSpace): Use non-return version of nlinspace.

	* src/m_covmatrix.cc (sSimple): Use non-return version of linspace.

	* doc/uguide/version.tex: Removed this file from CVS, it is
	automatically generated by configure.

2001-09-20  Axel von Engeln  <engeln@uni-bremen.de>

	* arts-0-0-210

	* partition_function_data.cc: added species CH3CN, HNC there is no
	vibrational correction to these species, if they are know,
	part. fct. can be recalculated.
		
	* species_data.cc: added species CH3CN, HNC

2001-09-20  Oliver Lemke  <olemke@uni-bremen.de>

	* arts-0-0-209
	
	* configure.in: Changed AC_VERBOSE to AC_MSG_RESULT.
	
2001-09-20  Oliver Lemke  <olemke@uni-bremen.de>

	* arts-0-0-208

	* reconf: Pass --enable-maintainer-mode and all options given to
	reconf to configure.

	* src/file.cc: Added cfloat to includes for compatibility with glibc 2.2.x
	
	* configure.in: Added several configure options
	
	  --enable-maintainer-mode: For arts developers. Activates debug
	  compiler flags and documentation generation.

	  --enable-docs: Same as before. Used to regenerate the documentian
	  even without activating maintainer-mode.

	  --with-numeric-type=ARG: The default floating-point type is
	  double. You can change this by giving float as ARG.

	  --with-integer-type=ARG: The default integer type in arts is
	  long. You can give short, int, long or size_t as ARG. WARNING: Only
	  change this if you know what you're doing because not every type
	  may work. Depends on the operating system.

	Added a check for HDF4 header files and libraries.

	Added check for doxygen, latex and pdflatex if documentation
	generation is activated.

	Added a configuration summary output after the configure script
	run is complete.

	Re-ordered the test sequence. Basic tests first, higher level tests
	at the end.

	* src/arts.h: Changed typedefs for Numeric and Index to be set to
	the types specified in config.h.

2001-09-20  Stefan Buehler  <sbuehler@uni-bremen.de>

	* arts-0-0-207

	* doc/uguide/main.tex (paragraph{#1}}): Moved setting of tocdepth
	counter to uguide_pdf.tex and uguide.tex.

	* doc/uguide/uguide.tex: Added the tocdepth counter.

	* doc/uguide/uguide_pdf.tex: Increase the depth of the table of
	contents to three for the pdf version. That means, that also minor
	headings will be displayed. This is useful, because one can jump
	directly to the subsection by mouseclick with the Acrobat reader.

	* src/make_auto_wsv_pointers_cc.cc (main): Corrected program name
	in doxygen header and output file.

	* src/make_auto_wsv_h.cc (main): Corrected program name
	in doxygen header and output file.

	* src/make_auto_wsv_groups_h.cc (main): Corrected program name
	in doxygen header and output file.

	* src/make_auto_md_h.cc (main): Corrected program name
	in doxygen header and output file.

	* src/make_auto_md_cc.cc (main): Corrected program name
	in doxygen header and output file.

	* *.cc, *.h: Added GPL to files where it was missing. Updated JPL
	(year and authors).

2001-09-19  Stefan Buehler  <sbuehler@uni-bremen.de>

	* arts-0-0-206

	* Major Change: The entire version number is now set in
	configure.in. Important: YOU HAVE TO DO A reconf AFTER YOU CHANGED
	THE VERSION NUMBER!

	* Major Change: Adapted ARTS to the homegrown atomic types. We
	have now:

	Index, Numeric, String
	Vector, Matrix, Array<>

	Predefined Array types are called, e.g., ArrayOfString. Note the
	capital O!

	These data types behave more or less as one should
	expect. Important: The = operator copies the contents, not the
	entire thing. Therefore, you must be certain that dimensions agree
	(or use the .resize functions before using the = operator). There
	are assertions built in the data type that should catch that kind
	of error. Documentation will follow in the near future.

	* doc/examples/cont.arts: Verified that we still get the same
	absorption coefficients. None of the other example files are
	working, so I had no easy way to verify that other methods still
	run. 
	
	* src/methods.cc (define_md_data): A part of the documentation of
	method linesReadFromMytran2 has been deleted by Patrick apparently
	by accident. Put this back in. 

	* src/m_abs.cc (raw_vmrs_1dReadFromFiles): Rewritten this. Use the
	standard function get_tagindex_for_Strings to get tag indices!

	* reconf: Now also runs configure automatically.

2001-09-19  Patrick Eriksson  <patrick@rss.chalmers.se>

	* arts-0-0-205

	* !!!! Corrected a bug in sFRomFile.m for gaussian correlation 
	function. If you have used this option in Qpack, your results have
	been wrong. 

	* WF(s) for ground emission is now implemented. The function is 
	called kEground. See the online help.

	* The file methods.cc now includes (at the top) templates for writing
	the information for the online help. Please comment this suggestion
	to format. The information for the function zaFromDelta is in this
	format. 

	* I have tried to make the output for the online help a bit clearer
	and nicer by putting in some space and lines.

	* Started a series of assert functions to be used to check the input
	to functions. These functions are for the moment found at the end of
	math_funcs.cc. Please add more similar functions. An example:

	   assert_lengths( f_mono, "F_MONO", e_ground, "E_GROUND" );

	will check if the ground emission vector has the correct length and
	issue an informative error message if this is not the case.
	
2001-09-17  Patrick Eriksson  <patrick@rss.chalmers.se>

	* arts-0-0-204

	* Stefan had changed the data type coding used for the binary files.
	This is changed back (sorry Stefan). The aim of being 100% consistent
	is good but in this case it would have just caused problems. As the
	binary file format is just a temporary solution I didn't see the point
	to spend a lot of time to convey Stefan's changes to AMI (this would
	have taken a lot of time, made old data files useless etc). 

	* Minor changes in out.m and sFromFile.m
	
2001-09-13  Nikolay Koulev <nkoulev@uni-bremen.de>

	* arts-0-0-203

	* doc/uguide/absorption.tex: Started to update 
	
	* doc/uguide/main.tex, doc/uguide/uguide.tex: Corrected some bugs.
	
2001-09-05  Stefan Buehler  <sbuehler@uni-bremen.de>

	* arts-0-0-202

	* doc/uguide/formats.tex: Started to update this part of the User
	Guide to the new math package and data types.

	* src/arts.h: Added typedef for String.

	* globally: Replaced string by String, so that all atomic types
	have consistent notation.

2001-09-04  Stefan Buehler  <sbuehler@uni-bremen.de>

	* arts-0-0-201

	* Major change: Globally replaced:
	INDEX  by Index
	VECTOR by Vector
	MATRIX by Matrix
	ARRAY  by Array

	This is the first step toward putting in the new Vector/Matrix
	data types.

	WARNING: I will try to do this work in the next two weeks. This
	means there will be changes all over the code. I have to start
	now, otherwise it will be too late to meet the deadline given by
	the HWK workshop in October. Keep your fingers crossed...

	* src/matpackI.h: Added

	* src/matpackII.h: Added

	* src/test_matpack.cc: Added

2001-09-03  Carlos Jimenez  <jimenez@rss.chalmers.se>

	* arts-0-0-200

	* Added function sFromFile.m in /ami/math, equivalent
	to the obsolete -one day- sFromFile arts method, see
	the mscript help.

2001-09-03  Carlos Jimenez  <jimenez@rss.chalmers.se>

	* arts-0-0-199

	* Added function hRedLimb to ami/hmatrix to make a
	reduction of a limb spectral space optimized for
	each retrieval point and species, obviously only
	to be used with an inversion method doing individual
	retrievals for each retrieval point, e.g. an ensemble
	of neural nests. Just implemented, ergo no bugs free,
	use with caution.

2001-08-24  Patrick Eriksson  <patrick@rss.chalmers.se>

	* arts-0-0-198

	* Added functions axes_1xn/nx1 to ami/plot

2001-08-22  Patrick Eriksson  <patrick@rss.chalmers.se>

	* arts-0-0-197

	* Included a Matlab script to produce a figure testing the
	refraction ray tracing scheme by plotting the bending angle. This
	will be described AUG later when I will make the writing for the first
	release.

	* I did not spend any time on it, but it seems that there are teching
	errors in AUG. Fix please.
	
2001-08-22  Carlos Jimenez  <jimenez@rss.chalmers.se>

	* arts-0-0-196

	* partition_function_data.cc, species_data.cc,
	continua.cc and continua.h, adding a new N2 continua 
	parameterization called N2-SelfCont following
	Rosenkranz 93 but with the strength constant C and 
	all exponents ( Xt temp, Xp pres, Xf freq) as parameters.
	Implemented to have at least a continua term where the
	frequency dependence can be suppressed so one can
	play around. So far used e.g. to simulate the defocusing
	effect on a satellite-satellite transmission link at
	low altitudes, that seems to correspond to an attenuation
	in the signal independent of frequency.

2001-08-22  Carlos Jimenez  <jimenez@rss.chalmers.se>

	* arts-0-0-195

	* fixing bug in method zaFromDeltat after
	validation of refaction calculations by Patrick
	
2001-08-15  Patrick Eriksson  <patrick@rss.chalmers.se>

	* arts-0-0-194

	* Added some functions to ami/plot to easily set font size and
	weights in figures. These functions have the same name as the
	standard Matlab functions with 2 appended, e.g. xlabel2.

2001-08-15  Patrick Eriksson  <patrick@rss.chalmers.se>

	* arts-0-0-193

	* whoami.m and amenu.m added to ami/general

	* write_linefile.m updated to ARTSCAT-3. 
	
2001-08-08  Carlos Jimenez  <jimenez@rss.chalmers.se>

	* arts-0-0-192

	* Commenting out a line printing out O2ABS, kind of 
	bothering

2001-08-07  Thomas Kuhn  <tkuhn@uni-bremen.de>
	
        * arts-0-0-191

	* changes: 
	  - Aded O2-MPM93 oxygen absorption model of Liebe et al.
	  - implemented a linear extrapolation of the cloud LWC/IWC 
	    profile.
	  - Added the possibility to set the water vapor VMR to the 
	    saturation value over water/ice within a water/ice cloud.
	    This is implemented in AtmFromRaw1D, hwere one has now 
	    the option of AtmFromRaw1D{CloudSatWV = "yes"} to do this
	    VMP profile modification.

2001-07-30  Carlos Jimenez  <jimenez@rss.chalmers.se>

	* arts-0-0-190

	* commenting out a line printing out za angles in m_batch.cc
	left after some debugging ... guessing

	* adding workspace method SymmetricCopy in /src/m_io.cc

	* adding /ami/hmatrix/hRedKx to do reduction based on 
	weighting functions

2001-07-26  Oliver Lemke  <olemke@core-dump.net>

	* arts-0-0-189

	* doc/doxygen/Makefile.am: Renamed make_* source files to make_auto_*.
	
2001-07-24  Oliver Lemke  <olemke@core-dump.net>

	* arts-0-0-188

	* src/Makefile.am: Renamed make_* source files to make_auto_*.
	
	* src/.cvsignore: Renamed make_* files to make_auto_*.

	* src/make_md_cc.cc: Renamed to make_auto_md_cc.cc.

	* src/make_md_h.cc: Renamed to make_auto_md_h.cc.

	* src/make_wsv_groups_h.cc: Renamed to make_auto_wsv_groups_h.cc.

	* src/make_wsv_h.cc: Renamed to make_auto_wsv_h.cc.

	* src/make_wsv_pointers_cc.cc: Renamed to make_auto_wsv_pointers_cc.cc.
	
2001-07-24  Stefan Buehler  <sbuehler@uni-bremen.de>

	* arts-0-0-187

	* Major Change: Added a new command line parameter --input
	(-i). This is complementary to the --methods switch. It must be
	given the name of a variable (or group). Then it lists all methods
	that take this variable (or group) as input.
	
	* src/main.cc (main): Added command line parameter -i/--input.
	(option_input): Added this function, to take care of the new
	command line parameter.

	* src/parameters.h: Added command line parameter -i/--input.

	* src/parameters.cc (get_parameters): Added command line parameter
	-i/--input.

	* src/.cvsignore: Updated and cleaned up a bit.

2001-07-23  Oliver Lemke  <olemke@core-dump.net>

	* arts-0-0-186

	* src/make_md_h.cc: Renamed md.h to auto_md.h and md.cc to auto_md.cc.
 	Moved auto_md.cc creation to src/make_md_cc.cc.
	
	* src/make_md_cc.cc: Moved creation of auto_md.cc to this file.
	
	* src/Makefile.am: Changed names for auto-generated files. And added
	make_md_cc.

	* src/make_wsv_pointers_cc.cc: Renamed wsv_pointers.cc to
	auto_wsv_pointers.cc.

	* src/make_wsv_h.cc: Renamed wsv.h to auto_wsv.h.

	* src/make_wsv_groups_h.cc: Renamed wsv_groups.h to auto_wsv_groups.h.

2001-07-11  Oliver Lemke  <olemke@uni-bremen.de>

	* arts-0-0-185

	* data: Data directory and all subdirectories removed.
	Use package arts-data!!!!

	* configure.in: Removed Makefile entries for data dir and subdirs.
	
	* Makefile.am: Removed data from subdirectories.
	
2001-07-05  Stefan Buehler  <sbuehler@uni-bremen.de>

        * arts-0-0-184

	* doc/uguide/absorption.tex: Added this file, which should contain
	documentation for the absorption part of ARTS.

2001-06-26  Thomas Kuhn  <tkuhn@uni-bremen.de>

        * arts-0-0-183

	* changes: 
	change of the H2O absorption model calculation.The models 
	"H2O-CP98",
        "H2O-MPM87",
        "H2O-MPM89",
        "H2O-MPM93",
        "H2O-PWR98",
	have now no input parameters.
	The naming convention has changed for the ordinary
	H2O continuum, they are now called "H2O-SelfContStandardType" and 
        "H2O-ForeignContStandardType". They need two input parameters
	each. Typical values can be found in the xample control file
	doc/example/cont.arts.
	Also no input parameters have now:
	"H2O-ContMPM93", 
	"O2-PWR93",
	"CO2-SelfContPWR93",
	"CO2-ForeignContPWR93",
        "liquidcloud-MPM93",
        "icecloud-MPM93".
	Additionally the name of "O2-PWR93O2" is changed to "O2-PWR93".
	The temperature constraint in "icecloud-MPM93" is removed, one 
	can calculate ice particle clouds at all temperatures, as for 
	for liquid water clouds.
	* src/continuum.cc: implementation of the O2 and N2 continuum
	absorption model of MPM93. They are called  "O2-SelfContMPM93" and
	"N2-SelfContMPM93". The broadening is calculated with dry air 
	(= all species minus water vapor).

2001-06-26  Stefan Buehler  <sbuehler@uni-bremen.de>

        * arts-0-0-182

	* Major change: Changed unit of lower state energy in LineRecord
	and ARTS catalogue file from cm^-1 to Joule (ARTSCAT-3). Verified
	that the absorption coefficients are still the same for:
	1. H2O calculation from HITRAN catalogue.
	2. O2 calculation, using one of Axel's line files with overlap.

	* src/absorption.cc (xsec_species): Lower state energy does not
	have to be converted to Joule anymore.
	(wavenumber_to_joule): Added this little helper function, which
	converts energy from wavenumber to Joule.
	(ReadFromHitranStream): Convert lower state energy to Joule, using
	the helper function wavenumber_to_joule().
	(ReadFromJplStream): Convert lower state energy to Joule, using
	the helper function wavenumber_to_joule().
	(ReadFromMytran2Stream): Convert lower state energy to Joule, using
	the helper function wavenumber_to_joule().

	* src/absorption.h: Made linesElowToJoule a friend of LineRecord.
	(class LineRecord): Changed mversion from 2 to 3.
	
	* src/methods.cc (define_md_data): Added method linesElowToJoule.

	* src/m_abs.cc (linesElowToJoule): This is just a helper method
	for the catalogue conversion. Can be removed, as soon as we are
	sure there are no more old files around. It uses the conversion
	function wavenumber_to_joule().

	* data/spectroscopy/arts/o2_spin_rot.aa: Converted lower state energy to Joule.

	* data/spectroscopy/arts/o2_spin_rot_hit.aa: Converted lower state energy to Joule.

	* data/spectroscopy/arts/o2_spin_rot_jpl.aa: Converted lower state energy to Joule.

	* data/spectroscopy/arts/o2_spin_rot_pwr.aa: Converted lower state energy to Joule.

	* data/spectroscopy/arts/o2_spin_rot_pwr_1.aa: Converted lower state energy to Joule.

	* data/spectroscopy/arts/o2_spin_rot_pwr_2.aa: Converted lower state energy to Joule.

	* data/spectroscopy/arts/o2_spin_rot_pwr_3.aa: Converted lower state energy to Joule.

2001-06-25  Stefan Buehler  <sbuehler@uni-bremen.de>

        * arts-0-0-181

	* Major changes: Changed ARRAY implementation back to STL. This
	fixed the bug with the AUX parameters for lineshape with
	overlap. Renamed line files to .aa. Details below.
	
	* data/spectroscopy/arts: Renamed line files to `.aa' instead of `.al'.

	* src/methods.cc (define_md_data): Changed name of
	linesWriteToFile to linesWriteAscii and name of
	lines_per_tgWriteToFile to lines_per_tgWriteAscii.

	* src/vecmat.h (ARRAY): ARRAY is now once more STL based. 

	* src/make_md_h.cc (main): Adapted to ARRAY change. The removal of
	WSVs that are both input and output used the erase_vector_element
	function. Now it uses std::vector<>::erase. This task occurs in
	two places, for md.h and md.cc.

	* src/absorption.cc (get_tag_group_index_for_tag_group): Updated
	documentation. Cleaned up.
	(xsec_species): Verified that now the AUX parameters for the
	overlap are getting there. So it was indeed an MTL bug that lead
	to the AUX parameters getting lost. I don't know how the oxygen
	spectrum could have been correct last week, it remains a
	mystery. My suspicion is that it never worked since the ARRAY
	implementation was set to MTL.

	The absorption calculation using explcit lines still has to be
	compared to the original Rosenkranz function. Thomas will do this
	when he is back from Lindau.

	* src/m_abs.cc (lines_per_tgAddMirrorLines): Adapted to ARRAY
	change. Cleaned up the function and made it much simpler. Now the
	mirror lines are simply appended after the original lines. That
	way, no copying of the lines is needed.
	(lines_per_tgCompact): Adapted to ARRAY change. Added safety check
	that f_mono is sorted. Cleaned up a bit. Replaced
	erase_vector_element by std::vector<>::erase.
	(abs_per_tgReduce): Adapted to ARRAY change. No more use of erase
	function. Cleaned up.  
	(linesWriteAscii): This is the new name of linesWriteToFile. 
	Changed default name extension to `.aa' instead of `.al'.
	(lines_per_tgWriteAscii): This is the new name of lines_per_tgWriteToFile. 
	Changed default name extension to `.aa' instead of `.al'.
	(xsec_per_tgAddLines): Completed the work started
	by Thomas. Two checks are now performed:
	1. a. Is the species oxygen?
	   b. Are there aux parameters?
	   c. Is the apropriate Rosenkranz lineshape used?
	2. a. Is the Rosenkranz lineshape used?
	   b. Is the species oxygen?
           c. Are there aux parameters?

	The absorption part is getting more and more messy. But at least,
	now it should be a bit safer than before.

2001-06-22  Thomas Kuhn  <tkuhn@uni-bremen.de>

	* arts-0-0-180

	* src/m_abs.cc (xsec_per_tgAddLines): Introduction of a control
	structure for the auxiliary lineshape function parameters.  This
	structure is only very preliminary and contains up to now only a
	print statement and no real control - this has to be implemented!

2001-06-22  Patrick Eriksson  <patrick@rss.chalmers.se>

	* arts-0-0-179

	* Spectra are now also obtained when standing on the ground and
	looking downwards which not was the case before. So now spectra
	shall be obtained for all observation cases.

	* When observing from a point inside the atmosphere and the distance
	between the sensor and the tangent point, or the ground, is less
	than l_step/10, the part of the LOS from the sensor and the tangent
	point, or the ground, is neglected. For these cases, l_step is set to 
	the value given in the control file, i.e. no adjustment is done as when
	the distance discussed is > l_step/10.

	* Fixed a bug when calculating the angle of the beam after a
	ground reflection, when considering refraction. The angle was
	calculated as asin(c/(Re+z_ground)*n(z_ground)) while the
	correct expression is asin(c/(Re+z_ground)/n(z_ground))

	* Updated the full.arts control file in examples.

2001-06-22  Thomas Kuhn  <tkuhn@uni-bremen.de>

	* arts-0-0-178

	* changes/corrections in the continuum abs calculation.
	
2001-06-21  Stefan Buehler  <sbuehler@uni-bremen.de>

	* arts-0-0-177

	* src/make_wsv_h.cc (main): Fixed bug that prevented the correct
	generation of Doxygen headers for WSVs from online documentation.

	* src/make_md_h.cc (main): Do no longer generate Doxygen headers
	from the online documentation of workspace methods. Doxygen
	headers have to be created manually!

	Also removed doxygen header for the array getaways in md.cc, which
	holds the pointers to the getaway functions, because this lead to
	a Doxygen error message.
	
2001-06-20  Stefan Buehler  <sbuehler@uni-bremen.de>

	* arts-0-0-176

	* .cvsignore: Added arts.spec.

	* src/absorption.h: Made the intensity to mean intensity per
	molecule, i.e., not containing the isotopic ratio. This could
	create errors when older ARTS catalogues are used, because there
	the intensity included the isotope ratio, similar to HITRAN. To
	avoid this error, I've introduced a format tag, which should
	now be first in every ARTS catalogue file. It looks like this:
	ARTSCAT-2. There is a member function Version() to line_data that
	returns this version string.

	See doxygen documentation for LineRecord for a (hopefully precise
	enough) description of the format.

	* doc/examples/example1.arts: This file didn't run anymore. Kicked
	out the continua to make it run. There is a bug in the continuum
	tags. For some reason, none of the continua is accepted, although
	the tag specified is among the valid tags suggested by the error
	message. 

	* src/absorption.cc
	(write_lines_to_stream): Added output of version tag. Also output
	number of lines.
	(LineRecord::ReadFromHitranStream): Divide by isotopic ratio when
	reading HITRAN intensity.
	(LineRecord::ReadFromJplStream): Leave intensities as they are, do
	not any longer multiply with isotopic ratio
	(LineRecord::ReadFromMytran2Stream): Leave intensities as they
	are, do not any longer multiply with isotopic ratio
	(xsec_species): Apply isotopic ratio. This is done in the final
	loop, where xsec is summed up for all lines.
	(xsec_species): Also removed a try catch block around the
	partition function ratio calculation. This means that now the
	program will stop with an error message if partition functions can
	not be calculated. Before, it just gave a warning.

	* src/m_abs.cc (lines_per_tgWriteToFile): Do not any longer write
	the number of lines in each tag (since this is now added
	automatically after the format tag).
	(linesReadFromArts): Added check for correct version tag.

2001-06-13  Patrick Eriksson  <patrick@rss.chalmers.se>

	* arts-0-0-175

	* Made a function to flip vectors (VectorFlip).
	
2001-06-05  Thomas Kuhn  <tkuhn@uni-bremen.de>

	* arts-0-0-174

	* change in methods.cc to allow profile read in from files
	directly (see function raw_vmrs_1dReadFromFiles)
	new tags defined for cloud liquid water (liquidcloud) and
	cloud ice particles (icecloud). For these tags also profiles can
	be read in now.
	
2001-05-30  Stefan Buehler  <sbuehler@uni-bremen.de>

	* arts-0-0-173

	* data/atmosphere/fascod/midlatidude-summer.HO2.am: Added this
	file by hand from the 45n file in the RAL scenario used for the
	ESTEC studies (/pool/esa/maso/in/atm_scen). 

2001-05-30  Stefan Buehler  <sbuehler@uni-bremen.de>

	* arts-0-0-172

	* continua.cc: Removed `^' character.

	* species_data.cc: Added isotope 172 (HITRAN 2000 tag 16)

	* species_data.cc: Gave HITRAN tag 15 to isotope 182, which was
	already in ARTS, but previously not in HITRAN. Changed isotopic
	ratio of this one to the HITRAN value, which is 6.23e-7, instead
	of the previous value of 6.11e-7.

	* partition_function_data.cc: Added isotope 172 (HITRAN 2000 tag 16)
        The Q coefficients for this are just copied from the main isotope!!

2001-05-25  Thomas Kuhn  <tkuhn@uni-bremen.de>

	* arts-0-0-171

	* Fixed wrong parameters in continua.cc

2001-05-16  Patrick Eriksson  <patrick@rss.chalmers.se>

	* arts-0-0-170

	* When running Carmen's SMILES example we got NaNs in Kx. The reason
	to this was that the optical thicknesses when looking down to the 
	ground were very high which results in division with zero.
	I have not changed the equations, instead absloswfs is checked for
	NaNs and Inf and those values are set to zero. This should be perfectly
	alright as those values shall be very, very small anyhow.

2001-05-16  Patrick Eriksson  <patrick@rss.chalmers.se>

	* arts-0-0-169

	* Fixed a size check in yCalc that gave wrong error message when a LOS
	is outside the atmosphere.

	* Off-sets in the batch part are now stored as a vector of off-sets. 
	Before the full new grid (e.g. za_pencil) with the off-set applied was
	stored.
	
2001-05-15  Patrick Eriksson  <patrick@rss.chalmers.se>

	* arts-0-0-168

	* Fixed bugs in groundSet, groundAtBottom, and rand_gaussian.

	* Some crap code had got into qtool.
	
2001-05-14  Stefan Buehler  <sbuehler@uni-bremen.de>

        * arts-0-0-167

	* m_abs.cc: Switched interpolation in AtmFromRaw1d from linear
	interpolation to log pressure interpolation using interpp. Because
	adaptors and submatrices are not accepted by interpp, some
	temporary copies have to be made. This is horrible, we need a
	better matrix/vector implementation!

	* The reason for the change was that nadir weighting functions
	showed some strange wiggles. The change did reduce the wiggles
	considerably, but they are still visible.

2001-05-10  Stefan Buehler  <sbuehler@uni-bremen.de>

        * arts-0-0-166

	* configure.in: Added -O0 to CXXFLAGS. For some weird reason,
	configure on Kenny insisted on calling the C++ compiler with -O6,
	which lead to memory exhaustion. On the Smiles maschines this
	problem did not occur...
	
2001-05-02  Stefan Buehler  <sbuehler@uni-bremen.de>

        * arts-0-0-165

	* data/atmosphere/tstrad: Added this directory. It contains a test
	case for comparison with RTTOV-6.
	
2001-05-02  Stefan Buehler  <sbuehler@uni-bremen.de>

	* arts-0-0-164

	* m_los.cc: Added method MatrixTRJ which calls yTRJ for all rows
	of a weighting function matrix. This is exactly the same
	as the specific method ybatchTRJ. Therefore I have removed this
	specific method. Replace in control files by
	MatrixTRJ(ybatch,ybatch){}. Similar, I added MatrixTB.

	* m_batch.cc: Removed ybatchTRJ and ybatchTB.

2001-04-30  Thomas Kuhn  <tkuhn@uni-bremen.de>

	* arts-0-0-163

	* add additional O2 absorption model of Rosenkranz in
	  continua.cc and continua.h

2001-04-27  Carlos Jimenez  <jimenez@rss.chalmers.se>

	* arts-0-0-162

	* methods.cc, md.h,M_wfs.cc: added a worspace method called
	linAltsFromPres to calculate a set of pressures 
	corresponding to a set of altitudes equally spaced. A
	possible application is to define a k_grid with equally
	spaced altitudes.

	* constants.cc: the Earth's gravitational constant
	(mu=3.98601E14 m3/s2) added to allow calculation of
	orbital parameters, named as EARTH_GRAV_CONST.
	
	* methods.cc, md.h, m_loc.cc: zaFromDeltat updated
	with EARTH_GRAV_CONST

2001-04-27  Thomas Kuhn  <tkuhn@uni-bremen.de>

	* arts-0-0-161

	* add additional H2O absorption models: 
	MPM85/87, MPM89, MPM93, Cruz-Pol98, and Rosenkranz98
	added. Preliminary stored in continua.cc, but this will be
	changed in future.

2001-04-25  Oliver Lemke  <oliver@uni-bremen.de>

	* arts-0-0-160

	* configure.in, arts.spec.in: Added a spec file for rpm creation.
	This would make the installation process for the release version
	much easier and guarantees a clean deinstallation of arts.

	I will added some more information about building arts rpms.

2001-04-24  Patrick Eriksson  <patrick@rss.chalmers.se>

	* arts-0-0-159

        * New function to set the emission flah: emissionOn and emissinOff.

        * Some new functions to set the ground variables (groundSet,
        groundOff and groundAtBottom).

        * The hydrostatic equilibrium is revised. Check out the functions
        hseSet, hseOff, hseFromBottom and hseCalc).

        * Temperature WFs with hydrostatic eq. now implemented. Two versions
        exist, kTemp and kTempFast. Use the fast one!

2001-04-20  Thomas Kuhn  <tkuhn@uni-bremen.de>

	* arts-0-0-158
	
	* add cloud/fog and ice absorption continua 

2001-04-18  Stefan Buehler  <sbuehler@uni-bremen.de>

	* arts-0-0-157

	* ami/arts/.cvsignore: Added wsv.txt.

	* h_matrix.cc: Fixed bug in VectorApplyH and MatrixApplyH
	(dimension of output variable was not set). Also added safety
	check of output variable dimension to h_apply functions. Probably,
	there should be similar checks in h_diff, but I did not touch
	this.  

2001-04-11  Patrick Eriksson  <patrick@rss.chalmers.se>

	* arts-0-0-156

	* Fixed a bug in qtool. The line feed was included when calling
	inline functions.
	
2001-04-11  Carlos Jimenez  <jimenez@rss.chalmers.se>

	* arts-0-0-155

	* methods.cc, md.h, m_loc.cc: added a workspace method called
	zaFromDeltat to calculate the zenith angles for a LEO-LEO cross
	-link geometry corresponding to a given increment in time in 
	the motion of the LEOs. The LEOs are supposed to be moving in
	opposite directions in nearly identical orbits (but not \n"
        "colliding!).

2001-04-09  Thomas Kuhn  <tkuhn@uni-bremen.de>

	* arts-0-0-154
	
	* add continua 
	* add some IDL functions and update of plot_abs_per_tg.pro 

2001-04-04  Carmen Verdes  <cverdes@uni-bremen.de>

	* arts-0-0-153
	
	* Initialize output to zero! This is important, because otherwise
          the output variable could `remember' old values.

2001-04-04  Patrick Eriksson  <patrick@rss.chalmers.se>

	* arts-0-0-152

	* NaNs were obtained when using float and a conversion to brightness
	temperatures was performed. Some scalars have been hardcoded to be
	double to avoid this problem.

	* A similar problem was found in the vector version of planck.

	* A warning, when using very large or small values, as the Planck and
	Boltzman constants, I would recomment to hard-code double to avoid 
	these disturbing problems.
	
2001-04-04  Patrick Eriksson  <patrick@rss.chalmers.se>

	* arts-0-0-151
	
	* Deleted wsv.txt in ami/arts from CVS. This function is auto-generated
	when compliling ARTS and is copied to ami when running the init script.
	Axel had some problems with this function and I hope it is best to keep
	it outside CVS (and I must added it to CVS by mistake).

	* (Sorry, for the problem with yCalc. I will check "my" functions for
	this kind of problems when the optional input variables are ready and
	we know the consequencies of this. I put this in TODO.)

2001-04-03  Axel von_Engeln  <engeln@uni-bremen.de>

	* arts-0-0-150

	* plot_abs_per_tg.pro updated

	* partition_function.pro updated

	* TODO list updated

2001-04-03  Stefan Buehler  <sbuehler@uni-bremen.de>  

	* arts-0-0-149

	* m_los.cc: Added safety check to yCalc to make sure that the
	number of frequencies in trans and f_mono is the same. This,
	because it took some time to track down a core dump resulting from
	reading absorption from a file with the wrong number of
	frequencies. There should probably be more consistency checks in
	this method.

2001-04-03  Patrick Eriksson  <patrick@rss.chalmers.se>

	* arts-0-0-148

	* Fixed some bugs for downward looking observations. The first problem
	was associated with the indexing of the ground where there still were
	problems from the change from 1-based to 0-based indexing. Further,
	some vectors where not given any length before copying data.

	* Made the variables a and b in the planck functions static again
	and introduced the variable c for the vector version.
	For the matrix version there were no problem before (or?). The bug
	was in the vector version where the temperature was included in the
	static variable b which of course is a stupid thing. 
	The static variables a and b should now only contains constants.
	
2001-04-03  Stefan Buehler  <sbuehler@uni-bremen.de>  

	* arts-0-0-147

	* atm_funcs.cc: Fixed bug in vector and matrix version of function
	`planck': Variables a and b must not be declared as static,
        otherwise they are only computed for the first function
	call. Because of this, we got identical results for subsequent
	calls of the function with different temperature.
	
2001-04-02  Stefan Buehler  <sbuehler@uni-bremen.de>  

	* arts-0-0-146

	* los.h: Cosmetic changes in doxygen header of struct LOS:
	  - Used html tags in the enumerated list because LaTeX constructs
  	    do not work.
          - Replaced index of stop by 0 at one place.

	* There seems to be a problem in the setup of los for uplooking cases.
	 	
2001-04-02  Patrick Eriksson  <patrick@rss.chalmers.se>

	* arts-0-0-145

	* The power of ARTS! I love ARTS, it is so good. It is now possible 
	to make retrieval species for pure absorption measurements.
	I don't want to lessen my fine effort ;-), but this was rather easy to
	implement due to the excellent structure of ARTS.

	* There is now a WSV called emission that you must set. For "normal"
	simulation it should be set to 1, while 0 means that emission shall be
	neglected. For the latter case (pure absorption calculations) the 
	output unit is changed from transmission to optical thickness. This as
	optical thicknesses are normally used during the inversion.

	* The WSFs yRte and YBl are removed. The general function to get 
	spectra is yCalc. This function uses the WSV emission to determine what
	kind of spectrum to return. For pure absorption calculations there 
	exist a special function called yTau. However, note that there is no
	direct overhead involved bu using yCalc as sourceCalc just returns
	a empty array if emission=0.

	* The function absloswfsCalc takes now also emission as input. There
	is also a function called absloswfsTau to match yTau. Then you use
	the kSpecies functions as usual. Great or?

	* The WSF losCalc now also returns z_tan.

	* A warning, I haven't got time for any larger bug controls for these
	changes, so take care.

2001-03-30  Carlos Jimenez  <jimenez@rss.chalmers.se>

	* arts-0-0-144

	* m_loss.cc: Fixing a small bug

2001-03-28  Carlos Jimenez  <jimenez@rss.chalmers.se>

	* arts-0-0-143

	* methods.cc, md.h, m_loc.cc: added a workspace method called
	zaFromZtan to calculate the zenith angles from a given set of
	tangent altitudes in z_tan

	* atm_funcs.cc, atm_func.h, m_loc.cc : functions n_for_z and
	refr_constant moved from m_loc.cc to atm_func.cc

	* atm_funcs.cc: ztan_refrac modified to do calculations using
	n_for_z.

2001-03-28  Patrick Eriksson  <patrick@rss.chalmers.se>

	* arts-0-0-142

	* First a comment to z_tan just be totally clear. The los
	function will still only take zenith angles as argument, but
	there will be a function to convert a set of tangent altitudes
	to corresponding zenith angles. The z_tan vector will be an 
	output of losCalc.

	* Made some smaller changes to the definition on the ARTS line
	format found in absorption.h. Read it give comments.
	Stefan, can really ARTS read line files (in the ARTS formats)
	with line breaks inside the definition of a transition? I tried
	this and it didn't work.

	* New WSF NumericCopyFirstOfVector. I plan to use this to set 
	the ground temperature to the first value of t_abs.

	* New function in AMI (in file/) to create ARTS line file from
	data in Matlab. Will be used to convert Verdandi to the ARTS
	line catalog.

2001-03-27  Carlos Jimenez  <jimenez@rss.chalmers.se>

	* arts-0-0-141

	* workspace.cc: added a new workspace variable z_tan so a set
	of tangent altitudes can be specified as input for a given 
	LOS geometry. Now both z_tan and za_pencil can be used to 
	define the geometry. Requires changes in LOS functions, 
	to follow.

2001-03-16  Stefan Buehler  <sbuehler@uni-bremen.de>

	* arts-0-0-140

	* Added Makefile and Makefile.in files in the ami tree to the
	.cvsignore files. (I had forgotten to do this for version 139.) 
	
2001-03-13  Stefan Buehler  <sbuehler@uni-bremen.de>

	* arts-0-0-139

	* configure.in: Added missing Makefiles:
      	ami/arts/Makefile
      	ami/file/Makefile
      	ami/math/Makefile
      	ami/path/Makefile
      	ami/physics/Makefile
      	ami/plot/Makefile
      	ami/retrieval/Makefile

	This is necessary for the reconf script to work.
	
2001-03-13  Stefan Buehler  <sbuehler@uni-bremen.de>

	* arts-0-0-138

	* Implemented the new continuum concept, as decided in the meeting
	last Friday. I made only a slight change compared to what was
	discussed in the meeting, by using two independend WSVs for the
	coninuum description. These are:
	- cont_description_names
	- cont_description_parameters

	I did it this way, because I have in mind a quite simple mechanism
	for combining WSVs to `conglomerate WSVs', which could then be
	used to bind the two together. However, when I will find the time
	to implement this is an open question. For now, working with the
	two individual variables should be fine. 

	* workspace.cc: Added WSVs cont_description_names and
	cont_description_parameters.  

	* methods.cc: Added WSMs cont_descriptionInit and
	cont_descriptionAppend. Also WSMs xsec_per_tgInit and
	xsec_per_tgAddConts. 

	* m_abs.cc: Added WSMs cont_descriptionInit and
	cont_descriptionAppend. 

	Renamed xsec_per_tgCalc to xsec_per_tgAddLines and adapted.

	Introduced xsec_per_tgAddConts.

	Introduced xsec_per_tgInit.

	Adapted absCalc.

	* continua.cc: Added the function `check_continuum_model', which
	checks if a string matches a continuum model. Continuum model
	names must look like this: `H2O-ContRosenkranzSelf'. At the
	beginning must be the species name.

	* absorption.cc: Added the function get_tag_group_name which
	returns a tag group name from an ARRAY of OneTag. This is just
	handy for informational output messages.

	* doc/examples/cont.arts: This is an example file for calculating
	continua. 
	
2001-03-13  Patrick Eriksson  <patrick@rss.chalmers.se>

	* arts-0-0-137

	* The function to create control files from templates is now
	called qtool and is found in ami/arts. There is now some better
	instructions and an example on how this tool can be used.

2001-03-13  Patrick Eriksson  <patrick@rss.chalmers.se>

	* arts-0-0-136

	* I have added a number of handy Matlab scripts to AMI. All functions
	are of rather general character and can be of use in many cases. The
	functions are sorted into a number of sub-folders.
	
2001-03-07  Carlos Jimenez  <jimenez@rss.chalmers.se>

	* arts-0-0-135
	
	* math_funcs.cc: incluiding the Choleski decomposition in rand_data_
        gaussian so a Choleski decomposition s=l'*l is done and l is used to 
        generate the random data.

	* methods.cc, m_covmatrix.cc: new worskpace method BatchdataGaussian
        NoiseNoCorrelation to generate noise without inter-channel correlation. 

	* m_batch.cc: BatchdataGaussianSpeciesProfiles updated for tgs

2001-03-07  Patrick Eriksson  <patrick@rss.chalmers.se>

	* arts-0-0-134

	* Fixed a small bug in the H-matrix part of AMI.
	
2001-03-01  Wolfram Haas  <wolhaas@hermes.fho-emden.de>

	* arts-0-0-133

	* read_datafile.pro: Keyword changed ('check' instead of
	                                      'optimize').
	* read_artsvar.pro: Keyword changed ('check' instead of
	                                     'optimize').
	* write_datafile.pro: Unnecessary 'print'-command removed.

	* utilities.tex: Upgrading of the description.
	
2001-02-26  Carlos Jimenez  <jimenez@rss.chalmers.se>

	* arts-0-0-132

	* /ami/read_datafile.m: matlab read and write functions modified to
	include SYMMETRIC type

	* m_batch.cc, m_covmatrix.cc: functions with covariance matrices
	updated so covariance matrices are now SYMMETRIC

2001-02-26  Patrick Eriksson  <patrick@rss.chalmers.se>

	* arts-0-0-131

	* The text for continuum absorption changed.

2001-02-23  Patrick Eriksson  <patrick@rss.chalmers.se>

	* arts-0-0-130

	* A new try to commit my latest changes.

2001-02-22  Axel von Engeln  <engeln@uni-bremen.de>

	* version-0-0-129

	* two new species implemented, which are new in Hitran 2000, 
	additionally put some more species into the partition function
	calculation, and the abundance calculation. These additional
	species are not implemented in arts yet.

	* math_funcs.h: output error corrected

	* aii_klegend_d.pro: klegend_d file, needed in plot_abs_per_tg.pro

2001-02-22  Patrick Eriksson  <patrick@rss.chalmers.se>

	* arts-0-0-128

	* There were some problems around the last commit, so this another
	one just in case.
	
2001-02-21  Patrick Eriksson  <patrick@rss.chalmers.se>

	* arts-0-0-127

	* The story about LOS seems to never end. Before last commit I only did
	changes with 1 zenith angle. When I now used refraction for a full
	scale simulation I noted that the LOS calculation was very slow. The
	problem turned out to be the interpolation. The interpolation is now
	done locally in the function where the interpolation index is stored
	from one interpolation to next and this saves a lot of time. I also
	did some other changes to improve the speed but with much less impact
	on the final computational time.
	The function is now about 50 times faster then before
	
2001-02-19  Patrick Eriksson  <patrick@rss.chalmers.se>

	* arts-0-0-126

	* Yet another bigger revision of the LOS part. 
	The core calculations are now performed by a single function for
	all observation geometries (one function for refrcation and one
	function for geometrical calculations). This should ensure a high
	consistency for the calculations. Some preparation for the 2D
	calculations have been performed.

	* Refraction is now handled by a more traditional ray tracing scheme,
	using the geometrical term as starting point. The refractive index
	is assumed to be constant over each ray tracing step. See further
	AUG. As I wanted an integer ray tracing step for each LOS step,
	the wsv l_step_refr is exchanged with refr_lfac (an integer). This
	factor gives how many ray tracing steps that shall be performed for
	each LOS step (the ray tracing step length is accordingly
	l_step/refr_lfac). The calculations with refraction are now a bit 
	slower and too small steps should be avoided. The ray tracing works 
	both with float and double.

	* I have tested the ray tracing scheme and the results were good.
	First of all, if n is set to 1 at all altitudes, the geometrical LOS
	is obtained exactly (the deviations are around 1e-6 m). A suitable 
	value for the ray tracing step length seem to be about 5 km. 

	* The LOS structure is extended and holds now also the geometrical
	altitudes of the LOS points not only the pressures). These altitudes
	should not be used inside ARTS but are intended for plotting and bug
	checking.

	* The angles between the vectors going from the Earth's center and
	the sensor and the LOS points are now also calculated. These angles
	are called psi in lack of a better name (any suggestion?).
	The psi angles were included as a preperation for 2D. If horisontal
	structures are neglected for the LOS calculations (the effects should
	be negliable according to RAL and Rodgers), it is now a simple thing
	to get the whole LOS for 2D (as soon we define what coordinate system
	to use).

	* Axel, I got your thesis in my hand more or less in the same minute
	as I finished my ray tracing scheme. I saw that you have written quite
	a lot about refraction. You should have done this work!
	
2001-02-16  Stefan Buehler  <sbuehler@uni-bremen.de>

	* arts-0-0-125

	* version.h, version.cc: Added resize function for SPARSE and
	SYMMETRIC. Note that resize really replaces the object by a new
	one of the right size. Maybe the name should be changed to
	`replace' one day. Furthermore, note that for SYMMETRIC
	resize(a,i,j) generates a new SYMMETRIC matrix by calling
	SYMMETRIC(i,j), which should generate a ixi symmetric matrix with
	j offdiagonal bands.
	
2001-02-15  Axel von_Engeln  <engeln@uni-bremen.de>

	* arts-0-0-124

	* lines_per_tgCompact workspace method included, it just cycles
	through all lines per tag groop and looks whether they are in or
	outside the defined cutoff frequency of the lineshape. All lines
	outside are removed. This should save some computational time, but
	something similar is done in the absorption calculation when a
	cutoff frequency is present.

	* lineshape cutoff seems to work
	
2001-02-14  Carlos Jimenez  <jimenez@rss.chalmers.se>

	* arts-0-0-123

	* maths_func.h, maths_func.cc: Added the function *chol* to do a
	Choleski factorization

	* demonstrate_vecmat.cc: Included a test case running *chol* 

2001-02-13  Stefan Buehler  <sbuehler@uni-bremen.de>

	* arts-0-0-122

	* vecmat.h, vecmat.cc: Added matrix type SYMMETRIC. This should be
	both banded and symmetric. (Having just symmetric is a special
	case of this.) 

	SYMMETRIC A(5);   // generates 5x5 symmetric matrix
	SYMMETRIC A(5,1); // generates 5x5 banded symmetric matrix like this:
	                  // xx000
	                  // xxx00
	                  // 0xxx0
	                  // 00xxx
	                  // 000xx

	However, the latter case seems not to work and I don't understand
	why. Best would be to write email about this to the MTL people.

	* demonstrate_vecmat.cc: Included test cases for the SYMMETRIC type.

2001-02-13  Patrick Eriksson  <patrick@rss.chalmers.se>

	* arts-0-0-121

	* Simplified the WF information somewhat. Now the length of each
	identity is stored instead of start and stop index. This to avoid
	storing INDEX in a matrix. Column 3 of the aux variables removed.

	* The species WF functions now use wfs_tgs.

	* Changed names on the workspace variables tgs and wfs_tgs to match
	the names used in function names.
	
2001-02-12  Patrick Eriksson  <patrick@rss.chalmers.se>

	* arts-0-0-120

	* Hard-coded double in some places in m_los.cc where the earth
	radius (maybe + something) is squared to improve the precision.

	* With double and setting n=1, the same result is obtained with and 
	without refraction (which should indicate that everything is OK).
        The option float/refraction is still not working (see more below).

	* Fixed a bug in planck when using float. This expression:
	a = 2.0*PLANCK_CONST/(SPEED_OF_LIGHT*SPEED_OF_LIGHT);
	becomes 0 if a is set to be float. Now hardcoded to be double.

	* I will not bother you about the details, but I recommend you
	to NOT use refraction before we have validated my new scheme. Carlos
	will implement some other scheme so we get an oppertunity to check
	the results.

	* ARTS seems to run now when using float (if not refraction is switched
	on). So let's use float for some time to look for other bugs
	connected with using float. OK?
	
2001-02-08  Axel von_Engeln  <engeln@uni-bremen.de>

	* arts-0-0-119

	* lineshapeDefine help extended

	* lineshape_per_tgDefine help extended

2001-02-07  Axel von_Engeln  <engeln@uni-bremen.de>

	* arts-0-0-118

	* lineshapeDefine additional keyword cutoff added, which defines
	the cutoff frequency [Hz], -1 no cutoff

	* lineshape_per_tgDefine additional keyword cutoff added, which
	defines the cutoff frequency [Hz], -1 no cutoff

	* lineshape is a workspace variable now that contains the index
	to the lineshape, normalization function, and cutoff.

	* Validation has only been performed with the no cutoff option.

2001-02-07  Axel von_Engeln  <engeln@uni-bremen.de>

	* arts-0-0-117

	* abs_per_tgReduce workspace method and little bug removed.

2001-02-02  Axel von_Engeln  <engeln@uni-bremen.de>

	* arts-0-0-116

	* tag_groupsDefine workspace method has now been changed to
	tgsDefine

	* wfs_tgsDefine workspace method introduced, this gives the
	tag groups out of tgsDefine, for which weighting function shall
	be calculated

	* abs_per_tgReduce workspace method introduced, this reduces the
	abs_per_tg variable to the size of the tag groups given in
	wfs_tgsDefine. The order in wfs_tgsDefine does not has to be kept.

2001-01-30  Axel von_Engeln  <engeln@uni-bremen.de>

	* arts-0-0-115

	* aii_prologue_l.pro: Arts IDL Interface plot prologue, landscape
	
	* aii_epilogue.pro: Arts IDL Interface plot epilogue, landscape

	* plot_abs_per_tg.pro: makes a nice color plot of the absorption
	per tag group

	* read_datafile.pro: indicees changed from 1 to 0

	* read_tag_groups.pro: reads the tag group names out of a
	controlfile, is for example used by plot_abs_per_tg

	* sort_abs.pro: sorts the absorption per tag group according to
	magnitude at a certain altitude level, is used by plot_abs_per_tg

	* arts/o2_spin_rot_pwr_3.al: arts catalogue file of the oxygen
	spin rot spectrum, see file for more info

	* methods.cc: updated some info.

2001-01-26  Stefan Buehler  <sbuehler@uni-bremen.de>

	* arts-0-0-114

	* vecmat.h: Fixed bug in transf() function. The type of the
	mathematical function is now double (&my_func)(double). Numeric
	does not work here, since mathematical functions for float do not
	exist.

2001-01-26  Patrick Eriksson  <patrick@rss.chalmers.se>

	* arts-0-0-113

	* Changes in reading and writing of binary files. There were some 
	really bad bugs that now should be fixed. The reading and writing
	of matrices shall now be somewhat faster.
	
2001-01-24  Stefan Buehler  <sbuehler@uni-bremen.de>

	* arts-0-0-112

	* vecmat.h: Changed ARRAY implementation back to MTL.

	* make_md_h.cc: Adapted to ARRAY implementation change.
	
2001-01-23  Patrick Eriksson  <patrick@rss.chalmers.se>

	* arts-0-0-111

	* Removed special functions for no ground and no refraction. It became
	messy to make several versions at so many places. Instead I have made
	two small functions called NoGround and NoRefraction to set dummy 
	values for the ground and refraction variables (however the ground 
	altitude must be specified). This solution makes the functions assuming
	a special calculation order, that is functions calling workspace 
	methods as absCalc and losCalc, more general.

	* Added functions to calculate WFs for pointing off-set and a 
	proportional calibration error. It is now also possible to calculate
	WFs for continuum absorption fit for portions of the total frequency
	range. This can be used to make seperate fits in primary and image
	frequency band.
	
2001-01-19  Stefan Buehler  <sbuehler@uni-bremen.de>

	* arts-0-0-110

	* m_abs.cc: Added method lines_per_tgReadFromCatalogues. This
	reads lines from catalogues and assigns them to lines_per_tg in
	one go. Different catalogues can be specified for different
	tags. This will be handy for the water vapor absorption
	spectrum. Now we can use a special line file for water vapor,
	with continuum parameters to match.

	* token.h, parser.cc: Renamed the type ARRAY_Numeric_t to
	VECTOR_t. Also changed the definition accordingly, so this type is
	now a vector.

	* doc/examples/example1.arts: Adapted to demonstrate the new
	catalogue reading features.

2001-01-19  Patrick Eriksson  <patrick@rss.chalmers.se>

	* arts-0-0-109

	* Made the function h2o_absSet.

	* Fixed a bug in rte. The step just above the tangent point was just
	looped once, instead of two as is correct. A bug from the MTL switch.

	*So finally, I managed to get consistency between the spectra and
	the internal calculation to get absloswfs. This does not guarentee
	that the WFs are OK, but so far everything seems correct.
	
2001-01-18  Stefan Buehler  <sbuehler@uni-bremen.de>

	* arts-0-0-108

	* m_abs.cc: Fixed bug in the continuum switch in
	xsec_per_tgCalc(). Also renamed xsec_per_tgCalc() from previous
	name xsec_per_tgCal().
	
2001-01-18  Patrick Eriksson  <patrick@rss.chalmers.se>

	* arts-0-0-107

	* Added the function refr_indexBoudouris, i.e. this function takes into
	account water and not only dry air.

	* Added the functions VectorAdd, VectorScaled and MatrixScaled that can
	be used for simpler tests. VectorAdd can be used to add 2 K to t_abs
	at all altitudes to test the influence of the temperature for some
	measurement (used e.g. for the WATS proposal).

	* I have gone through the los, rte and bl functions for all geometries
	with and without refraction. There was some bugs, both old ones and 
	from the MTL switch. At least there are now no errors (in my test 
	cases) and the results are reasonable.

	* I have started to check the species WFs. The WFs for upward 
	observations seem to be OK now. One smaller bug found for limb WFs, but
	I have not yet made a final test. I will continue this work.

	* An interesting thing. For the WATS proposal I created a line file
	with the strongest H2O lines up to 560 GHz. I also added these lines
	with a negative centre frequency, and it worked. So the solution
	for van Vleck-Weiskopf should be OK.
	
2001-01-17  Wolfram Haas  <wolhaas@hermes.fho-emden.de>

	* arts-0-0-106

	* Added the IDL interface functions.

	* read_artsvar.pro: Reads an ARTS variable (uses read_datafile). 

	* read_datafile.pro: The real implementation of the reading
	routine. 

	* write_artsvar.pro: Writes an ARTS variable to a file in ARTS
	format (uses write_datafile).

	* write_datafile.pro: The real implementation of the writing
	routine. 
	
2001-01-17  Stefan Buehler  <sbuehler@uni-bremen.de>

	* arts-0-0-105

	* Put in continuum stubs. Also did the implementation for a self
	continuum, although the coefficients (C and x) are at the moment
	just dummy numbers. Thomas should put in the correct ones that
	result from his fits to lab data. Also, the function for the
	foreign continua needs to be added, which should be simple
	following my self continuum example. Interesting places for this
	work are marked with `FIXME' and/or `Thomas' in comments.

	The continuum at the moment is bullshit, without the correct
	coefficients and the foreign part. Probably many orders of
	magnitude wrong.

	* continua.h: Header file for continua.cc.

	* continua.cc: Implementation of continuum functions.
	
2001-01-15  Axel von_Engeln  <engeln@uni-bremen.de>

	* arts-0-0-104

	* tag groups: we went back to the definition of tag and tag
	groups. Therefore some WSM are called differently, e.g.,
	lineshape_per_tgDefine instead of lineshape_per_tagDefine
	Sorry, but you have to change your controlfiles again :-(
	Hope we stay with this definition now.

	* Oxygen: absorption is now always calculated with the
	normalization factor given in the controlfile. this was formerly
	treated differently to find agreement with the old iup forward
	model.

	* Cross Sections: now implemented differently, so that absCalc
	just calls the cross section WSMs xsec_per_tgCal and
	absCalcFromXsec. 
	
2001-01-15  Patrick Eriksson  <patrick@rss.chalmers.se>

	* arts-0-0-103

	* Spectra have been wrong for some time. I discovered yeasterday (after
	a lot of investigating) that the spectra just grow for each zenith
	angle. This was a problem after the switch to MTL, due to the shallow
	copying with the =-operator. Spectra are now again reasonable for limb
	sounding. I habe not done any tests for other geometries.

	* The species WFs are incorrect. I will look for that bug.

	* Cleaned up the integration routine mess. Now the two template
	functions of SB are used together with an old function returning
	only a scalar.

	* Removed some other old code in math_funcs.

	* Fixed bug in AMI when reading and writing binary files caused by
	the switch from 1 to 0 based indexing. This bug only affected arrays.

2001-01-11  Axel von_Engeln  <engeln@uni-bremen.de>

	* arts-0-0-102

	* xsec_per_tagCal WSM implememted, calculates the cross section
	per defined absorption tag

	* absCalcFromXsec WSM implemented, calculates the absorption and
	the absorption per tag from the cross sections calculated by
	xsec_per_tagCal.

	* Agreement with the 2. Bredbeck book arts description should now be
	archieved in principle. Still we have to rename the tg to tag, and
	somebody should put all the stuff into the AUG.

2001-01-10  Axel von_Engeln  <engeln@uni-bremen.de>

	* arts-0-0-101

	* had to check in again my changes, because I just updated to
	Stefans MTL version arts-0-0-99. This does not work, because
	directories are not removed (e.g., I checked in tnt again). I
	don't know what else could go wrong, so I checked out Stefans
	version and redid my version 100.

2001-01-08  Axel von_Engeln  <engeln@uni-bremen.de>

	* arts-0-0-100

	* yes, I did the 100 version. I am proud.

	* and I did some work on the partition functions, included now the
	vibrational levels. more info will be available in the arts
	proceedings (hope I make it in time).

	* updated lineshape infos

2001-01-08  Stefan Buehler  <sbuehler@uni-bremen.de>

	* arts-0-0-99

	* This is a working commit. Everything needs still a lot of
	tidying up. Sorry for this. However, I have made massive changes,
	and I don't want to get completely out of sync with the rest of
	ARTS development. Merging was tough enough as it was.

	* vecmat.h: Contains now the complete matrix/vector declaration
	(linalg.h has vanished). 

	* vecmat.cc: Contains now the complete matrix/vector implementation
	(linalg.cc has vanished). 
	
	* vecmat.h: Changed implementation of ARRAY from MTL
	to STL. This also required some small changes all over the place. 

        * vecmat.h: Changed implementation of VECTOR and MATRIX to
	MTL. This required massive changes all over ARTS.

	* math_func.cc: Changed from 1-based to 0-based. Shitty work, I
	hope I have not introduced too many bugs. Patrick, could you
	please look at the places marked by FIXME?

	Important change: Non-return versions of math functions no longer
	resize their output vector. This makes them more useful, because
	now you can apply them directly on rows or columns of a matrix
	without any copying. The same is true for output
	matrices. Instead, the return version sets the size before calling
	the non-return version. So, if you want to create and resize at
	the same time, simply use the return version. Anyway, because of
	the shallow MTL copies, return versions should be as efficient as
	non-return versions.

	This also has the consequence that non-return versions no longer
	need arguments specifying the size of things to generate, instead
	the size is taken from the given output vector/matrix.

	* rand_gaussian: Is this algorithm correct? - See FIXME.
		
        * rand_uniform: There is a problem with setting the random seed
	here. It has the opposite of the desired effect. See FIXME comment
	inside the function! I commented the line out for now.

	* Philosophical remark: There is a conflict between 2 important
	C++ paradigms, function overloading and templates. The first says
	that it would be nice to always give the same name to similar
	functions, even if they act on different data types (for example
	interp_lin for vectors and matrices). The second says that it
	would be nice to formulate algorithms such that they work for
	several (similar) data types (for example the copy() algorithm
	from MTL). As it turns out, having both is very difficult. For
	example, there are the algorithms print_vector() and
	print_all_matrix() which do the same thing, once for vectors and
	once for matrices. Both are template functions. If we give them
	the same name (for example simply `print') the compiler can no
	longer distinguish between the two functions and we get an
	error. I can see no elegant solution to this problem. 

	* Math functions: I think there are now too many math functions
	(for example interpolation routines). This should be generalized
	more. For example one linear interpolation routine for vectors and
	one for matrices is probably sufficient. Also, is it really
	necessary to have also return versions for all functions?

	* m_wfs.cc, k_temp_nohydro: I don't understand why 1 K is added at
	all levels. This does not give the derivative, does it? Wouldn't
	one have to do this separately for each level? (See FIXME in the
	code.) 

	* Transf(): Arithmetic functions like sqrt() and also the new
	log10() for vectors and matrices are no longer necessary, since
	the transf() algorithm can apply any mathematical function to a
	vector or matrix. Transf() exists as parameter and return version,
	hence has exactly the same functionality as the old functions.

	* demonstrate_vecmat.cc: A sample program demonstrating matrix,
	vector, and mathematical features. Is compiled automatically if
	you do a `make'. Run as `demonstrate_vecmat'. 

	* example1.arts: Runs and gives same result as before
	(with arts-0-0-98). 

	* full.arts: I get an error in method ybatchAbsAndRte that I don't
	understand. This also with the old version of ARTS. Patrick, could
	you look into this?

	I quickly compared the Kx matrix with arts-0-0-98. Unfortunately,
	the result is not identical (now about 50% smaller than before). I
	have no idea what's going wrong. Sorry for committing it like this,
	but since you developed this part, maybe you have better ways of
	verifying individual calculation steps.

	* A common bug: Assigning a scalar to a vector as in:
	VECTOR a;
	a = 1;
	At runtime this will lead to a segmentation fault later on in the
	program. Unfortunately this bug is hard to locate. There could be
	still a few instances of it creeping through ARTS.

	* src/docu.txt: See this file for more common bugs. If you have
	problems, look here first. Anyway, I recommend reading this file
	to everybody (it's quite short). The stuff will eventually go into
	the Uguide, just I found it useful to have a simple ASCII file to
	enter things as I implemented and checked them. If things are
	unclear here, look also in the demonstrate_vecmat.cc file, there
	probably is an example there for the feature you need. 

2001-01-06  Axel von_Engeln  <engeln@uni-bremen.de>

	* arts-0-0-98

	* o2 spin rot absorption included. 2 lineshapes are available for
	this species:
	Rosenkranz_Voigt_Kuntz6
	Rosenkranz_Voigt_Drayson

	added a directory o2_spin_rot to the iup comparision one, where
	controlfiles, etc are located

	The o2 absorption is calculated as all other species, with 2 major
	differences:
	
	1. 2 overlap aux parameter are required in the spectroscopic
	database. I compiled a few catalogues in the arts format, they are
	located under spectroscopy/arts. 
	2. the o2 absorption requires a water vapor vmr. consequently
	abscalc requires now always a h2o vmr (I couldn't think of another
	way to implement this). this vmr is only needed for the rosenkranz
	lineshapes and can be set to any dummy value for other
	calculations. I followed the arts convention and called it
	h20_abs, which can be generated from the vmrs by:

	# define the h2o_abs vector, containing the total wv vmr
	VectorCopyFromArrayOfVector (h2o_abs, vmrs) {index=0}

	this has to be done after the call to AtmFromRaw1D{}.

	* Lorentz lineshape problem solved.

	* hope that's it. More in the mailing list.
                 
2001-01-03  Patrick Eriksson  <patrick@rss.chalmers.se>

	* arts-0-0-97

	* Bugs in absloswfsCalc and sFromFile due to index change fixed.

	* A function to calaulate the base 10 logarithm exists 
	(VectorCalcLog10). This function is handy when setting up Sx when
	using pressure as altitude coordinate.
	
2001-01-02  Patrick Eriksson  <patrick@rss.chalmers.se>

	* arts-0-0-96

	* Version 0-95 did not compile due to a missing ) in math_funcs.cc. 

	* An out-function added to AMI. 
	
2000-12-20  Patrick Eriksson  <patrick@rss.chalmers.se>

	* arts-0-0-95

	* The seed is now reset for each call to a function that generates 
	random data (thanks Oliver).

	* Some functions added to AMI/general.
	
2000-12-19  Axel von_Engeln  <engeln@uni-bremen.de>

	* arts-0-0-94

	* optimization stuff.

2000-12-15  Axel von_Engeln  <engeln@uni-bremen.de>

	* arts-0-0-93

	* Voigt_Kuntz1 is now called Voigt_Kuntz6, done some speeding up
	in linesphape (with no great success)

2000-12-15  Axel von_Engeln  <engeln@uni-bremen.de>

	* arts-0-0-92

	* arts can now read its own catalogue files.

2000-12-15  Patrick Eriksson  <patrick@rss.chalmers.se>

	* arts-0-0-91

	* Fixed some smaller bugs caused by the index change.

	* Updated full.arts in doc/examples. The control file runs OK, spectra 
	lokk OK (including the batch run) but WFs are not checked if correct.

	* Changed the text for the out-streams in calcAbs. Now all lines 
	listed for level 3 (but not pressures) and the main sizes for the 
	calculations are showed for level 2.
	
2000-12-13  Stefan Buehler  <sbuehler@uni-bremen.de>

	* arts-0-0-90

	* m_abs.cc, tag_groupsDefine: Fixed bug: Initialization does not
	work correctly with MTL based ARRAY<ARRAY>. If you just create
	such a biest, all elements of the outer ARRAY will point to the
	same data. There is an easy fix though, now I simply initialize
	the outer ARRAY elements explicitly. This bug had caused the bug
	in get_tagindex_for_strings that Patrick has reported.

	* m_abs.cc, lines_per_tgCreateFromLines: Fixed same bug.

	* absorption.cc, LineRecord::ReadFromMytran2Stream: Fixed same
	bug. In LineRecord::ReadFromMytran2Stream I had already fixed it
	before. 

	* src/docu.txt: Added description of this bug and how to avoid it
	to the documentation.
	
2000-12-13  Axel von_Engeln  <engeln@uni-bremen.de>

	* arts-0-0-89

	* lineshapes include now: 3 Voigt Kuntz algorithms, Voigt Drayson,
	Doppler.

2000-12-13  Patrick Eriksson  <patrick@rss.chalmers.se>

	* arts-0-0-88

	* Changed indexing from 1-based to 0-based in the following files:
	    m_wfs.cc
	    m_los.cc
	    m_hmatrix.cc
	    m_covmatrix.cc
	    m_batch.cc
	    atm_funcs.cc
	I did not change math_funcs.cc as there could be side effects. For 
	example, the function col causes problems.
	(This was heavy work, it took 5-6 hours despite I did it basically
	as quyickly as possible).
	Some changes were needed. The ground flags are now int's instead of 
	INDEX. No ground is now flagged as -1. When storing in file, the ground
	flags are increased with the value 1, so the falgs can be stored as
	INDEX (ints are not handled in binary files so far).
	The program compiles but I have not made any more detailed bug search.
	I wait with this until the switch to MTL is complete. The WFs have now
	probably a lot of bugs as those functions have a lot of indexing (and
	I that had tested that so carefully -:( ).

	* First version of batch and covariance parts ready. However, they
	cannot be completed before sprse matrices and Cholesky function are
	aviliable. I have done rather carefully function descriptions so have a
	look in methods.cc.
	
2000-Dec-12  Oliver Lemke  <oliver@uni-bremen.de>

	* arts-0-0-87

	* src/vecmat.h: Changed type of MATRIX from Fortran_Matrix to Matrix.

2000-12-09  Stefan Buehler  <sbuehler@uni-bremen.de>

	* arts-0-0-86

	* All ARRAYs are based on MTL now. This was a tough bit because
	of the indexing problems. The absorption part seems to run the
	same as before. For the RT part I had no way to check. It is
	possible or even likely that I have introduced bugs. Please
	check. 

	* It's not so good changing other people's code. However, I see no
	other way for MATRIX/VECTOR than doing it in the same way: All at
	once for all files. It is not possible to do it gradually, since
	TNT and MTL matrices are incompatible.

	* The indexing scheme must be changed beforehand from x(1) to x[0]
	for VECTORs and from A(1,1) to A[0][0] for matrices. This is the
	only more or less safe way for the transition. Round brackets will
	work for MTL, but mean 0-based indices!

	* src/docu.txt: Documentation on MTL and ARRAY
	implementation. This should go in the Uguide eventually.

	* linalg.h: MTL interface. Probably eventually I will put
	everything back in vecmat.h again, so this file will vanish. At
	the moment vecmat.h includes linalg.h.

2000-12-08  Stefan Buehler  <sbuehler@uni-bremen.de>

	* arts-0-0-85

	* In the middle of changing ARRAY implementation to MTL (including
	changing from 1-based to 0-based indexing)

	* Don't update to this version!
	
2000-12-07  Patrick Eriksson  <patrick@rss.chalmers.se>

	* arts-0-0-84

	* Panic backup. (The power contact had slipped out and the computer 
	died. After restart, not all letters on the keyboard did not work and
	I managed to login just by being a smart. After 1-2 minutes the 
	keyboard was suddently OK again, but God knows what can happen)
	As I don't trust the computer, I want to backup my work.

	* I am working on generating random data and doing batch calculations.
	Please, have a look and give comments.

2000-12-04  Patrick Eriksson  <patrick@rss.chalmers.se>

	* arts-0-0-83

	* r_geoid is now made to a workspace variable. Type r_geoidStd{}
        to set it to EARTH_RADIUS.

	* Functions now exist to generate random data with uniform and gaussian
	PDFs. No correlation. VectorRandNormal is an example on workspace
	method. The generation of random data can be checked by rand_test in
	AMI.

	* Made up a format to simply define covariance matrices and made 
	functions to create cov. matrices based on such definition data.
        See sSimple and sFromFile.
	
	* The function z_absHydrostatic gives a vertical grid fulfilling
	hydrostatic eq. The workspace variable h2o_abs must be set.
	
2000-12-01  Axel von_Engeln  <engeln@uni-bremen.de>

	* arts-0-0-82

	* lineshape selection in controlfile implemented

	* lineshape and lineshape_norm are 2 new workspace variables, they
	  contain the index of the selected lineshape and normalization
	  function of the lineshape_data and lineshape_norm_data records.

	* lineshapeDefine and lineshape_per_abs_tagDefine are 2 new
	  workspace methods, they allow the selection of the lineshape and
      	  the lineshape normalization in the controlfile. Currently
	  implemented: shape: Lorentz, Voigt_Kuntz1
	               norm:  no_norm (1), linear (f/f0), quadratic (f/f0)^2
	  Consequently, they both need tag_groups (tags) as input

2000-11-30  Axel von_Engeln  <engeln@uni-bremen.de>

	* arts-0-0-81

	* Test version

2000-11-23  Patrick Eriksson  <patrick@rss.chalmers.se>

	* arts-0-0-80

	* Writing about calibration and conversion to brightness temperature
	in AUG.

2000-11-16  Patrick Eriksson  <patrick@rss.chalmers.se>

	* arts-0-0-79

	* Some very small changes in AUG.

	* Allowed cubic treatment between abscissa points of spectra and 
	sensor characteristics when setting up the H matrix (image sideband 
	spectra still only linear treatment). Before all quantities were 
	assumed to be piecewise linear functions, but now piecewise cubic
 	functions can be assumed which could improve the accuracy in some
	cases (needs to be tested).

	* Please note that the sensor part is not yet validated and testet
 	in detail (however, the values look OK). When I am happy with the
	design of the sensor functions, I will do some comparisons with Skuld
	(but I trust ARTS more) and set up some examples for you.
	
2000-11-13  Patrick Eriksson  <patrick@rss.chalmers.se>

	* arts-0-0-78

	* The writing and reading functions for binary files handle now
	empty data (both ARTS and AMI). (Does this work for ASCII files?)

	* The binary data files are now described in AUG.

	* Put in parts in AUG (just parts pages, no move of chapters was 
	needed). AUG is divided into 3 parts.

2000-11-10  Stefan Buehler  <sbuehler@uni-bremen.de>

	* arts-0-0-77

	* Very small changes to documentation in several places.

	* Sample control file in AUG still needs to be adapted to new
	method and WSV names.
	
2000-11-10  Patrick Eriksson  <patrick@rss.chalmers.se>

	* arts-0-0-76

	* The way to store binary files modified as the prevoius version did
	not work for matrices. The storage scheme will be described in AUG.

	* AMI includes now reading and writing of binary files. The function
	variables for the read and write functions are changed. 

	* I have written and read data back and forth between ARTS and Matlab,
	and between ASCII and binary. Everything seems OK. Even conversion
	between double and float. But there are so many combinations, so
	no guarantees. Tell me if you find any bugs.

	* make_wsv_h.cc produces now also a text file, wsv.txt, with the
	information from workspace.cc. This file is used both for AGU and AMI.
        Feel free to fix an alphabetical order of the variables in wsv.txt.
	This would look better in AUG.
	
	* The file wsv.txt is copied to ami when running init.m. This file
	is then used by read/write_artsvar to determine to type of the 
	varaibles for e.g. consisteny reasosns. The type is also needed when
	reading and writing binary files.

	* Two appendices introduced in AUG, consisting basically of wsv.txt
	and math_test.cc respectively.
	
2000-11-09  Axel von_Engeln  <engeln@uni-bremen.de>

	* arts-0-0-75

	* species_data corrected, a O2-snglt-delta tag number 32005 of the
	JPL catalog was included with the main O2 isotope, even though
	this tag is only present in very small abundance. This tag shows
	very strong absorptions, and it should be checked whether a
	detection from a satellite instrument in possible.

	* example1.arts and other arts controlfiles modified, since
	Patrick renamed some of the workspace methods.

2000-11-09  Axel von_Engeln  <engeln@uni-bremen.de>

	* arts-0-0-74

	* src/m_hmatrix.cc file had still hdf5 included, removed.

2000-11-08  Patrick Eriksson  <patrick@rss.chalmers.se>

	* arts-0-0-73

	* Changed from HDF 5 to HDF 4. More precisly, HDF 4.1r3 is used.

	* String (including arrays) can now be read and written as binary.

	* Default extensions for ASCII files changed. Both numeric and
	string files have now the extension .aa (ARTS ASCII). I did
	not see any strong reason to have different extensions. 

	* The binary files are now displayed using hdp or vshow. See further
	AUG.

2000-11-07  Axel von_Engeln  <engeln@uni-bremen.de>

	* arts-0-0-72

	* JPL catalogs can now be read, they have to be frequency sorted.
	A merged catalog is now included in the arts distribution at:
	data/spectroscopy/jpl00/jpl00.cat, it contains only species know
	to arts. The script merge_and_sort_jpl does the merging and
	sorting, for more info refer to the script.

	* MYTRAN catalogs can now be read, they do not have to be
	frequency sorted. A slightly modified version of the mytran
	catalog of the ESTEC Spectroscopy Study is now included in the
	distribution, it can be found at:
	data/spectroscopy/mytran/mytran98.my2. This catalog is slightly
	modified, since the original included a HO2 species not know to
	arts.

	* comparisons scenarios are now sorted according to the chosen
	scenario:
	aux/iup_forward_comp/H2O_183GHz : contains the water vapor
	                                  comparison at 183GHz
	aux/iup_forward_comp/master_b   : contains some comparisons for
                              	          the master B band
	aux/iup_forward_comp/fascod     : the fascod files in the old iup
	                                  forward format.

	* abundance: Information on the source and calculation of the
	abundance used in arts is located at: aux/abundances/

2000-11-06  Patrick Eriksson  <patrick@rss.chalmers.se>

	* arts-0-0-71

	* Introduced a file format for ARRAYofSTRINGS. The extension is .as.
        See ArrayOfStringWriteAscii for the file format.
	When reading, blanks (white space) is for the moment not allowed.
	Is this accapteble? My answer is no. If anyone can fix this, please
	go ahead.

	* There should now be a full set of functions for the .am format. 
	For example, the function NumericWriteAscii exists now.

	* There is also a full set of functions for numeric binary files using
	HDF 5. But it was probably a mistake of me to pick HDF5 instead of HDF4
	(I just wanted to use the freshest version). This as it turned out 
	that there are only functions in Matlab to handle HDF4. In addition,
	Frank Merino has never told me what version he uses for Odin, but an
	old e-mail indicates that he uses HDF4 (I how now sent an e-mail to 
	confirm this).
	So I am afraid that I have to take one step backward and change the
	core functions to use HDF4.
	
2000-11-02  Patrick Eriksson  <patrick@rss.chalmers.se>

	* arts-0-0-70

	* Included some files to read and write binary files for arrays. 
	Turned off HDF error messages. Improved ARTS error messages.
	(I wanted mainly to commit before leaving for today as I will work at
	home tomorrow. Can read e-mail, but not do cvs commits).
	
2000-11-02  Patrick Eriksson  <patrick@rss.chalmers.se>

	* arts-0-0-69

	* Sorry, but I think that I did the last commit in src. This is mainly
	to fix this error, and to give you the last version of thr ChangeLog
	and TODO. (Some extra in TODO compared to my e-mail).

	* The LOS structure uses now ARRAYofsizet instead of ARRAY<int>

2000-11-02  Patrick Eriksson  <patrick@rss.chalmers.se>

	* arts-0-0-68

	* First version handling binary data files. For the moment there are
	function to read and write binary files for NUMERIC, VECTOR and MATRIX.
	To add functions for other data types (beside strings) should be 
	straightforward, using the general interface functions to HDF.

	* To test the binary-IO, make a control file called test.arts as:
	     VectorNLinSpace (z_abs)     { start = 1.1
                                           stop  = 13.65
                                           n     = 15 }
             VectorWriteBinary (z_abs) {""}
             VectorReadBinary (z_abs)  {""}
             VectorWriteAscii (z_abs) {""}
        The binary files can be displayed by the HDF tool h5dump:
	   h5dump test.z_abs.ab
	If everything is OK, the ASCII file shall have the same content, check
	by
	   more test.z_abs.am
	Note the different extensions.
	Another HDF tool function is h5ls that showes the structure of the data
	(without displaying any data values, in contrast to h5dump).
	
	* To make a distinction between ASCII and binary files, the ASCII
	functions have changed name as:
	  WriteToFile  -> WriteAscii
	  ReadFromFile -> ReadAscii
	The binary functions are denoted correspondingly:
	                  WriteBinary
	                  ReadBinary

	* Cleaned up the IO parts in methods.cc (the functions are now ordered
	after data type). Did the same in m_io.cc. Corrected some function 
	descriptions in methods.cc.

2000-11-01  Stefan Buehler  <sbuehler@uni-bremen.de>

	* arts-0-0-67

	* aii: Added this directory for the ARTS-IDL interface and set up
	Makefile.am. 

	* configure.in: Added aii/Makefile.am here.

	* uguide: Added a new section `Utilities'. This should contain a
	description of the Matlab and IDL interface.

	* uguide/utilities.tex: Started this file as a template for
	Wolfram to use. No contents yet.

	* uguide/Makefile.am: Updated this (added formats.tex and
	utilities.tex). 
	
2000-10-30  Patrick Eriksson  <patrick@rss.chalmers.se>

	* arts-0-0-66

	* AGU has now a new chapter describing data and file formats, and 
	allowed math operations. The chapter is however not finished. Please,
	give comments. The file src/test_math.cc is added and is compilied with
	ARTS. This file should contain examples on all allowed basic math
	operations and is read into AUG. As the file must pass the compiler,
	AUG can only include allowed math operations (at least formaly).

	* Some first test functions for HDF are found in file.cc and 
	m_hmatrix.cc.

2000-10-27  Stefan Buehler  <sbuehler@uni-bremen.de>

	* arts-0-0-65

	* file.cc: Included a function open_hdf that illustrates the use
	of HDF. This is one of the HDF examples. Other modifications:
	Added #include <hdf5.h> in top of file

	* Makefile.am: Added a line to include the necessary libraries for
	HDF (quite a few). 

	* If HDF is correctly installed, this should work.

2000-10-25  Oliver Lemke  <oliver@uni-bremen.de>

	* arts-0-0-64

	* configure.in: Disabled documentation generation by default.
	Activate it by invoking configure with the option --enable-docs.

2000-10-23  Oliver Lemke  <oliver@uni-bremen.de>

	* arts-0-0-63

	* doc/uguide/.cvsignore updated.

2000-10-23  Patrick Eriksson  <patrick@rss.chalmers.se>

	* arts-0-0-62

	* ARTS can now produce spectra and WFs including sensor effects and
	data reduction. Some new WF functions and copy functions implemented.

	* H matrices are read as: 
   	    HmatrixReadFromFile(h1){""}
	There are two H matrices to use, h1 and h2.

	* The functions to calculate WFs now only return the matrix for the 
	retrieval identity of interest. A WF function can return the common
 	matrix for several identities if they all have a retrieval grid of the
	same length (the variable k_index is removed).
	The variables kx and kb are introduced (following Rodgers). WF data are
	appended to these variables as
	   kSomeFunction...
	   kxInit{}
	   kxAppend{}
	   kxAppendUsingH(h1){}
	     or
	   kbInit{}
	   kbAppend{}
	   kbAppendUsingH(h1){}
	If kxAppend and kbAppend are used, when the WFs calculations ar ready,
	a H matrix can be applied as
	   MatrixApplyH(kx,h1,kx){}
	This latter approach should be the fastest, while applying H when 
	appending (kxAppendUsingH) saves memory.

	* A second spectrum vector, y0, has been introduced.
	H matrices are applied on spectra as
	   VectorApplyH(y,h1,y){}
	   VectorApplyH(y0,h1,y){}
	Note that it is best to do this last in the control file as some 
	functions need the pencil beam monochromatic spectrum (e.g. absloswfs).
	Y can be copied to y0 as
	   VectorCopy(y0,y){}
	There is also a function to copy matrices (MatrixCopy).

	* The WF for a sensor variable can be obtained as follows. Calcualte
 	h1 for the nominal state, change the variable of interest and calculate
	h2. The WF is then calculated using the kDiffH functions:
	   kDiffHFast{ name    = "Proportional"
                       delta   = 0.01
                       grid    = 0
                       apriori = 0}
	There are two functions, Fast and Small, trying to optimize calculation
	spped and memory usage, respectively. Note that these functions give 
	the WF including the effects of h1 (i.e. kxAppendUsingH should not be
	used).
	There is a function kManual that uses y and y0 to calculate a WF:
	   kManual{ name    = "CBGR"
                    delta   = 2.73
                    grid    = 0
                    apriori = 2.73}
        The WF is calculated as: k = (y-y0)/delta
	As a test, I calculated the WF for cosmic background radiation, but
	there should be better applications for this function.

2000-10-22  Patrick Eriksson  <patrick@rss.chalmers.se>

	* arts-0-0-61

	* I primarily wanted to commit a version to backup my work as I have 
	not made a commit for some time. I am working on the WFs and the
	H matrix stuff. See TODO for my plans. I will give the details at
 	next commit.

	* Some bugs fixed in ami.

2000-10-21  Stefan Buehler  <sbuehler@uni-bremen.de>

	* arts-0-0-60

	* make_md_h.cc: There was a bug in the generic input/output
	WSVs. For example, if a method had a vector as generic input and a
	vector as generic output, the input vector was removed from the
	list of arguments, similar to the case of specif WSV. In the case
	of specific WSVs this is the correct behaviour. However, in the
	case of generic arguments, the two vectors can be different! Fixed
	this.

2000-10-10  Oliver Lemke  <olemke@uni-bremen.de>

	* arts-0-0-59

	* doc/uguide/los1d.tex: Removed .eps endings which broke the
	pdf output. It's IMPORTANT to avoid the endings because they
	are now autodetermined.

2000-10-09  Axel von_Engeln  <engeln@uni-bremen.de>

	* arts-0-0-58

	* lineshape voigt approximation of kuntz implemented, currently
	only one accuracy level, others will follow. this lineshape is
	hard wired in absorption.cc, will be a controlfile input soon.

	* partition function coefficients reorganized, they are now part
	of IsotopeRecord

	* comparison with old forward model performed, using the kuntz
	lineshape. Results are within 1% error in the absorption
	coefficients for the specific calculation H2O_183GHz where only
	this line was considered. Larger errors up to 10 % are found at
	higher altitudes, guess that is an interpolation problem of the
	input vmr profiles. Controlfiles, etc can be found in a new
	directory: arts/aux/iup_forward_comp

	* errors with the documentation, guess that is caused by a
	previous check in, since I did not do anything over there.

2000-10-05  Stefan Buehler  <sbuehler@uni-bremen.de>

	* arts-0-0-57

	* Extended TODO list to have a base for discussion.
	
2000-10-02  Patrick Eriksson  <patrick@rss.chalmers.se>

	* arts-0-0-56

	* Refraction included. All observation geometries are treated.

	* The refraction is included in a totally new way (to my best 
	knowledge). A "prolongation factor" is used that gives the ratio
	between the length of the refracted and the length of a corresponding 
	geometrical LOS between two vertical altitudes. This approach avoids 
	the singularity at tangent points and does not need any integral 
	approximations etc. This results also in fast calculations.
	See further AUG.
	
	* If n is set to 1, the refractive functions and the geometrical ones
	give basically identical results, the difference is on the dm level
	at the top of the atmosphere. This should indicate that the refractive
	functions should give very accurate results.

	* A function to get the refractive index for totally dry air is 
	implemented.
	
2000-09-27  Axel von_Engeln  <engeln@uni-bremen.de>

	* arts-0-0-55

	* Voigt lineshape included, Kuntz approximation to it. 

	* Doppler parameter calculation included.

	* Constants required included.

2000-09-26  Oliver Lemke  <oliver@uni-bremen.de>

	* arts-0-0-54

	* UserGuide: Added pdf output. Divided main.tex in uguide.tex and
	uguide_pdf.tex. Changed the makefile to generate pdf and ps output
	by default. The pdf version requires all figures in pdf-format.
	The conversion from eps to pdf should be done with the epstopdf
	command.

	epstopdf <figure.eps>

	Remember to convert new figures to pdf and do a cvs add.

	* Added default graphics extension in uguide.tex and uguide_pdf.tex
	Now eps and pdf extension in includegraphics commands are no longer
	necessary. LaTeX and PDFTeX will pick the right file automatically.

	* Fixed bug in uguide/Makefile.am: dvips' output on some systems
	is send to lpr by default. Added -f option.
	
2000-09-22  Stefan Buehler  <sbuehler@uni-bremen.de>

	* arts-0-0-53

	* src/Makefile.am: Fixed small bug. (Removed wsv_pointers.h form
	the source list because this file does not exist.) The bug caused
	an error message in make dist.
	
2000-09-22  Axel von_Engeln  <engeln@uni-bremen.de>

	* more TODO stuff, some comments in partion_function_data.cc

2000-09-20  Stefan Buehler  <sbuehler@uni-bremen.de>

	* arts-0-0-52

	* main.cc, make_wsv_pointers_cc.cc: Changed the define_wsv_pointer
	to make local workspaces possible. (So far it was only possible to
	have one global workspace. Now multiple workspaces can coexist,
	each with their own pointers arrays.)
	
2000-09-19  Stefan Buehler  <sbuehler@uni-bremen.de>

	* arts-0-0-51

	* absorption.cc: Corrected the internal unit of line intensity
	S. It is now Hz * m^2, consistent with the simple formula
	
	alpha = n * x * S * F,
	
	where alpha is the absorption coefficient (1/m), n is the total
	number density (1/m^3), x is the volume mixing ratio
	(dimensionless), and F is the line shape function (1/Hz). 

	The intensity also already includes the isotope ratio, since this
	is computationally more efficient. 

	* Verified that we still get the same absorption results.

	* Moved some doxygen headers from absorption.h to absorption.cc

2000-09-19  Patrick Eriksson  <patrick@rss.chalmers.se>

	* arts-0-0-50

	* Stefan and I decided that doxygen headers should be placed in .cc
	instead of .h files (when appropiate). This partly to make it easier
 	to put in histories. 

	* Following this decision, I moved doxy headers from atm_funcs.h and
	math_funcs.h to corresponding .cc files.
	
2000-09-18  Patrick Eriksson  <patrick@rss.chalmers.se>

	* arts-0-0-49

	* Doxygenified, and cleaned up existing documentation, for files:
	m_wfs.cc, m_los.cc, atm_funcs.h,cc, math_funcs.h.cc, vecmat.h,cc
	and los.h.

2000-09-14  Patrick Eriksson  <patrick@rss.chalmers.se>

	* arts-0-0-48

	* Removed 1D from function and variable names for LOS, RTE and WF
	parts. We have decided that 1D is default, and 1D should not be 
	included in the names. However, 2D shall be included.

	* The variable klos is renamed to absloswfs (uh, long name, I know).
	This to follow AUG closer. There is also source LOS WFs, but these
	WFs are so far only used by kTEmpNoHydro and are not a workspace 
	variable.
	
2000-09-14  Stefan Buehler  <sbuehler@uni-bremen.de>

	* arts-0-0-47

	* Adapted the doxygen emacs macros for ARTS. Most notably, we want
	to use the /** style to mark comments rather than the /*!
	style. With the /** style the first sentence is taken
	automatically as the short description. I find this
	convenient. Also, this way the comments are less comlicated and
	verbose. 

	* Added documentation about the header format in the Development /
	Conventions section of the user guide. Patrick, can you check this
	please? The emacs macros now should generate exactly the same
	thing as defined there.

	* I have not yet gone through the code making things consistent with
	the new standard, but of course this should be done. First I want
	your ok to this standard. 

2000-09-13  Stefan Buehler  <sbuehler@uni-bremen.de>

	* arts-0-0-46

	* Cosmetic changes to doxygen comments all over the place.

2000-09-13  Stefan Buehler  <sbuehler@uni-bremen.de>

	* arts-0-0-45

	* doc/emacs: Added makros for inserting documentation
	headers. There is some html documentation, check out
	doc/index.html. 

2000-09-12  Patrick Eriksson  <patrick@rss.chalmers.se>

	* arts-0-0-44

	* The definition of the source function along the LOS is changed.
	The source function is now defined following the absorption.
	The source functions values are now determined at the LOS points.
	The source functions for a LOS step is calculated as the mean
	of the values at the end points of the step. 
        This change was made to get a similar treatment of the absorption and
	the source function. This is of great help for the analytical WFs.
	See further AUG.

	* Analytical WFs for species, continuum absorption and temperature
	(without hydrostatic eq.) are now ready. See some examples
 	on how to use the function in:
           arts/doc/examples/full.arts
	I have made some quick tests of the WFs. The agreement when disturbing
	the absorption and the temperature with the WFs was excellent. However,
	I have only tested a single upward looking case and there could be 
	bugs. I prefer to wait to do further testing until I am sure that this
	is the final version. 

	* Ground reflections now handled for correctly (hopefully), both for
	1D and 2D cases. Ground reflections also included in the analytical
	WFs.
	
	* AUG (ARTS user guide) is updated and extended to reflect the 
	changes above and several minor errors fixed.

	* WFs are now appended to the total K matrix. Before starting WF 
	calculations, the function kInit shall be called. As a help for
	non-linear inversions and to display results, there are now some
	help variables for the K matrix, giving index, names, a priori value,
	and retrieval grid for the different retrieval identities (e.g. a 
	species profile). However, the k_names cannot be stored as this is
	an ARRAYofstring. This is so far not included in AUG.

	* New workspace variable type: ARRAYofstring

2000-08-31  Patrick Eriksson  <patrick@rss.chalmers.se>

	* arts-0-0-43

        * Put in a check command in z2p to handle limb observations
        outside the atmosphere.

	* Changed name on the workspace variables f_abs and view1 to
	f_mono and za_pencil, respectively.
       Za stands for zenith angle. I think this is a better name than 
       viewing angle 1. Zenith angle is a clearer description and I guess
       that there never will be a view2 (it could for example be called orbit
       angle).
       F_abs or f_mono (i.e. monochromatic frequencies) doesn't really matter.
       I just think f_mono fits za_pencil better.

        * AMI functions for reading and writing data renamed. To read
        any file having ARTS data format, use read_datafile. To read
        a ARTS variable, where the last extension is .am, use read_artsvar.
        Corresponding write functions exist. 

        * read_tb removed. Conversion to brightness temperature now treated
        as part of H (see below).

       * A first set of functions to set up the sensor and data reduction
       transfer matrices. These functions are found in ami/hmatrix.
       Some simple tests have been performed but final debugging is not yet 
       done.
       
       Basic facts:
       - A single frequency grid is valid for all zenith angles if no data 
       reduction is performed.
       - With data reduction, all combinations of frequencies and angles
       are allowed.
       - To apply a possible data reduction on covariance matrix for thermal
       noise and weighting functions for baseline ripple terms, the data
       reduction transfer matrix must be known. To set up baseline ripple WFs,
       the final zenith angles and frequencies of the sensor must also be
       known. 

       To handle these facts, there are 6 main variables:
         H         Total transfer matrix. Conversion from monchromatic pencil
                   beam spectra to final, possibly data reduced, measurement
                   vector.
         Hd        Transfer matrix for data reduction. Conversion from sensor
                   output to final measurement vector.
         f_sensor  Centre frequency of the spectrometer channels (assumed to
                   be identical for all angles).
         za_angles Zenith angles observed by the sensor.
         f_y       The frequency of each element of the measurement vector, y
                   (has the same length as y in contrast to f_sensor)
         za_y      The zenith angle of each element of the measurement 
                   vector, y (has the same length as y).

       * Some example file to use these functions will be delivered.

       * To do: the widths of the channels must be included in some way for
       correct calculation of thermal noise.

2000-08-21  Stefan Buehler  <sbuehler@uni-bremen.de>

	* arts-0-0-42

	* lineshapes.cc: Added this file. It contains the definition of
	the available lineshape functions (at the moment only a quick hack
	of Lorentz), as well as the lineshape function lookup data
	(initialized by define_lineshape_data). The lookup data contains
	one record for each lineshape. The record contains name and
	description (as usual), the cutoff frequency (-1 if none), and a
	pointer to the actual function. So, if you have the index of the
	lineshape you want to use, you can call the apropriate
	function. No need for any if or switch statements anywhere.

	* workspace.cc: Added WSV lineshapes, an ARRAY of size_t. This
	will hold one index for each abs_tag. If you have several abs_tags
	for different isotopes or transitions of a species, you may use
	different lineshapes.

	* Missing: A WS method to set lineshapes; use lineshapes in
	absorption calculation.

2000-08-16  Stefan Buehler  <sbuehler@uni-bremen.de>

	* arts-0-0-41

	* Had a go at implementing sparse matrices with TNT. This is only
	a quick fix, I don't think it works satisfactorily. In fact, I
	think TNT is crap and we should switch to MTL as soon as
	possible. There is an example method hTest that initializes a
	sparse matrix. It works, but the TNT sparse matrices lack
	basically all functionality. Also I had to fix a number of bugs
	inside TNT to make it work at all!

	* sparse.arts: Added this example in doc/examples. It calls just
	the hTest method.

	* vecmat.cc: Added this file. It contains some stuff that used to
	be in vecmat.h.
	
2000-08-10  Stefan Buehler  <sbuehler@uni-bremen.de>

	* arts-0-0-40

	* Rearranged almost everything. :-)

	* Automatic sources include now also workspace variable groups and
	the workspace itself. This makes adding new variables (and groups)
	easier. See Howto in Uguide how it's done now. There are quite a
	few new files:

	* goups.cc: NEW: Contains the lookup data for WSV groups. Here you can
	add new groups if you want to.

	* wsv_groups_h.cc: NEW: Automatically generates wsv_groups.

	* wsv_groups.h: NEW: Declares the enum type that is used to identify
	WSV groups. Also some other stuff related groups. AUTOMATIC FILE.

	* wsv_pointers_cc.cc: NEW: Automatically generates wsv_pointers.cc.

	* wsv_pointers.cc: NEW: Generates WSV pointers which are
	used by the engine. Now these pointers don't have to be specified
	with the wsv_data anymore, which makes the wsv_data
	nicer. AUTOMATIC FILE.

	* species_data.cc: NEW: Species specific lookup information (for
	example isotope ratios).

	* wsv.h: Now contains also the workspace itself.

	* workspace.h: REMOVED.

	* globals_1.cc: REMOVED.

	* make_wsv_group_h.cc: Renamed to make_wsv_groups_h.cc

	* make_wsv_groups_h.cc: Renamed from make_wsv_group_h.cc

2000-08-08  Axel von_Engeln  <engeln@uni-bremen.de>

	* arts-0-0-39

	* absorption.cc: hitran/mytran tags were wrong

	* absorption.h: several checks that tried to 
			estimate the molecular weight 
			from the isotope name did not
			work properly, commented

	* example1.arts: was empty in last check in

2000-08-08  Axel von_Engeln  <engeln@uni-bremen.de>

	* arts-0-0-38

	* absorption.cc: Included all molecules from JPL/HITRAN.

2000-08-05  Stefan Buehler  <sbuehler@uni-bremen.de>

	* arts-0-0-37

	* This is still an intermediate version. I'm in the process of
	re-designing the automatic generation of header files. Basically,
	the workspace itself should also be generated automatically from
	the information in define_wsv_data.

	* Achieved so far: Wsv group handles (file wsv_group.h) are now
	generated automatically from information in function
	define_wsv_group_names in file groups.cc.

2000-07-30  Stefan Buehler  <sbuehler@uni-bremen.de>

	* arts-0-0-36

	* Come a long way to making a first release. The physics of the
	release will be the same as in the Bredbeck version. In other
	words, still no realistic absorption coefficients. Took a lot of
	fiddling to make the right things go into the release. Now I'm
	almost there, but there is still an overall check lacking.

	* Switched from DOC++ to Doxygen, which is really much much
	better. In particular, the generated HTML document can optionally
	include the source code, in which case it is really good for
	source code browsing.

	* Put all the documentation neatly under `doc'. Also, made a HTML
	page in doc that references all the documentation. IMPORTANT:
	NEVER EDIT THE FILE index.html DIRECTLY. Instead, edit
	index.html.in. 
	
	* Todo: Doxygen is more or less compatible with DOC++, but a lot
	of minor changes still need to be made. In particular, next I will
	fix the \verbatim parts in documentation headers, which seem to
	not come out right.

2000-07-26  Stefan Buehler  <sbuehler@uni-bremen.de>

	* arts-0-0-35

	* Moved user guide to doc/uguide.

2000-06-17  Stefan Buehler  <sbuehler@uni-bremen.de>

	* arts-0-0-34

	* absCalc: Tested this method.

	* full.arts: I wanted to preserve Patricks example, so this one is a
	combination of my absorption and your example h2o.arts.
	I have taken the midlatitude-winter atmospheric scenario of
	data/atmosphere/fascod, since it is the only one for which
	Patrick's p_grid and k_grid are inside the pressure range. Also,
	k_grid had to be slightly changed. The spectrum y looks
	reasonable, but the k matrix looks strange (ragged).

2000-06-16  Stefan Buehler  <sbuehler@uni-bremen.de>

	* arts-0-0-33

	* Added section `The ARTS concept' to user guide.

	* Filled in section development/organization
	
	* Added prototype for method absCalc{} which will calculate
	absorption in a rather simplified way for demonstration.

	* example1.arts: Made this file a lot nicer with comments and
	such. 

	* Added GNU license everywhere in arts and arts/src.

2000-06-15  Stefan Buehler  <sbuehler@uni-bremen.de>

	* arts-0-0-32

	* Now compilation without optimization is the default. In fact,
	for now it is impossible to turn optiomization on. :-)

	* Merged notes.txt with the uguide. Removed notes.txt.

	* doc/examples: Added this directory. Inside is my example file
	example1.arts. Output files of this example are listed in
	.cvsignore. 

	* doc/examples/arts: A script that calls the built arts
	executable. 

	* data/spectrocopy/hitran96: Added this directory. It contains a
	section of the Hitran catalogue up to about 900 GHz. Also contains
	a smaller file with just H2O lines.
	
2000-06-15  Patrick Eriksson  <patrick@rss.chalmers.se>

	* arts-0-0-31

	* A first version of species WFs is ready. All observation geometries
 	are handled, but ground intersections are not yet considered. 
        The function cover so far only the case when all the absorption is 
	created by a single species. The WFs are returned normalised to the 
	a priori profile. Other units will be implemented when the absorption
	part is ready.
	Some first tests have been performed but no extensive bug checks have
	been done. So be aware.

	* New workspace variables: k_grid, k
	  New methods: kSpecies1d

	* My AUG parts are also updated and do now match the source code (for 
	the implemented parts). 

	* The RTE and BL core iteration is now found in seperate functions. 
	This should faciliate the future use, for single scattering etc.

	* INTERPP now also in matrix-row version.

2000-06-12  Stefan Buehler  <sbuehler@uni-bremen.de>

	* arts-0-0-30
	
	* lines_per_tgCreateFromLines: This method splits up the line list
	into sub-lists for each tag group. This is the place where the tag
	groups are applied to divide the line list!

	* lines_per_tg (type ARRAYofARRAYofLineRecord ): This stores the
	line lists for the individual tag groups. This will be input the
	absortion coefficient calculation. 

2000-06-11  Stefan Buehler  <sbuehler@uni-bremen.de>

	* arts-0-0-29
	
	* Input Atmosphere stuff is 1D (so is RTE). Only the absorption
	coefficient calculation itself is already 2D, since this is
	practically no extra effort.

	Reason for 1D input: It is not enough to just read a list of
	profiles. They could be on different horizontal grids. In fact one
	must somehow specify the horizontal coordinate to do proper horizontal
	interpolation. 

	* Added row and col functions which extract a row (or column) from
	a matrix. The output can be a vector or a matrix. For a matrix the
	first and the last row (or column) to extract have to be
	specified. I was really missing this, many times you have a
	function that can act on a vector, so you want to apply it to a
	row or column of your matrix.

	* Atm2dFromRaw1D: This method interpolates the raw atmospheric
	inputs onto the absorption grid.

2000-06-10  Stefan Buehler  <sbuehler@uni-bremen.de>

	* arts-0-0-28

	* The new compiler (g++-2.95.2) is more fuzzy about redeclaration
  	of variables. Therefore all global variables had to be moved to
	two separate files.

	* Rearranged workspace and methods data, so that workspace.h,
	workspace.cc, and methods.cc contain only the data itself.
	
	* globals_1.cc: Global variables that do NOT depend on wsv.h.

        * globals_2.cc: Global variables that DO depend on wsv.h.

	* workspace_aux.cc: Auxiliary stuff that used to be in workspace.cc.

        * methods_aux.cc: Auxiliary stuff that used to be in methods.cc.

	* los.h: Declaration of the Los data type. Moved there from
	workspace.h 

	* wsv_groups.h: Everything related to WSV groups.

	* wsv_aux.h: Auxiliary stuff for the workspace.
	
	* I do not get any warning messages. Patrick, do you still get
	them? 
	
2000-06-09  Patrick Eriksson  <patrick@rss.chalmers.se>

	* arts-0-0-27

	* Cleaned up the LOS functions and the corresponding parts of the
	user guide. Included functions to calculate total atmospheric 
	transmisioion.

	* The compilation gives some warning messages.
	
	* The LOS starts now always in space. The case with the blackbody
 	ground is not considered anymore. This made the functions simpler.

	* The LOS and RTE functions renamed (sorry about that). 
	Functions giving spectra are now called yRte, and functions giving
	transmisiion yBl (Beer-Lambert). Made some functions for special cases
	where less workspace variables must be set. Some functions name:
	- los1d
	- los1dNoRefraction
	- los1dUpward
	- source1d
	- trans1d
	- yRte
	- yRteNoGround
	- yBl
	- yBlNoGround                          

	* The function startup added to AMI.

2000-06-01  Stefan Buehler  <sbuehler@uni-bremen.de>

	* arts-0-0-26

	* Added workspace variables: 
	n_profiles, 
	ptz, 
	raw_vmr_profiles,
	t_and_all_vmrs 

	* raw_vmr_profilesReadFromScenario: Added this method. It does
	just what the name says.
	
	* Changed standart data file extension from .a to .am (you can
	read this as `arts matrix' or as `array of matrix', as you
	like). The single a seems to be already in use by other programs. 

	* Removed the WriteToNamedFile and ReadFromNamedFile methods. Now,
	there are only ReadFromFile and WriteToFile methods, which take a
	filename as a keyword parameter. You can give an empty string as
	the name, then the default name is chosen. It was simply too
	nerve-wracking to have to duplicate each and every IO function for
	these two cases.

2000-05-30  Stefan Buehler  <sbuehler@uni-bremen.de>

	* arts-0-0-25

	* What was version 24?

	* parser.cc: Fixed bug in SourceText::AdvanceChar(), which lead to
	the last line of the controlfile not being correctly
	parsed. Correctly treating the end of the file seems to be the
	biggest problem for the parser! Hope this works correctly now.

	* tag_groupsDefine: Added this workspace method. It sets the
	contents of the workspace variable tag_groups, which contains the
	available tag groups. A tag group can consist of several tag
	definitions, but contrary to the Bredbeck definition, they must
	all relate to the same species. The reason for this is that there
	will be one VMR profile associated with each tag group. 

	The drawback is that there must be a tag group for each molecule
	you want to calculate absorption for. But I don't see another
	solution, somewhere it has to be defined which input data to
	use. I think one tag group = one input profile is the cleanest
	solution. 
	
	* Discovered a nasty problem with strstream. Essentially, it does
	not work as I thought it did. Replaced by the future standard
	stringstream. Since stringstream is not yet part of EGCS, I have
	added the necessary files to the ARTS source code. The files are:

	sstream.h (contains also the contents of the original file sstream.cc)
	iotraits.h

	I got these files off the web:
	ftp://ftp.fmi.uni-konstanz.de/pub/algo/personal/kuehl/sstream-egcs.tgz. 
	They are written by Dietmar Kuehl.

	* Replaced strstream by stringstream everywhere. Pure stringstream
	also seems to work not so well, so I always use either
	ostringstream or istringstream.
	
2000-05-23  Patrick Eriksson  <patrick@rss.chalmers.se>

	* arts-0-0-23

	* Included present versions of the ARTS Matlab interface (AMI) and
	the user guide to the CVS distribution.

	* Updated AMI to handle new data format
	Present functionality of AMI
	Read and write files basic data files
	Call ARTS from Matlab
	Setting the MAtlab search path

	* Please note that the user guide is not up to data and does
	not match the present version of ARTS

2000-05-22  Stefan Buehler  <sbuehler@uni-bremen.de>

	* arts-0-0-22

	* ARTS can now read HITRAN catalogue files!

	* Methods: linesReadFromHitran, linesWriteToNamedFile
	These methods are rather preliminary, because how they should act
	eventually depends on the rest of the absorption module. Anyway,
	I've tried to rather cleanly implement the capability to
	understand HITRAN in the utility function 

	LineRecord::ReadFromHitranStream(istream& is)

	Yes, this is a member function of LineRecord, the data structure
	that stores spectro data for a single line. In the future, similar
	member functions can be added to read from JPL (setting widths to
	default values) and of course eventually from the native ARTS
	format. 

	Of course, the program does not depend internally on any
	particular catalogue at all. In particular not on HITRAN. Rather,
	during the read-in, the HITRAN data is right away converted to the
	ARTS internal format. 

	For now, this stuff seems to work fine. Ah yes, the line data is
	according to the recommendations given in the Bredbeck book. I've
	tried to document all formats and units as best as I can in the
	code directly.

2000-05-20  Stefan Buehler  <sbuehler@uni-bremen.de>

	* arts-0-0-21

	* Added species lookup data. I filled in the data only for H2O and
	O3, because I'm too lazy right now. 

	Molecular masses: From looking at the table in forward_4_96,
	glob_def.c, the relative difference between the actual mass and
	the mass simply estimated from the Atom number is only 0.001. This
	seems not worth the trouble. Anyway, the field for the mass is
	there. Should anybody feel like adding the true numbers, just go
	ahead.

2000-05-15  Stefan Buehler  <sbuehler@uni-bremen.de>

	* math_funcs.cc: Bug fix in
	void to_vector(VECTOR& x, const MATRIX& W)

2000-05-12  Stefan Buehler  <sbuehler@uni-bremen.de>

	* arts-0-0-20

	* Added implementation of --workspacevariables (-w) command line
	option. 

	* Put the handling of the more complex command line options
	(-r,-d,-m,-w) in subroutines.

	* Added command line option --groups (-g) which simply lists all
	wsv groups.

	* This means the command line options are complete for now.

2000-05-11  Stefan Buehler  <sbuehler@uni-bremen.de>

	* arts-0-0-19

	* Added the implementation of the --methods (-m) dommand line
	option. Seems to work beautifully!

2000-05-08  Stefan Buehler  <sbuehler@uni-bremen.de>

	* arts-0-0-18

	* Added the implementation of the --describe (-d) command line
	option. 

2000-04-30  Stefan Buehler  <sbuehler@uni-bremen.de>

	* arts-0-0-17

	* Added the command line parameter --reporting (-r).
	This should be a two digit integer. The first digit specifies
      	the output level for stdout (stderr for error messages), the
      	second digit the output level for the report file. The levels
      	can reach from 0 (show only error messages) to 3 (show
      	everything). Example:
  
      	03 = only errors to the screen, everything to the file.

	* Added some other cool command line parameters. However,
	currently they only produce a message that the implementation is
	still lacking. These are:

	string methods:    
	If this is given the argument `all', it simply prints a list of
 	all methods. If it is given the name of a variable, it prints all
 	methods that produce this variable as output.
        
	string workspacevariables:
       	If this is given the argument `all', it simply prints a list of
 	all workspace variables. If it is given the name of a method, it
 	prints all variables needed by that method.

        string describe:
  	Print the description string of the given workspace variable or
 	method.

2000-04-29  Stefan Buehler  <sbuehler@uni-bremen.de>

	* arts-0-0-16

	* vecmat.h: Small changes to the text defining the allowed
	matrix/vector operations. (In one instance it said `MATRIX' where
	it probably should say `VECTOR'.)

	* file.h: Fixed a strange bug: When the last line of a textfile
	was not terminated by a newline character, it was read twice by
	read_text_from_stream. Learned the following: If the end of stream 
	s is reached, first s.eof() becomes true, but s is still
	false. Only if one tries to read past the end does s become true. 

	* Implemented ARRAYofMATRIX and ARRAYofVECTOR as standard
	types. In particular, these are also now types of workspace
	variables. Implemented IO functions for these:

	Output:
	ArrayOfMatrixWriteToFile,
  	ArrayOfMatrixWriteToNamedFile,
  	ArrayOfVectorWriteToFile,
  	ArrayOfVectorWriteToNamedFile,

	Input:
	ArrayOfMatrixReadFromFile,
  	ArrayOfVectorReadFromFile,

	The file format is now always that of ArrayOfMatrix. All other
	variables are treated as special cases with apropriate dimensions
	set to 1. Only a single real output and only a single real input
	function are used (that for ArrayOfMatrix). This means that other
	types have to be converted to this type before writing or after
	reading. This is not terribly efficient. Should there be
	performance or memory problems later on, then we have to write
	dedicated IO functions. The amount of code is probably about the
	same, just to me the real IO seemed more difficult than the
	conversions, hence I did it the way I did it.
		
2000-04-12  Patrick Eriksson  <patrick@rss.chalmers.se>

	* arts-0-0-15

	* This version can produce spectra (without refraction).
	  General functions to determine the LOS, to get transmission and
	  the source function along the LOS and to solving the RTE along
	  LOS are ready.
 	
	* A first list on vector and matrix functionality written. It is
	  found in vecmat.h. Some functions changed and added to match
	  the stated functionality.

	* Some workspace variables added and some renamed. The variables 
	  are now
	    VECTOR     p_abs;
	    VECTOR     t_abs;
	    VECTOR     z_abs;
	    VECTOR     f_abs;
	    MATRIX     abs;
	    VECTOR     view1;
	    Numeric    z_plat;
	    Numeric    l_step;
	    int        refr;
	    Numeric    l_step_refr;
	    VECTOR     refr_index;
	    Numeric    z_ground;
	    Numeric    t_ground;
	    VECTOR     e_ground;
	    Los        los; 
	    MATARRAY   source;
	    MATARRAY   trans;
	    VECTOR     y_space;
	    VECTOR     y;

	* Example on new method calls:
	    y_spaceStd{1}
            y_spacePlanck{300}
            losBasic{}
            sourceBasic{}
            transBasic{}
            yGeneral{}

2000-04-10  Stefan Buehler  <sbuehler@uni-bremen.de>

	* arts-0-0-14

	* token.cc: Fixed small bug in definition of TokValTypeName.

	* reconf: Remove links before trying to re-configure.
	
	
	* arts-0-0-13

	* Renamed token types to 
	enum TokValType { string_t,    int_t,    Numeric_t,
	                  ARRAY_string_t, ARRAY_int_t, ARRAY_Numeric_t,
                          undefined_t };
	This is now consistent with the token type names in token.cc.

	* Removed Integer type, since it is no longer necessary.

	* notes.txt: Updated with respect to global constants.

	* notes.txt: Added howto about switching off optimization.

	* Everywhere: Changed const extern to extern const. This is just
	for nicety, the two are the same thing.

	* vecmat.h: Moved Patricks vector/scalar operations here from
	tnt/vec.h.

	* Compiling without optimization is really much much faster. I
	wish I had realized this before!
	
2000-04-06  Patrick Eriksson  <patrick@rss.chalmers.se>

	* arts-0-0-12

        * Some methods are commented out due to compilation problems

	* Changed definitions of constant to e.g.
    	    extern const Numeric EARTH_RADIUS   = 6.378e6;
	To use the constant, type
	    extern const Numeric EARTH_RADIUS;
	I had to add extern also at the definition to get it to work.
	Stefan, is the text in notes.txt really correct?

	* Added doc++ text and file header to constants.cc and math_funcs.cc
	
	* Workspace types added (as temporary solution):
	    Integer
	
	* Workspace variables added (or renamed):
	    VECTOR  z_abs;
	    VECTOR  view1;
	    Numeric z_plat;
	    Numeric l_step;
	    Integer refr;
	    Numeric l_step_refr;
	    Integer cbgr;
	    Numeric z_ground;
	    Numeric t_ground;
	    VECTOR  e_ground;
	    Los     los; 

	* Methods added:
	    IntSet
	    VectorSet
	    VectorLinSpace
	    VectorNLinSpace
	    VectorNLogSpace
	    losGeneral

	* Files included:
	    m_los.cc 
	    atm_funcs.cc
	    atm_funcs.h
	  
2000-04-05  Stefan Buehler  <sbuehler@uni-bremen.de>

	* arts-0-0-11

	* Fixed the bugs reported by Patrick. This is not a running
	version of the program, because the file src/m_los.cc is missing!

	* parser.cc: Fixed bugs 1:

	The case with the optionally missing keyword for one parameter
	methods was not handled correctly. Now the current character is
	used to recognize this case. THIS MEANS THAT KEYWORD NAMES
	STARTING WITH A NUMBER WILL BREAK THE PARSER! I don't know a
	better solution without look-ahead.

	* parser.cc: Fixed bugs 2:

	The last method was executed twice in some cases, due to incorrect
	flagging of Eof in function SourceText::AdvanceChar.

2000-04-04  Patrick Eriksson  <patrick@rss.chalmers.se>

	* arts-0.0.10

	* Set the ground to include los1d. Included the file m_los.cc.
	  Introduced the workspace variables plat_z and view1 for test
	  purposes. There will be more variables connected to los.
	  Some bugs mailed to Stefan.

2000-04-04  Stefan Buehler  <sbuehler@uni-bremen.de>

	* arts-0.0.9

	* Added method losTest just to see if we can access los. This does
	not initialize los, just change the value. For a real method, this
	would be very bad style, it should re-set los completely, unless
	los is also specified as INPUT variable in methods.cc. 
	

	* arts-0.0.8

	* Added workspace variable group Los and workspace variable los on
	Patrick's request. The declaration of Los is now in file
	workspace.h, but it could be moved somewhere else in the future.

	
	* arts-0.0.7

	* parser.cc:
	In void read_name(string& name, SourceText& text): Changed isalpha
	to isalnum, so that names may now also include numbers. 

	This was a request of Patrick. I don't remember if I had a good
	reason to allow only alphabetic characters and underscores. Let's
	just see if we get any problems with this.


	* arts-0.0.6

	* Quickly implemented NumericSet for Patrick

	* workspace.h:
	- Added Numeric_ in WsvGroup 
	- Changed N_WSV_GROUPS to 3
	- Added   Numeric dummy to class WorkSpace
	- Added
	  virtual operator Numeric*() { safety(); return NULL; };
	  in class WsvP

	* notes.txt
	!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
	The last point above was missing in notes.txt. I have added it
	now. Sorry for that.  
	!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!

	* workspace.cc:
	- Added: wsv_group_names.push_back("Numeric");
	- Added:
 	  {
	  static WsvPointer<Numeric> p(&workspace.dummy);
	  wsv_data.push_back
	  (WsvRecord
	  ("dummy",
	  "This is just to test Numeric WSVs.",
	  Numeric_,
	  &p));
	  }

	* methods.cc:
	- Added:
	  md_data.push_back
	  ( MdRecord
	  ( NAME("NumericSet"),
	  DESCRIPTION("Sets a workspace variable of type Numeric to a value."),
	  OUTPUT(),
	  INPUT(),
	  GOUTPUT(Numeric_),
	  GINPUT(),
	  KEYWORDS("value"),
	  TYPES(num_)));

	* m_io.cc:
	- Added the implementation of NumericSet

2000-03-30  Stefan Buehler  <sbuehler@uni-bremen.de>

	* arts-0.0.5

	* ARTS has now the following methods:
        AllAbsExample
	VectorWriteToFile
	MatrixWriteToFile
	VectorWriteToNamedFile
	MatrixWriteToNamedFile
	VectorReadFromFile
	MatrixReadFromFile

	which all do the obvious. Parsing and executing of methods seems
	to work, but yet has to be tested for a wider variety of
	methods. Also, the executor already checks if all input workspace
	data is present, before it executes a method.

	* Added some more HowTos in file src/notes.txt
	
2000-03-29  Stefan Buehler  <sbuehler@uni-bremen.de>

	* arts-0.0.4
	* Now we can parse and execute specific and generic
  	methods. However, I want to re-structure the method lookup data
	(add explicit fields for generic I/O, so that a method can have
	both generic and specific I/O). So this commit is mainly to save
	the state of the work before I start with this complicated task.

2000-03-24  Stefan Buehler  <sbuehler@uni-bremen.de>

	* arts-0.0.3.
	* Arts can now parse specific (i.e., not generic) methods. There
	so far is only a single method, AllAbsExample, which sets the
	absorption parameters.

	
	* arts-0.0.2.
	* make_md_h.cc: Added.
	* math_funcs.h: Added.
	* math_funcs.cc: Added. 
	* absorption.cc: Added. 

2000-03-14  Stefan Buehler  <sbuehler@uni-bremen.de>

	* This file contains  SAB 14.03.2000.

	* arts-0.0.1.
	* .cvsignore files added everywhere.
	* Started this file, the Arts history. ALWAYS add a note to this
	file, no matter how small your change. Also, always update the
	running version number. Newest change log entries first!
	  
	You can very easily add an entry with emacs by typing either M-x
	add-change-log-entry or C-x 4 a.
	  
	Remark about version numbers: Arts has a 3 digit version number,
	like for example Arts 1.2.3. For user releases the third digit is
	zero.  The first two digits are set in configure.in. Update these
	only when you cut a user release. In that case you also have to
	set the third digit to zero.  The third digit is set in
	src/version.cc. Always update this, no matter how small your
	change!
